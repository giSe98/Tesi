/* urlbar.c generated by valac 0.40.23, the Vala compiler
 * generated from urlbar.vala, do not modify */

/*
 Copyright (C) 2018 Christian Dywan <christian@twotoats.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <ui/gcr-ui.h>
#include <gdk/gdk.h>
#include <gio/gio.h>
#include "webkit2/webkit2.h"
#include <glib/gstdio.h>
#include <gcr/gcr-base.h>
#include <libsoup/soup.h>


#define MIDORI_TYPE_URLBAR (midori_urlbar_get_type ())
#define MIDORI_URLBAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_URLBAR, MidoriUrlbar))
#define MIDORI_URLBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_URLBAR, MidoriUrlbarClass))
#define MIDORI_IS_URLBAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_URLBAR))
#define MIDORI_IS_URLBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_URLBAR))
#define MIDORI_URLBAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_URLBAR, MidoriUrlbarClass))

typedef struct _MidoriUrlbar MidoriUrlbar;
typedef struct _MidoriUrlbarClass MidoriUrlbarClass;
typedef struct _MidoriUrlbarPrivate MidoriUrlbarPrivate;
enum  {
	MIDORI_URLBAR_0_PROPERTY,
	MIDORI_URLBAR_KEY_PROPERTY,
	MIDORI_URLBAR_REGEX_PROPERTY,
	MIDORI_URLBAR_LOCATION_PROPERTY,
	MIDORI_URLBAR_URI_PROPERTY,
	MIDORI_URLBAR_SECURE_PROPERTY,
	MIDORI_URLBAR_BLANK_PROPERTY,
	MIDORI_URLBAR_NUM_PROPERTIES
};
static GParamSpec* midori_urlbar_properties[MIDORI_URLBAR_NUM_PROPERTIES];
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define MIDORI_TYPE_SUGGESTION_ROW (midori_suggestion_row_get_type ())
#define MIDORI_SUGGESTION_ROW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_SUGGESTION_ROW, MidoriSuggestionRow))
#define MIDORI_SUGGESTION_ROW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_SUGGESTION_ROW, MidoriSuggestionRowClass))
#define MIDORI_IS_SUGGESTION_ROW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_SUGGESTION_ROW))
#define MIDORI_IS_SUGGESTION_ROW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_SUGGESTION_ROW))
#define MIDORI_SUGGESTION_ROW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_SUGGESTION_ROW, MidoriSuggestionRowClass))

typedef struct _MidoriSuggestionRow MidoriSuggestionRow;
typedef struct _MidoriSuggestionRowClass MidoriSuggestionRowClass;

#define MIDORI_TYPE_DATABASE_ITEM (midori_database_item_get_type ())
#define MIDORI_DATABASE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_DATABASE_ITEM, MidoriDatabaseItem))
#define MIDORI_DATABASE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_DATABASE_ITEM, MidoriDatabaseItemClass))
#define MIDORI_IS_DATABASE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_DATABASE_ITEM))
#define MIDORI_IS_DATABASE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_DATABASE_ITEM))
#define MIDORI_DATABASE_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_DATABASE_ITEM, MidoriDatabaseItemClass))

typedef struct _MidoriDatabaseItem MidoriDatabaseItem;
typedef struct _MidoriDatabaseItemClass MidoriDatabaseItemClass;

#define MIDORI_TYPE_DATABASE (midori_database_get_type ())
#define MIDORI_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_DATABASE, MidoriDatabase))
#define MIDORI_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_DATABASE, MidoriDatabaseClass))
#define MIDORI_IS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_DATABASE))
#define MIDORI_IS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_DATABASE))
#define MIDORI_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_DATABASE, MidoriDatabaseClass))

typedef struct _MidoriDatabase MidoriDatabase;
typedef struct _MidoriDatabaseClass MidoriDatabaseClass;
#define _g_variant_unref0(var) ((var == NULL) ? NULL : (var = (g_variant_unref (var), NULL)))

#define MIDORI_TYPE_BROWSER (midori_browser_get_type ())
#define MIDORI_BROWSER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_BROWSER, MidoriBrowser))
#define MIDORI_BROWSER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_BROWSER, MidoriBrowserClass))
#define MIDORI_IS_BROWSER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_BROWSER))
#define MIDORI_IS_BROWSER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_BROWSER))
#define MIDORI_BROWSER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_BROWSER, MidoriBrowserClass))

typedef struct _MidoriBrowser MidoriBrowser;
typedef struct _MidoriBrowserClass MidoriBrowserClass;

#define MIDORI_TYPE_TAB (midori_tab_get_type ())
#define MIDORI_TAB(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_TAB, MidoriTab))
#define MIDORI_TAB_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_TAB, MidoriTabClass))
#define MIDORI_IS_TAB(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_TAB))
#define MIDORI_IS_TAB_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_TAB))
#define MIDORI_TAB_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_TAB, MidoriTabClass))

typedef struct _MidoriTab MidoriTab;
typedef struct _MidoriTabClass MidoriTabClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define MIDORI_TYPE_COMPLETION (midori_completion_get_type ())
#define MIDORI_COMPLETION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_COMPLETION, MidoriCompletion))
#define MIDORI_COMPLETION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_COMPLETION, MidoriCompletionClass))
#define MIDORI_IS_COMPLETION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_COMPLETION))
#define MIDORI_IS_COMPLETION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_COMPLETION))
#define MIDORI_COMPLETION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_COMPLETION, MidoriCompletionClass))

typedef struct _MidoriCompletion MidoriCompletion;
typedef struct _MidoriCompletionClass MidoriCompletionClass;
typedef struct _Block23Data Block23Data;

#define MIDORI_TYPE_SETTINGS (midori_settings_get_type ())
#define MIDORI_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_SETTINGS, MidoriSettings))
#define MIDORI_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_SETTINGS, MidoriSettingsClass))
#define MIDORI_IS_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_SETTINGS))
#define MIDORI_IS_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_SETTINGS))
#define MIDORI_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_SETTINGS, MidoriSettingsClass))

typedef struct _MidoriSettings MidoriSettings;
typedef struct _MidoriSettingsClass MidoriSettingsClass;

#define MIDORI_TYPE_CORE_SETTINGS (midori_core_settings_get_type ())
#define MIDORI_CORE_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_CORE_SETTINGS, MidoriCoreSettings))
#define MIDORI_CORE_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_CORE_SETTINGS, MidoriCoreSettingsClass))
#define MIDORI_IS_CORE_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_CORE_SETTINGS))
#define MIDORI_IS_CORE_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_CORE_SETTINGS))
#define MIDORI_CORE_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_CORE_SETTINGS, MidoriCoreSettingsClass))

typedef struct _MidoriCoreSettings MidoriCoreSettings;
typedef struct _MidoriCoreSettingsClass MidoriCoreSettingsClass;
#define _g_byte_array_unref0(var) ((var == NULL) ? NULL : (var = (g_byte_array_unref (var), NULL)))
#define __vala_SoupURI_free0(var) ((var == NULL) ? NULL : (var = (_vala_SoupURI_free (var), NULL)))

struct _MidoriUrlbar {
	GtkEntry parent_instance;
	MidoriUrlbarPrivate * priv;
};

struct _MidoriUrlbarClass {
	GtkEntryClass parent_class;
};

struct _MidoriUrlbarPrivate {
	gchar* _key;
	GRegex* _regex;
	gchar* _location;
	gchar* _uri;
	gboolean _secure;
	GtkPopover* suggestions;
	GtkListBox* listbox;
	GtkListBoxRow* _selected_row;
	GtkPopover* security;
	GtkBox* security_box;
	GtkButton* trust;
	GtkLabel* security_status;
	GcrCertificateWidget* details;
};

struct _Block23Data {
	int _ref_count_;
	MidoriUrlbar* self;
	gchar* text;
};


static gpointer midori_urlbar_parent_class = NULL;

GType midori_urlbar_get_type (void) G_GNUC_CONST;
#define MIDORI_URLBAR_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), MIDORI_TYPE_URLBAR, MidoriUrlbarPrivate))
GtkWidget* midori_urlbar_create_row (MidoriUrlbar* self,
                                     GObject* item);
GType midori_suggestion_row_get_type (void) G_GNUC_CONST;
GType midori_database_item_get_type (void) G_GNUC_CONST;
MidoriSuggestionRow* midori_suggestion_row_new (MidoriDatabaseItem* item);
MidoriSuggestionRow* midori_suggestion_row_construct (GType object_type,
                                                      MidoriDatabaseItem* item);
const gchar* midori_urlbar_get_key (MidoriUrlbar* self);
void midori_suggestion_row_set_key (MidoriSuggestionRow* self,
                                    const gchar* value);
GRegex* midori_urlbar_get_regex (MidoriUrlbar* self);
void midori_suggestion_row_set_regex (MidoriSuggestionRow* self,
                                      GRegex* value);
const gchar* midori_urlbar_get_location (MidoriUrlbar* self);
void midori_suggestion_row_set_location (MidoriSuggestionRow* self,
                                         const gchar* value);
static gboolean midori_urlbar_real_key_press_event (GtkWidget* base,
                                             GdkEventKey* event);
void midori_urlbar_popdown (MidoriUrlbar* self);
static GtkListBoxRow* midori_urlbar_get_selected_row (MidoriUrlbar* self);
MidoriDatabaseItem* midori_suggestion_row_get_item (MidoriSuggestionRow* self);
GType midori_database_get_type (void) G_GNUC_CONST;
MidoriDatabase* midori_database_item_get_database (MidoriDatabaseItem* self);
gboolean midori_database_get_readonly (MidoriDatabase* self);
void midori_database_item_delete (MidoriDatabaseItem* self,
                                  GAsyncReadyCallback _callback_,
                                  gpointer _user_data_);
gboolean midori_database_item_delete_finish (MidoriDatabaseItem* self,
                                             GAsyncResult* _res_);
static GVariant* _variant_new13 (const gchar* value);
GType midori_browser_get_type (void) G_GNUC_CONST;
GType midori_tab_get_type (void) G_GNUC_CONST;
void midori_browser_add (MidoriBrowser* self,
                         MidoriTab* tab);
WebKitWebContext* midori_browser_get_web_context (MidoriBrowser* self);
MidoriTab* midori_tab_new (MidoriTab* related,
                           WebKitWebContext* web_context,
                           const gchar* uri,
                           const gchar* title);
MidoriTab* midori_tab_construct (GType object_type,
                                 MidoriTab* related,
                                 WebKitWebContext* web_context,
                                 const gchar* uri,
                                 const gchar* title);
static void midori_urlbar_complete (MidoriUrlbar* self);
gboolean midori_urlbar_get_blank (MidoriUrlbar* self);
const gchar* midori_urlbar_get_uri (MidoriUrlbar* self);
static void midori_urlbar_update_key (MidoriUrlbar* self,
                               const gchar* text);
static gchar* midori_urlbar_magic_uri (MidoriUrlbar* self,
                                const gchar* text);
void midori_urlbar_set_location (MidoriUrlbar* self,
                                 const gchar* value);
void midori_urlbar_set_key (MidoriUrlbar* self,
                            const gchar* value);
void midori_urlbar_set_regex (MidoriUrlbar* self,
                              GRegex* value);
static gboolean midori_urlbar_is_external (MidoriUrlbar* self,
                                    const gchar* uri);
static gboolean midori_urlbar_is_location (MidoriUrlbar* self,
                                    const gchar* uri);
static gboolean midori_urlbar_is_ip_address (MidoriUrlbar* self,
                                      const gchar* uri);
static gboolean midori_urlbar_real_focus_out_event (GtkWidget* base,
                                             GdkEventFocus* event);
static void midori_urlbar_resize (MidoriUrlbar* self,
                           GtkAllocation* allocation);
GType midori_completion_get_type (void) G_GNUC_CONST;
MidoriTab* midori_browser_get_tab (MidoriBrowser* self);
MidoriCompletion* midori_completion_new (gboolean incognito);
MidoriCompletion* midori_completion_construct (GType object_type,
                                               gboolean incognito);
static GtkWidget* _midori_urlbar_create_row_gtk_list_box_create_widget_func (GObject* item,
                                                                      gpointer self);
static void midori_urlbar_real_populate_popup (GtkEntry* base,
                                        GtkMenu* menu);
static Block23Data* block23_data_ref (Block23Data* _data23_);
static void block23_data_unref (void * _userdata_);
static void __lambda30_ (Block23Data* _data23_);
GType midori_settings_get_type (void) G_GNUC_CONST;
GType midori_core_settings_get_type (void) G_GNUC_CONST;
MidoriCoreSettings* midori_core_settings_get_default (void);
gchar* midori_core_settings_uri_for_search (MidoriCoreSettings* self,
                                            const gchar* keywords,
                                            const gchar* search);
void midori_urlbar_set_uri (MidoriUrlbar* self,
                            const gchar* value);
static void ___lambda30__gtk_menu_item_activate (GtkMenuItem* _sender,
                                          gpointer self);
static void midori_urlbar_update_icon (MidoriUrlbar* self);
gboolean midori_urlbar_get_secure (MidoriUrlbar* self);
static void midori_urlbar_icon_pressed (MidoriUrlbar* self,
                                 GtkEntryIconPosition position,
                                 GdkEvent* event);
GTlsCertificate* midori_tab_get_tls (MidoriTab* self);
static gboolean ___lambda31_ (MidoriUrlbar* self,
                       GdkEventButton* event);
static gboolean ____lambda31__gtk_widget_button_press_event (GtkWidget* _sender,
                                                      GdkEventButton* event,
                                                      gpointer self);
static void ___lambda32_ (MidoriUrlbar* self);
static void _vala_SoupURI_free (SoupURI* self);
static void ____lambda32__gtk_button_clicked (GtkButton* _sender,
                                       gpointer self);
MidoriUrlbar* midori_urlbar_new (void);
MidoriUrlbar* midori_urlbar_construct (GType object_type);
void midori_urlbar_set_secure (MidoriUrlbar* self,
                               gboolean value);
static void midori_urlbar_set_selected_row (MidoriUrlbar* self,
                                     GtkListBoxRow* value);
static GObject * midori_urlbar_constructor (GType type,
                                     guint n_construct_properties,
                                     GObjectConstructParam * construct_properties);
static void _midori_urlbar_resize_gtk_widget_size_allocate (GtkWidget* _sender,
                                                     GtkAllocation* allocation,
                                                     gpointer self);
static void _midori_urlbar___lambda33_ (MidoriUrlbar* self);
static void __midori_urlbar___lambda33__gtk_widget_hide (GtkWidget* _sender,
                                                  gpointer self);
static void _midori_urlbar___lambda34_ (MidoriUrlbar* self,
                                 GtkListBoxRow* row);
static void __midori_urlbar___lambda34__gtk_list_box_row_selected (GtkListBox* _sender,
                                                            GtkListBoxRow* row,
                                                            gpointer self);
static void _midori_urlbar___lambda35_ (MidoriUrlbar* self,
                                 GtkListBoxRow* row);
const gchar* midori_database_item_get_uri (MidoriDatabaseItem* self);
static void __midori_urlbar___lambda35__gtk_list_box_row_activated (GtkListBox* _sender,
                                                             GtkListBoxRow* row,
                                                             gpointer self);
static void _midori_urlbar___lambda36_ (MidoriUrlbar* self,
                                 const gchar* new_text,
                                 gint new_position,
                                 gint* position);
static void __midori_urlbar___lambda36__gtk_editable_insert_text (GtkEditable* _sender,
                                                           const gchar* new_text,
                                                           gint new_text_length,
                                                           gint* position,
                                                           gpointer self);
static void _midori_urlbar___lambda37_ (MidoriUrlbar* self,
                                 gint start_pos,
                                 gint end_pos);
static void __midori_urlbar___lambda37__gtk_editable_delete_text (GtkEditable* _sender,
                                                           gint start_pos,
                                                           gint end_pos,
                                                           gpointer self);
static void _midori_urlbar_icon_pressed_gtk_entry_icon_press (GtkEntry* _sender,
                                                       GtkEntryIconPosition icon_pos,
                                                       GdkEventButton* event,
                                                       gpointer self);
static void midori_urlbar_finalize (GObject * obj);
static void _vala_midori_urlbar_get_property (GObject * object,
                                       guint property_id,
                                       GValue * value,
                                       GParamSpec * pspec);
static void _vala_midori_urlbar_set_property (GObject * object,
                                       guint property_id,
                                       const GValue * value,
                                       GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


GtkWidget*
midori_urlbar_create_row (MidoriUrlbar* self,
                          GObject* item)
{
	GtkWidget* result = NULL;
	MidoriSuggestionRow* suggestion = NULL;
	MidoriSuggestionRow* _tmp0_;
	const gchar* _tmp1_;
	GRegex* _tmp2_;
	const gchar* _tmp3_;
#line 75 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 75 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (item != NULL, NULL);
#line 76 "/home/test/core/core/urlbar.vala"
	_tmp0_ = midori_suggestion_row_new (G_TYPE_CHECK_INSTANCE_CAST (item, MIDORI_TYPE_DATABASE_ITEM, MidoriDatabaseItem));
#line 76 "/home/test/core/core/urlbar.vala"
	g_object_ref_sink (_tmp0_);
#line 76 "/home/test/core/core/urlbar.vala"
	suggestion = _tmp0_;
#line 77 "/home/test/core/core/urlbar.vala"
	_tmp1_ = self->priv->_key;
#line 77 "/home/test/core/core/urlbar.vala"
	midori_suggestion_row_set_key (suggestion, _tmp1_);
#line 78 "/home/test/core/core/urlbar.vala"
	g_object_bind_property_with_closures ((GObject*) self, "key", (GObject*) suggestion, "key", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 79 "/home/test/core/core/urlbar.vala"
	_tmp2_ = self->priv->_regex;
#line 79 "/home/test/core/core/urlbar.vala"
	midori_suggestion_row_set_regex (suggestion, _tmp2_);
#line 80 "/home/test/core/core/urlbar.vala"
	g_object_bind_property_with_closures ((GObject*) self, "regex", (GObject*) suggestion, "regex", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 81 "/home/test/core/core/urlbar.vala"
	_tmp3_ = self->priv->_location;
#line 81 "/home/test/core/core/urlbar.vala"
	midori_suggestion_row_set_location (suggestion, _tmp3_);
#line 82 "/home/test/core/core/urlbar.vala"
	g_object_bind_property_with_closures ((GObject*) self, "location", (GObject*) suggestion, "location", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 83 "/home/test/core/core/urlbar.vala"
	result = (GtkWidget*) suggestion;
#line 83 "/home/test/core/core/urlbar.vala"
	return result;
#line 387 "urlbar.c"
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 110 "/home/test/core/core/urlbar.vala"
	return self ? g_object_ref (self) : NULL;
#line 396 "urlbar.c"
}


static GVariant*
_variant_new13 (const gchar* value)
{
#line 141 "/home/test/core/core/urlbar.vala"
	return g_variant_ref_sink (g_variant_new_string (value));
#line 405 "urlbar.c"
}


static gboolean
midori_urlbar_real_key_press_event (GtkWidget* base,
                                    GdkEventKey* event)
{
	MidoriUrlbar * self;
	gboolean result = FALSE;
	GtkPopover* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	guint _tmp34_;
	gunichar character = 0U;
	guint _tmp59_;
	gboolean _tmp60_ = FALSE;
	gunichar _tmp61_;
#line 86 "/home/test/core/core/urlbar.vala"
	self = (MidoriUrlbar*) base;
#line 86 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 88 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->suggestions;
#line 88 "/home/test/core/core/urlbar.vala"
	_tmp1_ = gtk_widget_get_visible ((GtkWidget*) _tmp0_);
#line 88 "/home/test/core/core/urlbar.vala"
	_tmp2_ = _tmp1_;
#line 88 "/home/test/core/core/urlbar.vala"
	if (_tmp2_) {
#line 435 "urlbar.c"
		gboolean has_shift = FALSE;
		GdkModifierType _tmp3_;
		guint _tmp4_;
		GtkListBox* _tmp30_;
		gboolean _tmp31_ = FALSE;
#line 89 "/home/test/core/core/urlbar.vala"
		_tmp3_ = event->state;
#line 89 "/home/test/core/core/urlbar.vala"
		has_shift = (_tmp3_ & GDK_SHIFT_MASK) != 0;
#line 90 "/home/test/core/core/urlbar.vala"
		_tmp4_ = event->keyval;
#line 90 "/home/test/core/core/urlbar.vala"
		switch (_tmp4_) {
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Tab:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_ISO_Left_Tab:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Down:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_KP_Down:
#line 457 "urlbar.c"
			{
				gint _tmp5_ = 0;
				gboolean _tmp6_;
				GtkListBox* _tmp7_;
#line 96 "/home/test/core/core/urlbar.vala"
				_tmp6_ = has_shift;
#line 96 "/home/test/core/core/urlbar.vala"
				if (_tmp6_) {
#line 96 "/home/test/core/core/urlbar.vala"
					_tmp5_ = -1;
#line 468 "urlbar.c"
				} else {
#line 96 "/home/test/core/core/urlbar.vala"
					_tmp5_ = 1;
#line 472 "urlbar.c"
				}
#line 95 "/home/test/core/core/urlbar.vala"
				_tmp7_ = self->priv->listbox;
#line 95 "/home/test/core/core/urlbar.vala"
				g_signal_emit_by_name (_tmp7_, "move-cursor", GTK_MOVEMENT_DISPLAY_LINES, _tmp5_);
#line 97 "/home/test/core/core/urlbar.vala"
				result = TRUE;
#line 97 "/home/test/core/core/urlbar.vala"
				return result;
#line 482 "urlbar.c"
			}
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Up:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_KP_Up:
#line 488 "urlbar.c"
			{
				GtkListBox* _tmp8_;
#line 100 "/home/test/core/core/urlbar.vala"
				_tmp8_ = self->priv->listbox;
#line 100 "/home/test/core/core/urlbar.vala"
				g_signal_emit_by_name (_tmp8_, "move-cursor", GTK_MOVEMENT_DISPLAY_LINES, -1);
#line 101 "/home/test/core/core/urlbar.vala"
				result = TRUE;
#line 101 "/home/test/core/core/urlbar.vala"
				return result;
#line 499 "urlbar.c"
			}
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Left:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_KP_Left:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Right:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_KP_Right:
#line 509 "urlbar.c"
			{
#line 106 "/home/test/core/core/urlbar.vala"
				midori_urlbar_popdown (self);
#line 107 "/home/test/core/core/urlbar.vala"
				result = GTK_WIDGET_CLASS (midori_urlbar_parent_class)->key_press_event ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_entry_get_type (), GtkEntry), event);
#line 107 "/home/test/core/core/urlbar.vala"
				return result;
#line 517 "urlbar.c"
			}
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Delete:
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_KP_Delete:
#line 523 "urlbar.c"
			{
				MidoriSuggestionRow* suggestion_row = NULL;
				GtkListBoxRow* _tmp9_;
				MidoriSuggestionRow* _tmp10_;
				gboolean _tmp11_ = FALSE;
				gboolean _tmp12_ = FALSE;
				MidoriSuggestionRow* _tmp13_;
#line 110 "/home/test/core/core/urlbar.vala"
				_tmp9_ = self->priv->_selected_row;
#line 110 "/home/test/core/core/urlbar.vala"
				_tmp10_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, MIDORI_TYPE_SUGGESTION_ROW, MidoriSuggestionRow));
#line 110 "/home/test/core/core/urlbar.vala"
				suggestion_row = _tmp10_;
#line 111 "/home/test/core/core/urlbar.vala"
				_tmp13_ = suggestion_row;
#line 111 "/home/test/core/core/urlbar.vala"
				if (_tmp13_ != NULL) {
#line 541 "urlbar.c"
					MidoriSuggestionRow* _tmp14_;
					MidoriDatabaseItem* _tmp15_;
					MidoriDatabaseItem* _tmp16_;
					MidoriDatabase* _tmp17_;
					MidoriDatabase* _tmp18_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp14_ = suggestion_row;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp15_ = midori_suggestion_row_get_item (_tmp14_);
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp16_ = _tmp15_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp17_ = midori_database_item_get_database (_tmp16_);
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp18_ = _tmp17_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp12_ = _tmp18_ != NULL;
#line 559 "urlbar.c"
				} else {
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp12_ = FALSE;
#line 563 "urlbar.c"
				}
#line 111 "/home/test/core/core/urlbar.vala"
				if (_tmp12_) {
#line 567 "urlbar.c"
					MidoriSuggestionRow* _tmp19_;
					MidoriDatabaseItem* _tmp20_;
					MidoriDatabaseItem* _tmp21_;
					MidoriDatabase* _tmp22_;
					MidoriDatabase* _tmp23_;
					gboolean _tmp24_;
					gboolean _tmp25_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp19_ = suggestion_row;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp20_ = midori_suggestion_row_get_item (_tmp19_);
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp21_ = _tmp20_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp22_ = midori_database_item_get_database (_tmp21_);
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp23_ = _tmp22_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp24_ = midori_database_get_readonly (_tmp23_);
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp25_ = _tmp24_;
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp11_ = !_tmp25_;
#line 591 "urlbar.c"
				} else {
#line 111 "/home/test/core/core/urlbar.vala"
					_tmp11_ = FALSE;
#line 595 "urlbar.c"
				}
#line 111 "/home/test/core/core/urlbar.vala"
				if (_tmp11_) {
#line 599 "urlbar.c"
					GtkListBox* _tmp26_;
					MidoriSuggestionRow* _tmp27_;
					MidoriDatabaseItem* _tmp28_;
					MidoriDatabaseItem* _tmp29_;
#line 112 "/home/test/core/core/urlbar.vala"
					_tmp26_ = self->priv->listbox;
#line 112 "/home/test/core/core/urlbar.vala"
					g_signal_emit_by_name (_tmp26_, "move-cursor", GTK_MOVEMENT_DISPLAY_LINES, -1);
#line 113 "/home/test/core/core/urlbar.vala"
					_tmp27_ = suggestion_row;
#line 113 "/home/test/core/core/urlbar.vala"
					_tmp28_ = midori_suggestion_row_get_item (_tmp27_);
#line 113 "/home/test/core/core/urlbar.vala"
					_tmp29_ = _tmp28_;
#line 113 "/home/test/core/core/urlbar.vala"
					midori_database_item_delete (_tmp29_, NULL, NULL);
#line 114 "/home/test/core/core/urlbar.vala"
					result = TRUE;
#line 114 "/home/test/core/core/urlbar.vala"
					_g_object_unref0 (suggestion_row);
#line 114 "/home/test/core/core/urlbar.vala"
					return result;
#line 622 "urlbar.c"
				}
#line 116 "/home/test/core/core/urlbar.vala"
				result = GTK_WIDGET_CLASS (midori_urlbar_parent_class)->key_press_event ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_entry_get_type (), GtkEntry), event);
#line 116 "/home/test/core/core/urlbar.vala"
				_g_object_unref0 (suggestion_row);
#line 116 "/home/test/core/core/urlbar.vala"
				return result;
#line 630 "urlbar.c"
			}
#line 90 "/home/test/core/core/urlbar.vala"
			case GDK_KEY_Escape:
#line 634 "urlbar.c"
			{
#line 118 "/home/test/core/core/urlbar.vala"
				midori_urlbar_popdown (self);
#line 119 "/home/test/core/core/urlbar.vala"
				result = TRUE;
#line 119 "/home/test/core/core/urlbar.vala"
				return result;
#line 642 "urlbar.c"
			}
			default:
#line 90 "/home/test/core/core/urlbar.vala"
			break;
#line 647 "urlbar.c"
		}
#line 122 "/home/test/core/core/urlbar.vala"
		_tmp30_ = self->priv->listbox;
#line 122 "/home/test/core/core/urlbar.vala"
		g_signal_emit_by_name ((GtkWidget*) _tmp30_, "key-press-event", event, &_tmp31_);
#line 122 "/home/test/core/core/urlbar.vala"
		if (!_tmp31_) {
#line 655 "urlbar.c"
			GtkPopover* _tmp32_;
			gboolean _tmp33_ = FALSE;
#line 123 "/home/test/core/core/urlbar.vala"
			_tmp32_ = self->priv->suggestions;
#line 123 "/home/test/core/core/urlbar.vala"
			g_signal_emit_by_name ((GtkWidget*) _tmp32_, "key-press-event", event, &_tmp33_);
#line 123 "/home/test/core/core/urlbar.vala"
			if (_tmp33_) {
#line 124 "/home/test/core/core/urlbar.vala"
				result = TRUE;
#line 124 "/home/test/core/core/urlbar.vala"
				return result;
#line 668 "urlbar.c"
			}
		}
	}
#line 129 "/home/test/core/core/urlbar.vala"
	_tmp34_ = event->keyval;
#line 129 "/home/test/core/core/urlbar.vala"
	switch (_tmp34_) {
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_Tab:
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_ISO_Left_Tab:
#line 680 "urlbar.c"
		{
#line 132 "/home/test/core/core/urlbar.vala"
			result = FALSE;
#line 132 "/home/test/core/core/urlbar.vala"
			return result;
#line 686 "urlbar.c"
		}
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_ISO_Enter:
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_KP_Enter:
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_Return:
#line 694 "urlbar.c"
		{
			gboolean has_ctrl = FALSE;
			GdkModifierType _tmp35_;
			gboolean _tmp36_;
#line 136 "/home/test/core/core/urlbar.vala"
			_tmp35_ = event->state;
#line 136 "/home/test/core/core/urlbar.vala"
			has_ctrl = (_tmp35_ & GDK_CONTROL_MASK) != 0;
#line 137 "/home/test/core/core/urlbar.vala"
			_tmp36_ = has_ctrl;
#line 137 "/home/test/core/core/urlbar.vala"
			if (_tmp36_) {
#line 707 "urlbar.c"
				gboolean has_shift = FALSE;
				GdkModifierType _tmp37_;
				gboolean _tmp38_;
#line 138 "/home/test/core/core/urlbar.vala"
				midori_urlbar_popdown (self);
#line 139 "/home/test/core/core/urlbar.vala"
				_tmp37_ = event->state;
#line 139 "/home/test/core/core/urlbar.vala"
				has_shift = (_tmp37_ & GDK_SHIFT_MASK) != 0;
#line 140 "/home/test/core/core/urlbar.vala"
				_tmp38_ = has_shift;
#line 140 "/home/test/core/core/urlbar.vala"
				if (_tmp38_) {
#line 721 "urlbar.c"
					GApplication* _tmp39_;
					const gchar* _tmp40_;
					const gchar* _tmp41_;
					GVariant* _tmp42_;
#line 141 "/home/test/core/core/urlbar.vala"
					_tmp39_ = g_application_get_default ();
#line 141 "/home/test/core/core/urlbar.vala"
					_tmp40_ = gtk_entry_get_text ((GtkEntry*) self);
#line 141 "/home/test/core/core/urlbar.vala"
					_tmp41_ = _tmp40_;
#line 141 "/home/test/core/core/urlbar.vala"
					_tmp42_ = _variant_new13 (_tmp41_);
#line 141 "/home/test/core/core/urlbar.vala"
					g_action_group_activate_action ((GActionGroup*) _tmp39_, "win-new", _tmp42_);
#line 141 "/home/test/core/core/urlbar.vala"
					_g_variant_unref0 (_tmp42_);
#line 738 "urlbar.c"
				} else {
					MidoriBrowser* browser = NULL;
					GtkWidget* _tmp43_;
					MidoriBrowser* _tmp44_;
					MidoriBrowser* _tmp45_;
					MidoriBrowser* _tmp46_;
					WebKitWebContext* _tmp47_;
					WebKitWebContext* _tmp48_;
					const gchar* _tmp49_;
					const gchar* _tmp50_;
					MidoriTab* _tmp51_;
					MidoriTab* _tmp52_;
#line 143 "/home/test/core/core/urlbar.vala"
					_tmp43_ = gtk_widget_get_toplevel ((GtkWidget*) self);
#line 143 "/home/test/core/core/urlbar.vala"
					_tmp44_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp43_, MIDORI_TYPE_BROWSER, MidoriBrowser));
#line 143 "/home/test/core/core/urlbar.vala"
					browser = _tmp44_;
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp45_ = browser;
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp46_ = browser;
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp47_ = midori_browser_get_web_context (_tmp46_);
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp48_ = _tmp47_;
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp49_ = gtk_entry_get_text ((GtkEntry*) self);
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp50_ = _tmp49_;
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp51_ = midori_tab_new (NULL, _tmp48_, _tmp50_, NULL);
#line 144 "/home/test/core/core/urlbar.vala"
					g_object_ref_sink (_tmp51_);
#line 144 "/home/test/core/core/urlbar.vala"
					_tmp52_ = _tmp51_;
#line 144 "/home/test/core/core/urlbar.vala"
					midori_browser_add (_tmp45_, _tmp52_);
#line 144 "/home/test/core/core/urlbar.vala"
					_g_object_unref0 (_tmp52_);
#line 140 "/home/test/core/core/urlbar.vala"
					_g_object_unref0 (browser);
#line 781 "urlbar.c"
				}
			} else {
				GtkListBox* _tmp53_;
#line 147 "/home/test/core/core/urlbar.vala"
				_tmp53_ = self->priv->listbox;
#line 147 "/home/test/core/core/urlbar.vala"
				g_signal_emit_by_name (_tmp53_, "activate-cursor-row");
#line 789 "urlbar.c"
			}
#line 149 "/home/test/core/core/urlbar.vala"
			result = TRUE;
#line 149 "/home/test/core/core/urlbar.vala"
			return result;
#line 795 "urlbar.c"
		}
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_Down:
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_KP_Down:
#line 801 "urlbar.c"
		{
#line 152 "/home/test/core/core/urlbar.vala"
			midori_urlbar_complete (self);
#line 153 "/home/test/core/core/urlbar.vala"
			result = TRUE;
#line 153 "/home/test/core/core/urlbar.vala"
			return result;
#line 809 "urlbar.c"
		}
#line 129 "/home/test/core/core/urlbar.vala"
		case GDK_KEY_Escape:
#line 813 "urlbar.c"
		{
			const gchar* _tmp54_ = NULL;
			gboolean _tmp55_;
			gboolean _tmp56_;
#line 155 "/home/test/core/core/urlbar.vala"
			_tmp55_ = midori_urlbar_get_blank (self);
#line 155 "/home/test/core/core/urlbar.vala"
			_tmp56_ = _tmp55_;
#line 155 "/home/test/core/core/urlbar.vala"
			if (_tmp56_) {
#line 155 "/home/test/core/core/urlbar.vala"
				_tmp54_ = "";
#line 826 "urlbar.c"
			} else {
				const gchar* _tmp57_;
				const gchar* _tmp58_;
#line 155 "/home/test/core/core/urlbar.vala"
				_tmp57_ = midori_urlbar_get_uri (self);
#line 155 "/home/test/core/core/urlbar.vala"
				_tmp58_ = _tmp57_;
#line 155 "/home/test/core/core/urlbar.vala"
				_tmp54_ = _tmp58_;
#line 836 "urlbar.c"
			}
#line 155 "/home/test/core/core/urlbar.vala"
			gtk_entry_set_text ((GtkEntry*) self, _tmp54_);
#line 156 "/home/test/core/core/urlbar.vala"
			gtk_editable_set_position ((GtkEditable*) self, -1);
#line 158 "/home/test/core/core/urlbar.vala"
			result = FALSE;
#line 158 "/home/test/core/core/urlbar.vala"
			return result;
#line 846 "urlbar.c"
		}
		default:
#line 129 "/home/test/core/core/urlbar.vala"
		break;
#line 851 "urlbar.c"
	}
#line 162 "/home/test/core/core/urlbar.vala"
	_tmp59_ = event->keyval;
#line 162 "/home/test/core/core/urlbar.vala"
	character = (gunichar) gdk_keyval_to_unicode (_tmp59_);
#line 163 "/home/test/core/core/urlbar.vala"
	_tmp61_ = character;
#line 163 "/home/test/core/core/urlbar.vala"
	if (_tmp61_ != ((gunichar) 0)) {
#line 861 "urlbar.c"
		guint _tmp62_;
#line 163 "/home/test/core/core/urlbar.vala"
		_tmp62_ = event->is_modifier;
#line 163 "/home/test/core/core/urlbar.vala"
		_tmp60_ = _tmp62_ == ((guint) 0);
#line 867 "urlbar.c"
	} else {
#line 163 "/home/test/core/core/urlbar.vala"
		_tmp60_ = FALSE;
#line 871 "urlbar.c"
	}
#line 163 "/home/test/core/core/urlbar.vala"
	if (_tmp60_) {
#line 164 "/home/test/core/core/urlbar.vala"
		midori_urlbar_complete (self);
#line 877 "urlbar.c"
	}
#line 166 "/home/test/core/core/urlbar.vala"
	result = GTK_WIDGET_CLASS (midori_urlbar_parent_class)->key_press_event ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_entry_get_type (), GtkEntry), event);
#line 166 "/home/test/core/core/urlbar.vala"
	return result;
#line 883 "urlbar.c"
}


static void
midori_urlbar_update_key (MidoriUrlbar* self,
                          const gchar* text)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	GError* _inner_error0_ = NULL;
#line 169 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 169 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (text != NULL);
#line 170 "/home/test/core/core/urlbar.vala"
	_tmp0_ = midori_urlbar_magic_uri (self, text);
#line 170 "/home/test/core/core/urlbar.vala"
	_tmp1_ = _tmp0_;
#line 170 "/home/test/core/core/urlbar.vala"
	midori_urlbar_set_location (self, _tmp1_);
#line 170 "/home/test/core/core/urlbar.vala"
	_g_free0 (_tmp1_);
#line 906 "urlbar.c"
	{
		GRegex* _tmp2_ = NULL;
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
		GRegex* _tmp8_;
		GRegex* _tmp9_;
#line 172 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_key (self, text);
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp3_ = self->priv->_key;
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp4_ = g_regex_escape_string (_tmp3_, -1);
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp5_ = _tmp4_;
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp6_ = g_strdup_printf ("(%s)", _tmp5_);
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp7_ = _tmp6_;
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp8_ = g_regex_new (_tmp7_, G_REGEX_CASELESS, 0, &_inner_error0_);
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp9_ = _tmp8_;
#line 173 "/home/test/core/core/urlbar.vala"
		_g_free0 (_tmp7_);
#line 173 "/home/test/core/core/urlbar.vala"
		_g_free0 (_tmp5_);
#line 173 "/home/test/core/core/urlbar.vala"
		_tmp2_ = _tmp9_;
#line 173 "/home/test/core/core/urlbar.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 173 "/home/test/core/core/urlbar.vala"
			if (_inner_error0_->domain == G_REGEX_ERROR) {
#line 942 "urlbar.c"
				goto __catch42_g_regex_error;
			}
#line 173 "/home/test/core/core/urlbar.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 173 "/home/test/core/core/urlbar.vala"
			g_clear_error (&_inner_error0_);
#line 173 "/home/test/core/core/urlbar.vala"
			return;
#line 951 "urlbar.c"
		}
#line 173 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_regex (self, _tmp2_);
#line 171 "/home/test/core/core/urlbar.vala"
		_g_regex_unref0 (_tmp2_);
#line 957 "urlbar.c"
	}
	goto __finally42;
	__catch42_g_regex_error:
	{
		GError* _error_ = NULL;
		GError* _tmp10_;
		const gchar* _tmp11_;
#line 171 "/home/test/core/core/urlbar.vala"
		_error_ = _inner_error0_;
#line 171 "/home/test/core/core/urlbar.vala"
		_inner_error0_ = NULL;
#line 176 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_regex (self, NULL);
#line 177 "/home/test/core/core/urlbar.vala"
		_tmp10_ = _error_;
#line 177 "/home/test/core/core/urlbar.vala"
		_tmp11_ = _tmp10_->message;
#line 177 "/home/test/core/core/urlbar.vala"
		g_debug ("urlbar.vala:177: Failed to create regex: %s", _tmp11_);
#line 171 "/home/test/core/core/urlbar.vala"
		_g_error_free0 (_error_);
#line 979 "urlbar.c"
	}
	__finally42:
#line 171 "/home/test/core/core/urlbar.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 171 "/home/test/core/core/urlbar.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 171 "/home/test/core/core/urlbar.vala"
		g_clear_error (&_inner_error0_);
#line 171 "/home/test/core/core/urlbar.vala"
		return;
#line 990 "urlbar.c"
	}
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
#line 1475 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1475 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1476 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1476 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1476 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1011 "urlbar.c"
}


static gchar*
midori_urlbar_magic_uri (MidoriUrlbar* self,
                         const gchar* text)
{
	gchar* result = NULL;
	gboolean _tmp0_ = FALSE;
	GError* _inner_error0_ = NULL;
#line 181 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 181 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (text != NULL, NULL);
#line 183 "/home/test/core/core/urlbar.vala"
	if (g_str_has_prefix (text, " ")) {
#line 183 "/home/test/core/core/urlbar.vala"
		_tmp0_ = TRUE;
#line 1030 "urlbar.c"
	} else {
#line 183 "/home/test/core/core/urlbar.vala"
		_tmp0_ = g_str_has_suffix (text, " ");
#line 1034 "urlbar.c"
	}
#line 183 "/home/test/core/core/urlbar.vala"
	if (_tmp0_) {
#line 184 "/home/test/core/core/urlbar.vala"
		result = NULL;
#line 184 "/home/test/core/core/urlbar.vala"
		return result;
#line 1042 "urlbar.c"
	} else {
#line 185 "/home/test/core/core/urlbar.vala"
		if (g_path_is_absolute (text)) {
#line 1046 "urlbar.c"
			{
				gchar* _tmp1_ = NULL;
				gchar* _tmp2_;
				gchar* _tmp3_;
#line 187 "/home/test/core/core/urlbar.vala"
				_tmp2_ = g_filename_to_uri (text, NULL, &_inner_error0_);
#line 187 "/home/test/core/core/urlbar.vala"
				_tmp1_ = _tmp2_;
#line 187 "/home/test/core/core/urlbar.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 187 "/home/test/core/core/urlbar.vala"
					if (_inner_error0_->domain == G_CONVERT_ERROR) {
#line 1059 "urlbar.c"
						goto __catch43_g_convert_error;
					}
#line 187 "/home/test/core/core/urlbar.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 187 "/home/test/core/core/urlbar.vala"
					g_clear_error (&_inner_error0_);
#line 187 "/home/test/core/core/urlbar.vala"
					return NULL;
#line 1068 "urlbar.c"
				}
#line 187 "/home/test/core/core/urlbar.vala"
				_tmp3_ = _tmp1_;
#line 187 "/home/test/core/core/urlbar.vala"
				_tmp1_ = NULL;
#line 187 "/home/test/core/core/urlbar.vala"
				result = _tmp3_;
#line 187 "/home/test/core/core/urlbar.vala"
				_g_free0 (_tmp1_);
#line 187 "/home/test/core/core/urlbar.vala"
				return result;
#line 1080 "urlbar.c"
			}
			goto __finally43;
			__catch43_g_convert_error:
			{
				GError* _error_ = NULL;
				GError* _tmp4_;
				const gchar* _tmp5_;
				gchar* _tmp6_;
#line 186 "/home/test/core/core/urlbar.vala"
				_error_ = _inner_error0_;
#line 186 "/home/test/core/core/urlbar.vala"
				_inner_error0_ = NULL;
#line 189 "/home/test/core/core/urlbar.vala"
				_tmp4_ = _error_;
#line 189 "/home/test/core/core/urlbar.vala"
				_tmp5_ = _tmp4_->message;
#line 189 "/home/test/core/core/urlbar.vala"
				g_debug ("urlbar.vala:189: Failed to convert URI to filename: %s", _tmp5_);
#line 190 "/home/test/core/core/urlbar.vala"
				_tmp6_ = g_strdup (text);
#line 190 "/home/test/core/core/urlbar.vala"
				result = _tmp6_;
#line 190 "/home/test/core/core/urlbar.vala"
				_g_error_free0 (_error_);
#line 190 "/home/test/core/core/urlbar.vala"
				return result;
#line 1107 "urlbar.c"
			}
			__finally43:
#line 186 "/home/test/core/core/urlbar.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 186 "/home/test/core/core/urlbar.vala"
			g_clear_error (&_inner_error0_);
#line 186 "/home/test/core/core/urlbar.vala"
			return NULL;
#line 1116 "urlbar.c"
		} else {
#line 192 "/home/test/core/core/urlbar.vala"
			if (g_file_test (text, G_FILE_TEST_EXISTS | G_FILE_TEST_IS_REGULAR)) {
#line 1120 "urlbar.c"
				GFile* _tmp7_;
				GFile* _tmp8_;
				gchar* _tmp9_;
				gchar* _tmp10_;
#line 193 "/home/test/core/core/urlbar.vala"
				_tmp7_ = g_file_new_for_commandline_arg (text);
#line 193 "/home/test/core/core/urlbar.vala"
				_tmp8_ = _tmp7_;
#line 193 "/home/test/core/core/urlbar.vala"
				_tmp9_ = g_file_get_uri (_tmp8_);
#line 193 "/home/test/core/core/urlbar.vala"
				_tmp10_ = _tmp9_;
#line 193 "/home/test/core/core/urlbar.vala"
				_g_object_unref0 (_tmp8_);
#line 193 "/home/test/core/core/urlbar.vala"
				result = _tmp10_;
#line 193 "/home/test/core/core/urlbar.vala"
				return result;
#line 1139 "urlbar.c"
			} else {
#line 194 "/home/test/core/core/urlbar.vala"
				if (midori_urlbar_is_external (self, text)) {
#line 1143 "urlbar.c"
					gchar* _tmp11_;
#line 195 "/home/test/core/core/urlbar.vala"
					_tmp11_ = g_strdup (text);
#line 195 "/home/test/core/core/urlbar.vala"
					result = _tmp11_;
#line 195 "/home/test/core/core/urlbar.vala"
					return result;
#line 1151 "urlbar.c"
				} else {
#line 196 "/home/test/core/core/urlbar.vala"
					if (g_str_has_prefix (text, "geo:")) {
#line 1155 "urlbar.c"
						gchar* _tmp12_;
#line 198 "/home/test/core/core/urlbar.vala"
						_tmp12_ = g_strdup (text);
#line 198 "/home/test/core/core/urlbar.vala"
						result = _tmp12_;
#line 198 "/home/test/core/core/urlbar.vala"
						return result;
#line 1163 "urlbar.c"
					} else {
#line 199 "/home/test/core/core/urlbar.vala"
						if (midori_urlbar_is_location (self, text)) {
#line 1167 "urlbar.c"
							gchar* _tmp13_;
#line 200 "/home/test/core/core/urlbar.vala"
							_tmp13_ = g_strdup (text);
#line 200 "/home/test/core/core/urlbar.vala"
							result = _tmp13_;
#line 200 "/home/test/core/core/urlbar.vala"
							return result;
#line 1175 "urlbar.c"
						} else {
#line 201 "/home/test/core/core/urlbar.vala"
							if (midori_urlbar_is_ip_address (self, text)) {
#line 1179 "urlbar.c"
								gchar* _tmp14_;
#line 202 "/home/test/core/core/urlbar.vala"
								_tmp14_ = g_strconcat ("http://", text, NULL);
#line 202 "/home/test/core/core/urlbar.vala"
								result = _tmp14_;
#line 202 "/home/test/core/core/urlbar.vala"
								return result;
#line 1187 "urlbar.c"
							} else {
								gboolean _tmp15_ = FALSE;
#line 203 "/home/test/core/core/urlbar.vala"
								if (g_str_has_prefix (text, "localhost")) {
#line 203 "/home/test/core/core/urlbar.vala"
									_tmp15_ = TRUE;
#line 1194 "urlbar.c"
								} else {
#line 203 "/home/test/core/core/urlbar.vala"
									_tmp15_ = string_contains (text, ".");
#line 1198 "urlbar.c"
								}
#line 203 "/home/test/core/core/urlbar.vala"
								if (_tmp15_) {
#line 1202 "urlbar.c"
									gchar* _tmp16_;
#line 204 "/home/test/core/core/urlbar.vala"
									_tmp16_ = g_strconcat ("http://", text, NULL);
#line 204 "/home/test/core/core/urlbar.vala"
									result = _tmp16_;
#line 204 "/home/test/core/core/urlbar.vala"
									return result;
#line 1210 "urlbar.c"
								} else {
#line 205 "/home/test/core/core/urlbar.vala"
									if (g_strcmp0 (text, "") == 0) {
#line 1214 "urlbar.c"
										gchar* _tmp17_;
#line 206 "/home/test/core/core/urlbar.vala"
										_tmp17_ = g_strdup ("about:blank");
#line 206 "/home/test/core/core/urlbar.vala"
										result = _tmp17_;
#line 206 "/home/test/core/core/urlbar.vala"
										return result;
#line 1222 "urlbar.c"
									}
								}
							}
						}
					}
				}
			}
		}
	}
#line 209 "/home/test/core/core/urlbar.vala"
	result = NULL;
#line 209 "/home/test/core/core/urlbar.vala"
	return result;
#line 1236 "urlbar.c"
}


static gboolean
midori_urlbar_is_location (MidoriUrlbar* self,
                           const gchar* uri)
{
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
#line 212 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 212 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (uri != NULL, FALSE);
#line 214 "/home/test/core/core/urlbar.vala"
	if (g_str_has_prefix (uri, "about:")) {
#line 214 "/home/test/core/core/urlbar.vala"
		_tmp3_ = TRUE;
#line 1257 "urlbar.c"
	} else {
#line 215 "/home/test/core/core/urlbar.vala"
		_tmp3_ = g_str_has_prefix (uri, "http://");
#line 1261 "urlbar.c"
	}
#line 214 "/home/test/core/core/urlbar.vala"
	if (_tmp3_) {
#line 214 "/home/test/core/core/urlbar.vala"
		_tmp2_ = TRUE;
#line 1267 "urlbar.c"
	} else {
#line 216 "/home/test/core/core/urlbar.vala"
		_tmp2_ = g_str_has_prefix (uri, "https://");
#line 1271 "urlbar.c"
	}
#line 214 "/home/test/core/core/urlbar.vala"
	if (_tmp2_) {
#line 214 "/home/test/core/core/urlbar.vala"
		_tmp1_ = TRUE;
#line 1277 "urlbar.c"
	} else {
		gboolean _tmp4_ = FALSE;
#line 217 "/home/test/core/core/urlbar.vala"
		if (g_str_has_prefix (uri, "data:")) {
#line 217 "/home/test/core/core/urlbar.vala"
			_tmp4_ = string_contains (uri, ";");
#line 1284 "urlbar.c"
		} else {
#line 217 "/home/test/core/core/urlbar.vala"
			_tmp4_ = FALSE;
#line 1288 "urlbar.c"
		}
#line 217 "/home/test/core/core/urlbar.vala"
		_tmp1_ = _tmp4_;
#line 1292 "urlbar.c"
	}
#line 214 "/home/test/core/core/urlbar.vala"
	if (_tmp1_) {
#line 214 "/home/test/core/core/urlbar.vala"
		_tmp0_ = TRUE;
#line 1298 "urlbar.c"
	} else {
#line 218 "/home/test/core/core/urlbar.vala"
		_tmp0_ = g_str_has_prefix (uri, "javascript:");
#line 1302 "urlbar.c"
	}
#line 214 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 214 "/home/test/core/core/urlbar.vala"
	return result;
#line 1308 "urlbar.c"
}


static gboolean
midori_urlbar_is_external (MidoriUrlbar* self,
                           const gchar* uri)
{
	gboolean result = FALSE;
	gchar* scheme = NULL;
	gchar* _tmp0_;
	gboolean _tmp1_ = FALSE;
	const gchar* _tmp2_;
#line 221 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 221 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (uri != NULL, FALSE);
#line 222 "/home/test/core/core/urlbar.vala"
	if (g_str_has_prefix (uri, "file://")) {
#line 223 "/home/test/core/core/urlbar.vala"
		result = TRUE;
#line 223 "/home/test/core/core/urlbar.vala"
		return result;
#line 1331 "urlbar.c"
	}
#line 225 "/home/test/core/core/urlbar.vala"
	_tmp0_ = g_uri_parse_scheme (uri);
#line 225 "/home/test/core/core/urlbar.vala"
	scheme = _tmp0_;
#line 226 "/home/test/core/core/urlbar.vala"
	_tmp2_ = scheme;
#line 226 "/home/test/core/core/urlbar.vala"
	if (_tmp2_ != NULL) {
#line 1341 "urlbar.c"
		const gchar* _tmp3_;
		GAppInfo* _tmp4_;
		GAppInfo* _tmp5_;
#line 227 "/home/test/core/core/urlbar.vala"
		_tmp3_ = scheme;
#line 227 "/home/test/core/core/urlbar.vala"
		_tmp4_ = g_app_info_get_default_for_uri_scheme (_tmp3_);
#line 227 "/home/test/core/core/urlbar.vala"
		_tmp5_ = _tmp4_;
#line 227 "/home/test/core/core/urlbar.vala"
		_tmp1_ = _tmp5_ != NULL;
#line 227 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (_tmp5_);
#line 1355 "urlbar.c"
	} else {
#line 226 "/home/test/core/core/urlbar.vala"
		_tmp1_ = FALSE;
#line 1359 "urlbar.c"
	}
#line 226 "/home/test/core/core/urlbar.vala"
	result = _tmp1_;
#line 226 "/home/test/core/core/urlbar.vala"
	_g_free0 (scheme);
#line 226 "/home/test/core/core/urlbar.vala"
	return result;
#line 1367 "urlbar.c"
}


static gchar
string_get (const gchar* self,
            glong index)
{
	gchar result = '\0';
	gchar _tmp0_;
#line 1180 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, '\0');
#line 1181 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = ((gchar*) self)[index];
#line 1181 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_;
#line 1181 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1385 "urlbar.c"
}


static gboolean
midori_urlbar_is_ip_address (MidoriUrlbar* self,
                             const gchar* uri)
{
	gboolean result = FALSE;
	gboolean _tmp5_ = FALSE;
	gboolean _tmp6_ = FALSE;
	gboolean _tmp7_ = FALSE;
	gboolean _tmp8_ = FALSE;
	gboolean _tmp9_ = FALSE;
	gboolean _tmp10_ = FALSE;
	gboolean _tmp11_ = FALSE;
#line 230 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 230 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (uri != NULL, FALSE);
#line 235 "/home/test/core/core/urlbar.vala"
	if (string_contains (uri, "@")) {
#line 1407 "urlbar.c"
		gchar** _tmp0_;
		gchar** _tmp1_;
		gchar** _tmp2_;
		gint _tmp2__length1;
		const gchar* _tmp3_;
		gboolean _tmp4_;
#line 236 "/home/test/core/core/urlbar.vala"
		_tmp1_ = _tmp0_ = g_strsplit (uri, "@", 0);
#line 236 "/home/test/core/core/urlbar.vala"
		_tmp2_ = _tmp1_;
#line 236 "/home/test/core/core/urlbar.vala"
		_tmp2__length1 = _vala_array_length (_tmp0_);
#line 236 "/home/test/core/core/urlbar.vala"
		_tmp3_ = _tmp2_[1];
#line 236 "/home/test/core/core/urlbar.vala"
		_tmp4_ = midori_urlbar_is_ip_address (self, _tmp3_);
#line 236 "/home/test/core/core/urlbar.vala"
		_tmp2_ = (_vala_array_free (_tmp2_, _tmp2__length1, (GDestroyNotify) g_free), NULL);
#line 236 "/home/test/core/core/urlbar.vala"
		result = _tmp4_;
#line 236 "/home/test/core/core/urlbar.vala"
		return result;
#line 1430 "urlbar.c"
	}
#line 238 "/home/test/core/core/urlbar.vala"
	if (string_get (uri, (glong) 0) != '0') {
#line 238 "/home/test/core/core/urlbar.vala"
		_tmp6_ = g_ascii_isdigit (string_get (uri, (glong) 0));
#line 1436 "urlbar.c"
	} else {
#line 238 "/home/test/core/core/urlbar.vala"
		_tmp6_ = FALSE;
#line 1440 "urlbar.c"
	}
#line 238 "/home/test/core/core/urlbar.vala"
	if (_tmp6_) {
#line 238 "/home/test/core/core/urlbar.vala"
		_tmp5_ = string_contains (uri, ".");
#line 1446 "urlbar.c"
	} else {
#line 238 "/home/test/core/core/urlbar.vala"
		_tmp5_ = FALSE;
#line 1450 "urlbar.c"
	}
#line 238 "/home/test/core/core/urlbar.vala"
	if (_tmp5_) {
#line 239 "/home/test/core/core/urlbar.vala"
		result = TRUE;
#line 239 "/home/test/core/core/urlbar.vala"
		return result;
#line 1458 "urlbar.c"
	}
#line 241 "/home/test/core/core/urlbar.vala"
	if (g_ascii_isalnum (string_get (uri, (glong) 0))) {
#line 241 "/home/test/core/core/urlbar.vala"
		_tmp11_ = g_ascii_isalnum (string_get (uri, (glong) 1));
#line 1464 "urlbar.c"
	} else {
#line 241 "/home/test/core/core/urlbar.vala"
		_tmp11_ = FALSE;
#line 1468 "urlbar.c"
	}
#line 241 "/home/test/core/core/urlbar.vala"
	if (_tmp11_) {
#line 242 "/home/test/core/core/urlbar.vala"
		_tmp10_ = g_ascii_isalnum (string_get (uri, (glong) 2));
#line 1474 "urlbar.c"
	} else {
#line 241 "/home/test/core/core/urlbar.vala"
		_tmp10_ = FALSE;
#line 1478 "urlbar.c"
	}
#line 241 "/home/test/core/core/urlbar.vala"
	if (_tmp10_) {
#line 242 "/home/test/core/core/urlbar.vala"
		_tmp9_ = g_ascii_isalnum (string_get (uri, (glong) 3));
#line 1484 "urlbar.c"
	} else {
#line 241 "/home/test/core/core/urlbar.vala"
		_tmp9_ = FALSE;
#line 1488 "urlbar.c"
	}
#line 241 "/home/test/core/core/urlbar.vala"
	if (_tmp9_) {
#line 242 "/home/test/core/core/urlbar.vala"
		_tmp8_ = string_get (uri, (glong) 4) == ':';
#line 1494 "urlbar.c"
	} else {
#line 241 "/home/test/core/core/urlbar.vala"
		_tmp8_ = FALSE;
#line 1498 "urlbar.c"
	}
#line 241 "/home/test/core/core/urlbar.vala"
	if (_tmp8_) {
#line 1502 "urlbar.c"
		gboolean _tmp12_ = FALSE;
#line 243 "/home/test/core/core/urlbar.vala"
		if (string_get (uri, (glong) 5) == ':') {
#line 243 "/home/test/core/core/urlbar.vala"
			_tmp12_ = TRUE;
#line 1508 "urlbar.c"
		} else {
#line 243 "/home/test/core/core/urlbar.vala"
			_tmp12_ = g_ascii_isalnum (string_get (uri, (glong) 5));
#line 1512 "urlbar.c"
		}
#line 243 "/home/test/core/core/urlbar.vala"
		_tmp7_ = _tmp12_;
#line 1516 "urlbar.c"
	} else {
#line 241 "/home/test/core/core/urlbar.vala"
		_tmp7_ = FALSE;
#line 1520 "urlbar.c"
	}
#line 241 "/home/test/core/core/urlbar.vala"
	if (_tmp7_) {
#line 244 "/home/test/core/core/urlbar.vala"
		result = TRUE;
#line 244 "/home/test/core/core/urlbar.vala"
		return result;
#line 1528 "urlbar.c"
	}
#line 245 "/home/test/core/core/urlbar.vala"
	result = FALSE;
#line 245 "/home/test/core/core/urlbar.vala"
	return result;
#line 1534 "urlbar.c"
}


static gboolean
midori_urlbar_real_focus_out_event (GtkWidget* base,
                                    GdkEventFocus* event)
{
	MidoriUrlbar * self;
	gboolean result = FALSE;
#line 248 "/home/test/core/core/urlbar.vala"
	self = (MidoriUrlbar*) base;
#line 248 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 249 "/home/test/core/core/urlbar.vala"
	midori_urlbar_popdown (self);
#line 250 "/home/test/core/core/urlbar.vala"
	result = GTK_WIDGET_CLASS (midori_urlbar_parent_class)->focus_out_event ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_entry_get_type (), GtkEntry), event);
#line 250 "/home/test/core/core/urlbar.vala"
	return result;
#line 1554 "urlbar.c"
}


void
midori_urlbar_popdown (MidoriUrlbar* self)
{
	GtkPopover* _tmp0_;
#line 253 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 255 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->suggestions;
#line 255 "/home/test/core/core/urlbar.vala"
	if (_tmp0_ != NULL) {
#line 1568 "urlbar.c"
		GtkPopover* _tmp1_;
#line 256 "/home/test/core/core/urlbar.vala"
		_tmp1_ = self->priv->suggestions;
#line 256 "/home/test/core/core/urlbar.vala"
		gtk_widget_hide ((GtkWidget*) _tmp1_);
#line 1574 "urlbar.c"
	}
}


static void
midori_urlbar_resize (MidoriUrlbar* self,
                      GtkAllocation* allocation)
{
	gint width = 0;
	GtkWidget* _tmp0_;
	gint _tmp1_ = 0;
	gint _tmp2_;
	GtkListBox* _tmp3_;
	gint _tmp4_;
#line 260 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 260 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (allocation != NULL);
#line 263 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_widget_get_toplevel ((GtkWidget*) self);
#line 263 "/home/test/core/core/urlbar.vala"
	gtk_window_get_size (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_window_get_type (), GtkWindow), &_tmp1_, NULL);
#line 263 "/home/test/core/core/urlbar.vala"
	width = _tmp1_;
#line 264 "/home/test/core/core/urlbar.vala"
	_tmp2_ = width;
#line 264 "/home/test/core/core/urlbar.vala"
	width = (gint) (_tmp2_ / 1.5);
#line 265 "/home/test/core/core/urlbar.vala"
	_tmp3_ = self->priv->listbox;
#line 265 "/home/test/core/core/urlbar.vala"
	_tmp4_ = width;
#line 265 "/home/test/core/core/urlbar.vala"
	gtk_widget_set_size_request ((GtkWidget*) _tmp3_, _tmp4_, -1);
#line 1609 "urlbar.c"
}


static GtkWidget*
_midori_urlbar_create_row_gtk_list_box_create_widget_func (GObject* item,
                                                           gpointer self)
{
	GtkWidget* result;
	result = midori_urlbar_create_row ((MidoriUrlbar*) self, item);
#line 274 "/home/test/core/core/urlbar.vala"
	return result;
#line 1621 "urlbar.c"
}


static void
midori_urlbar_complete (MidoriUrlbar* self)
{
	GtkPopover* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	GtkPopover* _tmp16_;
	GtkPopover* _tmp17_;
	GtkPopover* _tmp18_;
#line 268 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 269 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->suggestions;
#line 269 "/home/test/core/core/urlbar.vala"
	_tmp1_ = gtk_widget_get_visible ((GtkWidget*) _tmp0_);
#line 269 "/home/test/core/core/urlbar.vala"
	_tmp2_ = _tmp1_;
#line 269 "/home/test/core/core/urlbar.vala"
	if (!_tmp2_) {
#line 1644 "urlbar.c"
		GtkPopover* _tmp3_;
		GtkPopover* _tmp4_;
		MidoriCompletion* completion = NULL;
		GtkWidget* _tmp5_;
		MidoriTab* _tmp6_;
		MidoriTab* _tmp7_;
		WebKitWebContext* _tmp8_;
		WebKitWebContext* _tmp9_;
		WebKitWebContext* _tmp10_;
		MidoriCompletion* _tmp11_;
		MidoriCompletion* _tmp12_;
		MidoriCompletion* _tmp13_;
		GtkListBox* _tmp14_;
		MidoriCompletion* _tmp15_;
#line 270 "/home/test/core/core/urlbar.vala"
		_tmp3_ = self->priv->suggestions;
#line 270 "/home/test/core/core/urlbar.vala"
		gtk_popover_set_default_widget (_tmp3_, (GtkWidget*) self);
#line 271 "/home/test/core/core/urlbar.vala"
		_tmp4_ = self->priv->suggestions;
#line 271 "/home/test/core/core/urlbar.vala"
		gtk_popover_set_relative_to (_tmp4_, (GtkWidget*) self);
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp5_ = gtk_widget_get_toplevel ((GtkWidget*) self);
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp6_ = midori_browser_get_tab (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, MIDORI_TYPE_BROWSER, MidoriBrowser));
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp7_ = _tmp6_;
#line 272 "/home/test/core/core/urlbar.vala"
		g_object_get ((WebKitWebView*) _tmp7_, "web-context", &_tmp8_, NULL);
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp9_ = _tmp8_;
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp10_ = _tmp9_;
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp11_ = midori_completion_new (webkit_web_context_is_ephemeral (_tmp10_));
#line 272 "/home/test/core/core/urlbar.vala"
		_tmp12_ = _tmp11_;
#line 272 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (_tmp10_);
#line 272 "/home/test/core/core/urlbar.vala"
		completion = _tmp12_;
#line 273 "/home/test/core/core/urlbar.vala"
		_tmp13_ = completion;
#line 273 "/home/test/core/core/urlbar.vala"
		g_object_bind_property_with_closures ((GObject*) self, "key", (GObject*) _tmp13_, "key", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 274 "/home/test/core/core/urlbar.vala"
		_tmp14_ = self->priv->listbox;
#line 274 "/home/test/core/core/urlbar.vala"
		_tmp15_ = completion;
#line 274 "/home/test/core/core/urlbar.vala"
		gtk_list_box_bind_model (_tmp14_, (GListModel*) _tmp15_, _midori_urlbar_create_row_gtk_list_box_create_widget_func, g_object_ref (self), g_object_unref);
#line 269 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (completion);
#line 1699 "urlbar.c"
	}
#line 276 "/home/test/core/core/urlbar.vala"
	_tmp16_ = self->priv->suggestions;
#line 276 "/home/test/core/core/urlbar.vala"
	gtk_widget_show ((GtkWidget*) _tmp16_);
#line 277 "/home/test/core/core/urlbar.vala"
	_tmp17_ = self->priv->suggestions;
#line 277 "/home/test/core/core/urlbar.vala"
	gtk_grab_add ((GtkWidget*) _tmp17_);
#line 278 "/home/test/core/core/urlbar.vala"
	_tmp18_ = self->priv->suggestions;
#line 278 "/home/test/core/core/urlbar.vala"
	gtk_widget_grab_focus ((GtkWidget*) _tmp18_);
#line 1713 "urlbar.c"
}


static Block23Data*
block23_data_ref (Block23Data* _data23_)
{
#line 281 "/home/test/core/core/urlbar.vala"
	g_atomic_int_inc (&_data23_->_ref_count_);
#line 281 "/home/test/core/core/urlbar.vala"
	return _data23_;
#line 1724 "urlbar.c"
}


static void
block23_data_unref (void * _userdata_)
{
	Block23Data* _data23_;
	_data23_ = (Block23Data*) _userdata_;
#line 281 "/home/test/core/core/urlbar.vala"
	if (g_atomic_int_dec_and_test (&_data23_->_ref_count_)) {
#line 1735 "urlbar.c"
		MidoriUrlbar* self;
#line 281 "/home/test/core/core/urlbar.vala"
		self = _data23_->self;
#line 281 "/home/test/core/core/urlbar.vala"
		_g_free0 (_data23_->text);
#line 281 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (self);
#line 281 "/home/test/core/core/urlbar.vala"
		g_slice_free (Block23Data, _data23_);
#line 1745 "urlbar.c"
	}
}


static void
__lambda30_ (Block23Data* _data23_)
{
	MidoriUrlbar* self;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
#line 285 "/home/test/core/core/urlbar.vala"
	self = _data23_->self;
#line 286 "/home/test/core/core/urlbar.vala"
	_tmp1_ = midori_urlbar_magic_uri (self, _data23_->text);
#line 286 "/home/test/core/core/urlbar.vala"
	_tmp0_ = _tmp1_;
#line 286 "/home/test/core/core/urlbar.vala"
	if (_tmp0_ == NULL) {
#line 1764 "urlbar.c"
		MidoriCoreSettings* _tmp2_;
		MidoriCoreSettings* _tmp3_;
		gchar* _tmp4_;
#line 286 "/home/test/core/core/urlbar.vala"
		_tmp2_ = midori_core_settings_get_default ();
#line 286 "/home/test/core/core/urlbar.vala"
		_tmp3_ = _tmp2_;
#line 286 "/home/test/core/core/urlbar.vala"
		_tmp4_ = midori_core_settings_uri_for_search (_tmp3_, _data23_->text, NULL);
#line 286 "/home/test/core/core/urlbar.vala"
		_g_free0 (_tmp0_);
#line 286 "/home/test/core/core/urlbar.vala"
		_tmp0_ = _tmp4_;
#line 286 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (_tmp3_);
#line 1780 "urlbar.c"
	}
#line 286 "/home/test/core/core/urlbar.vala"
	midori_urlbar_set_uri (self, _tmp0_);
#line 285 "/home/test/core/core/urlbar.vala"
	_g_free0 (_tmp0_);
#line 1786 "urlbar.c"
}


static void
___lambda30__gtk_menu_item_activate (GtkMenuItem* _sender,
                                     gpointer self)
{
#line 285 "/home/test/core/core/urlbar.vala"
	__lambda30_ (self);
#line 1796 "urlbar.c"
}


static void
midori_urlbar_real_populate_popup (GtkEntry* base,
                                   GtkMenu* menu)
{
	MidoriUrlbar * self;
	Block23Data* _data23_;
	GdkDisplay* _tmp0_;
	GtkClipboard* _tmp1_;
	gchar* _tmp2_;
	GtkMenuItem* menuitem = NULL;
	GtkMenuItem* _tmp3_;
#line 281 "/home/test/core/core/urlbar.vala"
	self = (MidoriUrlbar*) base;
#line 281 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (menu != NULL);
#line 281 "/home/test/core/core/urlbar.vala"
	_data23_ = g_slice_new0 (Block23Data);
#line 281 "/home/test/core/core/urlbar.vala"
	_data23_->_ref_count_ = 1;
#line 281 "/home/test/core/core/urlbar.vala"
	_data23_->self = g_object_ref (self);
#line 282 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_widget_get_display ((GtkWidget*) self);
#line 282 "/home/test/core/core/urlbar.vala"
	_tmp1_ = gtk_clipboard_get_for_display (_tmp0_, GDK_SELECTION_CLIPBOARD);
#line 282 "/home/test/core/core/urlbar.vala"
	_tmp2_ = gtk_clipboard_wait_for_text (_tmp1_);
#line 282 "/home/test/core/core/urlbar.vala"
	_data23_->text = _tmp2_;
#line 283 "/home/test/core/core/urlbar.vala"
	_tmp3_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic ("Paste and p_roceed");
#line 283 "/home/test/core/core/urlbar.vala"
	g_object_ref_sink (_tmp3_);
#line 283 "/home/test/core/core/urlbar.vala"
	menuitem = _tmp3_;
#line 284 "/home/test/core/core/urlbar.vala"
	gtk_widget_set_sensitive ((GtkWidget*) menuitem, _data23_->text != NULL);
#line 285 "/home/test/core/core/urlbar.vala"
	g_signal_connect_data (menuitem, "activate", (GCallback) ___lambda30__gtk_menu_item_activate, block23_data_ref (_data23_), (GClosureNotify) block23_data_unref, 0);
#line 288 "/home/test/core/core/urlbar.vala"
	gtk_widget_show ((GtkWidget*) menuitem);
#line 289 "/home/test/core/core/urlbar.vala"
	gtk_menu_shell_insert ((GtkMenuShell*) menu, (GtkWidget*) menuitem, 3);
#line 281 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (menuitem);
#line 281 "/home/test/core/core/urlbar.vala"
	block23_data_unref (_data23_);
#line 281 "/home/test/core/core/urlbar.vala"
	_data23_ = NULL;
#line 1849 "urlbar.c"
}


static void
midori_urlbar_update_icon (MidoriUrlbar* self)
{
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp5_;
	gboolean _tmp6_;
#line 292 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 293 "/home/test/core/core/urlbar.vala"
	_tmp0_ = midori_urlbar_get_blank (self);
#line 293 "/home/test/core/core/urlbar.vala"
	_tmp1_ = _tmp0_;
#line 293 "/home/test/core/core/urlbar.vala"
	if (_tmp1_) {
#line 294 "/home/test/core/core/urlbar.vala"
		g_object_set ((GtkEntry*) self, "primary-icon-name", NULL, NULL);
#line 1870 "urlbar.c"
	} else {
		const gchar* _tmp2_ = NULL;
		gboolean _tmp3_;
		gboolean _tmp4_;
#line 296 "/home/test/core/core/urlbar.vala"
		_tmp3_ = midori_urlbar_get_secure (self);
#line 296 "/home/test/core/core/urlbar.vala"
		_tmp4_ = _tmp3_;
#line 296 "/home/test/core/core/urlbar.vala"
		if (_tmp4_) {
#line 296 "/home/test/core/core/urlbar.vala"
			_tmp2_ = "channel-secure-symbolic";
#line 1883 "urlbar.c"
		} else {
#line 296 "/home/test/core/core/urlbar.vala"
			_tmp2_ = "channel-insecure-symbolic";
#line 1887 "urlbar.c"
		}
#line 296 "/home/test/core/core/urlbar.vala"
		g_object_set ((GtkEntry*) self, "primary-icon-name", _tmp2_, NULL);
#line 1891 "urlbar.c"
	}
#line 298 "/home/test/core/core/urlbar.vala"
	_tmp5_ = midori_urlbar_get_blank (self);
#line 298 "/home/test/core/core/urlbar.vala"
	_tmp6_ = _tmp5_;
#line 298 "/home/test/core/core/urlbar.vala"
	g_object_set ((GtkEntry*) self, "primary-icon-activatable", !_tmp6_, NULL);
#line 1899 "urlbar.c"
}


static gboolean
___lambda31_ (MidoriUrlbar* self,
              GdkEventButton* event)
{
	gboolean result = FALSE;
	GtkWidget* widget = NULL;
	GtkWidget* _tmp0_;
	GtkWidget* _tmp1_;
	gboolean _tmp2_ = FALSE;
	GtkWidget* _tmp3_;
#line 311 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 312 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_get_event_widget ((GdkEvent*) event);
#line 312 "/home/test/core/core/urlbar.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 312 "/home/test/core/core/urlbar.vala"
	widget = _tmp1_;
#line 313 "/home/test/core/core/urlbar.vala"
	_tmp3_ = widget;
#line 313 "/home/test/core/core/urlbar.vala"
	if (_tmp3_ != G_TYPE_CHECK_INSTANCE_CAST (self, gtk_widget_get_type (), GtkWidget)) {
#line 1925 "urlbar.c"
		GtkWidget* _tmp4_;
		GtkPopover* _tmp5_;
#line 313 "/home/test/core/core/urlbar.vala"
		_tmp4_ = widget;
#line 313 "/home/test/core/core/urlbar.vala"
		_tmp5_ = self->priv->security;
#line 313 "/home/test/core/core/urlbar.vala"
		_tmp2_ = !gtk_widget_is_ancestor (_tmp4_, (GtkWidget*) _tmp5_);
#line 1934 "urlbar.c"
	} else {
#line 313 "/home/test/core/core/urlbar.vala"
		_tmp2_ = FALSE;
#line 1938 "urlbar.c"
	}
#line 313 "/home/test/core/core/urlbar.vala"
	if (_tmp2_) {
#line 1942 "urlbar.c"
		GtkPopover* _tmp6_;
#line 314 "/home/test/core/core/urlbar.vala"
		_tmp6_ = self->priv->security;
#line 314 "/home/test/core/core/urlbar.vala"
		gtk_widget_hide ((GtkWidget*) _tmp6_);
#line 1948 "urlbar.c"
	}
#line 316 "/home/test/core/core/urlbar.vala"
	result = TRUE;
#line 316 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (widget);
#line 316 "/home/test/core/core/urlbar.vala"
	return result;
#line 1956 "urlbar.c"
}


static gboolean
____lambda31__gtk_widget_button_press_event (GtkWidget* _sender,
                                             GdkEventButton* event,
                                             gpointer self)
{
	gboolean result;
	result = ___lambda31_ ((MidoriUrlbar*) self, event);
#line 311 "/home/test/core/core/urlbar.vala"
	return result;
#line 1969 "urlbar.c"
}


static void
_vala_SoupURI_free (SoupURI* self)
{
#line 320 "/home/test/core/core/urlbar.vala"
	g_boxed_free (soup_uri_get_type (), self);
#line 1978 "urlbar.c"
}


static void
___lambda32_ (MidoriUrlbar* self)
{
	MidoriTab* tab = NULL;
	GtkWidget* _tmp0_;
	MidoriTab* _tmp1_;
	MidoriTab* _tmp2_;
	MidoriTab* _tmp3_;
	WebKitWebContext* _tmp4_;
	WebKitWebContext* _tmp5_;
	WebKitWebContext* _tmp6_;
	GTlsCertificate* _tmp7_;
	GTlsCertificate* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	SoupURI* _tmp11_;
	SoupURI* _tmp12_;
	const gchar* _tmp13_;
	GtkPopover* _tmp14_;
#line 319 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_widget_get_toplevel ((GtkWidget*) self);
#line 319 "/home/test/core/core/urlbar.vala"
	_tmp1_ = midori_browser_get_tab (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, MIDORI_TYPE_BROWSER, MidoriBrowser));
#line 319 "/home/test/core/core/urlbar.vala"
	_tmp2_ = _tmp1_;
#line 319 "/home/test/core/core/urlbar.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 319 "/home/test/core/core/urlbar.vala"
	tab = _tmp3_;
#line 320 "/home/test/core/core/urlbar.vala"
	g_object_get ((WebKitWebView*) tab, "web-context", &_tmp4_, NULL);
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp5_ = _tmp4_;
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp6_ = _tmp5_;
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp7_ = midori_tab_get_tls (tab);
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp8_ = _tmp7_;
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp9_ = midori_urlbar_get_uri (self);
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp10_ = _tmp9_;
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp11_ = soup_uri_new (_tmp10_);
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp12_ = _tmp11_;
#line 320 "/home/test/core/core/urlbar.vala"
	_tmp13_ = _tmp12_->host;
#line 320 "/home/test/core/core/urlbar.vala"
	webkit_web_context_allow_tls_certificate_for_host (_tmp6_, _tmp8_, _tmp13_);
#line 320 "/home/test/core/core/urlbar.vala"
	__vala_SoupURI_free0 (_tmp12_);
#line 320 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (_tmp6_);
#line 321 "/home/test/core/core/urlbar.vala"
	_tmp14_ = self->priv->security;
#line 321 "/home/test/core/core/urlbar.vala"
	gtk_widget_hide ((GtkWidget*) _tmp14_);
#line 322 "/home/test/core/core/urlbar.vala"
	webkit_web_view_reload ((WebKitWebView*) tab);
#line 318 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (tab);
#line 2045 "urlbar.c"
}


static void
____lambda32__gtk_button_clicked (GtkButton* _sender,
                                  gpointer self)
{
#line 318 "/home/test/core/core/urlbar.vala"
	___lambda32_ ((MidoriUrlbar*) self);
#line 2055 "urlbar.c"
}


static void
midori_urlbar_icon_pressed (MidoriUrlbar* self,
                            GtkEntryIconPosition position,
                            GdkEvent* event)
{
	GTlsCertificate* tls = NULL;
	GtkWidget* _tmp0_;
	MidoriTab* _tmp1_;
	MidoriTab* _tmp2_;
	GTlsCertificate* _tmp3_;
	GTlsCertificate* _tmp4_;
	GTlsCertificate* _tmp5_;
	GcrSimpleCertificate* _tmp6_ = NULL;
	GTlsCertificate* _tmp7_;
	GcrSimpleCertificate* certificate = NULL;
	GcrSimpleCertificate* _tmp14_;
	GcrCertificateWidget* _tmp15_;
	GcrCertificateWidget* _tmp25_;
	GTlsCertificate* _tmp26_;
	gboolean _tmp27_ = FALSE;
	GTlsCertificate* _tmp28_;
	GtkButton* _tmp31_;
	GcrCertificateWidget* _tmp32_;
	GcrSimpleCertificate* _tmp33_;
	GtkLabel* _tmp34_;
	gboolean _tmp35_;
	gboolean _tmp36_;
	GtkPopover* _tmp37_;
#line 301 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 301 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (event != NULL);
#line 302 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_widget_get_toplevel ((GtkWidget*) self);
#line 302 "/home/test/core/core/urlbar.vala"
	_tmp1_ = midori_browser_get_tab (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, MIDORI_TYPE_BROWSER, MidoriBrowser));
#line 302 "/home/test/core/core/urlbar.vala"
	_tmp2_ = _tmp1_;
#line 302 "/home/test/core/core/urlbar.vala"
	_tmp3_ = midori_tab_get_tls (_tmp2_);
#line 302 "/home/test/core/core/urlbar.vala"
	_tmp4_ = _tmp3_;
#line 302 "/home/test/core/core/urlbar.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 302 "/home/test/core/core/urlbar.vala"
	tls = _tmp5_;
#line 303 "/home/test/core/core/urlbar.vala"
	_tmp7_ = tls;
#line 303 "/home/test/core/core/urlbar.vala"
	if (_tmp7_ != NULL) {
#line 2109 "urlbar.c"
		GTlsCertificate* _tmp8_;
		GByteArray* _tmp9_;
		GByteArray* _tmp10_;
		GByteArray* _tmp11_;
		guint8* _tmp12_;
		gint _tmp12__length1;
		GcrSimpleCertificate* _tmp13_;
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp8_ = tls;
#line 303 "/home/test/core/core/urlbar.vala"
		g_object_get (_tmp8_, "certificate", &_tmp9_, NULL);
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp10_ = _tmp9_;
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp11_ = _tmp10_;
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp12_ = _tmp11_->data;
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp12__length1 = (gint) _tmp11_->len;
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp13_ = (GcrSimpleCertificate*) gcr_simple_certificate_new (_tmp12_, _tmp12__length1);
#line 303 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (_tmp6_);
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp6_ = _tmp13_;
#line 303 "/home/test/core/core/urlbar.vala"
		_g_byte_array_unref0 (_tmp11_);
#line 2137 "urlbar.c"
	} else {
#line 303 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (_tmp6_);
#line 303 "/home/test/core/core/urlbar.vala"
		_tmp6_ = NULL;
#line 2143 "urlbar.c"
	}
#line 303 "/home/test/core/core/urlbar.vala"
	_tmp14_ = _g_object_ref0 (_tmp6_);
#line 303 "/home/test/core/core/urlbar.vala"
	certificate = _tmp14_;
#line 304 "/home/test/core/core/urlbar.vala"
	_tmp15_ = self->priv->details;
#line 304 "/home/test/core/core/urlbar.vala"
	if (_tmp15_ == NULL) {
#line 2153 "urlbar.c"
		GdkRectangle icon_area = {0};
		GdkRectangle _tmp16_ = {0};
		GtkPopover* _tmp17_;
		GtkPopover* _tmp18_;
		GdkRectangle _tmp19_;
		GtkPopover* _tmp20_;
		GtkButton* _tmp21_;
		GcrCertificateWidget* _tmp22_;
		GtkBox* _tmp23_;
		GcrCertificateWidget* _tmp24_;
#line 305 "/home/test/core/core/urlbar.vala"
		gtk_entry_get_icon_area ((GtkEntry*) self, position, &_tmp16_);
#line 305 "/home/test/core/core/urlbar.vala"
		icon_area = _tmp16_;
#line 306 "/home/test/core/core/urlbar.vala"
		_tmp17_ = self->priv->security;
#line 306 "/home/test/core/core/urlbar.vala"
		gtk_popover_set_relative_to (_tmp17_, (GtkWidget*) self);
#line 307 "/home/test/core/core/urlbar.vala"
		_tmp18_ = self->priv->security;
#line 307 "/home/test/core/core/urlbar.vala"
		_tmp19_ = icon_area;
#line 307 "/home/test/core/core/urlbar.vala"
		g_object_set (_tmp18_, "pointing-to", &_tmp19_, NULL);
#line 311 "/home/test/core/core/urlbar.vala"
		_tmp20_ = self->priv->security;
#line 311 "/home/test/core/core/urlbar.vala"
		g_signal_connect_object ((GtkWidget*) _tmp20_, "button-press-event", (GCallback) ____lambda31__gtk_widget_button_press_event, self, 0);
#line 318 "/home/test/core/core/urlbar.vala"
		_tmp21_ = self->priv->trust;
#line 318 "/home/test/core/core/urlbar.vala"
		g_signal_connect_object (_tmp21_, "clicked", (GCallback) ____lambda32__gtk_button_clicked, self, 0);
#line 326 "/home/test/core/core/urlbar.vala"
		_tmp22_ = gcr_certificate_widget_new (NULL);
#line 326 "/home/test/core/core/urlbar.vala"
		g_object_ref_sink (_tmp22_);
#line 326 "/home/test/core/core/urlbar.vala"
		_g_object_unref0 (self->priv->details);
#line 326 "/home/test/core/core/urlbar.vala"
		self->priv->details = _tmp22_;
#line 327 "/home/test/core/core/urlbar.vala"
		_tmp23_ = self->priv->security_box;
#line 327 "/home/test/core/core/urlbar.vala"
		_tmp24_ = self->priv->details;
#line 327 "/home/test/core/core/urlbar.vala"
		gtk_container_add ((GtkContainer*) _tmp23_, (GtkWidget*) _tmp24_);
#line 2200 "urlbar.c"
	}
#line 329 "/home/test/core/core/urlbar.vala"
	_tmp25_ = self->priv->details;
#line 329 "/home/test/core/core/urlbar.vala"
	_tmp26_ = tls;
#line 329 "/home/test/core/core/urlbar.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp25_, _tmp26_ != NULL);
#line 330 "/home/test/core/core/urlbar.vala"
	_tmp28_ = tls;
#line 330 "/home/test/core/core/urlbar.vala"
	if (_tmp28_ != NULL) {
#line 2212 "urlbar.c"
		gboolean _tmp29_;
		gboolean _tmp30_;
#line 330 "/home/test/core/core/urlbar.vala"
		_tmp29_ = midori_urlbar_get_secure (self);
#line 330 "/home/test/core/core/urlbar.vala"
		_tmp30_ = _tmp29_;
#line 330 "/home/test/core/core/urlbar.vala"
		_tmp27_ = !_tmp30_;
#line 2221 "urlbar.c"
	} else {
#line 330 "/home/test/core/core/urlbar.vala"
		_tmp27_ = FALSE;
#line 2225 "urlbar.c"
	}
#line 330 "/home/test/core/core/urlbar.vala"
	_tmp31_ = self->priv->trust;
#line 330 "/home/test/core/core/urlbar.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp31_, _tmp27_);
#line 331 "/home/test/core/core/urlbar.vala"
	_tmp32_ = self->priv->details;
#line 331 "/home/test/core/core/urlbar.vala"
	_tmp33_ = certificate;
#line 331 "/home/test/core/core/urlbar.vala"
	gcr_certificate_widget_set_certificate (_tmp32_, (GcrCertificate*) _tmp33_);
#line 332 "/home/test/core/core/urlbar.vala"
	_tmp34_ = self->priv->security_status;
#line 332 "/home/test/core/core/urlbar.vala"
	_tmp35_ = midori_urlbar_get_secure (self);
#line 332 "/home/test/core/core/urlbar.vala"
	_tmp36_ = _tmp35_;
#line 332 "/home/test/core/core/urlbar.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp34_, !_tmp36_);
#line 333 "/home/test/core/core/urlbar.vala"
	_tmp37_ = self->priv->security;
#line 333 "/home/test/core/core/urlbar.vala"
	gtk_widget_show ((GtkWidget*) _tmp37_);
#line 301 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (certificate);
#line 301 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (_tmp6_);
#line 301 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (tls);
#line 2255 "urlbar.c"
}


MidoriUrlbar*
midori_urlbar_construct (GType object_type)
{
	MidoriUrlbar * self = NULL;
#line 14 "/home/test/core/core/urlbar.vala"
	self = (MidoriUrlbar*) g_object_new (object_type, NULL);
#line 14 "/home/test/core/core/urlbar.vala"
	return self;
#line 2267 "urlbar.c"
}


MidoriUrlbar*
midori_urlbar_new (void)
{
#line 14 "/home/test/core/core/urlbar.vala"
	return midori_urlbar_construct (MIDORI_TYPE_URLBAR);
#line 2276 "urlbar.c"
}


const gchar*
midori_urlbar_get_key (MidoriUrlbar* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 15 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 15 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->_key;
#line 15 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 15 "/home/test/core/core/urlbar.vala"
	return result;
#line 2293 "urlbar.c"
}


void
midori_urlbar_set_key (MidoriUrlbar* self,
                       const gchar* value)
{
#line 15 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 15 "/home/test/core/core/urlbar.vala"
	if (g_strcmp0 (value, midori_urlbar_get_key (self)) != 0) {
#line 2305 "urlbar.c"
		gchar* _tmp0_;
#line 15 "/home/test/core/core/urlbar.vala"
		_tmp0_ = g_strdup (value);
#line 15 "/home/test/core/core/urlbar.vala"
		_g_free0 (self->priv->_key);
#line 15 "/home/test/core/core/urlbar.vala"
		self->priv->_key = _tmp0_;
#line 15 "/home/test/core/core/urlbar.vala"
		g_object_notify_by_pspec ((GObject *) self, midori_urlbar_properties[MIDORI_URLBAR_KEY_PROPERTY]);
#line 2315 "urlbar.c"
	}
}


GRegex*
midori_urlbar_get_regex (MidoriUrlbar* self)
{
	GRegex* result;
	GRegex* _tmp0_;
#line 16 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 16 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->_regex;
#line 16 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 16 "/home/test/core/core/urlbar.vala"
	return result;
#line 2333 "urlbar.c"
}


static gpointer
_g_regex_ref0 (gpointer self)
{
#line 16 "/home/test/core/core/urlbar.vala"
	return self ? g_regex_ref (self) : NULL;
#line 2342 "urlbar.c"
}


void
midori_urlbar_set_regex (MidoriUrlbar* self,
                         GRegex* value)
{
#line 16 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 16 "/home/test/core/core/urlbar.vala"
	if (midori_urlbar_get_regex (self) != value) {
#line 2354 "urlbar.c"
		GRegex* _tmp0_;
#line 16 "/home/test/core/core/urlbar.vala"
		_tmp0_ = _g_regex_ref0 (value);
#line 16 "/home/test/core/core/urlbar.vala"
		_g_regex_unref0 (self->priv->_regex);
#line 16 "/home/test/core/core/urlbar.vala"
		self->priv->_regex = _tmp0_;
#line 16 "/home/test/core/core/urlbar.vala"
		g_object_notify_by_pspec ((GObject *) self, midori_urlbar_properties[MIDORI_URLBAR_REGEX_PROPERTY]);
#line 2364 "urlbar.c"
	}
}


const gchar*
midori_urlbar_get_location (MidoriUrlbar* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 17 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 17 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->_location;
#line 17 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 17 "/home/test/core/core/urlbar.vala"
	return result;
#line 2382 "urlbar.c"
}


void
midori_urlbar_set_location (MidoriUrlbar* self,
                            const gchar* value)
{
#line 17 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 17 "/home/test/core/core/urlbar.vala"
	if (g_strcmp0 (value, midori_urlbar_get_location (self)) != 0) {
#line 2394 "urlbar.c"
		gchar* _tmp0_;
#line 17 "/home/test/core/core/urlbar.vala"
		_tmp0_ = g_strdup (value);
#line 17 "/home/test/core/core/urlbar.vala"
		_g_free0 (self->priv->_location);
#line 17 "/home/test/core/core/urlbar.vala"
		self->priv->_location = _tmp0_;
#line 17 "/home/test/core/core/urlbar.vala"
		g_object_notify_by_pspec ((GObject *) self, midori_urlbar_properties[MIDORI_URLBAR_LOCATION_PROPERTY]);
#line 2404 "urlbar.c"
	}
}


const gchar*
midori_urlbar_get_uri (MidoriUrlbar* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 19 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 20 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->_uri;
#line 20 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 20 "/home/test/core/core/urlbar.vala"
	return result;
#line 2422 "urlbar.c"
}


void
midori_urlbar_set_uri (MidoriUrlbar* self,
                       const gchar* value)
{
	gchar* _tmp0_;
	const gchar* _tmp1_ = NULL;
	gboolean _tmp2_;
	gboolean _tmp3_;
#line 21 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 22 "/home/test/core/core/urlbar.vala"
	_tmp0_ = g_strdup (value);
#line 22 "/home/test/core/core/urlbar.vala"
	_g_free0 (self->priv->_uri);
#line 22 "/home/test/core/core/urlbar.vala"
	self->priv->_uri = _tmp0_;
#line 23 "/home/test/core/core/urlbar.vala"
	midori_urlbar_set_location (self, value);
#line 25 "/home/test/core/core/urlbar.vala"
	_tmp2_ = midori_urlbar_get_blank (self);
#line 25 "/home/test/core/core/urlbar.vala"
	_tmp3_ = _tmp2_;
#line 25 "/home/test/core/core/urlbar.vala"
	if (_tmp3_) {
#line 25 "/home/test/core/core/urlbar.vala"
		_tmp1_ = "";
#line 2452 "urlbar.c"
	} else {
#line 25 "/home/test/core/core/urlbar.vala"
		_tmp1_ = value;
#line 2456 "urlbar.c"
	}
#line 25 "/home/test/core/core/urlbar.vala"
	gtk_entry_set_text ((GtkEntry*) self, _tmp1_);
#line 26 "/home/test/core/core/urlbar.vala"
	gtk_editable_set_position ((GtkEditable*) self, -1);
#line 27 "/home/test/core/core/urlbar.vala"
	midori_urlbar_update_icon (self);
#line 21 "/home/test/core/core/urlbar.vala"
	g_object_notify_by_pspec ((GObject *) self, midori_urlbar_properties[MIDORI_URLBAR_URI_PROPERTY]);
#line 2466 "urlbar.c"
}


gboolean
midori_urlbar_get_secure (MidoriUrlbar* self)
{
	gboolean result;
	gboolean _tmp0_;
#line 30 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 30 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->_secure;
#line 30 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 30 "/home/test/core/core/urlbar.vala"
	return result;
#line 2483 "urlbar.c"
}


void
midori_urlbar_set_secure (MidoriUrlbar* self,
                          gboolean value)
{
#line 30 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 31 "/home/test/core/core/urlbar.vala"
	self->priv->_secure = value;
#line 32 "/home/test/core/core/urlbar.vala"
	midori_urlbar_update_icon (self);
#line 30 "/home/test/core/core/urlbar.vala"
	g_object_notify_by_pspec ((GObject *) self, midori_urlbar_properties[MIDORI_URLBAR_SECURE_PROPERTY]);
#line 2499 "urlbar.c"
}


gboolean
midori_urlbar_get_blank (MidoriUrlbar* self)
{
	gboolean result;
	gboolean _tmp0_ = FALSE;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
#line 34 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 34 "/home/test/core/core/urlbar.vala"
	_tmp1_ = midori_urlbar_get_uri (self);
#line 34 "/home/test/core/core/urlbar.vala"
	_tmp2_ = _tmp1_;
#line 34 "/home/test/core/core/urlbar.vala"
	if (g_strcmp0 (_tmp2_, "about:blank") == 0) {
#line 34 "/home/test/core/core/urlbar.vala"
		_tmp0_ = TRUE;
#line 2520 "urlbar.c"
	} else {
		const gchar* _tmp3_;
		const gchar* _tmp4_;
#line 34 "/home/test/core/core/urlbar.vala"
		_tmp3_ = midori_urlbar_get_uri (self);
#line 34 "/home/test/core/core/urlbar.vala"
		_tmp4_ = _tmp3_;
#line 34 "/home/test/core/core/urlbar.vala"
		_tmp0_ = g_strcmp0 (_tmp4_, "internal:speed-dial") == 0;
#line 2530 "urlbar.c"
	}
#line 34 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 34 "/home/test/core/core/urlbar.vala"
	return result;
#line 2536 "urlbar.c"
}


static GtkListBoxRow*
midori_urlbar_get_selected_row (MidoriUrlbar* self)
{
	GtkListBoxRow* result;
	GtkListBoxRow* _tmp0_;
#line 40 "/home/test/core/core/urlbar.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 40 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->_selected_row;
#line 40 "/home/test/core/core/urlbar.vala"
	result = _tmp0_;
#line 40 "/home/test/core/core/urlbar.vala"
	return result;
#line 2553 "urlbar.c"
}


static void
midori_urlbar_set_selected_row (MidoriUrlbar* self,
                                GtkListBoxRow* value)
{
	GtkListBoxRow* _tmp0_;
#line 40 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (self != NULL);
#line 40 "/home/test/core/core/urlbar.vala"
	_tmp0_ = _g_object_ref0 (value);
#line 40 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->_selected_row);
#line 40 "/home/test/core/core/urlbar.vala"
	self->priv->_selected_row = _tmp0_;
#line 2570 "urlbar.c"
}


static void
_midori_urlbar_resize_gtk_widget_size_allocate (GtkWidget* _sender,
                                                GtkAllocation* allocation,
                                                gpointer self)
{
#line 52 "/home/test/core/core/urlbar.vala"
	midori_urlbar_resize ((MidoriUrlbar*) self, allocation);
#line 2581 "urlbar.c"
}


static void
_midori_urlbar___lambda33_ (MidoriUrlbar* self)
{
	GtkPopover* _tmp0_;
#line 54 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->suggestions;
#line 54 "/home/test/core/core/urlbar.vala"
	gtk_grab_remove ((GtkWidget*) _tmp0_);
#line 2593 "urlbar.c"
}


static void
__midori_urlbar___lambda33__gtk_widget_hide (GtkWidget* _sender,
                                             gpointer self)
{
#line 53 "/home/test/core/core/urlbar.vala"
	_midori_urlbar___lambda33_ ((MidoriUrlbar*) self);
#line 2603 "urlbar.c"
}


static void
_midori_urlbar___lambda34_ (MidoriUrlbar* self,
                            GtkListBoxRow* row)
{
#line 58 "/home/test/core/core/urlbar.vala"
	midori_urlbar_set_selected_row (self, row);
#line 2613 "urlbar.c"
}


static void
__midori_urlbar___lambda34__gtk_list_box_row_selected (GtkListBox* _sender,
                                                       GtkListBoxRow* row,
                                                       gpointer self)
{
#line 57 "/home/test/core/core/urlbar.vala"
	_midori_urlbar___lambda34_ ((MidoriUrlbar*) self, row);
#line 2624 "urlbar.c"
}


static void
_midori_urlbar___lambda35_ (MidoriUrlbar* self,
                            GtkListBoxRow* row)
{
	MidoriSuggestionRow* suggestion = NULL;
	MidoriSuggestionRow* _tmp0_;
	MidoriSuggestionRow* _tmp1_;
	MidoriDatabaseItem* _tmp2_;
	MidoriDatabaseItem* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
#line 60 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (row != NULL);
#line 61 "/home/test/core/core/urlbar.vala"
	midori_urlbar_popdown (self);
#line 62 "/home/test/core/core/urlbar.vala"
	_tmp0_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (row, MIDORI_TYPE_SUGGESTION_ROW, MidoriSuggestionRow));
#line 62 "/home/test/core/core/urlbar.vala"
	suggestion = _tmp0_;
#line 63 "/home/test/core/core/urlbar.vala"
	_tmp1_ = suggestion;
#line 63 "/home/test/core/core/urlbar.vala"
	_tmp2_ = midori_suggestion_row_get_item (_tmp1_);
#line 63 "/home/test/core/core/urlbar.vala"
	_tmp3_ = _tmp2_;
#line 63 "/home/test/core/core/urlbar.vala"
	_tmp4_ = midori_database_item_get_uri (_tmp3_);
#line 63 "/home/test/core/core/urlbar.vala"
	_tmp5_ = _tmp4_;
#line 63 "/home/test/core/core/urlbar.vala"
	midori_urlbar_set_uri (self, _tmp5_);
#line 60 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (suggestion);
#line 2661 "urlbar.c"
}


static void
__midori_urlbar___lambda35__gtk_list_box_row_activated (GtkListBox* _sender,
                                                        GtkListBoxRow* row,
                                                        gpointer self)
{
#line 60 "/home/test/core/core/urlbar.vala"
	_midori_urlbar___lambda35_ ((MidoriUrlbar*) self, row);
#line 2672 "urlbar.c"
}


static void
_midori_urlbar___lambda36_ (MidoriUrlbar* self,
                            const gchar* new_text,
                            gint new_position,
                            gint* position)
{
	const gchar* _tmp0_;
	const gchar* _tmp1_;
#line 66 "/home/test/core/core/urlbar.vala"
	g_return_if_fail (new_text != NULL);
#line 67 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_entry_get_text ((GtkEntry*) self);
#line 67 "/home/test/core/core/urlbar.vala"
	_tmp1_ = _tmp0_;
#line 67 "/home/test/core/core/urlbar.vala"
	midori_urlbar_update_key (self, _tmp1_);
#line 2692 "urlbar.c"
}


static void
__midori_urlbar___lambda36__gtk_editable_insert_text (GtkEditable* _sender,
                                                      const gchar* new_text,
                                                      gint new_text_length,
                                                      gint* position,
                                                      gpointer self)
{
#line 66 "/home/test/core/core/urlbar.vala"
	_midori_urlbar___lambda36_ ((MidoriUrlbar*) self, new_text, new_text_length, position);
#line 2705 "urlbar.c"
}


static void
_midori_urlbar___lambda37_ (MidoriUrlbar* self,
                            gint start_pos,
                            gint end_pos)
{
	const gchar* _tmp0_;
	const gchar* _tmp1_;
#line 70 "/home/test/core/core/urlbar.vala"
	_tmp0_ = gtk_entry_get_text ((GtkEntry*) self);
#line 70 "/home/test/core/core/urlbar.vala"
	_tmp1_ = _tmp0_;
#line 70 "/home/test/core/core/urlbar.vala"
	midori_urlbar_update_key (self, _tmp1_);
#line 2722 "urlbar.c"
}


static void
__midori_urlbar___lambda37__gtk_editable_delete_text (GtkEditable* _sender,
                                                      gint start_pos,
                                                      gint end_pos,
                                                      gpointer self)
{
#line 69 "/home/test/core/core/urlbar.vala"
	_midori_urlbar___lambda37_ ((MidoriUrlbar*) self, start_pos, end_pos);
#line 2734 "urlbar.c"
}


static void
_midori_urlbar_icon_pressed_gtk_entry_icon_press (GtkEntry* _sender,
                                                  GtkEntryIconPosition icon_pos,
                                                  GdkEventButton* event,
                                                  gpointer self)
{
#line 72 "/home/test/core/core/urlbar.vala"
	midori_urlbar_icon_pressed ((MidoriUrlbar*) self, icon_pos, event);
#line 2746 "urlbar.c"
}


static GObject *
midori_urlbar_constructor (GType type,
                           guint n_construct_properties,
                           GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	MidoriUrlbar * self;
	GtkPopover* _tmp0_;
	GtkListBox* _tmp1_;
	GtkListBox* _tmp2_;
#line 51 "/home/test/core/core/urlbar.vala"
	parent_class = G_OBJECT_CLASS (midori_urlbar_parent_class);
#line 51 "/home/test/core/core/urlbar.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 51 "/home/test/core/core/urlbar.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MIDORI_TYPE_URLBAR, MidoriUrlbar);
#line 52 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object ((GtkWidget*) self, "size-allocate", (GCallback) _midori_urlbar_resize_gtk_widget_size_allocate, self, 0);
#line 53 "/home/test/core/core/urlbar.vala"
	_tmp0_ = self->priv->suggestions;
#line 53 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object ((GtkWidget*) _tmp0_, "hide", (GCallback) __midori_urlbar___lambda33__gtk_widget_hide, self, 0);
#line 57 "/home/test/core/core/urlbar.vala"
	_tmp1_ = self->priv->listbox;
#line 57 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object (_tmp1_, "row-selected", (GCallback) __midori_urlbar___lambda34__gtk_list_box_row_selected, self, 0);
#line 60 "/home/test/core/core/urlbar.vala"
	_tmp2_ = self->priv->listbox;
#line 60 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object (_tmp2_, "row-activated", (GCallback) __midori_urlbar___lambda35__gtk_list_box_row_activated, self, 0);
#line 66 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object ((GtkEditable*) self, "insert-text", (GCallback) __midori_urlbar___lambda36__gtk_editable_insert_text, self, G_CONNECT_AFTER);
#line 69 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object ((GtkEditable*) self, "delete-text", (GCallback) __midori_urlbar___lambda37__gtk_editable_delete_text, self, G_CONNECT_AFTER);
#line 72 "/home/test/core/core/urlbar.vala"
	g_signal_connect_object ((GtkEntry*) self, "icon-press", (GCallback) _midori_urlbar_icon_pressed_gtk_entry_icon_press, self, 0);
#line 51 "/home/test/core/core/urlbar.vala"
	return obj;
#line 2789 "urlbar.c"
}


static void
midori_urlbar_class_init (MidoriUrlbarClass * klass)
{
	gint MidoriUrlbar_private_offset;
#line 14 "/home/test/core/core/urlbar.vala"
	midori_urlbar_parent_class = g_type_class_peek_parent (klass);
#line 14 "/home/test/core/core/urlbar.vala"
	g_type_class_add_private (klass, sizeof (MidoriUrlbarPrivate));
#line 14 "/home/test/core/core/urlbar.vala"
	((GtkWidgetClass *) klass)->key_press_event = (gboolean (*) (GtkWidget*, GdkEventKey*)) midori_urlbar_real_key_press_event;
#line 14 "/home/test/core/core/urlbar.vala"
	((GtkWidgetClass *) klass)->focus_out_event = (gboolean (*) (GtkWidget*, GdkEventFocus*)) midori_urlbar_real_focus_out_event;
#line 14 "/home/test/core/core/urlbar.vala"
	((GtkEntryClass *) klass)->populate_popup = (void (*) (GtkEntry*, GtkMenu*)) midori_urlbar_real_populate_popup;
#line 14 "/home/test/core/core/urlbar.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_midori_urlbar_get_property;
#line 14 "/home/test/core/core/urlbar.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_midori_urlbar_set_property;
#line 14 "/home/test/core/core/urlbar.vala"
	G_OBJECT_CLASS (klass)->constructor = midori_urlbar_constructor;
#line 14 "/home/test/core/core/urlbar.vala"
	G_OBJECT_CLASS (klass)->finalize = midori_urlbar_finalize;
#line 14 "/home/test/core/core/urlbar.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_URLBAR_KEY_PROPERTY, midori_urlbar_properties[MIDORI_URLBAR_KEY_PROPERTY] = g_param_spec_string ("key", "key", "key", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/urlbar.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_URLBAR_REGEX_PROPERTY, midori_urlbar_properties[MIDORI_URLBAR_REGEX_PROPERTY] = g_param_spec_boxed ("regex", "regex", "regex", G_TYPE_REGEX, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/urlbar.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_URLBAR_LOCATION_PROPERTY, midori_urlbar_properties[MIDORI_URLBAR_LOCATION_PROPERTY] = g_param_spec_string ("location", "location", "location", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/urlbar.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_URLBAR_URI_PROPERTY, midori_urlbar_properties[MIDORI_URLBAR_URI_PROPERTY] = g_param_spec_string ("uri", "uri", "uri", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/urlbar.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_URLBAR_SECURE_PROPERTY, midori_urlbar_properties[MIDORI_URLBAR_SECURE_PROPERTY] = g_param_spec_boolean ("secure", "secure", "secure", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/urlbar.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_URLBAR_BLANK_PROPERTY, midori_urlbar_properties[MIDORI_URLBAR_BLANK_PROPERTY] = g_param_spec_boolean ("blank", "blank", "blank", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 14 "/home/test/core/core/urlbar.vala"
	MidoriUrlbar_private_offset = g_type_class_get_instance_private_offset (klass);
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/ui/urlbar.ui");
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "suggestions", FALSE, MidoriUrlbar_private_offset + G_STRUCT_OFFSET (MidoriUrlbarPrivate, suggestions));
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "listbox", FALSE, MidoriUrlbar_private_offset + G_STRUCT_OFFSET (MidoriUrlbarPrivate, listbox));
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "security", FALSE, MidoriUrlbar_private_offset + G_STRUCT_OFFSET (MidoriUrlbarPrivate, security));
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "security_box", FALSE, MidoriUrlbar_private_offset + G_STRUCT_OFFSET (MidoriUrlbarPrivate, security_box));
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "trust", FALSE, MidoriUrlbar_private_offset + G_STRUCT_OFFSET (MidoriUrlbarPrivate, trust));
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "security_status", FALSE, MidoriUrlbar_private_offset + G_STRUCT_OFFSET (MidoriUrlbarPrivate, security_status));
#line 2843 "urlbar.c"
}


static void
midori_urlbar_instance_init (MidoriUrlbar * self)
{
#line 14 "/home/test/core/core/urlbar.vala"
	self->priv = MIDORI_URLBAR_GET_PRIVATE (self);
#line 29 "/home/test/core/core/urlbar.vala"
	self->priv->_secure = FALSE;
#line 40 "/home/test/core/core/urlbar.vala"
	self->priv->_selected_row = NULL;
#line 49 "/home/test/core/core/urlbar.vala"
	self->priv->details = NULL;
#line 14 "/home/test/core/core/urlbar.vala"
	gtk_widget_init_template (GTK_WIDGET (self));
#line 2860 "urlbar.c"
}


static void
midori_urlbar_finalize (GObject * obj)
{
	MidoriUrlbar * self;
#line 14 "/home/test/core/core/urlbar.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MIDORI_TYPE_URLBAR, MidoriUrlbar);
#line 15 "/home/test/core/core/urlbar.vala"
	_g_free0 (self->priv->_key);
#line 16 "/home/test/core/core/urlbar.vala"
	_g_regex_unref0 (self->priv->_regex);
#line 17 "/home/test/core/core/urlbar.vala"
	_g_free0 (self->priv->_location);
#line 18 "/home/test/core/core/urlbar.vala"
	_g_free0 (self->priv->_uri);
#line 37 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->suggestions);
#line 39 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->listbox);
#line 40 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->_selected_row);
#line 42 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->security);
#line 44 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->security_box);
#line 46 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->trust);
#line 48 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->security_status);
#line 49 "/home/test/core/core/urlbar.vala"
	_g_object_unref0 (self->priv->details);
#line 14 "/home/test/core/core/urlbar.vala"
	G_OBJECT_CLASS (midori_urlbar_parent_class)->finalize (obj);
#line 2896 "urlbar.c"
}


GType
midori_urlbar_get_type (void)
{
	static volatile gsize midori_urlbar_type_id__volatile = 0;
	if (g_once_init_enter (&midori_urlbar_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MidoriUrlbarClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) midori_urlbar_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MidoriUrlbar), 0, (GInstanceInitFunc) midori_urlbar_instance_init, NULL };
		GType midori_urlbar_type_id;
		midori_urlbar_type_id = g_type_register_static (gtk_entry_get_type (), "MidoriUrlbar", &g_define_type_info, 0);
		g_once_init_leave (&midori_urlbar_type_id__volatile, midori_urlbar_type_id);
	}
	return midori_urlbar_type_id__volatile;
}


static void
_vala_midori_urlbar_get_property (GObject * object,
                                  guint property_id,
                                  GValue * value,
                                  GParamSpec * pspec)
{
	MidoriUrlbar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MIDORI_TYPE_URLBAR, MidoriUrlbar);
#line 14 "/home/test/core/core/urlbar.vala"
	switch (property_id) {
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_KEY_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		g_value_set_string (value, midori_urlbar_get_key (self));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_REGEX_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		g_value_set_boxed (value, midori_urlbar_get_regex (self));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_LOCATION_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		g_value_set_string (value, midori_urlbar_get_location (self));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_URI_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		g_value_set_string (value, midori_urlbar_get_uri (self));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_SECURE_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		g_value_set_boolean (value, midori_urlbar_get_secure (self));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_BLANK_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		g_value_set_boolean (value, midori_urlbar_get_blank (self));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 2960 "urlbar.c"
		default:
#line 14 "/home/test/core/core/urlbar.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 2966 "urlbar.c"
	}
}


static void
_vala_midori_urlbar_set_property (GObject * object,
                                  guint property_id,
                                  const GValue * value,
                                  GParamSpec * pspec)
{
	MidoriUrlbar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MIDORI_TYPE_URLBAR, MidoriUrlbar);
#line 14 "/home/test/core/core/urlbar.vala"
	switch (property_id) {
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_KEY_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_key (self, g_value_get_string (value));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_REGEX_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_regex (self, g_value_get_boxed (value));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_LOCATION_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_location (self, g_value_get_string (value));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_URI_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_uri (self, g_value_get_string (value));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 14 "/home/test/core/core/urlbar.vala"
		case MIDORI_URLBAR_SECURE_PROPERTY:
#line 14 "/home/test/core/core/urlbar.vala"
		midori_urlbar_set_secure (self, g_value_get_boolean (value));
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 3011 "urlbar.c"
		default:
#line 14 "/home/test/core/core/urlbar.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 14 "/home/test/core/core/urlbar.vala"
		break;
#line 3017 "urlbar.c"
	}
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint
_vala_array_length (gpointer array)
{
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



