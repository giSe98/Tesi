/* tally.c generated by valac 0.40.23, the Vala compiler
 * generated from tally.vala, do not modify */

/*
 Copyright (C) 2018 Christian Dywan <christian@twotoats.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include "webkit2/webkit2.h"
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>


#define MIDORI_TYPE_TALLY (midori_tally_get_type ())
#define MIDORI_TALLY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_TALLY, MidoriTally))
#define MIDORI_TALLY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_TALLY, MidoriTallyClass))
#define MIDORI_IS_TALLY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_TALLY))
#define MIDORI_IS_TALLY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_TALLY))
#define MIDORI_TALLY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_TALLY, MidoriTallyClass))

typedef struct _MidoriTally MidoriTally;
typedef struct _MidoriTallyClass MidoriTallyClass;
typedef struct _MidoriTallyPrivate MidoriTallyPrivate;

#define MIDORI_TYPE_TAB (midori_tab_get_type ())
#define MIDORI_TAB(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_TAB, MidoriTab))
#define MIDORI_TAB_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_TAB, MidoriTabClass))
#define MIDORI_IS_TAB(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_TAB))
#define MIDORI_IS_TAB_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_TAB))
#define MIDORI_TAB_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_TAB, MidoriTabClass))

typedef struct _MidoriTab MidoriTab;
typedef struct _MidoriTabClass MidoriTabClass;

#define MIDORI_TYPE_FAVICON (midori_favicon_get_type ())
#define MIDORI_FAVICON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_FAVICON, MidoriFavicon))
#define MIDORI_FAVICON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_FAVICON, MidoriFaviconClass))
#define MIDORI_IS_FAVICON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_FAVICON))
#define MIDORI_IS_FAVICON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_FAVICON))
#define MIDORI_FAVICON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_FAVICON, MidoriFaviconClass))

typedef struct _MidoriFavicon MidoriFavicon;
typedef struct _MidoriFaviconClass MidoriFaviconClass;
enum  {
	MIDORI_TALLY_0_PROPERTY,
	MIDORI_TALLY_TAB_PROPERTY,
	MIDORI_TALLY_URI_PROPERTY,
	MIDORI_TALLY_TITLE_PROPERTY,
	MIDORI_TALLY_SHOW_CLOSE_PROPERTY,
	MIDORI_TALLY_ACTIVE_PROPERTY,
	MIDORI_TALLY_NUM_PROPERTIES
};
static GParamSpec* midori_tally_properties[MIDORI_TALLY_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _Block22Data Block22Data;

#define MIDORI_TYPE_SETTINGS (midori_settings_get_type ())
#define MIDORI_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_SETTINGS, MidoriSettings))
#define MIDORI_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_SETTINGS, MidoriSettingsClass))
#define MIDORI_IS_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_SETTINGS))
#define MIDORI_IS_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_SETTINGS))
#define MIDORI_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_SETTINGS, MidoriSettingsClass))

typedef struct _MidoriSettings MidoriSettings;
typedef struct _MidoriSettingsClass MidoriSettingsClass;

#define MIDORI_TYPE_CORE_SETTINGS (midori_core_settings_get_type ())
#define MIDORI_CORE_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_CORE_SETTINGS, MidoriCoreSettings))
#define MIDORI_CORE_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_CORE_SETTINGS, MidoriCoreSettingsClass))
#define MIDORI_IS_CORE_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_CORE_SETTINGS))
#define MIDORI_IS_CORE_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_CORE_SETTINGS))
#define MIDORI_CORE_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_CORE_SETTINGS, MidoriCoreSettingsClass))

typedef struct _MidoriCoreSettings MidoriCoreSettings;
typedef struct _MidoriCoreSettingsClass MidoriCoreSettingsClass;
#define __vala_GdkColor_free0(var) ((var == NULL) ? NULL : (var = (_vala_GdkColor_free (var), NULL)))

#define MIDORI_TYPE_APP (midori_app_get_type ())
#define MIDORI_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_APP, MidoriApp))
#define MIDORI_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_APP, MidoriAppClass))
#define MIDORI_IS_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_APP))
#define MIDORI_IS_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_APP))
#define MIDORI_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_APP, MidoriAppClass))

typedef struct _MidoriApp MidoriApp;
typedef struct _MidoriAppClass MidoriAppClass;

#define MIDORI_TYPE_BROWSER (midori_browser_get_type ())
#define MIDORI_BROWSER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_BROWSER, MidoriBrowser))
#define MIDORI_BROWSER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_BROWSER, MidoriBrowserClass))
#define MIDORI_IS_BROWSER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_BROWSER))
#define MIDORI_IS_BROWSER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_BROWSER))
#define MIDORI_BROWSER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_BROWSER, MidoriBrowserClass))

typedef struct _MidoriBrowser MidoriBrowser;
typedef struct _MidoriBrowserClass MidoriBrowserClass;
typedef struct _MidoriBrowserPrivate MidoriBrowserPrivate;

#define MIDORI_TYPE_STATUSBAR (midori_statusbar_get_type ())
#define MIDORI_STATUSBAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_STATUSBAR, MidoriStatusbar))
#define MIDORI_STATUSBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_STATUSBAR, MidoriStatusbarClass))
#define MIDORI_IS_STATUSBAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_STATUSBAR))
#define MIDORI_IS_STATUSBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_STATUSBAR))
#define MIDORI_STATUSBAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_STATUSBAR, MidoriStatusbarClass))

typedef struct _MidoriStatusbar MidoriStatusbar;
typedef struct _MidoriStatusbarClass MidoriStatusbarClass;
enum  {
	MIDORI_TALLY_CLICKED_SIGNAL,
	MIDORI_TALLY_NUM_SIGNALS
};
static guint midori_tally_signals[MIDORI_TALLY_NUM_SIGNALS] = {0};

struct _MidoriTally {
	GtkEventBox parent_instance;
	MidoriTallyPrivate * priv;
};

struct _MidoriTallyClass {
	GtkEventBoxClass parent_class;
};

struct _MidoriTallyPrivate {
	MidoriTab* _tab;
	gchar* _uri;
	gchar* _title;
	gboolean _show_close;
	gboolean _active;
	GSimpleActionGroup* group;
	GtkLabel* caption;
	GtkSpinner* spinner;
	MidoriFavicon* favicon;
	GtkImage* audio;
	GtkButton* close;
};

struct _Block22Data {
	int _ref_count_;
	MidoriTally* self;
	MidoriTab* tab;
};

struct _MidoriBrowser {
	GtkApplicationWindow parent_instance;
	MidoriBrowserPrivate * priv;
	GtkStack* tabs;
	GtkOverlay* overlay;
	MidoriStatusbar* statusbar;
};

struct _MidoriBrowserClass {
	GtkApplicationWindowClass parent_class;
};


static gpointer midori_tally_parent_class = NULL;

GType midori_tally_get_type (void) G_GNUC_CONST;
GType midori_tab_get_type (void) G_GNUC_CONST;
GType midori_favicon_get_type (void) G_GNUC_CONST;
#define MIDORI_TALLY_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), MIDORI_TYPE_TALLY, MidoriTallyPrivate))
MidoriTally* midori_tally_new (MidoriTab* tab);
MidoriTally* midori_tally_construct (GType object_type,
                                     MidoriTab* tab);
static Block22Data* block22_data_ref (Block22Data* _data22_);
static void block22_data_unref (void * _userdata_);
const gchar* midori_tab_get_display_uri (MidoriTab* self);
const gchar* midori_tab_get_display_title (MidoriTab* self);
void midori_tally_set_title (MidoriTally* self,
                             const gchar* value);
static void __lambda106_ (Block22Data* _data22_);
static void ___lambda106__gtk_button_clicked (GtkButton* _sender,
                                       gpointer self);
static void midori_tally_apply_color (MidoriTally* self);
static void _midori_tally_apply_color_g_object_notify (GObject* _sender,
                                                GParamSpec* pspec,
                                                gpointer self);
static void __lambda107_ (Block22Data* _data22_,
                   GParamSpec* pspec);
static void ___lambda107__g_object_notify (GObject* _sender,
                                    GParamSpec* pspec,
                                    gpointer self);
static void __lambda108_ (MidoriTally* self,
                   GParamSpec* pspec);
static void midori_tally_update_visibility (MidoriTally* self);
static void ___lambda108__g_object_notify (GObject* _sender,
                                    GParamSpec* pspec,
                                    gpointer self);
GType midori_settings_get_type (void) G_GNUC_CONST;
GType midori_core_settings_get_type (void) G_GNUC_CONST;
MidoriCoreSettings* midori_core_settings_get_default (void);
static void __lambda109_ (MidoriTally* self,
                   GParamSpec* pspec);
static void ___lambda109__g_object_notify (GObject* _sender,
                                    GParamSpec* pspec,
                                    gpointer self);
static void midori_tally_update_close_position (MidoriTally* self);
static void __lambda110_ (MidoriTally* self,
                   GParamSpec* pspec);
static void ___lambda110__g_object_notify (GObject* _sender,
                                    GParamSpec* pspec,
                                    gpointer self);
MidoriTab* midori_tally_get_tab (MidoriTally* self);
const gchar* midori_tab_get_color (MidoriTab* self);
static void _vala_GdkColor_free (GdkColor* self);
static GdkColor* _vala_GdkColor_copy (GdkColor* self);
gboolean midori_tab_get_pinned (MidoriTab* self);
gboolean midori_core_settings_get_close_buttons_on_tabs (MidoriCoreSettings* self);
static gboolean midori_tally_real_button_press_event (GtkWidget* base,
                                               GdkEventButton* event);
gboolean midori_tally_get_show_close (MidoriTally* self);
GType midori_app_get_type (void) G_GNUC_CONST;
static gboolean midori_tally_real_button_release_event (GtkWidget* base,
                                                 GdkEventButton* event);
void midori_tally_set_tab (MidoriTally* self,
                           MidoriTab* value);
const gchar* midori_tally_get_uri (MidoriTally* self);
void midori_tally_set_uri (MidoriTally* self,
                           const gchar* value);
const gchar* midori_tally_get_title (MidoriTally* self);
void midori_tally_set_show_close (MidoriTally* self,
                                  gboolean value);
gboolean midori_tally_get_active (MidoriTally* self);
void midori_tally_set_active (MidoriTally* self,
                              gboolean value);
static GObject * midori_tally_constructor (GType type,
                                    guint n_construct_properties,
                                    GObjectConstructParam * construct_properties);
static gboolean _midori_tally___lambda111_ (MidoriTally* self,
                                     GdkEventCrossing* event);
static gboolean __midori_tally___lambda111__gtk_widget_enter_notify_event (GtkWidget* _sender,
                                                                    GdkEventCrossing* event,
                                                                    gpointer self);
static gboolean _midori_tally___lambda112_ (MidoriTally* self,
                                     GdkEventCrossing* event);
static gboolean __midori_tally___lambda112__gtk_widget_leave_notify_event (GtkWidget* _sender,
                                                                    GdkEventCrossing* event,
                                                                    gpointer self);
static void _midori_tally___lambda113_ (MidoriTally* self);
void midori_tab_set_pinned (MidoriTab* self,
                            gboolean value);
static void __midori_tally___lambda113__g_simple_action_activate (GSimpleAction* _sender,
                                                           GVariant* parameter,
                                                           gpointer self);
static void _midori_tally___lambda114_ (MidoriTally* self);
static void __midori_tally___lambda114__g_simple_action_activate (GSimpleAction* _sender,
                                                           GVariant* parameter,
                                                           gpointer self);
static void _midori_tally___lambda115_ (MidoriTally* self);
GType midori_browser_get_type (void) G_GNUC_CONST;
void midori_browser_add (MidoriBrowser* self,
                         MidoriTab* tab);
MidoriTab* midori_tab_new (MidoriTab* related,
                           WebKitWebContext* web_context,
                           const gchar* uri,
                           const gchar* title);
MidoriTab* midori_tab_construct (GType object_type,
                                 MidoriTab* related,
                                 WebKitWebContext* web_context,
                                 const gchar* uri,
                                 const gchar* title);
static void __midori_tally___lambda115__g_simple_action_activate (GSimpleAction* _sender,
                                                           GVariant* parameter,
                                                           gpointer self);
static void _midori_tally___lambda116_ (MidoriTally* self);
GType midori_statusbar_get_type (void) G_GNUC_CONST;
static void __midori_tally___lambda116__g_simple_action_activate (GSimpleAction* _sender,
                                                           GVariant* parameter,
                                                           gpointer self);
static void _midori_tally___lambda117_ (MidoriTally* self);
static void __midori_tally___lambda117__g_simple_action_activate (GSimpleAction* _sender,
                                                           GVariant* parameter,
                                                           gpointer self);
static void midori_tally_finalize (GObject * obj);
static void _vala_midori_tally_get_property (GObject * object,
                                      guint property_id,
                                      GValue * value,
                                      GParamSpec * pspec);
static void _vala_midori_tally_set_property (GObject * object,
                                      guint property_id,
                                      const GValue * value,
                                      GParamSpec * pspec);


static gpointer
_g_object_ref0 (gpointer self)
{
#line 49 "/home/test/core/core/tally.vala"
	return self ? g_object_ref (self) : NULL;
#line 306 "tally.c"
}


static Block22Data*
block22_data_ref (Block22Data* _data22_)
{
#line 49 "/home/test/core/core/tally.vala"
	g_atomic_int_inc (&_data22_->_ref_count_);
#line 49 "/home/test/core/core/tally.vala"
	return _data22_;
#line 317 "tally.c"
}


static void
block22_data_unref (void * _userdata_)
{
	Block22Data* _data22_;
	_data22_ = (Block22Data*) _userdata_;
#line 49 "/home/test/core/core/tally.vala"
	if (g_atomic_int_dec_and_test (&_data22_->_ref_count_)) {
#line 328 "tally.c"
		MidoriTally* self;
#line 49 "/home/test/core/core/tally.vala"
		self = _data22_->self;
#line 49 "/home/test/core/core/tally.vala"
		_g_object_unref0 (_data22_->tab);
#line 49 "/home/test/core/core/tally.vala"
		_g_object_unref0 (self);
#line 49 "/home/test/core/core/tally.vala"
		g_slice_free (Block22Data, _data22_);
#line 338 "tally.c"
	}
}


static void
__lambda106_ (Block22Data* _data22_)
{
	MidoriTally* self;
#line 61 "/home/test/core/core/tally.vala"
	self = _data22_->self;
#line 61 "/home/test/core/core/tally.vala"
	webkit_web_view_try_close ((WebKitWebView*) _data22_->tab);
#line 351 "tally.c"
}


static void
___lambda106__gtk_button_clicked (GtkButton* _sender,
                                  gpointer self)
{
#line 61 "/home/test/core/core/tally.vala"
	__lambda106_ (self);
#line 361 "tally.c"
}


static void
_midori_tally_apply_color_g_object_notify (GObject* _sender,
                                           GParamSpec* pspec,
                                           gpointer self)
{
#line 62 "/home/test/core/core/tally.vala"
	midori_tally_apply_color ((MidoriTally*) self);
#line 372 "tally.c"
}


static void
__lambda107_ (Block22Data* _data22_,
              GParamSpec* pspec)
{
	MidoriTally* self;
	MidoriFavicon* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	GtkSpinner* _tmp3_;
	MidoriFavicon* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
#line 64 "/home/test/core/core/tally.vala"
	self = _data22_->self;
#line 64 "/home/test/core/core/tally.vala"
	g_return_if_fail (pspec != NULL);
#line 65 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->favicon;
#line 65 "/home/test/core/core/tally.vala"
	g_object_get ((WebKitWebView*) _data22_->tab, "is-loading", &_tmp1_, NULL);
#line 65 "/home/test/core/core/tally.vala"
	_tmp2_ = _tmp1_;
#line 65 "/home/test/core/core/tally.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp0_, !_tmp2_);
#line 66 "/home/test/core/core/tally.vala"
	_tmp3_ = self->priv->spinner;
#line 66 "/home/test/core/core/tally.vala"
	_tmp4_ = self->priv->favicon;
#line 66 "/home/test/core/core/tally.vala"
	_tmp5_ = gtk_widget_get_visible ((GtkWidget*) _tmp4_);
#line 66 "/home/test/core/core/tally.vala"
	_tmp6_ = _tmp5_;
#line 66 "/home/test/core/core/tally.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp3_, !_tmp6_);
#line 410 "tally.c"
}


static void
___lambda107__g_object_notify (GObject* _sender,
                               GParamSpec* pspec,
                               gpointer self)
{
#line 64 "/home/test/core/core/tally.vala"
	__lambda107_ (self, pspec);
#line 421 "tally.c"
}


static void
__lambda108_ (MidoriTally* self,
              GParamSpec* pspec)
{
#line 71 "/home/test/core/core/tally.vala"
	g_return_if_fail (pspec != NULL);
#line 72 "/home/test/core/core/tally.vala"
	midori_tally_update_visibility (self);
#line 433 "tally.c"
}


static void
___lambda108__g_object_notify (GObject* _sender,
                               GParamSpec* pspec,
                               gpointer self)
{
#line 71 "/home/test/core/core/tally.vala"
	__lambda108_ ((MidoriTally*) self, pspec);
#line 444 "tally.c"
}


static void
__lambda109_ (MidoriTally* self,
              GParamSpec* pspec)
{
#line 74 "/home/test/core/core/tally.vala"
	g_return_if_fail (pspec != NULL);
#line 75 "/home/test/core/core/tally.vala"
	midori_tally_update_visibility (self);
#line 456 "tally.c"
}


static void
___lambda109__g_object_notify (GObject* _sender,
                               GParamSpec* pspec,
                               gpointer self)
{
#line 74 "/home/test/core/core/tally.vala"
	__lambda109_ ((MidoriTally*) self, pspec);
#line 467 "tally.c"
}


static void
__lambda110_ (MidoriTally* self,
              GParamSpec* pspec)
{
#line 79 "/home/test/core/core/tally.vala"
	g_return_if_fail (pspec != NULL);
#line 80 "/home/test/core/core/tally.vala"
	midori_tally_update_close_position (self);
#line 479 "tally.c"
}


static void
___lambda110__g_object_notify (GObject* _sender,
                               GParamSpec* pspec,
                               gpointer self)
{
#line 79 "/home/test/core/core/tally.vala"
	__lambda110_ ((MidoriTally*) self, pspec);
#line 490 "tally.c"
}


MidoriTally*
midori_tally_construct (GType object_type,
                        MidoriTab* tab)
{
	MidoriTally * self = NULL;
	Block22Data* _data22_;
	MidoriTab* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	gboolean _tmp7_;
	gboolean _tmp8_;
	MidoriFavicon* _tmp9_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	GtkButton* _tmp12_;
	GtkImage* _tmp13_;
	MidoriCoreSettings* _tmp14_;
	MidoriCoreSettings* _tmp15_;
	GtkSettings* _tmp16_;
#line 49 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (tab != NULL, NULL);
#line 49 "/home/test/core/core/tally.vala"
	_data22_ = g_slice_new0 (Block22Data);
#line 49 "/home/test/core/core/tally.vala"
	_data22_->_ref_count_ = 1;
#line 49 "/home/test/core/core/tally.vala"
	_tmp0_ = _g_object_ref0 (tab);
#line 49 "/home/test/core/core/tally.vala"
	_g_object_unref0 (_data22_->tab);
#line 49 "/home/test/core/core/tally.vala"
	_data22_->tab = _tmp0_;
#line 50 "/home/test/core/core/tally.vala"
	_tmp1_ = midori_tab_get_display_uri (_data22_->tab);
#line 50 "/home/test/core/core/tally.vala"
	_tmp2_ = _tmp1_;
#line 50 "/home/test/core/core/tally.vala"
	_tmp3_ = midori_tab_get_display_title (_data22_->tab);
#line 50 "/home/test/core/core/tally.vala"
	_tmp4_ = _tmp3_;
#line 50 "/home/test/core/core/tally.vala"
	_tmp5_ = midori_tab_get_display_title (_data22_->tab);
#line 50 "/home/test/core/core/tally.vala"
	_tmp6_ = _tmp5_;
#line 50 "/home/test/core/core/tally.vala"
	_tmp7_ = gtk_widget_get_visible ((GtkWidget*) _data22_->tab);
#line 50 "/home/test/core/core/tally.vala"
	_tmp8_ = _tmp7_;
#line 50 "/home/test/core/core/tally.vala"
	self = (MidoriTally*) g_object_new (object_type, "tab", _data22_->tab, "uri", _tmp2_, "title", _tmp4_, "tooltip-text", _tmp6_, "visible", _tmp8_, NULL);
#line 50 "/home/test/core/core/tally.vala"
	_data22_->self = g_object_ref (self);
#line 55 "/home/test/core/core/tally.vala"
	_tmp9_ = self->priv->favicon;
#line 55 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) _data22_->tab, "favicon", (GObject*) _tmp9_, "surface", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 56 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) _data22_->tab, "display-uri", (GObject*) self, "uri", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 57 "/home/test/core/core/tally.vala"
	_tmp10_ = midori_tab_get_display_title (_data22_->tab);
#line 57 "/home/test/core/core/tally.vala"
	_tmp11_ = _tmp10_;
#line 57 "/home/test/core/core/tally.vala"
	midori_tally_set_title (self, _tmp11_);
#line 58 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) _data22_->tab, "display-title", (GObject*) self, "title", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 59 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) self, "title", (GObject*) self, "tooltip-text", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 60 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) _data22_->tab, "visible", (GObject*) self, "visible", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 61 "/home/test/core/core/tally.vala"
	_tmp12_ = self->priv->close;
#line 61 "/home/test/core/core/tally.vala"
	g_signal_connect_data (_tmp12_, "clicked", (GCallback) ___lambda106__gtk_button_clicked, block22_data_ref (_data22_), (GClosureNotify) block22_data_unref, 0);
#line 62 "/home/test/core/core/tally.vala"
	g_signal_connect_object ((GObject*) _data22_->tab, "notify::color", (GCallback) _midori_tally_apply_color_g_object_notify, self, 0);
#line 63 "/home/test/core/core/tally.vala"
	midori_tally_apply_color (self);
#line 64 "/home/test/core/core/tally.vala"
	g_signal_connect_data ((GObject*) _data22_->tab, "notify::is-loading", (GCallback) ___lambda107__g_object_notify, block22_data_ref (_data22_), (GClosureNotify) block22_data_unref, 0);
#line 68 "/home/test/core/core/tally.vala"
	_tmp13_ = self->priv->audio;
#line 68 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) _data22_->tab, "is-playing-audio", (GObject*) _tmp13_, "visible", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 71 "/home/test/core/core/tally.vala"
	g_signal_connect_object ((GObject*) _data22_->tab, "notify::pinned", (GCallback) ___lambda108__g_object_notify, self, 0);
#line 74 "/home/test/core/core/tally.vala"
	_tmp14_ = midori_core_settings_get_default ();
#line 74 "/home/test/core/core/tally.vala"
	_tmp15_ = _tmp14_;
#line 74 "/home/test/core/core/tally.vala"
	g_signal_connect_object ((GObject*) _tmp15_, "notify::close-buttons-on-tabs", (GCallback) ___lambda109__g_object_notify, self, 0);
#line 74 "/home/test/core/core/tally.vala"
	_g_object_unref0 (_tmp15_);
#line 78 "/home/test/core/core/tally.vala"
	midori_tally_update_close_position (self);
#line 79 "/home/test/core/core/tally.vala"
	_tmp16_ = gtk_settings_get_default ();
#line 79 "/home/test/core/core/tally.vala"
	g_signal_connect_object ((GObject*) _tmp16_, "notify::gtk-decoration-layout", (GCallback) ___lambda110__g_object_notify, self, 0);
#line 49 "/home/test/core/core/tally.vala"
	block22_data_unref (_data22_);
#line 49 "/home/test/core/core/tally.vala"
	_data22_ = NULL;
#line 49 "/home/test/core/core/tally.vala"
	return self;
#line 603 "tally.c"
}


MidoriTally*
midori_tally_new (MidoriTab* tab)
{
#line 49 "/home/test/core/core/tally.vala"
	return midori_tally_construct (MIDORI_TYPE_TALLY, tab);
#line 612 "tally.c"
}


static void
_vala_GdkColor_free (GdkColor* self)
{
#line 88 "/home/test/core/core/tally.vala"
	g_boxed_free (gdk_color_get_type (), self);
#line 621 "tally.c"
}


static GdkColor*
_vala_GdkColor_copy (GdkColor* self)
{
#line 88 "/home/test/core/core/tally.vala"
	return g_boxed_copy (gdk_color_get_type (), self);
#line 630 "tally.c"
}


static gpointer
__vala_GdkColor_copy0 (gpointer self)
{
#line 88 "/home/test/core/core/tally.vala"
	return self ? _vala_GdkColor_copy (self) : NULL;
#line 639 "tally.c"
}


static void
midori_tally_apply_color (MidoriTally* self)
{
	GdkColor* background_color = NULL;
	GdkColor* foreground_color = NULL;
	MidoriTab* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	GdkColor* _tmp20_;
	GdkColor* _tmp21_;
	GdkColor* _tmp22_;
	GdkColor* _tmp23_;
#line 84 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 85 "/home/test/core/core/tally.vala"
	background_color = NULL;
#line 86 "/home/test/core/core/tally.vala"
	foreground_color = NULL;
#line 87 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 87 "/home/test/core/core/tally.vala"
	_tmp1_ = midori_tab_get_color (_tmp0_);
#line 87 "/home/test/core/core/tally.vala"
	_tmp2_ = _tmp1_;
#line 87 "/home/test/core/core/tally.vala"
	if (_tmp2_ != NULL) {
#line 669 "tally.c"
		MidoriTab* _tmp3_;
		const gchar* _tmp4_;
		const gchar* _tmp5_;
		GdkColor _tmp6_ = {0};
		GdkColor _tmp7_;
		GdkColor* _tmp8_;
		gfloat brightness = 0.0F;
		GdkColor* _tmp9_;
		guint16 _tmp10_;
		GdkColor* _tmp11_;
		guint16 _tmp12_;
		GdkColor* _tmp13_;
		guint16 _tmp14_;
		const gchar* _tmp15_ = NULL;
		gfloat _tmp16_;
		GdkColor _tmp17_ = {0};
		GdkColor _tmp18_;
		GdkColor* _tmp19_;
#line 88 "/home/test/core/core/tally.vala"
		_tmp3_ = self->priv->_tab;
#line 88 "/home/test/core/core/tally.vala"
		_tmp4_ = midori_tab_get_color (_tmp3_);
#line 88 "/home/test/core/core/tally.vala"
		_tmp5_ = _tmp4_;
#line 88 "/home/test/core/core/tally.vala"
		gdk_color_parse (_tmp5_, &_tmp6_);
#line 88 "/home/test/core/core/tally.vala"
		__vala_GdkColor_free0 (background_color);
#line 88 "/home/test/core/core/tally.vala"
		_tmp7_ = _tmp6_;
#line 88 "/home/test/core/core/tally.vala"
		_tmp8_ = __vala_GdkColor_copy0 (&_tmp7_);
#line 88 "/home/test/core/core/tally.vala"
		background_color = _tmp8_;
#line 90 "/home/test/core/core/tally.vala"
		_tmp9_ = background_color;
#line 90 "/home/test/core/core/tally.vala"
		_tmp10_ = (*_tmp9_).red;
#line 90 "/home/test/core/core/tally.vala"
		_tmp11_ = background_color;
#line 90 "/home/test/core/core/tally.vala"
		_tmp12_ = (*_tmp11_).green;
#line 90 "/home/test/core/core/tally.vala"
		_tmp13_ = background_color;
#line 90 "/home/test/core/core/tally.vala"
		_tmp14_ = (*_tmp13_).blue;
#line 90 "/home/test/core/core/tally.vala"
		brightness = (((0.299f * ((gfloat) _tmp10_)) / 255.f) + ((0.587f * ((gfloat) _tmp12_)) / 255.f)) + ((0.114f * ((gfloat) _tmp14_)) / 255.f);
#line 93 "/home/test/core/core/tally.vala"
		_tmp16_ = brightness;
#line 93 "/home/test/core/core/tally.vala"
		if (_tmp16_ < ((gfloat) 128)) {
#line 93 "/home/test/core/core/tally.vala"
			_tmp15_ = "white";
#line 724 "tally.c"
		} else {
#line 93 "/home/test/core/core/tally.vala"
			_tmp15_ = "black";
#line 728 "tally.c"
		}
#line 93 "/home/test/core/core/tally.vala"
		gdk_color_parse (_tmp15_, &_tmp17_);
#line 93 "/home/test/core/core/tally.vala"
		__vala_GdkColor_free0 (foreground_color);
#line 93 "/home/test/core/core/tally.vala"
		_tmp18_ = _tmp17_;
#line 93 "/home/test/core/core/tally.vala"
		_tmp19_ = __vala_GdkColor_copy0 (&_tmp18_);
#line 93 "/home/test/core/core/tally.vala"
		foreground_color = _tmp19_;
#line 740 "tally.c"
	}
#line 95 "/home/test/core/core/tally.vala"
	_tmp20_ = foreground_color;
#line 95 "/home/test/core/core/tally.vala"
	gtk_widget_modify_fg ((GtkWidget*) self, GTK_STATE_NORMAL, _tmp20_);
#line 96 "/home/test/core/core/tally.vala"
	_tmp21_ = foreground_color;
#line 96 "/home/test/core/core/tally.vala"
	gtk_widget_modify_fg ((GtkWidget*) self, GTK_STATE_ACTIVE, _tmp21_);
#line 97 "/home/test/core/core/tally.vala"
	_tmp22_ = background_color;
#line 97 "/home/test/core/core/tally.vala"
	gtk_widget_modify_bg ((GtkWidget*) self, GTK_STATE_NORMAL, _tmp22_);
#line 98 "/home/test/core/core/tally.vala"
	_tmp23_ = background_color;
#line 98 "/home/test/core/core/tally.vala"
	gtk_widget_modify_bg ((GtkWidget*) self, GTK_STATE_ACTIVE, _tmp23_);
#line 84 "/home/test/core/core/tally.vala"
	__vala_GdkColor_free0 (foreground_color);
#line 84 "/home/test/core/core/tally.vala"
	__vala_GdkColor_free0 (background_color);
#line 762 "tally.c"
}


static gint
string_index_of (const gchar* self,
                 const gchar* needle,
                 gint start_index)
{
	gint result = 0;
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1081 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 1081 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, 0);
#line 1082 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr (((gchar*) self) + start_index, (gchar*) needle);
#line 1082 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1084 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _result_;
#line 1084 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ != NULL) {
#line 787 "tally.c"
		gchar* _tmp2_;
#line 1085 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _result_;
#line 1085 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (gint) (_tmp2_ - ((gchar*) self));
#line 1085 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 795 "tally.c"
	} else {
#line 1087 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = -1;
#line 1087 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 801 "tally.c"
	}
}


static void
midori_tally_update_close_position (MidoriTally* self)
{
	gchar* layout = NULL;
	GtkSettings* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	GtkBox* box = NULL;
	GtkButton* _tmp3_;
	GtkContainer* _tmp4_;
	GtkContainer* _tmp5_;
	GtkBox* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
#line 101 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 102 "/home/test/core/core/tally.vala"
	_tmp0_ = gtk_settings_get_default ();
#line 102 "/home/test/core/core/tally.vala"
	g_object_get (_tmp0_, "gtk-decoration-layout", &_tmp1_, NULL);
#line 102 "/home/test/core/core/tally.vala"
	_tmp2_ = _tmp1_;
#line 102 "/home/test/core/core/tally.vala"
	layout = _tmp2_;
#line 103 "/home/test/core/core/tally.vala"
	_tmp3_ = self->priv->close;
#line 103 "/home/test/core/core/tally.vala"
	_tmp4_ = gtk_widget_get_parent ((GtkWidget*) _tmp3_);
#line 103 "/home/test/core/core/tally.vala"
	_tmp5_ = _tmp4_;
#line 103 "/home/test/core/core/tally.vala"
	_tmp6_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, gtk_box_get_type (), GtkBox));
#line 103 "/home/test/core/core/tally.vala"
	box = _tmp6_;
#line 104 "/home/test/core/core/tally.vala"
	_tmp7_ = layout;
#line 104 "/home/test/core/core/tally.vala"
	_tmp8_ = layout;
#line 104 "/home/test/core/core/tally.vala"
	if (string_index_of (_tmp7_, "c", 0) < string_index_of (_tmp8_, ":", 0)) {
#line 846 "tally.c"
		GtkBox* _tmp9_;
		GtkButton* _tmp10_;
		GtkBox* _tmp11_;
		MidoriFavicon* _tmp12_;
		GtkBox* _tmp13_;
		GtkSpinner* _tmp14_;
#line 105 "/home/test/core/core/tally.vala"
		_tmp9_ = box;
#line 105 "/home/test/core/core/tally.vala"
		_tmp10_ = self->priv->close;
#line 105 "/home/test/core/core/tally.vala"
		gtk_box_reorder_child (_tmp9_, (GtkWidget*) _tmp10_, 0);
#line 106 "/home/test/core/core/tally.vala"
		_tmp11_ = box;
#line 106 "/home/test/core/core/tally.vala"
		_tmp12_ = self->priv->favicon;
#line 106 "/home/test/core/core/tally.vala"
		gtk_box_reorder_child (_tmp11_, (GtkWidget*) _tmp12_, -1);
#line 107 "/home/test/core/core/tally.vala"
		_tmp13_ = box;
#line 107 "/home/test/core/core/tally.vala"
		_tmp14_ = self->priv->spinner;
#line 107 "/home/test/core/core/tally.vala"
		gtk_box_reorder_child (_tmp13_, (GtkWidget*) _tmp14_, -1);
#line 871 "tally.c"
	} else {
		GtkBox* _tmp15_;
		GtkButton* _tmp16_;
		GtkBox* _tmp17_;
		MidoriFavicon* _tmp18_;
		GtkBox* _tmp19_;
		GtkSpinner* _tmp20_;
#line 109 "/home/test/core/core/tally.vala"
		_tmp15_ = box;
#line 109 "/home/test/core/core/tally.vala"
		_tmp16_ = self->priv->close;
#line 109 "/home/test/core/core/tally.vala"
		gtk_box_reorder_child (_tmp15_, (GtkWidget*) _tmp16_, -1);
#line 110 "/home/test/core/core/tally.vala"
		_tmp17_ = box;
#line 110 "/home/test/core/core/tally.vala"
		_tmp18_ = self->priv->favicon;
#line 110 "/home/test/core/core/tally.vala"
		gtk_box_reorder_child (_tmp17_, (GtkWidget*) _tmp18_, 0);
#line 111 "/home/test/core/core/tally.vala"
		_tmp19_ = box;
#line 111 "/home/test/core/core/tally.vala"
		_tmp20_ = self->priv->spinner;
#line 111 "/home/test/core/core/tally.vala"
		gtk_box_reorder_child (_tmp19_, (GtkWidget*) _tmp20_, 0);
#line 897 "tally.c"
	}
#line 101 "/home/test/core/core/tally.vala"
	_g_object_unref0 (box);
#line 101 "/home/test/core/core/tally.vala"
	_g_free0 (layout);
#line 903 "tally.c"
}


static void
midori_tally_update_visibility (MidoriTally* self)
{
	gboolean _tmp0_ = FALSE;
	MidoriTab* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	GtkLabel* _tmp5_;
	gboolean _tmp6_ = FALSE;
	MidoriTab* _tmp7_;
	gboolean _tmp8_;
	gboolean _tmp9_;
	GtkButton* _tmp14_;
#line 115 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 116 "/home/test/core/core/tally.vala"
	_tmp1_ = self->priv->_tab;
#line 116 "/home/test/core/core/tally.vala"
	_tmp2_ = midori_tab_get_pinned (_tmp1_);
#line 116 "/home/test/core/core/tally.vala"
	_tmp3_ = _tmp2_;
#line 116 "/home/test/core/core/tally.vala"
	if (_tmp3_) {
#line 930 "tally.c"
		gboolean _tmp4_;
#line 116 "/home/test/core/core/tally.vala"
		_tmp4_ = self->priv->_show_close;
#line 116 "/home/test/core/core/tally.vala"
		_tmp0_ = _tmp4_;
#line 936 "tally.c"
	} else {
#line 116 "/home/test/core/core/tally.vala"
		_tmp0_ = FALSE;
#line 940 "tally.c"
	}
#line 116 "/home/test/core/core/tally.vala"
	_tmp5_ = self->priv->caption;
#line 116 "/home/test/core/core/tally.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp5_, !_tmp0_);
#line 117 "/home/test/core/core/tally.vala"
	_tmp7_ = self->priv->_tab;
#line 117 "/home/test/core/core/tally.vala"
	_tmp8_ = midori_tab_get_pinned (_tmp7_);
#line 117 "/home/test/core/core/tally.vala"
	_tmp9_ = _tmp8_;
#line 117 "/home/test/core/core/tally.vala"
	if (!_tmp9_) {
#line 954 "tally.c"
		MidoriCoreSettings* _tmp10_;
		MidoriCoreSettings* _tmp11_;
		gboolean _tmp12_;
		gboolean _tmp13_;
#line 117 "/home/test/core/core/tally.vala"
		_tmp10_ = midori_core_settings_get_default ();
#line 117 "/home/test/core/core/tally.vala"
		_tmp11_ = _tmp10_;
#line 117 "/home/test/core/core/tally.vala"
		_tmp12_ = midori_core_settings_get_close_buttons_on_tabs (_tmp11_);
#line 117 "/home/test/core/core/tally.vala"
		_tmp13_ = _tmp12_;
#line 117 "/home/test/core/core/tally.vala"
		_tmp6_ = _tmp13_;
#line 117 "/home/test/core/core/tally.vala"
		_g_object_unref0 (_tmp11_);
#line 971 "tally.c"
	} else {
#line 117 "/home/test/core/core/tally.vala"
		_tmp6_ = FALSE;
#line 975 "tally.c"
	}
#line 117 "/home/test/core/core/tally.vala"
	_tmp14_ = self->priv->close;
#line 117 "/home/test/core/core/tally.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp14_, _tmp6_);
#line 981 "tally.c"
}


static gboolean
midori_tally_real_button_press_event (GtkWidget* base,
                                      GdkEventButton* event)
{
	MidoriTally * self;
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	guint _tmp2_;
#line 166 "/home/test/core/core/tally.vala"
	self = (MidoriTally*) base;
#line 166 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 168 "/home/test/core/core/tally.vala"
	_tmp0_ = midori_tally_get_show_close (self);
#line 168 "/home/test/core/core/tally.vala"
	_tmp1_ = _tmp0_;
#line 168 "/home/test/core/core/tally.vala"
	if (!_tmp1_) {
#line 169 "/home/test/core/core/tally.vala"
		result = FALSE;
#line 169 "/home/test/core/core/tally.vala"
		return result;
#line 1008 "tally.c"
	}
#line 172 "/home/test/core/core/tally.vala"
	_tmp2_ = event->button;
#line 172 "/home/test/core/core/tally.vala"
	switch (_tmp2_) {
#line 172 "/home/test/core/core/tally.vala"
		case GDK_BUTTON_SECONDARY:
#line 1016 "tally.c"
		{
			GSimpleActionGroup* _tmp3_;
			GAction* _tmp4_;
			MidoriTab* _tmp5_;
			gboolean _tmp6_;
			gboolean _tmp7_;
			GSimpleActionGroup* _tmp8_;
			GAction* _tmp9_;
			MidoriTab* _tmp10_;
			gboolean _tmp11_;
			gboolean _tmp12_;
			MidoriApp* app = NULL;
			GApplication* _tmp13_;
			MidoriApp* _tmp14_;
			GtkPopover* menu = NULL;
			MidoriApp* _tmp15_;
			GMenu* _tmp16_;
			GtkPopover* _tmp17_;
			GtkPopover* _tmp18_;
#line 174 "/home/test/core/core/tally.vala"
			_tmp3_ = self->priv->group;
#line 174 "/home/test/core/core/tally.vala"
			_tmp4_ = g_action_map_lookup_action ((GActionMap*) _tmp3_, "pin");
#line 174 "/home/test/core/core/tally.vala"
			_tmp5_ = self->priv->_tab;
#line 174 "/home/test/core/core/tally.vala"
			_tmp6_ = midori_tab_get_pinned (_tmp5_);
#line 174 "/home/test/core/core/tally.vala"
			_tmp7_ = _tmp6_;
#line 174 "/home/test/core/core/tally.vala"
			g_simple_action_set_enabled (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, g_simple_action_get_type (), GSimpleAction), !_tmp7_);
#line 175 "/home/test/core/core/tally.vala"
			_tmp8_ = self->priv->group;
#line 175 "/home/test/core/core/tally.vala"
			_tmp9_ = g_action_map_lookup_action ((GActionMap*) _tmp8_, "unpin");
#line 175 "/home/test/core/core/tally.vala"
			_tmp10_ = self->priv->_tab;
#line 175 "/home/test/core/core/tally.vala"
			_tmp11_ = midori_tab_get_pinned (_tmp10_);
#line 175 "/home/test/core/core/tally.vala"
			_tmp12_ = _tmp11_;
#line 175 "/home/test/core/core/tally.vala"
			g_simple_action_set_enabled (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, g_simple_action_get_type (), GSimpleAction), _tmp12_);
#line 176 "/home/test/core/core/tally.vala"
			_tmp13_ = g_application_get_default ();
#line 176 "/home/test/core/core/tally.vala"
			_tmp14_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, MIDORI_TYPE_APP, MidoriApp));
#line 176 "/home/test/core/core/tally.vala"
			app = _tmp14_;
#line 177 "/home/test/core/core/tally.vala"
			_tmp15_ = app;
#line 177 "/home/test/core/core/tally.vala"
			_tmp16_ = gtk_application_get_menu_by_id ((GtkApplication*) _tmp15_, "tally-menu");
#line 177 "/home/test/core/core/tally.vala"
			_tmp17_ = (GtkPopover*) gtk_popover_new_from_model ((GtkWidget*) self, (GMenuModel*) _tmp16_);
#line 177 "/home/test/core/core/tally.vala"
			g_object_ref_sink (_tmp17_);
#line 177 "/home/test/core/core/tally.vala"
			menu = _tmp17_;
#line 178 "/home/test/core/core/tally.vala"
			_tmp18_ = menu;
#line 178 "/home/test/core/core/tally.vala"
			gtk_widget_show ((GtkWidget*) _tmp18_);
#line 179 "/home/test/core/core/tally.vala"
			_g_object_unref0 (menu);
#line 179 "/home/test/core/core/tally.vala"
			_g_object_unref0 (app);
#line 179 "/home/test/core/core/tally.vala"
			break;
#line 1086 "tally.c"
		}
		default:
#line 172 "/home/test/core/core/tally.vala"
		break;
#line 1091 "tally.c"
	}
#line 181 "/home/test/core/core/tally.vala"
	result = TRUE;
#line 181 "/home/test/core/core/tally.vala"
	return result;
#line 1097 "tally.c"
}


static gboolean
midori_tally_real_button_release_event (GtkWidget* base,
                                        GdkEventButton* event)
{
	MidoriTally * self;
	gboolean result = FALSE;
	guint _tmp0_;
#line 184 "/home/test/core/core/tally.vala"
	self = (MidoriTally*) base;
#line 184 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 185 "/home/test/core/core/tally.vala"
	_tmp0_ = event->button;
#line 185 "/home/test/core/core/tally.vala"
	switch (_tmp0_) {
#line 185 "/home/test/core/core/tally.vala"
		case GDK_BUTTON_PRIMARY:
#line 1118 "tally.c"
		{
#line 187 "/home/test/core/core/tally.vala"
			g_signal_emit (self, midori_tally_signals[MIDORI_TALLY_CLICKED_SIGNAL], 0);
#line 188 "/home/test/core/core/tally.vala"
			break;
#line 1124 "tally.c"
		}
#line 185 "/home/test/core/core/tally.vala"
		case GDK_BUTTON_MIDDLE:
#line 1128 "tally.c"
		{
			MidoriTab* _tmp1_;
#line 190 "/home/test/core/core/tally.vala"
			_tmp1_ = self->priv->_tab;
#line 190 "/home/test/core/core/tally.vala"
			webkit_web_view_try_close ((WebKitWebView*) _tmp1_);
#line 191 "/home/test/core/core/tally.vala"
			break;
#line 1137 "tally.c"
		}
		default:
#line 185 "/home/test/core/core/tally.vala"
		break;
#line 1142 "tally.c"
	}
#line 193 "/home/test/core/core/tally.vala"
	result = TRUE;
#line 193 "/home/test/core/core/tally.vala"
	return result;
#line 1148 "tally.c"
}


MidoriTab*
midori_tally_get_tab (MidoriTally* self)
{
	MidoriTab* result;
	MidoriTab* _tmp0_;
#line 15 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 15 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 15 "/home/test/core/core/tally.vala"
	result = _tmp0_;
#line 15 "/home/test/core/core/tally.vala"
	return result;
#line 1165 "tally.c"
}


void
midori_tally_set_tab (MidoriTally* self,
                      MidoriTab* value)
{
#line 15 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 15 "/home/test/core/core/tally.vala"
	if (midori_tally_get_tab (self) != value) {
#line 1177 "tally.c"
		MidoriTab* _tmp0_;
#line 15 "/home/test/core/core/tally.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 15 "/home/test/core/core/tally.vala"
		_g_object_unref0 (self->priv->_tab);
#line 15 "/home/test/core/core/tally.vala"
		self->priv->_tab = _tmp0_;
#line 15 "/home/test/core/core/tally.vala"
		g_object_notify_by_pspec ((GObject *) self, midori_tally_properties[MIDORI_TALLY_TAB_PROPERTY]);
#line 1187 "tally.c"
	}
}


const gchar*
midori_tally_get_uri (MidoriTally* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 16 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 16 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_uri;
#line 16 "/home/test/core/core/tally.vala"
	result = _tmp0_;
#line 16 "/home/test/core/core/tally.vala"
	return result;
#line 1205 "tally.c"
}


void
midori_tally_set_uri (MidoriTally* self,
                      const gchar* value)
{
#line 16 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 16 "/home/test/core/core/tally.vala"
	if (g_strcmp0 (value, midori_tally_get_uri (self)) != 0) {
#line 1217 "tally.c"
		gchar* _tmp0_;
#line 16 "/home/test/core/core/tally.vala"
		_tmp0_ = g_strdup (value);
#line 16 "/home/test/core/core/tally.vala"
		_g_free0 (self->priv->_uri);
#line 16 "/home/test/core/core/tally.vala"
		self->priv->_uri = _tmp0_;
#line 16 "/home/test/core/core/tally.vala"
		g_object_notify_by_pspec ((GObject *) self, midori_tally_properties[MIDORI_TALLY_URI_PROPERTY]);
#line 1227 "tally.c"
	}
}


const gchar*
midori_tally_get_title (MidoriTally* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 17 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 17 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_title;
#line 17 "/home/test/core/core/tally.vala"
	result = _tmp0_;
#line 17 "/home/test/core/core/tally.vala"
	return result;
#line 1245 "tally.c"
}


void
midori_tally_set_title (MidoriTally* self,
                        const gchar* value)
{
#line 17 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 17 "/home/test/core/core/tally.vala"
	if (g_strcmp0 (value, midori_tally_get_title (self)) != 0) {
#line 1257 "tally.c"
		gchar* _tmp0_;
#line 17 "/home/test/core/core/tally.vala"
		_tmp0_ = g_strdup (value);
#line 17 "/home/test/core/core/tally.vala"
		_g_free0 (self->priv->_title);
#line 17 "/home/test/core/core/tally.vala"
		self->priv->_title = _tmp0_;
#line 17 "/home/test/core/core/tally.vala"
		g_object_notify_by_pspec ((GObject *) self, midori_tally_properties[MIDORI_TALLY_TITLE_PROPERTY]);
#line 1267 "tally.c"
	}
}


gboolean
midori_tally_get_show_close (MidoriTally* self)
{
	gboolean result;
	gboolean _tmp0_;
#line 19 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 19 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_show_close;
#line 19 "/home/test/core/core/tally.vala"
	result = _tmp0_;
#line 19 "/home/test/core/core/tally.vala"
	return result;
#line 1285 "tally.c"
}


void
midori_tally_set_show_close (MidoriTally* self,
                             gboolean value)
{
#line 19 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 20 "/home/test/core/core/tally.vala"
	self->priv->_show_close = value;
#line 21 "/home/test/core/core/tally.vala"
	midori_tally_update_visibility (self);
#line 19 "/home/test/core/core/tally.vala"
	g_object_notify_by_pspec ((GObject *) self, midori_tally_properties[MIDORI_TALLY_SHOW_CLOSE_PROPERTY]);
#line 1301 "tally.c"
}


gboolean
midori_tally_get_active (MidoriTally* self)
{
	gboolean result;
	gboolean _tmp0_;
#line 27 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 27 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_active;
#line 27 "/home/test/core/core/tally.vala"
	result = _tmp0_;
#line 27 "/home/test/core/core/tally.vala"
	return result;
#line 1318 "tally.c"
}


void
midori_tally_set_active (MidoriTally* self,
                         gboolean value)
{
	gboolean _tmp0_;
#line 27 "/home/test/core/core/tally.vala"
	g_return_if_fail (self != NULL);
#line 28 "/home/test/core/core/tally.vala"
	self->priv->_active = value;
#line 29 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_active;
#line 29 "/home/test/core/core/tally.vala"
	if (_tmp0_) {
#line 30 "/home/test/core/core/tally.vala"
		gtk_widget_set_state_flags ((GtkWidget*) self, GTK_STATE_FLAG_CHECKED, FALSE);
#line 1337 "tally.c"
	} else {
#line 32 "/home/test/core/core/tally.vala"
		gtk_widget_unset_state_flags ((GtkWidget*) self, GTK_STATE_FLAG_CHECKED);
#line 1341 "tally.c"
	}
#line 27 "/home/test/core/core/tally.vala"
	g_object_notify_by_pspec ((GObject *) self, midori_tally_properties[MIDORI_TALLY_ACTIVE_PROPERTY]);
#line 1345 "tally.c"
}


static gboolean
_midori_tally___lambda111_ (MidoriTally* self,
                            GdkEventCrossing* event)
{
	gboolean result = FALSE;
#line 124 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 125 "/home/test/core/core/tally.vala"
	gtk_widget_set_state_flags ((GtkWidget*) self, GTK_STATE_FLAG_PRELIGHT, FALSE);
#line 1358 "tally.c"
}


static gboolean
__midori_tally___lambda111__gtk_widget_enter_notify_event (GtkWidget* _sender,
                                                           GdkEventCrossing* event,
                                                           gpointer self)
{
	gboolean result;
	result = _midori_tally___lambda111_ ((MidoriTally*) self, event);
#line 124 "/home/test/core/core/tally.vala"
	return result;
#line 1371 "tally.c"
}


static gboolean
_midori_tally___lambda112_ (MidoriTally* self,
                            GdkEventCrossing* event)
{
	gboolean result = FALSE;
#line 127 "/home/test/core/core/tally.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 128 "/home/test/core/core/tally.vala"
	gtk_widget_unset_state_flags ((GtkWidget*) self, GTK_STATE_FLAG_PRELIGHT);
#line 1384 "tally.c"
}


static gboolean
__midori_tally___lambda112__gtk_widget_leave_notify_event (GtkWidget* _sender,
                                                           GdkEventCrossing* event,
                                                           gpointer self)
{
	gboolean result;
	result = _midori_tally___lambda112_ ((MidoriTally*) self, event);
#line 127 "/home/test/core/core/tally.vala"
	return result;
#line 1397 "tally.c"
}


static void
_midori_tally___lambda113_ (MidoriTally* self)
{
	MidoriTab* _tmp0_;
#line 134 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 134 "/home/test/core/core/tally.vala"
	midori_tab_set_pinned (_tmp0_, TRUE);
#line 1409 "tally.c"
}


static void
__midori_tally___lambda113__g_simple_action_activate (GSimpleAction* _sender,
                                                      GVariant* parameter,
                                                      gpointer self)
{
#line 133 "/home/test/core/core/tally.vala"
	_midori_tally___lambda113_ ((MidoriTally*) self);
#line 1420 "tally.c"
}


static void
_midori_tally___lambda114_ (MidoriTally* self)
{
	MidoriTab* _tmp0_;
#line 139 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 139 "/home/test/core/core/tally.vala"
	midori_tab_set_pinned (_tmp0_, FALSE);
#line 1432 "tally.c"
}


static void
__midori_tally___lambda114__g_simple_action_activate (GSimpleAction* _sender,
                                                      GVariant* parameter,
                                                      gpointer self)
{
#line 138 "/home/test/core/core/tally.vala"
	_midori_tally___lambda114_ ((MidoriTally*) self);
#line 1443 "tally.c"
}


static void
_midori_tally___lambda115_ (MidoriTally* self)
{
	MidoriBrowser* browser = NULL;
	MidoriTab* _tmp0_;
	GtkWidget* _tmp1_;
	MidoriBrowser* _tmp2_;
	MidoriBrowser* _tmp3_;
	MidoriTab* _tmp4_;
	WebKitWebContext* _tmp5_;
	WebKitWebContext* _tmp6_;
	WebKitWebContext* _tmp7_;
	const gchar* _tmp8_;
	MidoriTab* _tmp9_;
	MidoriTab* _tmp10_;
#line 144 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 144 "/home/test/core/core/tally.vala"
	_tmp1_ = gtk_widget_get_ancestor ((GtkWidget*) _tmp0_, MIDORI_TYPE_BROWSER);
#line 144 "/home/test/core/core/tally.vala"
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, MIDORI_TYPE_BROWSER, MidoriBrowser));
#line 144 "/home/test/core/core/tally.vala"
	browser = _tmp2_;
#line 145 "/home/test/core/core/tally.vala"
	_tmp3_ = browser;
#line 145 "/home/test/core/core/tally.vala"
	_tmp4_ = self->priv->_tab;
#line 145 "/home/test/core/core/tally.vala"
	g_object_get ((WebKitWebView*) _tmp4_, "web-context", &_tmp5_, NULL);
#line 145 "/home/test/core/core/tally.vala"
	_tmp6_ = _tmp5_;
#line 145 "/home/test/core/core/tally.vala"
	_tmp7_ = _tmp6_;
#line 145 "/home/test/core/core/tally.vala"
	_tmp8_ = self->priv->_uri;
#line 145 "/home/test/core/core/tally.vala"
	_tmp9_ = midori_tab_new (NULL, _tmp7_, _tmp8_, NULL);
#line 145 "/home/test/core/core/tally.vala"
	g_object_ref_sink (_tmp9_);
#line 145 "/home/test/core/core/tally.vala"
	_tmp10_ = _tmp9_;
#line 145 "/home/test/core/core/tally.vala"
	midori_browser_add (_tmp3_, _tmp10_);
#line 145 "/home/test/core/core/tally.vala"
	_g_object_unref0 (_tmp10_);
#line 145 "/home/test/core/core/tally.vala"
	_g_object_unref0 (_tmp7_);
#line 143 "/home/test/core/core/tally.vala"
	_g_object_unref0 (browser);
#line 1496 "tally.c"
}


static void
__midori_tally___lambda115__g_simple_action_activate (GSimpleAction* _sender,
                                                      GVariant* parameter,
                                                      gpointer self)
{
#line 143 "/home/test/core/core/tally.vala"
	_midori_tally___lambda115_ ((MidoriTally*) self);
#line 1507 "tally.c"
}


static void
_midori_tally___lambda116_ (MidoriTally* self)
{
	MidoriBrowser* browser = NULL;
	MidoriTab* _tmp0_;
	GtkWidget* _tmp1_;
	MidoriBrowser* _tmp2_;
	MidoriBrowser* _tmp3_;
	GtkStack* _tmp4_;
	GList* _tmp5_;
#line 150 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 150 "/home/test/core/core/tally.vala"
	_tmp1_ = gtk_widget_get_ancestor ((GtkWidget*) _tmp0_, MIDORI_TYPE_BROWSER);
#line 150 "/home/test/core/core/tally.vala"
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, MIDORI_TYPE_BROWSER, MidoriBrowser));
#line 150 "/home/test/core/core/tally.vala"
	browser = _tmp2_;
#line 151 "/home/test/core/core/tally.vala"
	_tmp3_ = browser;
#line 151 "/home/test/core/core/tally.vala"
	_tmp4_ = _tmp3_->tabs;
#line 151 "/home/test/core/core/tally.vala"
	_tmp5_ = gtk_container_get_children ((GtkContainer*) _tmp4_);
#line 1535 "tally.c"
	{
		GList* widget_collection = NULL;
		GList* widget_it = NULL;
#line 151 "/home/test/core/core/tally.vala"
		widget_collection = _tmp5_;
#line 151 "/home/test/core/core/tally.vala"
		for (widget_it = widget_collection; widget_it != NULL; widget_it = widget_it->next) {
#line 1543 "tally.c"
			GtkWidget* widget = NULL;
#line 151 "/home/test/core/core/tally.vala"
			widget = (GtkWidget*) widget_it->data;
#line 1547 "tally.c"
			{
				GtkWidget* _tmp6_;
				MidoriTab* _tmp7_;
#line 152 "/home/test/core/core/tally.vala"
				_tmp6_ = widget;
#line 152 "/home/test/core/core/tally.vala"
				_tmp7_ = self->priv->_tab;
#line 152 "/home/test/core/core/tally.vala"
				if (_tmp6_ != G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, gtk_widget_get_type (), GtkWidget)) {
#line 1557 "tally.c"
					GtkWidget* _tmp8_;
#line 153 "/home/test/core/core/tally.vala"
					_tmp8_ = widget;
#line 153 "/home/test/core/core/tally.vala"
					webkit_web_view_try_close ((WebKitWebView*) G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, MIDORI_TYPE_TAB, MidoriTab));
#line 1563 "tally.c"
				}
			}
		}
#line 151 "/home/test/core/core/tally.vala"
		(widget_collection == NULL) ? NULL : (widget_collection = (g_list_free (widget_collection), NULL));
#line 1569 "tally.c"
	}
#line 149 "/home/test/core/core/tally.vala"
	_g_object_unref0 (browser);
#line 1573 "tally.c"
}


static void
__midori_tally___lambda116__g_simple_action_activate (GSimpleAction* _sender,
                                                      GVariant* parameter,
                                                      gpointer self)
{
#line 149 "/home/test/core/core/tally.vala"
	_midori_tally___lambda116_ ((MidoriTally*) self);
#line 1584 "tally.c"
}


static void
_midori_tally___lambda117_ (MidoriTally* self)
{
	MidoriTab* _tmp0_;
#line 160 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->_tab;
#line 160 "/home/test/core/core/tally.vala"
	webkit_web_view_try_close ((WebKitWebView*) _tmp0_);
#line 1596 "tally.c"
}


static void
__midori_tally___lambda117__g_simple_action_activate (GSimpleAction* _sender,
                                                      GVariant* parameter,
                                                      gpointer self)
{
#line 159 "/home/test/core/core/tally.vala"
	_midori_tally___lambda117_ ((MidoriTally*) self);
#line 1607 "tally.c"
}


static GObject *
midori_tally_constructor (GType type,
                          guint n_construct_properties,
                          GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	MidoriTally * self;
	GtkLabel* _tmp0_;
	GSimpleActionGroup* _tmp1_;
	GSimpleAction* action = NULL;
	GSimpleAction* _tmp2_;
	GSimpleAction* _tmp3_;
	GSimpleActionGroup* _tmp4_;
	GSimpleAction* _tmp5_;
	GSimpleAction* _tmp6_;
	GSimpleAction* _tmp7_;
	GSimpleActionGroup* _tmp8_;
	GSimpleAction* _tmp9_;
	GSimpleAction* _tmp10_;
	GSimpleAction* _tmp11_;
	GSimpleActionGroup* _tmp12_;
	GSimpleAction* _tmp13_;
	GSimpleAction* _tmp14_;
	GSimpleAction* _tmp15_;
	GSimpleActionGroup* _tmp16_;
	GSimpleAction* _tmp17_;
	GSimpleAction* _tmp18_;
	GSimpleAction* _tmp19_;
	GSimpleActionGroup* _tmp20_;
	GSimpleAction* _tmp21_;
	GSimpleActionGroup* _tmp22_;
#line 120 "/home/test/core/core/tally.vala"
	parent_class = G_OBJECT_CLASS (midori_tally_parent_class);
#line 120 "/home/test/core/core/tally.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 120 "/home/test/core/core/tally.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MIDORI_TYPE_TALLY, MidoriTally);
#line 121 "/home/test/core/core/tally.vala"
	_tmp0_ = self->priv->caption;
#line 121 "/home/test/core/core/tally.vala"
	g_object_bind_property_with_closures ((GObject*) self, "title", (GObject*) _tmp0_, "label", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 122 "/home/test/core/core/tally.vala"
	gtk_widget_add_events ((GtkWidget*) self, (gint) GDK_ENTER_NOTIFY_MASK);
#line 123 "/home/test/core/core/tally.vala"
	gtk_widget_add_events ((GtkWidget*) self, (gint) GDK_LEAVE_NOTIFY_MASK);
#line 124 "/home/test/core/core/tally.vala"
	g_signal_connect_object ((GtkWidget*) self, "enter-notify-event", (GCallback) __midori_tally___lambda111__gtk_widget_enter_notify_event, self, 0);
#line 127 "/home/test/core/core/tally.vala"
	g_signal_connect_object ((GtkWidget*) self, "leave-notify-event", (GCallback) __midori_tally___lambda112__gtk_widget_leave_notify_event, self, 0);
#line 131 "/home/test/core/core/tally.vala"
	_tmp1_ = g_simple_action_group_new ();
#line 131 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->group);
#line 131 "/home/test/core/core/tally.vala"
	self->priv->group = _tmp1_;
#line 132 "/home/test/core/core/tally.vala"
	_tmp2_ = g_simple_action_new ("pin", NULL);
#line 132 "/home/test/core/core/tally.vala"
	action = _tmp2_;
#line 133 "/home/test/core/core/tally.vala"
	_tmp3_ = action;
#line 133 "/home/test/core/core/tally.vala"
	g_signal_connect_object (_tmp3_, "activate", (GCallback) __midori_tally___lambda113__g_simple_action_activate, self, 0);
#line 136 "/home/test/core/core/tally.vala"
	_tmp4_ = self->priv->group;
#line 136 "/home/test/core/core/tally.vala"
	_tmp5_ = action;
#line 136 "/home/test/core/core/tally.vala"
	g_action_map_add_action ((GActionMap*) _tmp4_, (GAction*) _tmp5_);
#line 137 "/home/test/core/core/tally.vala"
	_tmp6_ = g_simple_action_new ("unpin", NULL);
#line 137 "/home/test/core/core/tally.vala"
	_g_object_unref0 (action);
#line 137 "/home/test/core/core/tally.vala"
	action = _tmp6_;
#line 138 "/home/test/core/core/tally.vala"
	_tmp7_ = action;
#line 138 "/home/test/core/core/tally.vala"
	g_signal_connect_object (_tmp7_, "activate", (GCallback) __midori_tally___lambda114__g_simple_action_activate, self, 0);
#line 141 "/home/test/core/core/tally.vala"
	_tmp8_ = self->priv->group;
#line 141 "/home/test/core/core/tally.vala"
	_tmp9_ = action;
#line 141 "/home/test/core/core/tally.vala"
	g_action_map_add_action ((GActionMap*) _tmp8_, (GAction*) _tmp9_);
#line 142 "/home/test/core/core/tally.vala"
	_tmp10_ = g_simple_action_new ("duplicate", NULL);
#line 142 "/home/test/core/core/tally.vala"
	_g_object_unref0 (action);
#line 142 "/home/test/core/core/tally.vala"
	action = _tmp10_;
#line 143 "/home/test/core/core/tally.vala"
	_tmp11_ = action;
#line 143 "/home/test/core/core/tally.vala"
	g_signal_connect_object (_tmp11_, "activate", (GCallback) __midori_tally___lambda115__g_simple_action_activate, self, 0);
#line 147 "/home/test/core/core/tally.vala"
	_tmp12_ = self->priv->group;
#line 147 "/home/test/core/core/tally.vala"
	_tmp13_ = action;
#line 147 "/home/test/core/core/tally.vala"
	g_action_map_add_action ((GActionMap*) _tmp12_, (GAction*) _tmp13_);
#line 148 "/home/test/core/core/tally.vala"
	_tmp14_ = g_simple_action_new ("close-other", NULL);
#line 148 "/home/test/core/core/tally.vala"
	_g_object_unref0 (action);
#line 148 "/home/test/core/core/tally.vala"
	action = _tmp14_;
#line 149 "/home/test/core/core/tally.vala"
	_tmp15_ = action;
#line 149 "/home/test/core/core/tally.vala"
	g_signal_connect_object (_tmp15_, "activate", (GCallback) __midori_tally___lambda116__g_simple_action_activate, self, 0);
#line 157 "/home/test/core/core/tally.vala"
	_tmp16_ = self->priv->group;
#line 157 "/home/test/core/core/tally.vala"
	_tmp17_ = action;
#line 157 "/home/test/core/core/tally.vala"
	g_action_map_add_action ((GActionMap*) _tmp16_, (GAction*) _tmp17_);
#line 158 "/home/test/core/core/tally.vala"
	_tmp18_ = g_simple_action_new ("close-tab", NULL);
#line 158 "/home/test/core/core/tally.vala"
	_g_object_unref0 (action);
#line 158 "/home/test/core/core/tally.vala"
	action = _tmp18_;
#line 159 "/home/test/core/core/tally.vala"
	_tmp19_ = action;
#line 159 "/home/test/core/core/tally.vala"
	g_signal_connect_object (_tmp19_, "activate", (GCallback) __midori_tally___lambda117__g_simple_action_activate, self, 0);
#line 162 "/home/test/core/core/tally.vala"
	_tmp20_ = self->priv->group;
#line 162 "/home/test/core/core/tally.vala"
	_tmp21_ = action;
#line 162 "/home/test/core/core/tally.vala"
	g_action_map_add_action ((GActionMap*) _tmp20_, (GAction*) _tmp21_);
#line 163 "/home/test/core/core/tally.vala"
	_tmp22_ = self->priv->group;
#line 163 "/home/test/core/core/tally.vala"
	gtk_widget_insert_action_group ((GtkWidget*) self, "tally", (GActionGroup*) _tmp22_);
#line 120 "/home/test/core/core/tally.vala"
	_g_object_unref0 (action);
#line 120 "/home/test/core/core/tally.vala"
	return obj;
#line 1753 "tally.c"
}


static void
midori_tally_class_init (MidoriTallyClass * klass)
{
	gint MidoriTally_private_offset;
#line 14 "/home/test/core/core/tally.vala"
	midori_tally_parent_class = g_type_class_peek_parent (klass);
#line 14 "/home/test/core/core/tally.vala"
	g_type_class_add_private (klass, sizeof (MidoriTallyPrivate));
#line 14 "/home/test/core/core/tally.vala"
	((GtkWidgetClass *) klass)->button_press_event = (gboolean (*) (GtkWidget*, GdkEventButton*)) midori_tally_real_button_press_event;
#line 14 "/home/test/core/core/tally.vala"
	((GtkWidgetClass *) klass)->button_release_event = (gboolean (*) (GtkWidget*, GdkEventButton*)) midori_tally_real_button_release_event;
#line 14 "/home/test/core/core/tally.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_midori_tally_get_property;
#line 14 "/home/test/core/core/tally.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_midori_tally_set_property;
#line 14 "/home/test/core/core/tally.vala"
	G_OBJECT_CLASS (klass)->constructor = midori_tally_constructor;
#line 14 "/home/test/core/core/tally.vala"
	G_OBJECT_CLASS (klass)->finalize = midori_tally_finalize;
#line 14 "/home/test/core/core/tally.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_TALLY_TAB_PROPERTY, midori_tally_properties[MIDORI_TALLY_TAB_PROPERTY] = g_param_spec_object ("tab", "tab", "tab", MIDORI_TYPE_TAB, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/tally.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_TALLY_URI_PROPERTY, midori_tally_properties[MIDORI_TALLY_URI_PROPERTY] = g_param_spec_string ("uri", "uri", "uri", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/tally.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_TALLY_TITLE_PROPERTY, midori_tally_properties[MIDORI_TALLY_TITLE_PROPERTY] = g_param_spec_string ("title", "title", "title", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/tally.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_TALLY_SHOW_CLOSE_PROPERTY, midori_tally_properties[MIDORI_TALLY_SHOW_CLOSE_PROPERTY] = g_param_spec_boolean ("show-close", "show-close", "show-close", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/tally.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), MIDORI_TALLY_ACTIVE_PROPERTY, midori_tally_properties[MIDORI_TALLY_ACTIVE_PROPERTY] = g_param_spec_boolean ("active", "active", "active", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 14 "/home/test/core/core/tally.vala"
	MidoriTally_private_offset = g_type_class_get_instance_private_offset (klass);
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/ui/tally.ui");
#line 14 "/home/test/core/core/tally.vala"
	midori_tally_signals[MIDORI_TALLY_CLICKED_SIGNAL] = g_signal_new ("clicked", MIDORI_TYPE_TALLY, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "caption", FALSE, MidoriTally_private_offset + G_STRUCT_OFFSET (MidoriTallyPrivate, caption));
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "spinner", FALSE, MidoriTally_private_offset + G_STRUCT_OFFSET (MidoriTallyPrivate, spinner));
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "favicon", FALSE, MidoriTally_private_offset + G_STRUCT_OFFSET (MidoriTallyPrivate, favicon));
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "audio", FALSE, MidoriTally_private_offset + G_STRUCT_OFFSET (MidoriTallyPrivate, audio));
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "close", FALSE, MidoriTally_private_offset + G_STRUCT_OFFSET (MidoriTallyPrivate, close));
#line 1803 "tally.c"
}


static void
midori_tally_instance_init (MidoriTally * self)
{
#line 14 "/home/test/core/core/tally.vala"
	self->priv = MIDORI_TALLY_GET_PRIVATE (self);
#line 26 "/home/test/core/core/tally.vala"
	self->priv->_active = FALSE;
#line 36 "/home/test/core/core/tally.vala"
	self->priv->group = NULL;
#line 14 "/home/test/core/core/tally.vala"
	g_type_ensure (MIDORI_TYPE_FAVICON);
#line 14 "/home/test/core/core/tally.vala"
	gtk_widget_init_template (GTK_WIDGET (self));
#line 1820 "tally.c"
}


static void
midori_tally_finalize (GObject * obj)
{
	MidoriTally * self;
#line 14 "/home/test/core/core/tally.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MIDORI_TYPE_TALLY, MidoriTally);
#line 15 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->_tab);
#line 16 "/home/test/core/core/tally.vala"
	_g_free0 (self->priv->_uri);
#line 17 "/home/test/core/core/tally.vala"
	_g_free0 (self->priv->_title);
#line 36 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->group);
#line 39 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->caption);
#line 41 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->spinner);
#line 43 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->favicon);
#line 45 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->audio);
#line 47 "/home/test/core/core/tally.vala"
	_g_object_unref0 (self->priv->close);
#line 14 "/home/test/core/core/tally.vala"
	G_OBJECT_CLASS (midori_tally_parent_class)->finalize (obj);
#line 1850 "tally.c"
}


GType
midori_tally_get_type (void)
{
	static volatile gsize midori_tally_type_id__volatile = 0;
	if (g_once_init_enter (&midori_tally_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MidoriTallyClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) midori_tally_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MidoriTally), 0, (GInstanceInitFunc) midori_tally_instance_init, NULL };
		GType midori_tally_type_id;
		midori_tally_type_id = g_type_register_static (gtk_event_box_get_type (), "MidoriTally", &g_define_type_info, 0);
		g_once_init_leave (&midori_tally_type_id__volatile, midori_tally_type_id);
	}
	return midori_tally_type_id__volatile;
}


static void
_vala_midori_tally_get_property (GObject * object,
                                 guint property_id,
                                 GValue * value,
                                 GParamSpec * pspec)
{
	MidoriTally * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MIDORI_TYPE_TALLY, MidoriTally);
#line 14 "/home/test/core/core/tally.vala"
	switch (property_id) {
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_TAB_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		g_value_set_object (value, midori_tally_get_tab (self));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_URI_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		g_value_set_string (value, midori_tally_get_uri (self));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_TITLE_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		g_value_set_string (value, midori_tally_get_title (self));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_SHOW_CLOSE_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		g_value_set_boolean (value, midori_tally_get_show_close (self));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_ACTIVE_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		g_value_set_boolean (value, midori_tally_get_active (self));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 1908 "tally.c"
		default:
#line 14 "/home/test/core/core/tally.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 1914 "tally.c"
	}
}


static void
_vala_midori_tally_set_property (GObject * object,
                                 guint property_id,
                                 const GValue * value,
                                 GParamSpec * pspec)
{
	MidoriTally * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MIDORI_TYPE_TALLY, MidoriTally);
#line 14 "/home/test/core/core/tally.vala"
	switch (property_id) {
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_TAB_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		midori_tally_set_tab (self, g_value_get_object (value));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_URI_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		midori_tally_set_uri (self, g_value_get_string (value));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_TITLE_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		midori_tally_set_title (self, g_value_get_string (value));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_SHOW_CLOSE_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		midori_tally_set_show_close (self, g_value_get_boolean (value));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 14 "/home/test/core/core/tally.vala"
		case MIDORI_TALLY_ACTIVE_PROPERTY:
#line 14 "/home/test/core/core/tally.vala"
		midori_tally_set_active (self, g_value_get_boolean (value));
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 1959 "tally.c"
		default:
#line 14 "/home/test/core/core/tally.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 14 "/home/test/core/core/tally.vala"
		break;
#line 1965 "tally.c"
	}
}



