/* session.c generated by valac 0.40.23, the Vala compiler
 * generated from session.vala, do not modify */

/*
 Copyright (C) 2013-2018 Christian Dywan <christian@twotoats.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include "midori-core.h"
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gtk/gtk.h>
#include <gdk/gdk.h>
#include "webkit2/webkit2.h"
#include <libpeas/peas.h>
#include <glib/gi18n-lib.h>


#define TABBY_TYPE_SESSION_DATABASE (tabby_session_database_get_type ())
#define TABBY_SESSION_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_SESSION_DATABASE, TabbySessionDatabase))
#define TABBY_SESSION_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_TYPE_SESSION_DATABASE, TabbySessionDatabaseClass))
#define TABBY_IS_SESSION_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_SESSION_DATABASE))
#define TABBY_IS_SESSION_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_TYPE_SESSION_DATABASE))
#define TABBY_SESSION_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_TYPE_SESSION_DATABASE, TabbySessionDatabaseClass))

typedef struct _TabbySessionDatabase TabbySessionDatabase;
typedef struct _TabbySessionDatabaseClass TabbySessionDatabaseClass;
typedef struct _TabbySessionDatabasePrivate TabbySessionDatabasePrivate;
enum  {
	TABBY_SESSION_DATABASE_0_PROPERTY,
	TABBY_SESSION_DATABASE_NUM_PROPERTIES
};
static GParamSpec* tabby_session_database_properties[TABBY_SESSION_DATABASE_NUM_PROPERTIES];
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _TabbySessionDatabaseGetSessionsData TabbySessionDatabaseGetSessionsData;
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _TabbySessionDatabaseGetItemsData TabbySessionDatabaseGetItemsData;
typedef struct _TabbySessionDatabaseQueryData TabbySessionDatabaseQueryData;
typedef struct _TabbySessionDatabaseInsertData TabbySessionDatabaseInsertData;
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))
typedef struct _TabbySessionDatabaseUpdateData TabbySessionDatabaseUpdateData;
typedef struct _TabbySessionDatabaseDeleteData TabbySessionDatabaseDeleteData;
typedef struct _TabbySessionDatabaseUpdateTabData TabbySessionDatabaseUpdateTabData;
typedef struct _TabbySessionDatabaseClearData TabbySessionDatabaseClearData;
typedef struct _TabbySessionDatabaseRestoreWindowsData TabbySessionDatabaseRestoreWindowsData;
typedef struct _Block1Data Block1Data;
typedef struct _Block2Data Block2Data;
typedef struct _TabbySessionDatabaseTabAddedData TabbySessionDatabaseTabAddedData;

#define TABBY_TYPE_SESSION (tabby_session_get_type ())
#define TABBY_SESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_SESSION, TabbySession))
#define TABBY_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_TYPE_SESSION, TabbySessionClass))
#define TABBY_IS_SESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_SESSION))
#define TABBY_IS_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_TYPE_SESSION))
#define TABBY_SESSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_TYPE_SESSION, TabbySessionClass))

typedef struct _TabbySession TabbySession;
typedef struct _TabbySessionClass TabbySessionClass;
typedef struct _TabbySessionPrivate TabbySessionPrivate;
enum  {
	TABBY_SESSION_0_PROPERTY,
	TABBY_SESSION_BROWSER_PROPERTY,
	TABBY_SESSION_NUM_PROPERTIES
};
static GParamSpec* tabby_session_properties[TABBY_SESSION_NUM_PROPERTIES];
typedef struct _TabbySessionRestoreSessionData TabbySessionRestoreSessionData;

#define TABBY_TYPE_PREFERENCES (tabby_preferences_get_type ())
#define TABBY_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_PREFERENCES, TabbyPreferences))
#define TABBY_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_TYPE_PREFERENCES, TabbyPreferencesClass))
#define TABBY_IS_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_PREFERENCES))
#define TABBY_IS_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_TYPE_PREFERENCES))
#define TABBY_PREFERENCES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_TYPE_PREFERENCES, TabbyPreferencesClass))

typedef struct _TabbyPreferences TabbyPreferences;
typedef struct _TabbyPreferencesClass TabbyPreferencesClass;
typedef struct _TabbyPreferencesPrivate TabbyPreferencesPrivate;
enum  {
	TABBY_PREFERENCES_0_PROPERTY,
	TABBY_PREFERENCES_PREFERENCES_PROPERTY,
	TABBY_PREFERENCES_NUM_PROPERTIES
};
static GParamSpec* tabby_preferences_properties[TABBY_PREFERENCES_NUM_PROPERTIES];
typedef struct _Block3Data Block3Data;

#define TABBY_TYPE_CLEAR_SESSION (tabby_clear_session_get_type ())
#define TABBY_CLEAR_SESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TABBY_TYPE_CLEAR_SESSION, TabbyClearSession))
#define TABBY_CLEAR_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TABBY_TYPE_CLEAR_SESSION, TabbyClearSessionClass))
#define TABBY_IS_CLEAR_SESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TABBY_TYPE_CLEAR_SESSION))
#define TABBY_IS_CLEAR_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TABBY_TYPE_CLEAR_SESSION))
#define TABBY_CLEAR_SESSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TABBY_TYPE_CLEAR_SESSION, TabbyClearSessionClass))

typedef struct _TabbyClearSession TabbyClearSession;
typedef struct _TabbyClearSessionClass TabbyClearSessionClass;
typedef struct _TabbyClearSessionPrivate TabbyClearSessionPrivate;
enum  {
	TABBY_CLEAR_SESSION_0_PROPERTY,
	TABBY_CLEAR_SESSION_BOX_PROPERTY,
	TABBY_CLEAR_SESSION_NUM_PROPERTIES
};
static GParamSpec* tabby_clear_session_properties[TABBY_CLEAR_SESSION_NUM_PROPERTIES];
typedef struct _TabbyClearSessionClearData TabbyClearSessionClearData;

struct _TabbySessionDatabase {
	MidoriDatabase parent_instance;
	TabbySessionDatabasePrivate * priv;
};

struct _TabbySessionDatabaseClass {
	MidoriDatabaseClass parent_class;
};

struct _TabbySessionDatabasePrivate {
	GHashTable* browsers;
};

struct _TabbySessionDatabaseGetSessionsData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	GList* result;
	gchar* sqlcmd;
	gchar* _tmp0_;
	GList* sessions;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp1_;
	MidoriDatabaseStatement* _tmp2_;
	gboolean _tmp3_;
	MidoriDatabaseStatement* _tmp4_;
	gint64 id;
	MidoriDatabaseStatement* _tmp5_;
	gint64 closed;
	MidoriDatabaseStatement* _tmp6_;
	gboolean _tmp7_;
	gint64 _tmp8_;
	GList* _tmp9_;
	gint64 _tmp10_;
	gint64* _tmp11_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseGetItemsData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	gint64 session_id;
	gchar* filter;
	gint64 max_items;
	GCancellable* cancellable;
	GList* result;
	const gchar* _tmp0_;
	gchar* where;
	gchar* _tmp1_;
	gchar* sqlcmd;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp6_;
	MidoriDatabaseStatement* _tmp7_;
	gchar* real_filter;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	MidoriDatabaseStatement* _tmp14_;
	const gchar* _tmp15_;
	GList* items;
	gboolean _tmp16_;
	MidoriDatabaseStatement* _tmp17_;
	gchar* uri;
	MidoriDatabaseStatement* _tmp18_;
	gchar* _tmp19_;
	gchar* title;
	MidoriDatabaseStatement* _tmp20_;
	gchar* _tmp21_;
	gint64 date;
	MidoriDatabaseStatement* _tmp22_;
	MidoriDatabaseItem* item;
	const gchar* _tmp23_;
	const gchar* _tmp24_;
	gint64 _tmp25_;
	MidoriDatabaseItem* _tmp26_;
	MidoriDatabaseItem* _tmp27_;
	gint64 _tmp28_;
	MidoriDatabaseStatement* _tmp29_;
	MidoriDatabaseItem* _tmp30_;
	MidoriDatabaseItem* _tmp31_;
	gint64 _tmp32_;
	MidoriDatabaseStatement* _tmp33_;
	MidoriDatabaseItem* _tmp34_;
	MidoriDatabaseItem* _tmp35_;
	MidoriDatabaseItem* _tmp36_;
	guint src;
	guint _tmp37_;
	gboolean _tmp38_;
	gboolean _tmp39_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseQueryData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	gchar* filter;
	gint64 max_items;
	GCancellable* cancellable;
	GList* result;
	GList* items;
	GList* _tmp0_;
	GList* _tmp1_;
	GList* session_id_collection;
	GList* session_id_it;
	gint64 session_id;
	GList* _tmp2_;
	gint64 _tmp3_;
	GList* _tmp4_;
	GList* item_collection;
	GList* item_it;
	MidoriDatabaseItem* _tmp5_;
	MidoriDatabaseItem* item;
	MidoriDatabaseItem* _tmp6_;
	MidoriDatabaseItem* _tmp7_;
	gboolean _tmp8_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseInsertData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	MidoriDatabaseItem* item;
	gboolean result;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp3_;
	gint64 _tmp4_;
	gint64 _tmp5_;
	gint64 _tmp6_;
	gint64 _tmp7_;
	gconstpointer _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	const gchar* _tmp12_;
	MidoriDatabaseStatement* _tmp13_;
	gboolean _tmp14_;
	MidoriDatabaseStatement* _tmp15_;
	gint64 _tmp16_;
	MidoriDatabaseStatement* _tmp17_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseUpdateData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	MidoriDatabaseItem* item;
	gboolean result;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp3_;
	gint64 _tmp4_;
	gint64 _tmp5_;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	GDateTime* _tmp10_;
	GDateTime* _tmp11_;
	MidoriDatabaseStatement* _tmp12_;
	MidoriDatabaseStatement* _tmp13_;
	gboolean _tmp14_;
	MidoriDatabaseStatement* _tmp15_;
	GError* _error_;
	const gchar* _tmp16_;
	const gchar* _tmp17_;
	GError* _tmp18_;
	const gchar* _tmp19_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseDeleteData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	MidoriDatabaseItem* item;
	gboolean result;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp3_;
	gint64 _tmp4_;
	gint64 _tmp5_;
	MidoriDatabaseStatement* _tmp6_;
	gboolean _tmp7_;
	MidoriDatabaseStatement* _tmp8_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseUpdateTabData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	MidoriDatabaseItem* item;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* _tmp3_;
	const gchar* _tmp4_;
	gint64 _tmp5_;
	gint64 _tmp6_;
	gconstpointer _tmp7_;
	MidoriDatabaseStatement* _tmp8_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseClearData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	GTimeSpan timespan;
	gboolean result;
	gint64 maximum_age;
	GDateTime* _tmp0_;
	GDateTime* _tmp1_;
	gint64 _tmp2_;
	gchar* sqlcmd;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp6_;
	gint64 _tmp7_;
	MidoriDatabaseStatement* _tmp8_;
	gboolean _tmp9_;
	MidoriDatabaseStatement* _tmp10_;
	GError* _inner_error0_;
};

struct _TabbySessionDatabaseRestoreWindowsData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	MidoriBrowser* default_browser;
	gboolean result;
	gboolean restored;
	GList* _tmp0_;
	GList* _tmp1_;
	GList* item_collection;
	GList* item_it;
	MidoriDatabaseItem* _tmp2_;
	MidoriDatabaseItem* item;
	MidoriBrowser* browser;
	gint64 id;
	MidoriDatabaseItem* _tmp3_;
	gconstpointer _tmp4_;
	gboolean _tmp5_;
	MidoriBrowser* _tmp6_;
	MidoriBrowser* _tmp7_;
	gint64 _tmp8_;
	MidoriBrowser* _tmp9_;
	GtkStack* _tmp10_;
	GList* _tmp11_;
	GList* widget_collection;
	GList* widget_it;
	GtkWidget* widget;
	GtkWidget* _tmp12_;
	gint64 _tmp13_;
	MidoriApp* app;
	GtkApplication* _tmp14_;
	MidoriApp* _tmp15_;
	MidoriApp* _tmp16_;
	gint64 _tmp17_;
	MidoriBrowser* _tmp18_;
	MidoriTab* tab;
	MidoriBrowser* _tmp19_;
	WebKitWebContext* _tmp20_;
	WebKitWebContext* _tmp21_;
	MidoriDatabaseItem* _tmp22_;
	const gchar* _tmp23_;
	const gchar* _tmp24_;
	MidoriDatabaseItem* _tmp25_;
	const gchar* _tmp26_;
	const gchar* _tmp27_;
	MidoriTab* _tmp28_;
	MidoriTab* _tmp29_;
	MidoriDatabaseItem* _tmp30_;
	gconstpointer _tmp31_;
	MidoriTab* _tmp32_;
	MidoriDatabaseItem* _tmp33_;
	MidoriBrowser* _tmp34_;
	MidoriTab* _tmp35_;
	GError* _inner_error0_;
};

struct _Block1Data {
	int _ref_count_;
	TabbySessionDatabase* self;
	gint64 id;
};

struct _Block2Data {
	int _ref_count_;
	TabbySessionDatabase* self;
	MidoriTab* tab;
	MidoriDatabaseItem* item;
};

struct _TabbySessionDatabaseTabAddedData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySessionDatabase* self;
	MidoriTab* tab;
	gint64 id;
	MidoriDatabaseItem* item;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	GDateTime* _tmp4_;
	GDateTime* _tmp5_;
	MidoriDatabaseItem* _tmp6_;
	MidoriDatabaseItem* _tmp7_;
	MidoriDatabaseItem* _tmp8_;
	MidoriDatabaseItem* _tmp9_;
	MidoriDatabaseItem* _tmp10_;
	GError* _error_;
	GError* _tmp11_;
	const gchar* _tmp12_;
	GError* _inner_error0_;
};

struct _TabbySession {
	PeasExtensionBase parent_instance;
	TabbySessionPrivate * priv;
};

struct _TabbySessionClass {
	PeasExtensionBaseClass parent_class;
};

struct _TabbySessionPrivate {
	MidoriBrowser* _browser;
};

struct _TabbySessionRestoreSessionData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbySession* self;
	TabbySessionDatabase* session;
	gboolean restored;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	gboolean _tmp3_;
	MidoriBrowser* _tmp4_;
	MidoriBrowser* _tmp5_;
	MidoriBrowser* _tmp6_;
	MidoriBrowser* _tmp7_;
	MidoriBrowser* _tmp8_;
	MidoriBrowser* _tmp9_;
	WebKitWebContext* _tmp10_;
	WebKitWebContext* _tmp11_;
	MidoriTab* _tmp12_;
	MidoriTab* _tmp13_;
	MidoriBrowser* _tmp14_;
	MidoriBrowser* _tmp15_;
	MidoriBrowser* _tmp16_;
	GError* _error_;
	GError* _tmp17_;
	const gchar* _tmp18_;
	GError* _inner_error0_;
};

struct _TabbyPreferences {
	GObject parent_instance;
	TabbyPreferencesPrivate * priv;
};

struct _TabbyPreferencesClass {
	GObjectClass parent_class;
};

struct _TabbyPreferencesPrivate {
	MidoriPreferences* _preferences;
};

struct _Block3Data {
	int _ref_count_;
	TabbyPreferences* self;
	MidoriLabelWidget* box;
};

struct _TabbyClearSession {
	PeasExtensionBase parent_instance;
	TabbyClearSessionPrivate * priv;
};

struct _TabbyClearSessionClass {
	PeasExtensionBaseClass parent_class;
};

struct _TabbyClearSessionPrivate {
	GtkBox* _box;
	GtkCheckButton* button;
};

struct _TabbyClearSessionClearData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	TabbyClearSession* self;
	GTimeSpan timespan;
	GtkCheckButton* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	TabbySessionDatabase* _tmp3_;
	TabbySessionDatabase* _tmp4_;
	GError* _error_;
	GError* _tmp5_;
	const gchar* _tmp6_;
	GError* _inner_error0_;
};


static gpointer tabby_session_database_parent_class = NULL;
static TabbySessionDatabase* tabby_session_database__default;
static TabbySessionDatabase* tabby_session_database__default = NULL;
static GType tabby_session_database_type_id = 0;
static gpointer tabby_session_parent_class = NULL;
static gboolean tabby_session_session_restored;
static gboolean tabby_session_session_restored = FALSE;
static MidoriBrowserActivatableIface * tabby_session_midori_browser_activatable_parent_iface = NULL;
static GType tabby_session_type_id = 0;
static gpointer tabby_preferences_parent_class = NULL;
static MidoriPreferencesActivatableIface * tabby_preferences_midori_preferences_activatable_parent_iface = NULL;
static GType tabby_preferences_type_id = 0;
static gpointer tabby_clear_session_parent_class = NULL;
static MidoriClearPrivateDataActivatableIface * tabby_clear_session_midori_clear_private_data_activatable_parent_iface = NULL;
static GType tabby_clear_session_type_id = 0;

GType tabby_session_database_register_type (GTypeModule * module);
GType tabby_session_database_get_type (void) G_GNUC_CONST;
#define TABBY_SESSION_DATABASE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_TYPE_SESSION_DATABASE, TabbySessionDatabasePrivate))
TabbySessionDatabase* tabby_session_database_get_default (GError** error);
static TabbySessionDatabase* tabby_session_database_new (GError** error);
static TabbySessionDatabase* tabby_session_database_construct (GType object_type,
                                                        GError** error);
static void _g_free0_ (gpointer var);
static void _g_object_unref0_ (gpointer var);
static inline void _g_list_free__g_free0_ (GList* self);
static void tabby_session_database_get_sessions_data_free (gpointer _data);
static void tabby_session_database_get_sessions (TabbySessionDatabase* self,
                                          GAsyncReadyCallback _callback_,
                                          gpointer _user_data_);
static GList* tabby_session_database_get_sessions_finish (TabbySessionDatabase* self,
                                                   GAsyncResult* _res_,
                                                   GError** error);
static gboolean tabby_session_database_get_sessions_co (TabbySessionDatabaseGetSessionsData* _data_);
static gint64* _int64_dup (gint64* self);
static inline void _g_list_free__g_object_unref0_ (GList* self);
static void tabby_session_database_get_items_data_free (gpointer _data);
static void tabby_session_database_get_items (TabbySessionDatabase* self,
                                       gint64 session_id,
                                       const gchar* filter,
                                       gint64 max_items,
                                       GCancellable* cancellable,
                                       GAsyncReadyCallback _callback_,
                                       gpointer _user_data_);
static GList* tabby_session_database_get_items_finish (TabbySessionDatabase* self,
                                                GAsyncResult* _res_,
                                                GError** error);
static gboolean tabby_session_database_get_items_co (TabbySessionDatabaseGetItemsData* _data_);
static gboolean _tabby_session_database_get_items_co_gsource_func (gpointer self);
static void tabby_session_database_real_query_data_free (gpointer _data);
static void tabby_session_database_real_query (MidoriDatabase* base,
                                        const gchar* filter,
                                        gint64 max_items,
                                        GCancellable* cancellable,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_);
static gboolean tabby_session_database_real_query_co (TabbySessionDatabaseQueryData* _data_);
static void tabby_session_database_query_ready (GObject* source_object,
                                         GAsyncResult* _res_,
                                         gpointer _user_data_);
static void tabby_session_database_real_insert_data_free (gpointer _data);
static void tabby_session_database_real_insert (MidoriDatabase* base,
                                         MidoriDatabaseItem* item,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_);
static gboolean tabby_session_database_real_insert_co (TabbySessionDatabaseInsertData* _data_);
static void tabby_session_database_real_update_data_free (gpointer _data);
static void tabby_session_database_real_update (MidoriDatabase* base,
                                         MidoriDatabaseItem* item,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_);
static gboolean tabby_session_database_real_update_co (TabbySessionDatabaseUpdateData* _data_);
static void tabby_session_database_real_delete_data_free (gpointer _data);
static void tabby_session_database_real_delete (MidoriDatabase* base,
                                         MidoriDatabaseItem* item,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_);
static gboolean tabby_session_database_real_delete_co (TabbySessionDatabaseDeleteData* _data_);
static gint64 tabby_session_database_insert_session (TabbySessionDatabase* self);
static void tabby_session_database_update_session (TabbySessionDatabase* self,
                                            gint64 id,
                                            gboolean closed);
static void tabby_session_database_update_tab_data_free (gpointer _data);
static void tabby_session_database_update_tab (TabbySessionDatabase* self,
                                        MidoriDatabaseItem* item,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_);
static void tabby_session_database_update_tab_finish (TabbySessionDatabase* self,
                                               GAsyncResult* _res_,
                                               GError** error);
static gboolean tabby_session_database_update_tab_co (TabbySessionDatabaseUpdateTabData* _data_);
static void tabby_session_database_real_clear_data_free (gpointer _data);
static void tabby_session_database_real_clear (MidoriDatabase* base,
                                        GTimeSpan timespan,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_);
static gboolean tabby_session_database_real_clear_co (TabbySessionDatabaseClearData* _data_);
static void tabby_session_database_restore_windows_data_free (gpointer _data);
void tabby_session_database_restore_windows (TabbySessionDatabase* self,
                                             MidoriBrowser* default_browser,
                                             GAsyncReadyCallback _callback_,
                                             gpointer _user_data_);
gboolean tabby_session_database_restore_windows_finish (TabbySessionDatabase* self,
                                                        GAsyncResult* _res_,
                                                        GError** error);
static gboolean tabby_session_database_restore_windows_co (TabbySessionDatabaseRestoreWindowsData* _data_);
static void tabby_session_database_restore_windows_ready (GObject* source_object,
                                                   GAsyncResult* _res_,
                                                   gpointer _user_data_);
void tabby_session_database_connect_browser (TabbySessionDatabase* self,
                                             MidoriBrowser* browser,
                                             gint64 id);
static void tabby_session_database_tab_added (TabbySessionDatabase* self,
                                       MidoriTab* tab,
                                       gint64 id,
                                       GAsyncReadyCallback _callback_,
                                       gpointer _user_data_);
static void tabby_session_database_tab_added_finish (TabbySessionDatabase* self,
                                              GAsyncResult* _res_);
static MidoriBrowser* tabby_session_database_browser_for_session (TabbySessionDatabase* self,
                                                           MidoriApp* app,
                                                           gint64 id);
static void tabby_session_database_connect_tab (TabbySessionDatabase* self,
                                         MidoriTab* tab,
                                         MidoriDatabaseItem* item);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static void __lambda8_ (Block1Data* _data1_,
                 GtkWidget* widget);
static void ___lambda8__gtk_container_add (GtkContainer* _sender,
                                    GtkWidget* widget,
                                    gpointer self);
static gboolean __lambda9_ (Block1Data* _data1_,
                     GdkEventAny* event);
static gboolean ___lambda9__gtk_widget_delete_event (GtkWidget* _sender,
                                              GdkEventAny* event,
                                              gpointer self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void __lambda4_ (Block2Data* _data2_,
                 GParamSpec* pspec);
static void ___lambda4__g_object_notify (GObject* _sender,
                                  GParamSpec* pspec,
                                  gpointer self);
static void __lambda5_ (Block2Data* _data2_,
                 GParamSpec* pspec);
static void ___lambda5__g_object_notify (GObject* _sender,
                                  GParamSpec* pspec,
                                  gpointer self);
static void __lambda6_ (Block2Data* _data2_,
                 GParamSpec* pspec);
static void ___lambda6__g_object_notify (GObject* _sender,
                                  GParamSpec* pspec,
                                  gpointer self);
static void __lambda7_ (Block2Data* _data2_);
static void tabby_session_database_tab_removed (TabbySessionDatabase* self,
                                         MidoriTab* tab);
static void ___lambda7__webkit_web_view_close (WebKitWebView* _sender,
                                        gpointer self);
static gboolean tabby_session_database_tab_is_connected (TabbySessionDatabase* self,
                                                  MidoriTab* tab);
static void tabby_session_database_tab_added_data_free (gpointer _data);
static gboolean tabby_session_database_tab_added_co (TabbySessionDatabaseTabAddedData* _data_);
static void tabby_session_database_tab_added_ready (GObject* source_object,
                                             GAsyncResult* _res_,
                                             gpointer _user_data_);
static void tabby_session_database_finalize (GObject * obj);
GType tabby_session_register_type (GTypeModule * module);
GType tabby_session_get_type (void) G_GNUC_CONST;
#define TABBY_SESSION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_TYPE_SESSION, TabbySessionPrivate))
static void tabby_session_real_activate (MidoriBrowserActivatable* base);
static gboolean tabby_session_restore_or_connect (TabbySession* self);
static gboolean _tabby_session_restore_or_connect_midori_browser_default_tab (MidoriBrowser* _sender,
                                                                       gpointer self);
static void tabby_session_restore_session (TabbySession* self,
                                    TabbySessionDatabase* session,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_);
static void tabby_session_restore_session_finish (TabbySession* self,
                                           GAsyncResult* _res_);
static void tabby_session_restore_session_data_free (gpointer _data);
static gboolean tabby_session_restore_session_co (TabbySessionRestoreSessionData* _data_);
static void tabby_session_restore_session_ready (GObject* source_object,
                                          GAsyncResult* _res_,
                                          gpointer _user_data_);
TabbySession* tabby_session_new (void);
TabbySession* tabby_session_construct (GType object_type);
static void tabby_session_finalize (GObject * obj);
static void _vala_tabby_session_get_property (GObject * object,
                                       guint property_id,
                                       GValue * value,
                                       GParamSpec * pspec);
static void _vala_tabby_session_set_property (GObject * object,
                                       guint property_id,
                                       const GValue * value,
                                       GParamSpec * pspec);
GType tabby_preferences_register_type (GTypeModule * module);
GType tabby_preferences_get_type (void) G_GNUC_CONST;
#define TABBY_PREFERENCES_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_TYPE_PREFERENCES, TabbyPreferencesPrivate))
static void tabby_preferences_real_activate (MidoriPreferencesActivatable* base);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void __lambda10_ (Block3Data* _data3_);
static void ___lambda10__midori_preferences_activatable_deactivate (MidoriPreferencesActivatable* _sender,
                                                             gpointer self);
TabbyPreferences* tabby_preferences_new (void);
TabbyPreferences* tabby_preferences_construct (GType object_type);
static void tabby_preferences_finalize (GObject * obj);
static void _vala_tabby_preferences_get_property (GObject * object,
                                           guint property_id,
                                           GValue * value,
                                           GParamSpec * pspec);
static void _vala_tabby_preferences_set_property (GObject * object,
                                           guint property_id,
                                           const GValue * value,
                                           GParamSpec * pspec);
GType tabby_clear_session_register_type (GTypeModule * module);
GType tabby_clear_session_get_type (void) G_GNUC_CONST;
#define TABBY_CLEAR_SESSION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TABBY_TYPE_CLEAR_SESSION, TabbyClearSessionPrivate))
static void tabby_clear_session_real_activate (MidoriClearPrivateDataActivatable* base);
static void tabby_clear_session_real_clear_data_free (gpointer _data);
static void tabby_clear_session_real_clear (MidoriClearPrivateDataActivatable* base,
                                     GTimeSpan timespan,
                                     GAsyncReadyCallback _callback_,
                                     gpointer _user_data_);
static gboolean tabby_clear_session_real_clear_co (TabbyClearSessionClearData* _data_);
static void tabby_clear_session_clear_ready (GObject* source_object,
                                      GAsyncResult* _res_,
                                      gpointer _user_data_);
TabbyClearSession* tabby_clear_session_new (void);
TabbyClearSession* tabby_clear_session_construct (GType object_type);
static void tabby_clear_session_finalize (GObject * obj);
static void _vala_tabby_clear_session_get_property (GObject * object,
                                             guint property_id,
                                             GValue * value,
                                             GParamSpec * pspec);
static void _vala_tabby_clear_session_set_property (GObject * object,
                                             guint property_id,
                                             const GValue * value,
                                             GParamSpec * pspec);
void peas_register_types (GTypeModule* module);
GType tabby_session_database_register_type (GTypeModule * module);
GType tabby_session_register_type (GTypeModule * module);
GType tabby_preferences_register_type (GTypeModule * module);
GType tabby_clear_session_register_type (GTypeModule * module);


static gpointer
_g_object_ref0 (gpointer self)
{
#line 22 "/home/test/core/extensions/session.vala"
	return self ? g_object_ref (self) : NULL;
#line 828 "session.c"
}


TabbySessionDatabase*
tabby_session_database_get_default (GError** error)
{
	TabbySessionDatabase* result = NULL;
	TabbySessionDatabase* _tmp0_;
	TabbySessionDatabase* _tmp4_;
	TabbySessionDatabase* _tmp5_;
	GError* _inner_error0_ = NULL;
#line 19 "/home/test/core/extensions/session.vala"
	_tmp0_ = tabby_session_database__default;
#line 19 "/home/test/core/extensions/session.vala"
	if (_tmp0_ == NULL) {
#line 844 "session.c"
		TabbySessionDatabase* _tmp1_ = NULL;
		TabbySessionDatabase* _tmp2_;
		TabbySessionDatabase* _tmp3_;
#line 20 "/home/test/core/extensions/session.vala"
		_tmp2_ = tabby_session_database_new (&_inner_error0_);
#line 20 "/home/test/core/extensions/session.vala"
		_tmp1_ = _tmp2_;
#line 20 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 20 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 20 "/home/test/core/extensions/session.vala"
				g_propagate_error (error, _inner_error0_);
#line 20 "/home/test/core/extensions/session.vala"
				return NULL;
#line 860 "session.c"
			} else {
#line 20 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 20 "/home/test/core/extensions/session.vala"
				g_clear_error (&_inner_error0_);
#line 20 "/home/test/core/extensions/session.vala"
				return NULL;
#line 868 "session.c"
			}
		}
#line 20 "/home/test/core/extensions/session.vala"
		_tmp3_ = _tmp1_;
#line 20 "/home/test/core/extensions/session.vala"
		_tmp1_ = NULL;
#line 20 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (tabby_session_database__default);
#line 20 "/home/test/core/extensions/session.vala"
		tabby_session_database__default = _tmp3_;
#line 19 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_tmp1_);
#line 881 "session.c"
	}
#line 22 "/home/test/core/extensions/session.vala"
	_tmp4_ = tabby_session_database__default;
#line 22 "/home/test/core/extensions/session.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 22 "/home/test/core/extensions/session.vala"
	result = _tmp5_;
#line 22 "/home/test/core/extensions/session.vala"
	return result;
#line 891 "session.c"
}


static void
_g_free0_ (gpointer var)
{
#line 28 "/home/test/core/extensions/session.vala"
	var = (g_free (var), NULL);
#line 900 "session.c"
}


static void
_g_object_unref0_ (gpointer var)
{
#line 28 "/home/test/core/extensions/session.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 909 "session.c"
}


static TabbySessionDatabase*
tabby_session_database_construct (GType object_type,
                                  GError** error)
{
	TabbySessionDatabase * self = NULL;
	GHashFunc _tmp0_;
	GEqualFunc _tmp1_;
	GHashTable* _tmp2_;
	GError* _inner_error0_ = NULL;
#line 26 "/home/test/core/extensions/session.vala"
	self = (TabbySessionDatabase*) g_object_new (object_type, "path", "tabby.db", "table", "tabs", NULL);
#line 27 "/home/test/core/extensions/session.vala"
	midori_database_init ((MidoriDatabase*) self, NULL, &_inner_error0_);
#line 27 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 27 "/home/test/core/extensions/session.vala"
		if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 27 "/home/test/core/extensions/session.vala"
			g_propagate_error (error, _inner_error0_);
#line 27 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (self);
#line 27 "/home/test/core/extensions/session.vala"
			return NULL;
#line 936 "session.c"
		} else {
#line 27 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 27 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 27 "/home/test/core/extensions/session.vala"
			return NULL;
#line 944 "session.c"
		}
	}
#line 28 "/home/test/core/extensions/session.vala"
	_tmp0_ = g_str_hash;
#line 28 "/home/test/core/extensions/session.vala"
	_tmp1_ = g_str_equal;
#line 28 "/home/test/core/extensions/session.vala"
	_tmp2_ = g_hash_table_new_full (_tmp0_, _tmp1_, _g_free0_, _g_object_unref0_);
#line 28 "/home/test/core/extensions/session.vala"
	_g_hash_table_unref0 (self->priv->browsers);
#line 28 "/home/test/core/extensions/session.vala"
	self->priv->browsers = _tmp2_;
#line 25 "/home/test/core/extensions/session.vala"
	return self;
#line 959 "session.c"
}


static TabbySessionDatabase*
tabby_session_database_new (GError** error)
{
#line 25 "/home/test/core/extensions/session.vala"
	return tabby_session_database_construct (TABBY_TYPE_SESSION_DATABASE, error);
#line 968 "session.c"
}


static inline void
_g_list_free__g_free0_ (GList* self)
{
#line 13 "/home/test/core/extensions/session.vala"
	g_list_free_full (self, (GDestroyNotify) _g_free0_);
#line 977 "session.c"
}


static void
tabby_session_database_get_sessions_data_free (gpointer _data)
{
	TabbySessionDatabaseGetSessionsData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	(_data_->result == NULL) ? NULL : (_data_->result = (_g_list_free__g_free0_ (_data_->result), NULL));
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseGetSessionsData, _data_);
#line 992 "session.c"
}


static void
tabby_session_database_get_sessions (TabbySessionDatabase* self,
                                     GAsyncReadyCallback _callback_,
                                     gpointer _user_data_)
{
	TabbySessionDatabaseGetSessionsData* _data_;
	TabbySessionDatabase* _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseGetSessionsData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_get_sessions_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_get_sessions_co (_data_);
#line 1015 "session.c"
}


static GList*
tabby_session_database_get_sessions_finish (TabbySessionDatabase* self,
                                            GAsyncResult* _res_,
                                            GError** error)
{
	GList* result;
	TabbySessionDatabaseGetSessionsData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/session.vala"
		return NULL;
#line 1032 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->result = NULL;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 1040 "session.c"
}


static gint64*
_int64_dup (gint64* self)
{
	gint64* dup;
#line 44 "/home/test/core/extensions/session.vala"
	dup = g_new0 (gint64, 1);
#line 44 "/home/test/core/extensions/session.vala"
	memcpy (dup, self, sizeof (gint64));
#line 44 "/home/test/core/extensions/session.vala"
	return dup;
#line 1054 "session.c"
}


static gpointer
__int64_dup0 (gpointer self)
{
#line 44 "/home/test/core/extensions/session.vala"
	return self ? _int64_dup (self) : NULL;
#line 1063 "session.c"
}


static gboolean
tabby_session_database_get_sessions_co (TabbySessionDatabaseGetSessionsData* _data_)
{
#line 31 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 31 "/home/test/core/extensions/session.vala"
		case 0:
#line 1074 "session.c"
		goto _state_0;
		default:
#line 31 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 1079 "session.c"
	}
	_state_0:
#line 32 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = g_strdup ("\n" \
"                SELECT id, closed FROM sessions WHERE closed = 0\n" \
"                UNION\n" \
"                SELECT * FROM (SELECT id, closed FROM sessions WHERE c" \
"losed = 1 ORDER BY tstamp DESC LIMIT 1)\n" \
"                ORDER BY closed;\n" \
"            ");
#line 32 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp0_;
#line 38 "/home/test/core/extensions/session.vala"
	_data_->sessions = NULL;
#line 39 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->sqlcmd;
#line 39 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp1_, &_data_->_inner_error0_, NULL);
#line 39 "/home/test/core/extensions/session.vala"
	_data_->statement = _data_->_tmp2_;
#line 39 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 39 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 39 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 39 "/home/test/core/extensions/session.vala"
			(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 39 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 39 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 39 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 1108 "session.c"
		} else {
#line 39 "/home/test/core/extensions/session.vala"
			(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 39 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 39 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 39 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 39 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 39 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 1122 "session.c"
		}
	}
#line 40 "/home/test/core/extensions/session.vala"
	while (TRUE) {
#line 40 "/home/test/core/extensions/session.vala"
		_data_->_tmp4_ = _data_->statement;
#line 40 "/home/test/core/extensions/session.vala"
		_data_->_tmp3_ = midori_database_statement_step (_data_->_tmp4_, &_data_->_inner_error0_);
#line 40 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 40 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 40 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 40 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 40 "/home/test/core/extensions/session.vala"
				(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 40 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 40 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 40 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1147 "session.c"
			} else {
#line 40 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 40 "/home/test/core/extensions/session.vala"
				(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 40 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 40 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 40 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 40 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 40 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1163 "session.c"
			}
		}
#line 40 "/home/test/core/extensions/session.vala"
		if (!_data_->_tmp3_) {
#line 40 "/home/test/core/extensions/session.vala"
			break;
#line 1170 "session.c"
		}
#line 41 "/home/test/core/extensions/session.vala"
		_data_->_tmp5_ = _data_->statement;
#line 41 "/home/test/core/extensions/session.vala"
		_data_->id = midori_database_statement_get_int64 (_data_->_tmp5_, "id", &_data_->_inner_error0_);
#line 41 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 41 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 41 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 41 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 41 "/home/test/core/extensions/session.vala"
				(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 41 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 41 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 41 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1192 "session.c"
			} else {
#line 41 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 41 "/home/test/core/extensions/session.vala"
				(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 41 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 41 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 41 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 41 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 41 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1208 "session.c"
			}
		}
#line 42 "/home/test/core/extensions/session.vala"
		_data_->_tmp6_ = _data_->statement;
#line 42 "/home/test/core/extensions/session.vala"
		_data_->closed = midori_database_statement_get_int64 (_data_->_tmp6_, "closed", &_data_->_inner_error0_);
#line 42 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 42 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 42 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 42 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 42 "/home/test/core/extensions/session.vala"
				(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 42 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 42 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 42 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1231 "session.c"
			} else {
#line 42 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 42 "/home/test/core/extensions/session.vala"
				(_data_->sessions == NULL) ? NULL : (_data_->sessions = (_g_list_free__g_free0_ (_data_->sessions), NULL));
#line 42 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 42 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 42 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 42 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 42 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1247 "session.c"
			}
		}
#line 43 "/home/test/core/extensions/session.vala"
		_data_->_tmp8_ = _data_->closed;
#line 43 "/home/test/core/extensions/session.vala"
		if (_data_->_tmp8_ == ((gint64) 0)) {
#line 43 "/home/test/core/extensions/session.vala"
			_data_->_tmp7_ = TRUE;
#line 1256 "session.c"
		} else {
#line 43 "/home/test/core/extensions/session.vala"
			_data_->_tmp9_ = _data_->sessions;
#line 43 "/home/test/core/extensions/session.vala"
			_data_->_tmp7_ = g_list_length (_data_->_tmp9_) == ((guint) 0);
#line 1262 "session.c"
		}
#line 43 "/home/test/core/extensions/session.vala"
		if (_data_->_tmp7_) {
#line 44 "/home/test/core/extensions/session.vala"
			_data_->_tmp10_ = _data_->id;
#line 44 "/home/test/core/extensions/session.vala"
			_data_->_tmp11_ = __int64_dup0 (&_data_->_tmp10_);
#line 44 "/home/test/core/extensions/session.vala"
			_data_->sessions = g_list_append (_data_->sessions, _data_->_tmp11_);
#line 1272 "session.c"
		}
	}
#line 47 "/home/test/core/extensions/session.vala"
	_data_->result = _data_->sessions;
#line 47 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->statement);
#line 47 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 47 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 47 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 47 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 47 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1289 "session.c"
		}
	}
#line 47 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 47 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 1296 "session.c"
}


static inline void
_g_list_free__g_object_unref0_ (GList* self)
{
#line 13 "/home/test/core/extensions/session.vala"
	g_list_free_full (self, (GDestroyNotify) _g_object_unref0_);
#line 1305 "session.c"
}


static void
tabby_session_database_get_items_data_free (gpointer _data)
{
	TabbySessionDatabaseGetItemsData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->filter);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->cancellable);
#line 13 "/home/test/core/extensions/session.vala"
	(_data_->result == NULL) ? NULL : (_data_->result = (_g_list_free__g_object_unref0_ (_data_->result), NULL));
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseGetItemsData, _data_);
#line 1324 "session.c"
}


static void
tabby_session_database_get_items (TabbySessionDatabase* self,
                                  gint64 session_id,
                                  const gchar* filter,
                                  gint64 max_items,
                                  GCancellable* cancellable,
                                  GAsyncReadyCallback _callback_,
                                  gpointer _user_data_)
{
	TabbySessionDatabaseGetItemsData* _data_;
	TabbySessionDatabase* _tmp0_;
	gchar* _tmp1_;
	GCancellable* _tmp2_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseGetItemsData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), cancellable, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_get_items_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->session_id = session_id;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = g_strdup (filter);
#line 13 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->filter);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->filter = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->max_items = max_items;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp2_ = _g_object_ref0 (cancellable);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->cancellable);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->cancellable = _tmp2_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_get_items_co (_data_);
#line 1369 "session.c"
}


static GList*
tabby_session_database_get_items_finish (TabbySessionDatabase* self,
                                         GAsyncResult* _res_,
                                         GError** error)
{
	GList* result;
	TabbySessionDatabaseGetItemsData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/session.vala"
		return NULL;
#line 1386 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->result = NULL;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 1394 "session.c"
}


static gchar*
string_replace (const gchar* self,
                const gchar* old,
                const gchar* replacement)
{
	gchar* result = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GError* _inner_error0_ = NULL;
#line 1479 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1479 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (old != NULL, NULL);
#line 1479 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (replacement != NULL, NULL);
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if ((*((gchar*) self)) == '\0') {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = TRUE;
#line 1417 "session.c"
	} else {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = (*((gchar*) old)) == '\0';
#line 1421 "session.c"
	}
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_) {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = TRUE;
#line 1427 "session.c"
	} else {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = g_strcmp0 (old, replacement) == 0;
#line 1431 "session.c"
	}
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp0_) {
#line 1435 "session.c"
		gchar* _tmp2_;
#line 1481 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = g_strdup (self);
#line 1481 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = _tmp2_;
#line 1481 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1443 "session.c"
	}
	{
		GRegex* regex = NULL;
		gchar* _tmp3_;
		gchar* _tmp4_;
		GRegex* _tmp5_;
		GRegex* _tmp6_;
		gchar* _tmp7_ = NULL;
		GRegex* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp3_ = g_regex_escape_string (old, -1);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp4_ = _tmp3_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp5_ = g_regex_new (_tmp4_, 0, 0, &_inner_error0_);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp6_ = _tmp5_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_free0 (_tmp4_);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		regex = _tmp6_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			if (_inner_error0_->domain == G_REGEX_ERROR) {
#line 1471 "session.c"
				goto __catch0_g_regex_error;
			}
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_clear_error (&_inner_error0_);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			return NULL;
#line 1480 "session.c"
		}
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp8_ = regex;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp9_ = g_regex_replace_literal (_tmp8_, self, (gssize) -1, 0, replacement, 0, &_inner_error0_);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp7_ = _tmp9_;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			_g_regex_unref0 (regex);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			if (_inner_error0_->domain == G_REGEX_ERROR) {
#line 1494 "session.c"
				goto __catch0_g_regex_error;
			}
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_clear_error (&_inner_error0_);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			return NULL;
#line 1503 "session.c"
		}
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp10_ = _tmp7_;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp7_ = NULL;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = _tmp10_;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_free0 (_tmp7_);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_regex_unref0 (regex);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1517 "session.c"
	}
	goto __finally0;
	__catch0_g_regex_error:
	{
		GError* e = NULL;
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		e = _inner_error0_;
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_inner_error0_ = NULL;
#line 1487 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_assert_not_reached ();
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_error_free0 (e);
#line 1531 "session.c"
	}
	__finally0:
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_clear_error (&_inner_error0_);
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return NULL;
#line 1542 "session.c"
	}
}


static gboolean
_tabby_session_database_get_items_co_gsource_func (gpointer self)
{
	gboolean result;
	result = tabby_session_database_get_items_co (self);
#line 77 "/home/test/core/extensions/session.vala"
	return result;
#line 1554 "session.c"
}


static gboolean
tabby_session_database_get_items_co (TabbySessionDatabaseGetItemsData* _data_)
{
#line 50 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 50 "/home/test/core/extensions/session.vala"
		case 0:
#line 1565 "session.c"
		goto _state_0;
#line 50 "/home/test/core/extensions/session.vala"
		case 1:
#line 1569 "session.c"
		goto _state_1;
		default:
#line 50 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 1574 "session.c"
	}
	_state_0:
#line 51 "/home/test/core/extensions/session.vala"
	if (_data_->filter != NULL) {
#line 51 "/home/test/core/extensions/session.vala"
		_data_->_tmp0_ = "AND (uri LIKE :filter OR title LIKE :filter)";
#line 1581 "session.c"
	} else {
#line 51 "/home/test/core/extensions/session.vala"
		_data_->_tmp0_ = "";
#line 1585 "session.c"
	}
#line 51 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = g_strdup (_data_->_tmp0_);
#line 51 "/home/test/core/extensions/session.vala"
	_data_->where = _data_->_tmp1_;
#line 52 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 52 "/home/test/core/extensions/session.vala"
	_data_->_tmp3_ = _data_->_tmp2_;
#line 52 "/home/test/core/extensions/session.vala"
	_data_->_tmp4_ = _data_->where;
#line 52 "/home/test/core/extensions/session.vala"
	_data_->_tmp5_ = g_strdup_printf ("\n" \
"                SELECT id, uri, title, tstamp, pinned FROM %s\n" \
"                WHERE session_id = :session_id %s\n" \
"                ORDER BY tstamp DESC LIMIT :limit\n" \
"                ", _data_->_tmp3_, _data_->_tmp4_);
#line 52 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp5_;
#line 57 "/home/test/core/extensions/session.vala"
	_data_->_tmp6_ = _data_->sqlcmd;
#line 57 "/home/test/core/extensions/session.vala"
	_data_->_tmp7_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp6_, &_data_->_inner_error0_, ":session_id", G_TYPE_INT64, _data_->session_id, ":limit", G_TYPE_INT64, _data_->max_items, NULL);
#line 57 "/home/test/core/extensions/session.vala"
	_data_->statement = _data_->_tmp7_;
#line 57 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 57 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 57 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 57 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 57 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->where);
#line 57 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 57 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 1621 "session.c"
		} else {
#line 57 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 57 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->where);
#line 57 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 57 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 57 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 57 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 1635 "session.c"
		}
	}
#line 60 "/home/test/core/extensions/session.vala"
	if (_data_->filter != NULL) {
#line 61 "/home/test/core/extensions/session.vala"
		_data_->_tmp8_ = string_replace (_data_->filter, " ", "%");
#line 61 "/home/test/core/extensions/session.vala"
		_data_->_tmp9_ = _data_->_tmp8_;
#line 61 "/home/test/core/extensions/session.vala"
		_data_->_tmp10_ = g_strconcat ("%", _data_->_tmp9_, NULL);
#line 61 "/home/test/core/extensions/session.vala"
		_data_->_tmp11_ = _data_->_tmp10_;
#line 61 "/home/test/core/extensions/session.vala"
		_data_->_tmp12_ = g_strconcat (_data_->_tmp11_, "%", NULL);
#line 61 "/home/test/core/extensions/session.vala"
		_data_->_tmp13_ = _data_->_tmp12_;
#line 61 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->_tmp11_);
#line 61 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->_tmp9_);
#line 61 "/home/test/core/extensions/session.vala"
		_data_->real_filter = _data_->_tmp13_;
#line 62 "/home/test/core/extensions/session.vala"
		_data_->_tmp14_ = _data_->statement;
#line 62 "/home/test/core/extensions/session.vala"
		_data_->_tmp15_ = _data_->real_filter;
#line 62 "/home/test/core/extensions/session.vala"
		midori_database_statement_bind (_data_->_tmp14_, ":filter", &_data_->_inner_error0_, G_TYPE_STRING, _data_->_tmp15_, NULL);
#line 62 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 62 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 62 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 62 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->real_filter);
#line 62 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 62 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 62 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 62 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 62 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1682 "session.c"
			} else {
#line 62 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->real_filter);
#line 62 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 62 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 62 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 62 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 62 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 62 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 62 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1700 "session.c"
			}
		}
#line 60 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->real_filter);
#line 1705 "session.c"
	}
#line 65 "/home/test/core/extensions/session.vala"
	_data_->items = NULL;
#line 66 "/home/test/core/extensions/session.vala"
	while (TRUE) {
#line 66 "/home/test/core/extensions/session.vala"
		_data_->_tmp17_ = _data_->statement;
#line 66 "/home/test/core/extensions/session.vala"
		_data_->_tmp16_ = midori_database_statement_step (_data_->_tmp17_, &_data_->_inner_error0_);
#line 66 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 66 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 66 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 66 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 66 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 66 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 66 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 66 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 66 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1733 "session.c"
			} else {
#line 66 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 66 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 66 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 66 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 66 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 66 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 66 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 66 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1751 "session.c"
			}
		}
#line 66 "/home/test/core/extensions/session.vala"
		if (!_data_->_tmp16_) {
#line 66 "/home/test/core/extensions/session.vala"
			break;
#line 1758 "session.c"
		}
#line 67 "/home/test/core/extensions/session.vala"
		_data_->_tmp18_ = _data_->statement;
#line 67 "/home/test/core/extensions/session.vala"
		_data_->_tmp19_ = midori_database_statement_get_string (_data_->_tmp18_, "uri", &_data_->_inner_error0_);
#line 67 "/home/test/core/extensions/session.vala"
		_data_->uri = _data_->_tmp19_;
#line 67 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 67 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 67 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 67 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 67 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 67 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 67 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 67 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 67 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1784 "session.c"
			} else {
#line 67 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 67 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 67 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 67 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 67 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 67 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 67 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 67 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1802 "session.c"
			}
		}
#line 68 "/home/test/core/extensions/session.vala"
		_data_->_tmp20_ = _data_->statement;
#line 68 "/home/test/core/extensions/session.vala"
		_data_->_tmp21_ = midori_database_statement_get_string (_data_->_tmp20_, "title", &_data_->_inner_error0_);
#line 68 "/home/test/core/extensions/session.vala"
		_data_->title = _data_->_tmp21_;
#line 68 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 68 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 68 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 68 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 68 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 68 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 68 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 68 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 68 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 68 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1831 "session.c"
			} else {
#line 68 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 68 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 68 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 68 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 68 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 68 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 68 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 68 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 68 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1851 "session.c"
			}
		}
#line 69 "/home/test/core/extensions/session.vala"
		_data_->_tmp22_ = _data_->statement;
#line 69 "/home/test/core/extensions/session.vala"
		_data_->date = midori_database_statement_get_int64 (_data_->_tmp22_, "tstamp", &_data_->_inner_error0_);
#line 69 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 69 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 69 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->title);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 69 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 69 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 69 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 69 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1880 "session.c"
			} else {
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->title);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 69 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 69 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 69 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 69 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 69 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 69 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 69 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1902 "session.c"
			}
		}
#line 70 "/home/test/core/extensions/session.vala"
		_data_->_tmp23_ = _data_->uri;
#line 70 "/home/test/core/extensions/session.vala"
		_data_->_tmp24_ = _data_->title;
#line 70 "/home/test/core/extensions/session.vala"
		_data_->_tmp25_ = _data_->date;
#line 70 "/home/test/core/extensions/session.vala"
		_data_->_tmp26_ = midori_database_item_new (_data_->_tmp23_, _data_->_tmp24_, _data_->_tmp25_);
#line 70 "/home/test/core/extensions/session.vala"
		_data_->item = _data_->_tmp26_;
#line 71 "/home/test/core/extensions/session.vala"
		_data_->_tmp27_ = _data_->item;
#line 71 "/home/test/core/extensions/session.vala"
		midori_database_item_set_database (_data_->_tmp27_, (MidoriDatabase*) _data_->self);
#line 72 "/home/test/core/extensions/session.vala"
		_data_->_tmp29_ = _data_->statement;
#line 72 "/home/test/core/extensions/session.vala"
		_data_->_tmp28_ = midori_database_statement_get_int64 (_data_->_tmp29_, "id", &_data_->_inner_error0_);
#line 72 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 72 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 72 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 72 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->item);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->title);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 72 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 72 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 72 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 72 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1947 "session.c"
			} else {
#line 72 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->item);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->title);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 72 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 72 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 72 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 72 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 72 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 72 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 72 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 1971 "session.c"
			}
		}
#line 72 "/home/test/core/extensions/session.vala"
		_data_->_tmp30_ = _data_->item;
#line 72 "/home/test/core/extensions/session.vala"
		midori_database_item_set_id (_data_->_tmp30_, _data_->_tmp28_);
#line 73 "/home/test/core/extensions/session.vala"
		_data_->_tmp31_ = _data_->item;
#line 73 "/home/test/core/extensions/session.vala"
		g_object_set_data_full ((GObject*) _data_->_tmp31_, "session_id", _data_->session_id, NULL);
#line 74 "/home/test/core/extensions/session.vala"
		_data_->_tmp33_ = _data_->statement;
#line 74 "/home/test/core/extensions/session.vala"
		_data_->_tmp32_ = midori_database_statement_get_int64 (_data_->_tmp33_, "pinned", &_data_->_inner_error0_);
#line 74 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 74 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 74 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 74 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->item);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->title);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 74 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 74 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 74 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 74 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 2010 "session.c"
			} else {
#line 74 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->item);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->title);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->uri);
#line 74 "/home/test/core/extensions/session.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 74 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 74 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->where);
#line 74 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 74 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 74 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 74 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 2034 "session.c"
			}
		}
#line 74 "/home/test/core/extensions/session.vala"
		_data_->_tmp34_ = _data_->item;
#line 74 "/home/test/core/extensions/session.vala"
		g_object_set_data_full ((GObject*) _data_->_tmp34_, "pinned", _data_->_tmp32_, NULL);
#line 75 "/home/test/core/extensions/session.vala"
		_data_->_tmp35_ = _data_->item;
#line 75 "/home/test/core/extensions/session.vala"
		_data_->_tmp36_ = _g_object_ref0 (_data_->_tmp35_);
#line 75 "/home/test/core/extensions/session.vala"
		_data_->items = g_list_append (_data_->items, _data_->_tmp36_);
#line 77 "/home/test/core/extensions/session.vala"
		_data_->src = g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _tabby_session_database_get_items_co_gsource_func, _data_, NULL);
#line 78 "/home/test/core/extensions/session.vala"
		_data_->_state_ = 1;
#line 78 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 2053 "session.c"
		_state_1:
		;
#line 79 "/home/test/core/extensions/session.vala"
		_data_->_tmp37_ = _data_->src;
#line 79 "/home/test/core/extensions/session.vala"
		g_source_remove (_data_->_tmp37_);
#line 81 "/home/test/core/extensions/session.vala"
		if (_data_->cancellable != NULL) {
#line 81 "/home/test/core/extensions/session.vala"
			_data_->_tmp38_ = g_cancellable_is_cancelled (_data_->cancellable);
#line 2064 "session.c"
		} else {
#line 81 "/home/test/core/extensions/session.vala"
			_data_->_tmp38_ = FALSE;
#line 2068 "session.c"
		}
#line 81 "/home/test/core/extensions/session.vala"
		if (_data_->_tmp38_) {
#line 82 "/home/test/core/extensions/session.vala"
			_data_->result = NULL;
#line 82 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->item);
#line 82 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->title);
#line 82 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->uri);
#line 82 "/home/test/core/extensions/session.vala"
			(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 82 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 82 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 82 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->where);
#line 82 "/home/test/core/extensions/session.vala"
			g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 82 "/home/test/core/extensions/session.vala"
			if (_data_->_state_ != 0) {
#line 82 "/home/test/core/extensions/session.vala"
				while (!g_task_get_completed (_data_->_async_result)) {
#line 82 "/home/test/core/extensions/session.vala"
					g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2096 "session.c"
				}
			}
#line 82 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 82 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2103 "session.c"
		}
#line 66 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->item);
#line 66 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->title);
#line 66 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->uri);
#line 2111 "session.c"
	}
#line 85 "/home/test/core/extensions/session.vala"
	if (_data_->cancellable != NULL) {
#line 85 "/home/test/core/extensions/session.vala"
		_data_->_tmp39_ = g_cancellable_is_cancelled (_data_->cancellable);
#line 2117 "session.c"
	} else {
#line 85 "/home/test/core/extensions/session.vala"
		_data_->_tmp39_ = FALSE;
#line 2121 "session.c"
	}
#line 85 "/home/test/core/extensions/session.vala"
	if (_data_->_tmp39_) {
#line 86 "/home/test/core/extensions/session.vala"
		_data_->result = NULL;
#line 86 "/home/test/core/extensions/session.vala"
		(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 86 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->statement);
#line 86 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->sqlcmd);
#line 86 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->where);
#line 86 "/home/test/core/extensions/session.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 86 "/home/test/core/extensions/session.vala"
		if (_data_->_state_ != 0) {
#line 86 "/home/test/core/extensions/session.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 86 "/home/test/core/extensions/session.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2143 "session.c"
			}
		}
#line 86 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 86 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 2150 "session.c"
	}
#line 87 "/home/test/core/extensions/session.vala"
	_data_->result = _data_->items;
#line 87 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->statement);
#line 87 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 87 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->where);
#line 87 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 87 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 87 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 87 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2168 "session.c"
		}
	}
#line 87 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 87 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 2175 "session.c"
}


static void
tabby_session_database_real_query_data_free (gpointer _data)
{
	TabbySessionDatabaseQueryData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->filter);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->cancellable);
#line 13 "/home/test/core/extensions/session.vala"
	(_data_->result == NULL) ? NULL : (_data_->result = (_g_list_free__g_object_unref0_ (_data_->result), NULL));
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseQueryData, _data_);
#line 2194 "session.c"
}


static void
tabby_session_database_real_query (MidoriDatabase* base,
                                   const gchar* filter,
                                   gint64 max_items,
                                   GCancellable* cancellable,
                                   GAsyncReadyCallback _callback_,
                                   gpointer _user_data_)
{
	TabbySessionDatabase * self;
	TabbySessionDatabaseQueryData* _data_;
	TabbySessionDatabase* _tmp0_;
	gchar* _tmp1_;
	GCancellable* _tmp2_;
#line 13 "/home/test/core/extensions/session.vala"
	self = (TabbySessionDatabase*) base;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseQueryData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), cancellable, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_real_query_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = g_strdup (filter);
#line 13 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->filter);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->filter = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->max_items = max_items;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp2_ = _g_object_ref0 (cancellable);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->cancellable);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->cancellable = _tmp2_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_real_query_co (_data_);
#line 2239 "session.c"
}


static GList*
tabby_session_database_real_query_finish (MidoriDatabase* base,
                                          GAsyncResult* _res_,
                                          GError** error)
{
	GList* result;
	TabbySessionDatabaseQueryData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/session.vala"
		return NULL;
#line 2256 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->result = NULL;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 2264 "session.c"
}


static void
tabby_session_database_query_ready (GObject* source_object,
                                    GAsyncResult* _res_,
                                    gpointer _user_data_)
{
	TabbySessionDatabaseQueryData* _data_;
#line 92 "/home/test/core/extensions/session.vala"
	_data_ = _user_data_;
#line 92 "/home/test/core/extensions/session.vala"
	_data_->_source_object_ = source_object;
#line 92 "/home/test/core/extensions/session.vala"
	_data_->_res_ = _res_;
#line 92 "/home/test/core/extensions/session.vala"
	tabby_session_database_real_query_co (_data_);
#line 2282 "session.c"
}


static gboolean
tabby_session_database_real_query_co (TabbySessionDatabaseQueryData* _data_)
{
#line 90 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 90 "/home/test/core/extensions/session.vala"
		case 0:
#line 2293 "session.c"
		goto _state_0;
#line 90 "/home/test/core/extensions/session.vala"
		case 1:
#line 2297 "session.c"
		goto _state_1;
#line 90 "/home/test/core/extensions/session.vala"
		case 2:
#line 2301 "session.c"
		goto _state_2;
		default:
#line 90 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 2306 "session.c"
	}
	_state_0:
#line 91 "/home/test/core/extensions/session.vala"
	_data_->items = NULL;
#line 92 "/home/test/core/extensions/session.vala"
	_data_->_state_ = 1;
#line 92 "/home/test/core/extensions/session.vala"
	tabby_session_database_get_sessions (_data_->self, tabby_session_database_query_ready, _data_);
#line 92 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 2317 "session.c"
	_state_1:
#line 92 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = tabby_session_database_get_sessions_finish (_data_->self, _data_->_res_, &_data_->_inner_error0_);
#line 92 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = _data_->_tmp1_;
#line 92 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 92 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 92 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 92 "/home/test/core/extensions/session.vala"
			(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 92 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 92 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2335 "session.c"
		} else {
#line 92 "/home/test/core/extensions/session.vala"
			(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 92 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 92 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 92 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 92 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2347 "session.c"
		}
	}
	{
#line 92 "/home/test/core/extensions/session.vala"
		_data_->session_id_collection = _data_->_tmp0_;
#line 92 "/home/test/core/extensions/session.vala"
		for (_data_->session_id_it = _data_->session_id_collection; _data_->session_id_it != NULL; _data_->session_id_it = _data_->session_id_it->next) {
#line 92 "/home/test/core/extensions/session.vala"
			_data_->session_id = *((gint64*) _data_->session_id_it->data);
#line 2357 "session.c"
			{
#line 93 "/home/test/core/extensions/session.vala"
				_data_->_tmp3_ = _data_->session_id;
#line 93 "/home/test/core/extensions/session.vala"
				_data_->_state_ = 2;
#line 93 "/home/test/core/extensions/session.vala"
				tabby_session_database_get_items (_data_->self, _data_->_tmp3_, _data_->filter, _data_->max_items, _data_->cancellable, tabby_session_database_query_ready, _data_);
#line 93 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 2367 "session.c"
				_state_2:
#line 93 "/home/test/core/extensions/session.vala"
				_data_->_tmp4_ = tabby_session_database_get_items_finish (_data_->self, _data_->_res_, &_data_->_inner_error0_);
#line 93 "/home/test/core/extensions/session.vala"
				_data_->_tmp2_ = _data_->_tmp4_;
#line 93 "/home/test/core/extensions/session.vala"
				if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 93 "/home/test/core/extensions/session.vala"
					if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 93 "/home/test/core/extensions/session.vala"
						g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 93 "/home/test/core/extensions/session.vala"
						(_data_->_tmp0_ == NULL) ? NULL : (_data_->_tmp0_ = (_g_list_free__g_free0_ (_data_->_tmp0_), NULL));
#line 93 "/home/test/core/extensions/session.vala"
						(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 93 "/home/test/core/extensions/session.vala"
						g_object_unref (_data_->_async_result);
#line 93 "/home/test/core/extensions/session.vala"
						return FALSE;
#line 2387 "session.c"
					} else {
#line 93 "/home/test/core/extensions/session.vala"
						(_data_->_tmp0_ == NULL) ? NULL : (_data_->_tmp0_ = (_g_list_free__g_free0_ (_data_->_tmp0_), NULL));
#line 93 "/home/test/core/extensions/session.vala"
						(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 93 "/home/test/core/extensions/session.vala"
						g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 93 "/home/test/core/extensions/session.vala"
						g_clear_error (&_data_->_inner_error0_);
#line 93 "/home/test/core/extensions/session.vala"
						g_object_unref (_data_->_async_result);
#line 93 "/home/test/core/extensions/session.vala"
						return FALSE;
#line 2401 "session.c"
					}
				}
				{
#line 93 "/home/test/core/extensions/session.vala"
					_data_->item_collection = _data_->_tmp2_;
#line 93 "/home/test/core/extensions/session.vala"
					for (_data_->item_it = _data_->item_collection; _data_->item_it != NULL; _data_->item_it = _data_->item_it->next) {
#line 93 "/home/test/core/extensions/session.vala"
						_data_->_tmp5_ = _g_object_ref0 ((MidoriDatabaseItem*) _data_->item_it->data);
#line 93 "/home/test/core/extensions/session.vala"
						_data_->item = _data_->_tmp5_;
#line 2413 "session.c"
						{
#line 94 "/home/test/core/extensions/session.vala"
							_data_->_tmp6_ = _data_->item;
#line 94 "/home/test/core/extensions/session.vala"
							_data_->_tmp7_ = _g_object_ref0 (_data_->_tmp6_);
#line 94 "/home/test/core/extensions/session.vala"
							_data_->items = g_list_append (_data_->items, _data_->_tmp7_);
#line 93 "/home/test/core/extensions/session.vala"
							_g_object_unref0 (_data_->item);
#line 2423 "session.c"
						}
					}
				}
#line 92 "/home/test/core/extensions/session.vala"
				(_data_->_tmp2_ == NULL) ? NULL : (_data_->_tmp2_ = (_g_list_free__g_object_unref0_ (_data_->_tmp2_), NULL));
#line 2429 "session.c"
			}
		}
	}
#line 98 "/home/test/core/extensions/session.vala"
	if (_data_->cancellable != NULL) {
#line 98 "/home/test/core/extensions/session.vala"
		_data_->_tmp8_ = g_cancellable_is_cancelled (_data_->cancellable);
#line 2437 "session.c"
	} else {
#line 98 "/home/test/core/extensions/session.vala"
		_data_->_tmp8_ = FALSE;
#line 2441 "session.c"
	}
#line 98 "/home/test/core/extensions/session.vala"
	if (_data_->_tmp8_) {
#line 99 "/home/test/core/extensions/session.vala"
		_data_->result = NULL;
#line 99 "/home/test/core/extensions/session.vala"
		(_data_->_tmp0_ == NULL) ? NULL : (_data_->_tmp0_ = (_g_list_free__g_free0_ (_data_->_tmp0_), NULL));
#line 99 "/home/test/core/extensions/session.vala"
		(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 99 "/home/test/core/extensions/session.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 99 "/home/test/core/extensions/session.vala"
		if (_data_->_state_ != 0) {
#line 99 "/home/test/core/extensions/session.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 99 "/home/test/core/extensions/session.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2459 "session.c"
			}
		}
#line 99 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 99 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 2466 "session.c"
	}
#line 100 "/home/test/core/extensions/session.vala"
	_data_->result = _data_->items;
#line 100 "/home/test/core/extensions/session.vala"
	(_data_->_tmp0_ == NULL) ? NULL : (_data_->_tmp0_ = (_g_list_free__g_free0_ (_data_->_tmp0_), NULL));
#line 100 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 100 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 100 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 100 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2480 "session.c"
		}
	}
#line 100 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 100 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 2487 "session.c"
}


static void
tabby_session_database_real_insert_data_free (gpointer _data)
{
	TabbySessionDatabaseInsertData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseInsertData, _data_);
#line 2502 "session.c"
}


static void
tabby_session_database_real_insert (MidoriDatabase* base,
                                    MidoriDatabaseItem* item,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_)
{
	TabbySessionDatabase * self;
	TabbySessionDatabaseInsertData* _data_;
	TabbySessionDatabase* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	self = (TabbySessionDatabase*) base;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseInsertData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_real_insert_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->item = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_real_insert_co (_data_);
#line 2536 "session.c"
}


static gboolean
tabby_session_database_real_insert_finish (MidoriDatabase* base,
                                           GAsyncResult* _res_,
                                           GError** error)
{
	gboolean result;
	TabbySessionDatabaseInsertData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 2551 "session.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/session.vala"
		return _tmp0_;
#line 2555 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 2561 "session.c"
}


static gboolean
tabby_session_database_real_insert_co (TabbySessionDatabaseInsertData* _data_)
{
#line 103 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 103 "/home/test/core/extensions/session.vala"
		case 0:
#line 2572 "session.c"
		goto _state_0;
		default:
#line 103 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 2577 "session.c"
	}
	_state_0:
#line 104 "/home/test/core/extensions/session.vala"
	midori_database_item_set_database (_data_->item, (MidoriDatabase*) _data_->self);
#line 106 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 106 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 106 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n" \
"                INSERT INTO %s (crdate, tstamp, session_id, uri, title" \
")\n" \
"                VALUES (:crdate, :tstamp, :session_id, :uri, :title)\n" \
"                ", _data_->_tmp1_);
#line 106 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp3_ = _data_->sqlcmd;
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp4_ = midori_database_item_get_date (_data_->item);
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp6_ = midori_database_item_get_date (_data_->item);
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp7_ = _data_->_tmp6_;
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp8_ = g_object_get_data ((GObject*) _data_->item, "session_id");
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp9_ = midori_database_item_get_uri (_data_->item);
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp10_ = _data_->_tmp9_;
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp11_ = midori_database_item_get_title (_data_->item);
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp12_ = _data_->_tmp11_;
#line 111 "/home/test/core/extensions/session.vala"
	_data_->_tmp13_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp3_, &_data_->_inner_error0_, ":crdate", G_TYPE_INT64, _data_->_tmp5_, ":tstamp", G_TYPE_INT64, _data_->_tmp7_, ":session_id", G_TYPE_INT64, _data_->_tmp8_, ":uri", G_TYPE_STRING, _data_->_tmp10_, ":title", G_TYPE_STRING, _data_->_tmp12_, NULL);
#line 111 "/home/test/core/extensions/session.vala"
	_data_->statement = _data_->_tmp13_;
#line 111 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 111 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 111 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 111 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 111 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 111 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2626 "session.c"
		} else {
#line 111 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 111 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 111 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 111 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 111 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2638 "session.c"
		}
	}
#line 117 "/home/test/core/extensions/session.vala"
	_data_->_tmp15_ = _data_->statement;
#line 117 "/home/test/core/extensions/session.vala"
	_data_->_tmp14_ = midori_database_statement_exec (_data_->_tmp15_, &_data_->_inner_error0_);
#line 117 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 117 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 117 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 117 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 117 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 117 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 117 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2659 "session.c"
		} else {
#line 117 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 117 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 117 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 117 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 117 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 117 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2673 "session.c"
		}
	}
#line 117 "/home/test/core/extensions/session.vala"
	if (_data_->_tmp14_) {
#line 118 "/home/test/core/extensions/session.vala"
		_data_->_tmp17_ = _data_->statement;
#line 118 "/home/test/core/extensions/session.vala"
		_data_->_tmp16_ = midori_database_statement_row_id (_data_->_tmp17_, &_data_->_inner_error0_);
#line 118 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 118 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 118 "/home/test/core/extensions/session.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 118 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 118 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 118 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 118 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 2696 "session.c"
			} else {
#line 118 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->statement);
#line 118 "/home/test/core/extensions/session.vala"
				_g_free0 (_data_->sqlcmd);
#line 118 "/home/test/core/extensions/session.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 118 "/home/test/core/extensions/session.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 118 "/home/test/core/extensions/session.vala"
				g_object_unref (_data_->_async_result);
#line 118 "/home/test/core/extensions/session.vala"
				return FALSE;
#line 2710 "session.c"
			}
		}
#line 118 "/home/test/core/extensions/session.vala"
		midori_database_item_set_id (_data_->item, _data_->_tmp16_);
#line 119 "/home/test/core/extensions/session.vala"
		_data_->result = TRUE;
#line 119 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->statement);
#line 119 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->sqlcmd);
#line 119 "/home/test/core/extensions/session.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 119 "/home/test/core/extensions/session.vala"
		if (_data_->_state_ != 0) {
#line 119 "/home/test/core/extensions/session.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 119 "/home/test/core/extensions/session.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2729 "session.c"
			}
		}
#line 119 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 119 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 2736 "session.c"
	}
#line 121 "/home/test/core/extensions/session.vala"
	_data_->result = FALSE;
#line 121 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->statement);
#line 121 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 121 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 121 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 121 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 121 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2752 "session.c"
		}
	}
#line 121 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 121 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 2759 "session.c"
}


static void
tabby_session_database_real_update_data_free (gpointer _data)
{
	TabbySessionDatabaseUpdateData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseUpdateData, _data_);
#line 2774 "session.c"
}


static void
tabby_session_database_real_update (MidoriDatabase* base,
                                    MidoriDatabaseItem* item,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_)
{
	TabbySessionDatabase * self;
	TabbySessionDatabaseUpdateData* _data_;
	TabbySessionDatabase* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	self = (TabbySessionDatabase*) base;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseUpdateData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_real_update_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->item = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_real_update_co (_data_);
#line 2808 "session.c"
}


static gboolean
tabby_session_database_real_update_finish (MidoriDatabase* base,
                                           GAsyncResult* _res_,
                                           GError** error)
{
	gboolean result;
	TabbySessionDatabaseUpdateData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 2823 "session.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/session.vala"
		return _tmp0_;
#line 2827 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 2833 "session.c"
}


static gboolean
tabby_session_database_real_update_co (TabbySessionDatabaseUpdateData* _data_)
{
#line 124 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 124 "/home/test/core/extensions/session.vala"
		case 0:
#line 2844 "session.c"
		goto _state_0;
		default:
#line 124 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 2849 "session.c"
	}
	_state_0:
#line 125 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 125 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 125 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n" \
"                UPDATE %s SET uri = :uri, title = :title, tstamp = :ts" \
"tamp WHERE id = :id\n" \
"                ", _data_->_tmp1_);
#line 125 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 2860 "session.c"
	{
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp3_ = _data_->sqlcmd;
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp4_ = midori_database_item_get_id (_data_->item);
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp6_ = midori_database_item_get_uri (_data_->item);
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp7_ = _data_->_tmp6_;
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp8_ = midori_database_item_get_title (_data_->item);
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp9_ = _data_->_tmp8_;
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp10_ = g_date_time_new_now_local ();
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp11_ = _data_->_tmp10_;
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp12_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp3_, &_data_->_inner_error0_, ":id", G_TYPE_INT64, _data_->_tmp5_, ":uri", G_TYPE_STRING, _data_->_tmp7_, ":title", G_TYPE_STRING, _data_->_tmp9_, ":tstamp", G_TYPE_INT64, g_date_time_to_unix (_data_->_tmp11_), NULL);
#line 129 "/home/test/core/extensions/session.vala"
		_data_->_tmp13_ = _data_->_tmp12_;
#line 129 "/home/test/core/extensions/session.vala"
		_g_date_time_unref0 (_data_->_tmp11_);
#line 129 "/home/test/core/extensions/session.vala"
		_data_->statement = _data_->_tmp13_;
#line 129 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 129 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 2892 "session.c"
				goto __catch1_midori_database_error;
			}
#line 129 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 129 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 129 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 129 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 129 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2905 "session.c"
		}
#line 134 "/home/test/core/extensions/session.vala"
		_data_->_tmp15_ = _data_->statement;
#line 134 "/home/test/core/extensions/session.vala"
		_data_->_tmp14_ = midori_database_statement_exec (_data_->_tmp15_, &_data_->_inner_error0_);
#line 134 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 134 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 134 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 2917 "session.c"
				goto __catch1_midori_database_error;
			}
#line 134 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 134 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 134 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 134 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 134 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2930 "session.c"
		}
#line 134 "/home/test/core/extensions/session.vala"
		if (_data_->_tmp14_) {
#line 135 "/home/test/core/extensions/session.vala"
			_data_->result = TRUE;
#line 135 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 135 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 135 "/home/test/core/extensions/session.vala"
			g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 135 "/home/test/core/extensions/session.vala"
			if (_data_->_state_ != 0) {
#line 135 "/home/test/core/extensions/session.vala"
				while (!g_task_get_completed (_data_->_async_result)) {
#line 135 "/home/test/core/extensions/session.vala"
					g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2948 "session.c"
				}
			}
#line 135 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 135 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2955 "session.c"
		}
#line 128 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->statement);
#line 2959 "session.c"
	}
	goto __finally1;
	__catch1_midori_database_error:
	{
#line 128 "/home/test/core/extensions/session.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 128 "/home/test/core/extensions/session.vala"
		_data_->_inner_error0_ = NULL;
#line 138 "/home/test/core/extensions/session.vala"
		_data_->_tmp16_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 138 "/home/test/core/extensions/session.vala"
		_data_->_tmp17_ = _data_->_tmp16_;
#line 138 "/home/test/core/extensions/session.vala"
		_data_->_tmp18_ = _data_->_error_;
#line 138 "/home/test/core/extensions/session.vala"
		_data_->_tmp19_ = _data_->_tmp18_->message;
#line 138 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:138: Failed to update %s: %s", _data_->_tmp17_, _data_->_tmp19_);
#line 128 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_data_->_error_);
#line 2980 "session.c"
	}
	__finally1:
#line 128 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 128 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 128 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 128 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 128 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 128 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 2995 "session.c"
		} else {
#line 128 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 128 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 128 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 128 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 128 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3007 "session.c"
		}
	}
#line 140 "/home/test/core/extensions/session.vala"
	_data_->result = FALSE;
#line 140 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 140 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 140 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 140 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 140 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3022 "session.c"
		}
	}
#line 140 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 140 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 3029 "session.c"
}


static void
tabby_session_database_real_delete_data_free (gpointer _data)
{
	TabbySessionDatabaseDeleteData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseDeleteData, _data_);
#line 3044 "session.c"
}


static void
tabby_session_database_real_delete (MidoriDatabase* base,
                                    MidoriDatabaseItem* item,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_)
{
	TabbySessionDatabase * self;
	TabbySessionDatabaseDeleteData* _data_;
	TabbySessionDatabase* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	self = (TabbySessionDatabase*) base;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseDeleteData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_real_delete_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->item = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_real_delete_co (_data_);
#line 3078 "session.c"
}


static gboolean
tabby_session_database_real_delete_finish (MidoriDatabase* base,
                                           GAsyncResult* _res_,
                                           GError** error)
{
	gboolean result;
	TabbySessionDatabaseDeleteData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 3093 "session.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/session.vala"
		return _tmp0_;
#line 3097 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 3103 "session.c"
}


static gboolean
tabby_session_database_real_delete_co (TabbySessionDatabaseDeleteData* _data_)
{
#line 143 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 143 "/home/test/core/extensions/session.vala"
		case 0:
#line 3114 "session.c"
		goto _state_0;
		default:
#line 143 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 3119 "session.c"
	}
	_state_0:
#line 144 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 144 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 144 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n                DELETE FROM %s WHERE id = :id\n                ", _data_->_tmp1_);
#line 144 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 147 "/home/test/core/extensions/session.vala"
	_data_->_tmp3_ = _data_->sqlcmd;
#line 147 "/home/test/core/extensions/session.vala"
	_data_->_tmp4_ = midori_database_item_get_id (_data_->item);
#line 147 "/home/test/core/extensions/session.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 147 "/home/test/core/extensions/session.vala"
	_data_->_tmp6_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp3_, &_data_->_inner_error0_, ":id", G_TYPE_INT64, _data_->_tmp5_, NULL);
#line 147 "/home/test/core/extensions/session.vala"
	_data_->statement = _data_->_tmp6_;
#line 147 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 147 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 147 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 147 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 147 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 147 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3152 "session.c"
		} else {
#line 147 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 147 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 147 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 147 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 147 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3164 "session.c"
		}
	}
#line 149 "/home/test/core/extensions/session.vala"
	_data_->_tmp8_ = _data_->statement;
#line 149 "/home/test/core/extensions/session.vala"
	_data_->_tmp7_ = midori_database_statement_exec (_data_->_tmp8_, &_data_->_inner_error0_);
#line 149 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 149 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 149 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 149 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 149 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 149 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 149 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3185 "session.c"
		} else {
#line 149 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 149 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 149 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 149 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 149 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 149 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3199 "session.c"
		}
	}
#line 149 "/home/test/core/extensions/session.vala"
	if (_data_->_tmp7_) {
#line 150 "/home/test/core/extensions/session.vala"
		_data_->result = TRUE;
#line 150 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->statement);
#line 150 "/home/test/core/extensions/session.vala"
		_g_free0 (_data_->sqlcmd);
#line 150 "/home/test/core/extensions/session.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 150 "/home/test/core/extensions/session.vala"
		if (_data_->_state_ != 0) {
#line 150 "/home/test/core/extensions/session.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 150 "/home/test/core/extensions/session.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3218 "session.c"
			}
		}
#line 150 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 150 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 3225 "session.c"
	}
#line 152 "/home/test/core/extensions/session.vala"
	_data_->result = FALSE;
#line 152 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->statement);
#line 152 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 152 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 152 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 152 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 152 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3241 "session.c"
		}
	}
#line 152 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 152 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 3248 "session.c"
}


static gint64
tabby_session_database_insert_session (TabbySessionDatabase* self)
{
	gint64 result = 0LL;
	gchar* sqlcmd = NULL;
	gchar* _tmp0_;
	GError* _inner_error0_ = NULL;
#line 155 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (self != NULL, 0LL);
#line 156 "/home/test/core/extensions/session.vala"
	_tmp0_ = g_strdup ("\n" \
"                INSERT INTO sessions (tstamp) VALUES (:tstamp)\n" \
"                ");
#line 156 "/home/test/core/extensions/session.vala"
	sqlcmd = _tmp0_;
#line 3265 "session.c"
	{
		MidoriDatabaseStatement* statement = NULL;
		const gchar* _tmp1_;
		GDateTime* _tmp2_;
		GDateTime* _tmp3_;
		MidoriDatabaseStatement* _tmp4_;
		MidoriDatabaseStatement* _tmp5_;
		MidoriDatabaseStatement* _tmp7_;
		gint64 _tmp9_ = 0LL;
		MidoriDatabaseStatement* _tmp10_;
		gchar* _tmp12_;
		gchar* _tmp13_;
		gint64 _tmp14_ = 0LL;
		MidoriDatabaseStatement* _tmp15_;
#line 160 "/home/test/core/extensions/session.vala"
		_tmp1_ = sqlcmd;
#line 160 "/home/test/core/extensions/session.vala"
		_tmp2_ = g_date_time_new_now_local ();
#line 160 "/home/test/core/extensions/session.vala"
		_tmp3_ = _tmp2_;
#line 160 "/home/test/core/extensions/session.vala"
		_tmp4_ = midori_database_prepare ((MidoriDatabase*) self, _tmp1_, &_inner_error0_, ":tstamp", G_TYPE_INT64, g_date_time_to_unix (_tmp3_), NULL);
#line 160 "/home/test/core/extensions/session.vala"
		_tmp5_ = _tmp4_;
#line 160 "/home/test/core/extensions/session.vala"
		_g_date_time_unref0 (_tmp3_);
#line 160 "/home/test/core/extensions/session.vala"
		statement = _tmp5_;
#line 160 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3296 "session.c"
			gint64 _tmp6_ = -1LL;
#line 160 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3300 "session.c"
				goto __catch2_midori_database_error;
			}
#line 160 "/home/test/core/extensions/session.vala"
			_g_free0 (sqlcmd);
#line 160 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 160 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 160 "/home/test/core/extensions/session.vala"
			return _tmp6_;
#line 3311 "session.c"
		}
#line 162 "/home/test/core/extensions/session.vala"
		_tmp7_ = statement;
#line 162 "/home/test/core/extensions/session.vala"
		midori_database_statement_exec (_tmp7_, &_inner_error0_);
#line 162 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3319 "session.c"
			gint64 _tmp8_ = -1LL;
#line 162 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (statement);
#line 162 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3325 "session.c"
				goto __catch2_midori_database_error;
			}
#line 162 "/home/test/core/extensions/session.vala"
			_g_free0 (sqlcmd);
#line 162 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 162 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 162 "/home/test/core/extensions/session.vala"
			return _tmp8_;
#line 3336 "session.c"
		}
#line 163 "/home/test/core/extensions/session.vala"
		_tmp10_ = statement;
#line 163 "/home/test/core/extensions/session.vala"
		_tmp9_ = midori_database_statement_row_id (_tmp10_, &_inner_error0_);
#line 163 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3344 "session.c"
			gint64 _tmp11_ = -1LL;
#line 163 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (statement);
#line 163 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3350 "session.c"
				goto __catch2_midori_database_error;
			}
#line 163 "/home/test/core/extensions/session.vala"
			_g_free0 (sqlcmd);
#line 163 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 163 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 163 "/home/test/core/extensions/session.vala"
			return _tmp11_;
#line 3361 "session.c"
		}
#line 163 "/home/test/core/extensions/session.vala"
		_tmp12_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp9_);
#line 163 "/home/test/core/extensions/session.vala"
		_tmp13_ = _tmp12_;
#line 163 "/home/test/core/extensions/session.vala"
		midori_loggable_debug ((MidoriLoggable*) self, "Added session: %s", _tmp13_, NULL);
#line 163 "/home/test/core/extensions/session.vala"
		_g_free0 (_tmp13_);
#line 164 "/home/test/core/extensions/session.vala"
		_tmp15_ = statement;
#line 164 "/home/test/core/extensions/session.vala"
		_tmp14_ = midori_database_statement_row_id (_tmp15_, &_inner_error0_);
#line 164 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3377 "session.c"
			gint64 _tmp16_ = -1LL;
#line 164 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (statement);
#line 164 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3383 "session.c"
				goto __catch2_midori_database_error;
			}
#line 164 "/home/test/core/extensions/session.vala"
			_g_free0 (sqlcmd);
#line 164 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 164 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 164 "/home/test/core/extensions/session.vala"
			return _tmp16_;
#line 3394 "session.c"
		}
#line 164 "/home/test/core/extensions/session.vala"
		result = _tmp14_;
#line 164 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (statement);
#line 164 "/home/test/core/extensions/session.vala"
		_g_free0 (sqlcmd);
#line 164 "/home/test/core/extensions/session.vala"
		return result;
#line 3404 "session.c"
	}
	goto __finally2;
	__catch2_midori_database_error:
	{
		GError* _error_ = NULL;
		GError* _tmp17_;
		const gchar* _tmp18_;
#line 159 "/home/test/core/extensions/session.vala"
		_error_ = _inner_error0_;
#line 159 "/home/test/core/extensions/session.vala"
		_inner_error0_ = NULL;
#line 166 "/home/test/core/extensions/session.vala"
		_tmp17_ = _error_;
#line 166 "/home/test/core/extensions/session.vala"
		_tmp18_ = _tmp17_->message;
#line 166 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:166: Failed to add session: %s", _tmp18_);
#line 159 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_error_);
#line 3424 "session.c"
	}
	__finally2:
#line 159 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3429 "session.c"
		gint64 _tmp19_ = -1LL;
#line 159 "/home/test/core/extensions/session.vala"
		_g_free0 (sqlcmd);
#line 159 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 159 "/home/test/core/extensions/session.vala"
		g_clear_error (&_inner_error0_);
#line 159 "/home/test/core/extensions/session.vala"
		return _tmp19_;
#line 3439 "session.c"
	}
#line 168 "/home/test/core/extensions/session.vala"
	result = (gint64) -1;
#line 168 "/home/test/core/extensions/session.vala"
	_g_free0 (sqlcmd);
#line 168 "/home/test/core/extensions/session.vala"
	return result;
#line 3447 "session.c"
}


static void
tabby_session_database_update_session (TabbySessionDatabase* self,
                                       gint64 id,
                                       gboolean closed)
{
	gchar* sqlcmd = NULL;
	gchar* _tmp0_;
	GError* _inner_error0_ = NULL;
#line 171 "/home/test/core/extensions/session.vala"
	g_return_if_fail (self != NULL);
#line 172 "/home/test/core/extensions/session.vala"
	_tmp0_ = g_strdup ("\n" \
"                UPDATE sessions SET closed=:closed, tstamp=:tstamp WHE" \
"RE id = :id\n" \
"                ");
#line 172 "/home/test/core/extensions/session.vala"
	sqlcmd = _tmp0_;
#line 3465 "session.c"
	{
		gint _tmp1_ = 0;
		MidoriDatabaseStatement* statement = NULL;
		const gchar* _tmp2_;
		GDateTime* _tmp3_;
		GDateTime* _tmp4_;
		MidoriDatabaseStatement* _tmp5_;
		MidoriDatabaseStatement* _tmp6_;
		MidoriDatabaseStatement* _tmp7_;
#line 179 "/home/test/core/extensions/session.vala"
		if (closed) {
#line 179 "/home/test/core/extensions/session.vala"
			_tmp1_ = 1;
#line 3479 "session.c"
		} else {
#line 179 "/home/test/core/extensions/session.vala"
			_tmp1_ = 0;
#line 3483 "session.c"
		}
#line 176 "/home/test/core/extensions/session.vala"
		_tmp2_ = sqlcmd;
#line 176 "/home/test/core/extensions/session.vala"
		_tmp3_ = g_date_time_new_now_local ();
#line 176 "/home/test/core/extensions/session.vala"
		_tmp4_ = _tmp3_;
#line 176 "/home/test/core/extensions/session.vala"
		_tmp5_ = midori_database_prepare ((MidoriDatabase*) self, _tmp2_, &_inner_error0_, ":id", G_TYPE_INT64, id, ":tstamp", G_TYPE_INT64, g_date_time_to_unix (_tmp4_), ":closed", G_TYPE_INT64, _tmp1_, NULL);
#line 176 "/home/test/core/extensions/session.vala"
		_tmp6_ = _tmp5_;
#line 176 "/home/test/core/extensions/session.vala"
		_g_date_time_unref0 (_tmp4_);
#line 176 "/home/test/core/extensions/session.vala"
		statement = _tmp6_;
#line 176 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 176 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3503 "session.c"
				goto __catch3_midori_database_error;
			}
#line 176 "/home/test/core/extensions/session.vala"
			_g_free0 (sqlcmd);
#line 176 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 176 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 176 "/home/test/core/extensions/session.vala"
			return;
#line 3514 "session.c"
		}
#line 180 "/home/test/core/extensions/session.vala"
		_tmp7_ = statement;
#line 180 "/home/test/core/extensions/session.vala"
		midori_database_statement_exec (_tmp7_, &_inner_error0_);
#line 180 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 180 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (statement);
#line 180 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3526 "session.c"
				goto __catch3_midori_database_error;
			}
#line 180 "/home/test/core/extensions/session.vala"
			_g_free0 (sqlcmd);
#line 180 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 180 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 180 "/home/test/core/extensions/session.vala"
			return;
#line 3537 "session.c"
		}
#line 175 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (statement);
#line 3541 "session.c"
	}
	goto __finally3;
	__catch3_midori_database_error:
	{
		GError* _error_ = NULL;
		GError* _tmp8_;
		const gchar* _tmp9_;
#line 175 "/home/test/core/extensions/session.vala"
		_error_ = _inner_error0_;
#line 175 "/home/test/core/extensions/session.vala"
		_inner_error0_ = NULL;
#line 182 "/home/test/core/extensions/session.vala"
		_tmp8_ = _error_;
#line 182 "/home/test/core/extensions/session.vala"
		_tmp9_ = _tmp8_->message;
#line 182 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:182: Failed to update session: %s", _tmp9_);
#line 175 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_error_);
#line 3561 "session.c"
	}
	__finally3:
#line 175 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 175 "/home/test/core/extensions/session.vala"
		_g_free0 (sqlcmd);
#line 175 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 175 "/home/test/core/extensions/session.vala"
		g_clear_error (&_inner_error0_);
#line 175 "/home/test/core/extensions/session.vala"
		return;
#line 3574 "session.c"
	}
#line 171 "/home/test/core/extensions/session.vala"
	_g_free0 (sqlcmd);
#line 3578 "session.c"
}


static void
tabby_session_database_update_tab_data_free (gpointer _data)
{
	TabbySessionDatabaseUpdateTabData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseUpdateTabData, _data_);
#line 3593 "session.c"
}


static void
tabby_session_database_update_tab (TabbySessionDatabase* self,
                                   MidoriDatabaseItem* item,
                                   GAsyncReadyCallback _callback_,
                                   gpointer _user_data_)
{
	TabbySessionDatabaseUpdateTabData* _data_;
	TabbySessionDatabase* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseUpdateTabData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_update_tab_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->item = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_update_tab_co (_data_);
#line 3624 "session.c"
}


static void
tabby_session_database_update_tab_finish (TabbySessionDatabase* self,
                                          GAsyncResult* _res_,
                                          GError** error)
{
	TabbySessionDatabaseUpdateTabData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/session.vala"
		return;
#line 3640 "session.c"
	}
}


static gboolean
tabby_session_database_update_tab_co (TabbySessionDatabaseUpdateTabData* _data_)
{
#line 186 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 186 "/home/test/core/extensions/session.vala"
		case 0:
#line 3652 "session.c"
		goto _state_0;
		default:
#line 186 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 3657 "session.c"
	}
	_state_0:
#line 187 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 187 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 187 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n" \
"                UPDATE %s SET pinned=:pinned WHERE rowid = :id\n" \
"                ", _data_->_tmp1_);
#line 187 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 190 "/home/test/core/extensions/session.vala"
	_data_->_tmp4_ = _data_->sqlcmd;
#line 190 "/home/test/core/extensions/session.vala"
	_data_->_tmp5_ = midori_database_item_get_id (_data_->item);
#line 190 "/home/test/core/extensions/session.vala"
	_data_->_tmp6_ = _data_->_tmp5_;
#line 190 "/home/test/core/extensions/session.vala"
	_data_->_tmp7_ = g_object_get_data ((GObject*) _data_->item, "pinned");
#line 190 "/home/test/core/extensions/session.vala"
	_data_->_tmp8_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp4_, &_data_->_inner_error0_, ":id", G_TYPE_INT64, _data_->_tmp6_, ":pinned", G_TYPE_INT64, _data_->_tmp7_, NULL);
#line 190 "/home/test/core/extensions/session.vala"
	_data_->_tmp3_ = _data_->_tmp8_;
#line 190 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 190 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 190 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 190 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 190 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 190 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3692 "session.c"
		} else {
#line 190 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 190 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 190 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 190 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 190 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3704 "session.c"
		}
	}
#line 190 "/home/test/core/extensions/session.vala"
	midori_database_statement_exec (_data_->_tmp3_, &_data_->_inner_error0_);
#line 190 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 190 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 190 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 190 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 190 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 190 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 190 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3723 "session.c"
		} else {
#line 190 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 190 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 190 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 190 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 190 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 190 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3737 "session.c"
		}
	}
#line 186 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->_tmp3_);
#line 186 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 186 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 186 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 186 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 186 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3752 "session.c"
		}
	}
#line 186 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 186 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 3759 "session.c"
}


static void
tabby_session_database_real_clear_data_free (gpointer _data)
{
	TabbySessionDatabaseClearData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseClearData, _data_);
#line 3772 "session.c"
}


static void
tabby_session_database_real_clear (MidoriDatabase* base,
                                   GTimeSpan timespan,
                                   GAsyncReadyCallback _callback_,
                                   gpointer _user_data_)
{
	TabbySessionDatabase * self;
	TabbySessionDatabaseClearData* _data_;
	TabbySessionDatabase* _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	self = (TabbySessionDatabase*) base;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseClearData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_real_clear_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->timespan = timespan;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_real_clear_co (_data_);
#line 3801 "session.c"
}


static gboolean
tabby_session_database_real_clear_finish (MidoriDatabase* base,
                                          GAsyncResult* _res_,
                                          GError** error)
{
	gboolean result;
	TabbySessionDatabaseClearData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 3816 "session.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/session.vala"
		return _tmp0_;
#line 3820 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 3826 "session.c"
}


static gboolean
tabby_session_database_real_clear_co (TabbySessionDatabaseClearData* _data_)
{
#line 195 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 195 "/home/test/core/extensions/session.vala"
		case 0:
#line 3837 "session.c"
		goto _state_0;
		default:
#line 195 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 3842 "session.c"
	}
	_state_0:
#line 197 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = g_date_time_new_now_local ();
#line 197 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 197 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = g_date_time_to_unix (_data_->_tmp1_) - (_data_->timespan / 1000000);
#line 197 "/home/test/core/extensions/session.vala"
	_g_date_time_unref0 (_data_->_tmp1_);
#line 197 "/home/test/core/extensions/session.vala"
	_data_->maximum_age = _data_->_tmp2_;
#line 199 "/home/test/core/extensions/session.vala"
	_data_->_tmp3_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 199 "/home/test/core/extensions/session.vala"
	_data_->_tmp4_ = _data_->_tmp3_;
#line 199 "/home/test/core/extensions/session.vala"
	_data_->_tmp5_ = g_strdup_printf ("\n" \
"                DELETE FROM %s WHERE tstamp >= :maximum_age;\n" \
"                DELETE FROM sessions WHERE tstamp >= :maximum_age;\n" \
"                ", _data_->_tmp4_);
#line 199 "/home/test/core/extensions/session.vala"
	_data_->sqlcmd = _data_->_tmp5_;
#line 203 "/home/test/core/extensions/session.vala"
	_data_->_tmp6_ = _data_->sqlcmd;
#line 203 "/home/test/core/extensions/session.vala"
	_data_->_tmp7_ = _data_->maximum_age;
#line 203 "/home/test/core/extensions/session.vala"
	_data_->_tmp8_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp6_, &_data_->_inner_error0_, ":maximum_age", G_TYPE_INT64, _data_->_tmp7_, NULL);
#line 203 "/home/test/core/extensions/session.vala"
	_data_->statement = _data_->_tmp8_;
#line 203 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 203 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 203 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 203 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 203 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 203 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3883 "session.c"
		} else {
#line 203 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 203 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 203 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 203 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 203 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3895 "session.c"
		}
	}
#line 205 "/home/test/core/extensions/session.vala"
	_data_->_tmp10_ = _data_->statement;
#line 205 "/home/test/core/extensions/session.vala"
	_data_->_tmp9_ = midori_database_statement_exec (_data_->_tmp10_, &_data_->_inner_error0_);
#line 205 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 205 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 205 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 205 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 205 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 205 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 205 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3916 "session.c"
		} else {
#line 205 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->statement);
#line 205 "/home/test/core/extensions/session.vala"
			_g_free0 (_data_->sqlcmd);
#line 205 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 205 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 205 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 205 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 3930 "session.c"
		}
	}
#line 205 "/home/test/core/extensions/session.vala"
	_data_->result = _data_->_tmp9_;
#line 205 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->statement);
#line 205 "/home/test/core/extensions/session.vala"
	_g_free0 (_data_->sqlcmd);
#line 205 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 205 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 205 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 205 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3947 "session.c"
		}
	}
#line 205 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 205 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 3954 "session.c"
}


static void
tabby_session_database_restore_windows_data_free (gpointer _data)
{
	TabbySessionDatabaseRestoreWindowsData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->default_browser);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseRestoreWindowsData, _data_);
#line 3969 "session.c"
}


void
tabby_session_database_restore_windows (TabbySessionDatabase* self,
                                        MidoriBrowser* default_browser,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_)
{
	TabbySessionDatabaseRestoreWindowsData* _data_;
	TabbySessionDatabase* _tmp0_;
	MidoriBrowser* _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseRestoreWindowsData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_restore_windows_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (default_browser);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->default_browser);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->default_browser = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_restore_windows_co (_data_);
#line 4000 "session.c"
}


gboolean
tabby_session_database_restore_windows_finish (TabbySessionDatabase* self,
                                               GAsyncResult* _res_,
                                               GError** error)
{
	gboolean result;
	TabbySessionDatabaseRestoreWindowsData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/session.vala"
	if (NULL == _data_) {
#line 4015 "session.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/session.vala"
		return _tmp0_;
#line 4019 "session.c"
	}
#line 13 "/home/test/core/extensions/session.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/session.vala"
	return result;
#line 4025 "session.c"
}


static void
tabby_session_database_restore_windows_ready (GObject* source_object,
                                              GAsyncResult* _res_,
                                              gpointer _user_data_)
{
	TabbySessionDatabaseRestoreWindowsData* _data_;
#line 212 "/home/test/core/extensions/session.vala"
	_data_ = _user_data_;
#line 212 "/home/test/core/extensions/session.vala"
	_data_->_source_object_ = source_object;
#line 212 "/home/test/core/extensions/session.vala"
	_data_->_res_ = _res_;
#line 212 "/home/test/core/extensions/session.vala"
	tabby_session_database_restore_windows_co (_data_);
#line 4043 "session.c"
}


static gboolean
tabby_session_database_restore_windows_co (TabbySessionDatabaseRestoreWindowsData* _data_)
{
#line 208 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 208 "/home/test/core/extensions/session.vala"
		case 0:
#line 4054 "session.c"
		goto _state_0;
#line 208 "/home/test/core/extensions/session.vala"
		case 1:
#line 4058 "session.c"
		goto _state_1;
#line 208 "/home/test/core/extensions/session.vala"
		case 2:
#line 4062 "session.c"
		goto _state_2;
		default:
#line 208 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 4067 "session.c"
	}
	_state_0:
#line 209 "/home/test/core/extensions/session.vala"
	_data_->restored = FALSE;
#line 212 "/home/test/core/extensions/session.vala"
	_data_->_state_ = 1;
#line 212 "/home/test/core/extensions/session.vala"
	midori_database_query ((MidoriDatabase*) _data_->self, NULL, G_MAXINT64 - 1, NULL, tabby_session_database_restore_windows_ready, _data_);
#line 212 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 4078 "session.c"
	_state_1:
#line 212 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = midori_database_query_finish ((MidoriDatabase*) _data_->self, _data_->_res_, &_data_->_inner_error0_);
#line 212 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = _data_->_tmp1_;
#line 212 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 212 "/home/test/core/extensions/session.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 212 "/home/test/core/extensions/session.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 212 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 212 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 4094 "session.c"
		} else {
#line 212 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 212 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 212 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 212 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 4104 "session.c"
		}
	}
	{
#line 212 "/home/test/core/extensions/session.vala"
		_data_->item_collection = _data_->_tmp0_;
#line 212 "/home/test/core/extensions/session.vala"
		for (_data_->item_it = _data_->item_collection; _data_->item_it != NULL; _data_->item_it = _data_->item_it->next) {
#line 212 "/home/test/core/extensions/session.vala"
			_data_->_tmp2_ = _g_object_ref0 ((MidoriDatabaseItem*) _data_->item_it->data);
#line 212 "/home/test/core/extensions/session.vala"
			_data_->item = _data_->_tmp2_;
#line 4116 "session.c"
			{
#line 214 "/home/test/core/extensions/session.vala"
				_data_->_tmp3_ = _data_->item;
#line 214 "/home/test/core/extensions/session.vala"
				_data_->_tmp4_ = g_object_get_data ((GObject*) _data_->_tmp3_, "session_id");
#line 214 "/home/test/core/extensions/session.vala"
				_data_->id = _data_->_tmp4_;
#line 215 "/home/test/core/extensions/session.vala"
				_data_->_tmp5_ = _data_->restored;
#line 215 "/home/test/core/extensions/session.vala"
				if (!_data_->_tmp5_) {
#line 216 "/home/test/core/extensions/session.vala"
					_data_->_tmp6_ = _g_object_ref0 (_data_->default_browser);
#line 216 "/home/test/core/extensions/session.vala"
					_g_object_unref0 (_data_->browser);
#line 216 "/home/test/core/extensions/session.vala"
					_data_->browser = _data_->_tmp6_;
#line 217 "/home/test/core/extensions/session.vala"
					_data_->restored = TRUE;
#line 218 "/home/test/core/extensions/session.vala"
					_data_->_tmp7_ = _data_->browser;
#line 218 "/home/test/core/extensions/session.vala"
					_data_->_tmp8_ = _data_->id;
#line 218 "/home/test/core/extensions/session.vala"
					tabby_session_database_connect_browser (_data_->self, _data_->_tmp7_, _data_->_tmp8_);
#line 219 "/home/test/core/extensions/session.vala"
					_data_->_tmp9_ = _data_->browser;
#line 219 "/home/test/core/extensions/session.vala"
					_data_->_tmp10_ = _data_->_tmp9_->tabs;
#line 219 "/home/test/core/extensions/session.vala"
					_data_->_tmp11_ = gtk_container_get_children ((GtkContainer*) _data_->_tmp10_);
#line 4148 "session.c"
					{
#line 219 "/home/test/core/extensions/session.vala"
						_data_->widget_collection = _data_->_tmp11_;
#line 219 "/home/test/core/extensions/session.vala"
						for (_data_->widget_it = _data_->widget_collection; _data_->widget_it != NULL; _data_->widget_it = _data_->widget_it->next) {
#line 219 "/home/test/core/extensions/session.vala"
							_data_->widget = (GtkWidget*) _data_->widget_it->data;
#line 4156 "session.c"
							{
#line 220 "/home/test/core/extensions/session.vala"
								_data_->_tmp12_ = _data_->widget;
#line 220 "/home/test/core/extensions/session.vala"
								_data_->_tmp13_ = _data_->id;
#line 220 "/home/test/core/extensions/session.vala"
								_data_->_state_ = 2;
#line 220 "/home/test/core/extensions/session.vala"
								tabby_session_database_tab_added (_data_->self, G_TYPE_CHECK_INSTANCE_TYPE (_data_->_tmp12_, MIDORI_TYPE_TAB) ? ((MidoriTab*) _data_->_tmp12_) : NULL, _data_->_tmp13_, tabby_session_database_restore_windows_ready, _data_);
#line 220 "/home/test/core/extensions/session.vala"
								return FALSE;
#line 4168 "session.c"
								_state_2:
#line 220 "/home/test/core/extensions/session.vala"
								tabby_session_database_tab_added_finish (_data_->self, _data_->_res_);
#line 4172 "session.c"
							}
						}
#line 219 "/home/test/core/extensions/session.vala"
						(_data_->widget_collection == NULL) ? NULL : (_data_->widget_collection = (g_list_free (_data_->widget_collection), NULL));
#line 4177 "session.c"
					}
				} else {
#line 223 "/home/test/core/extensions/session.vala"
					_data_->_tmp14_ = gtk_window_get_application ((GtkWindow*) _data_->default_browser);
#line 223 "/home/test/core/extensions/session.vala"
					_data_->_tmp15_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp14_, MIDORI_TYPE_APP, MidoriApp));
#line 223 "/home/test/core/extensions/session.vala"
					_data_->app = _data_->_tmp15_;
#line 224 "/home/test/core/extensions/session.vala"
					_data_->_tmp16_ = _data_->app;
#line 224 "/home/test/core/extensions/session.vala"
					_data_->_tmp17_ = _data_->id;
#line 224 "/home/test/core/extensions/session.vala"
					_data_->_tmp18_ = tabby_session_database_browser_for_session (_data_->self, _data_->_tmp16_, _data_->_tmp17_);
#line 224 "/home/test/core/extensions/session.vala"
					_g_object_unref0 (_data_->browser);
#line 224 "/home/test/core/extensions/session.vala"
					_data_->browser = _data_->_tmp18_;
#line 215 "/home/test/core/extensions/session.vala"
					_g_object_unref0 (_data_->app);
#line 4198 "session.c"
				}
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp19_ = _data_->browser;
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp20_ = midori_browser_get_web_context (_data_->_tmp19_);
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp21_ = _data_->_tmp20_;
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp22_ = _data_->item;
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp23_ = midori_database_item_get_uri (_data_->_tmp22_);
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp24_ = _data_->_tmp23_;
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp25_ = _data_->item;
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp26_ = midori_database_item_get_title (_data_->_tmp25_);
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp27_ = _data_->_tmp26_;
#line 226 "/home/test/core/extensions/session.vala"
				_data_->_tmp28_ = midori_tab_new (NULL, _data_->_tmp21_, _data_->_tmp24_, _data_->_tmp27_);
#line 226 "/home/test/core/extensions/session.vala"
				g_object_ref_sink (_data_->_tmp28_);
#line 226 "/home/test/core/extensions/session.vala"
				_data_->tab = _data_->_tmp28_;
#line 228 "/home/test/core/extensions/session.vala"
				_data_->_tmp29_ = _data_->tab;
#line 228 "/home/test/core/extensions/session.vala"
				_data_->_tmp30_ = _data_->item;
#line 228 "/home/test/core/extensions/session.vala"
				_data_->_tmp31_ = g_object_get_data ((GObject*) _data_->_tmp30_, "pinned");
#line 228 "/home/test/core/extensions/session.vala"
				midori_tab_set_pinned (_data_->_tmp29_, (gboolean) ((gintptr) _data_->_tmp31_));
#line 229 "/home/test/core/extensions/session.vala"
				_data_->_tmp32_ = _data_->tab;
#line 229 "/home/test/core/extensions/session.vala"
				_data_->_tmp33_ = _data_->item;
#line 229 "/home/test/core/extensions/session.vala"
				tabby_session_database_connect_tab (_data_->self, _data_->_tmp32_, _data_->_tmp33_);
#line 230 "/home/test/core/extensions/session.vala"
				_data_->_tmp34_ = _data_->browser;
#line 230 "/home/test/core/extensions/session.vala"
				_data_->_tmp35_ = _data_->tab;
#line 230 "/home/test/core/extensions/session.vala"
				midori_browser_add (_data_->_tmp34_, _data_->_tmp35_);
#line 212 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->tab);
#line 212 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->browser);
#line 212 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_data_->item);
#line 4250 "session.c"
			}
		}
	}
#line 232 "/home/test/core/extensions/session.vala"
	_data_->result = _data_->restored;
#line 232 "/home/test/core/extensions/session.vala"
	(_data_->_tmp0_ == NULL) ? NULL : (_data_->_tmp0_ = (_g_list_free__g_object_unref0_ (_data_->_tmp0_), NULL));
#line 232 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 232 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 232 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 232 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 4266 "session.c"
		}
	}
#line 232 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 232 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 4273 "session.c"
}


static MidoriBrowser*
tabby_session_database_browser_for_session (TabbySessionDatabase* self,
                                            MidoriApp* app,
                                            gint64 id)
{
	MidoriBrowser* result = NULL;
	MidoriBrowser* browser = NULL;
	GHashTable* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gconstpointer _tmp3_;
	MidoriBrowser* _tmp4_;
	MidoriBrowser* _tmp5_;
	MidoriBrowser* _tmp6_;
#line 235 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 235 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (app != NULL, NULL);
#line 236 "/home/test/core/extensions/session.vala"
	_tmp0_ = self->priv->browsers;
#line 236 "/home/test/core/extensions/session.vala"
	_tmp1_ = g_strdup_printf ("%" G_GINT64_FORMAT, id);
#line 236 "/home/test/core/extensions/session.vala"
	_tmp2_ = _tmp1_;
#line 236 "/home/test/core/extensions/session.vala"
	_tmp3_ = g_hash_table_lookup (_tmp0_, _tmp2_);
#line 236 "/home/test/core/extensions/session.vala"
	_tmp4_ = _g_object_ref0 ((MidoriBrowser*) _tmp3_);
#line 236 "/home/test/core/extensions/session.vala"
	_tmp5_ = _tmp4_;
#line 236 "/home/test/core/extensions/session.vala"
	_g_free0 (_tmp2_);
#line 236 "/home/test/core/extensions/session.vala"
	browser = _tmp5_;
#line 237 "/home/test/core/extensions/session.vala"
	_tmp6_ = browser;
#line 237 "/home/test/core/extensions/session.vala"
	if (_tmp6_ == NULL) {
#line 4315 "session.c"
		gchar* _tmp7_;
		gchar* _tmp8_;
		MidoriBrowser* _tmp9_;
		MidoriBrowser* _tmp10_;
		MidoriBrowser* _tmp11_;
#line 238 "/home/test/core/extensions/session.vala"
		_tmp7_ = g_strdup_printf ("%" G_GINT64_FORMAT, id);
#line 238 "/home/test/core/extensions/session.vala"
		_tmp8_ = _tmp7_;
#line 238 "/home/test/core/extensions/session.vala"
		midori_loggable_debug ((MidoriLoggable*) self, "Restoring session %s", _tmp8_, NULL);
#line 238 "/home/test/core/extensions/session.vala"
		_g_free0 (_tmp8_);
#line 239 "/home/test/core/extensions/session.vala"
		_tmp9_ = midori_browser_new (app, FALSE);
#line 239 "/home/test/core/extensions/session.vala"
		g_object_ref_sink (_tmp9_);
#line 239 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (browser);
#line 239 "/home/test/core/extensions/session.vala"
		browser = _tmp9_;
#line 240 "/home/test/core/extensions/session.vala"
		_tmp10_ = browser;
#line 240 "/home/test/core/extensions/session.vala"
		gtk_widget_show ((GtkWidget*) _tmp10_);
#line 241 "/home/test/core/extensions/session.vala"
		_tmp11_ = browser;
#line 241 "/home/test/core/extensions/session.vala"
		tabby_session_database_connect_browser (self, _tmp11_, id);
#line 4345 "session.c"
	}
#line 243 "/home/test/core/extensions/session.vala"
	result = browser;
#line 243 "/home/test/core/extensions/session.vala"
	return result;
#line 4351 "session.c"
}


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 246 "/home/test/core/extensions/session.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 246 "/home/test/core/extensions/session.vala"
	return _data1_;
#line 4362 "session.c"
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 246 "/home/test/core/extensions/session.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 4373 "session.c"
		TabbySessionDatabase* self;
#line 246 "/home/test/core/extensions/session.vala"
		self = _data1_->self;
#line 246 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (self);
#line 246 "/home/test/core/extensions/session.vala"
		g_slice_free (Block1Data, _data1_);
#line 4381 "session.c"
	}
}


static void
__lambda8_ (Block1Data* _data1_,
            GtkWidget* widget)
{
	TabbySessionDatabase* self;
#line 258 "/home/test/core/extensions/session.vala"
	self = _data1_->self;
#line 258 "/home/test/core/extensions/session.vala"
	g_return_if_fail (widget != NULL);
#line 258 "/home/test/core/extensions/session.vala"
	tabby_session_database_tab_added (self, G_TYPE_CHECK_INSTANCE_TYPE (widget, MIDORI_TYPE_TAB) ? ((MidoriTab*) widget) : NULL, _data1_->id, NULL, NULL);
#line 4397 "session.c"
}


static void
___lambda8__gtk_container_add (GtkContainer* _sender,
                               GtkWidget* widget,
                               gpointer self)
{
#line 258 "/home/test/core/extensions/session.vala"
	__lambda8_ (self, widget);
#line 4408 "session.c"
}


static gboolean
__lambda9_ (Block1Data* _data1_,
            GdkEventAny* event)
{
	TabbySessionDatabase* self;
	gboolean result = FALSE;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 259 "/home/test/core/extensions/session.vala"
	self = _data1_->self;
#line 259 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 260 "/home/test/core/extensions/session.vala"
	_tmp0_ = g_strdup_printf ("%" G_GINT64_FORMAT, _data1_->id);
#line 260 "/home/test/core/extensions/session.vala"
	_tmp1_ = _tmp0_;
#line 260 "/home/test/core/extensions/session.vala"
	midori_loggable_debug ((MidoriLoggable*) self, "Closing session %s", _tmp1_, NULL);
#line 260 "/home/test/core/extensions/session.vala"
	_g_free0 (_tmp1_);
#line 261 "/home/test/core/extensions/session.vala"
	tabby_session_database_update_session (self, _data1_->id, TRUE);
#line 262 "/home/test/core/extensions/session.vala"
	result = FALSE;
#line 262 "/home/test/core/extensions/session.vala"
	return result;
#line 4438 "session.c"
}


static gboolean
___lambda9__gtk_widget_delete_event (GtkWidget* _sender,
                                     GdkEventAny* event,
                                     gpointer self)
{
	gboolean result;
	result = __lambda9_ (self, event);
#line 259 "/home/test/core/extensions/session.vala"
	return result;
#line 4451 "session.c"
}


void
tabby_session_database_connect_browser (TabbySessionDatabase* self,
                                        MidoriBrowser* browser,
                                        gint64 id)
{
	Block1Data* _data1_;
	GHashTable* _tmp0_;
	gchar* _tmp1_;
	MidoriBrowser* _tmp2_;
	GtkStack* _tmp3_;
	GList* _tmp4_;
	GtkStack* _tmp6_;
#line 246 "/home/test/core/extensions/session.vala"
	g_return_if_fail (self != NULL);
#line 246 "/home/test/core/extensions/session.vala"
	g_return_if_fail (browser != NULL);
#line 246 "/home/test/core/extensions/session.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 246 "/home/test/core/extensions/session.vala"
	_data1_->_ref_count_ = 1;
#line 246 "/home/test/core/extensions/session.vala"
	_data1_->self = g_object_ref (self);
#line 246 "/home/test/core/extensions/session.vala"
	_data1_->id = id;
#line 247 "/home/test/core/extensions/session.vala"
	if (_data1_->id < ((gint64) 0)) {
#line 248 "/home/test/core/extensions/session.vala"
		_data1_->id = tabby_session_database_insert_session (self);
#line 4483 "session.c"
	} else {
#line 250 "/home/test/core/extensions/session.vala"
		tabby_session_database_update_session (self, _data1_->id, FALSE);
#line 4487 "session.c"
	}
#line 253 "/home/test/core/extensions/session.vala"
	_tmp0_ = self->priv->browsers;
#line 253 "/home/test/core/extensions/session.vala"
	_tmp1_ = g_strdup_printf ("%" G_GINT64_FORMAT, _data1_->id);
#line 253 "/home/test/core/extensions/session.vala"
	_tmp2_ = _g_object_ref0 (browser);
#line 253 "/home/test/core/extensions/session.vala"
	g_hash_table_insert (_tmp0_, _tmp1_, _tmp2_);
#line 254 "/home/test/core/extensions/session.vala"
	g_object_set_data_full ((GObject*) browser, "tabby_connected", (gpointer) ((gintptr) TRUE), NULL);
#line 255 "/home/test/core/extensions/session.vala"
	_tmp3_ = browser->tabs;
#line 255 "/home/test/core/extensions/session.vala"
	_tmp4_ = gtk_container_get_children ((GtkContainer*) _tmp3_);
#line 4503 "session.c"
	{
		GList* widget_collection = NULL;
		GList* widget_it = NULL;
#line 255 "/home/test/core/extensions/session.vala"
		widget_collection = _tmp4_;
#line 255 "/home/test/core/extensions/session.vala"
		for (widget_it = widget_collection; widget_it != NULL; widget_it = widget_it->next) {
#line 4511 "session.c"
			GtkWidget* widget = NULL;
#line 255 "/home/test/core/extensions/session.vala"
			widget = (GtkWidget*) widget_it->data;
#line 4515 "session.c"
			{
				GtkWidget* _tmp5_;
#line 256 "/home/test/core/extensions/session.vala"
				_tmp5_ = widget;
#line 256 "/home/test/core/extensions/session.vala"
				tabby_session_database_tab_added (self, G_TYPE_CHECK_INSTANCE_TYPE (_tmp5_, MIDORI_TYPE_TAB) ? ((MidoriTab*) _tmp5_) : NULL, _data1_->id, NULL, NULL);
#line 4522 "session.c"
			}
		}
#line 255 "/home/test/core/extensions/session.vala"
		(widget_collection == NULL) ? NULL : (widget_collection = (g_list_free (widget_collection), NULL));
#line 4527 "session.c"
	}
#line 258 "/home/test/core/extensions/session.vala"
	_tmp6_ = browser->tabs;
#line 258 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((GtkContainer*) _tmp6_, "add", (GCallback) ___lambda8__gtk_container_add, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 259 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((GtkWidget*) browser, "delete-event", (GCallback) ___lambda9__gtk_widget_delete_event, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 246 "/home/test/core/extensions/session.vala"
	block1_data_unref (_data1_);
#line 246 "/home/test/core/extensions/session.vala"
	_data1_ = NULL;
#line 4539 "session.c"
}


static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
#line 266 "/home/test/core/extensions/session.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 266 "/home/test/core/extensions/session.vala"
	return _data2_;
#line 4550 "session.c"
}


static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 266 "/home/test/core/extensions/session.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 4561 "session.c"
		TabbySessionDatabase* self;
#line 266 "/home/test/core/extensions/session.vala"
		self = _data2_->self;
#line 266 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data2_->tab);
#line 266 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data2_->item);
#line 266 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (self);
#line 266 "/home/test/core/extensions/session.vala"
		g_slice_free (Block2Data, _data2_);
#line 4573 "session.c"
	}
}


static void
__lambda4_ (Block2Data* _data2_,
            GParamSpec* pspec)
{
	TabbySessionDatabase* self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
#line 269 "/home/test/core/extensions/session.vala"
	self = _data2_->self;
#line 269 "/home/test/core/extensions/session.vala"
	g_return_if_fail (pspec != NULL);
#line 269 "/home/test/core/extensions/session.vala"
	_tmp0_ = webkit_web_view_get_uri ((WebKitWebView*) _data2_->tab);
#line 269 "/home/test/core/extensions/session.vala"
	_tmp1_ = _tmp0_;
#line 269 "/home/test/core/extensions/session.vala"
	midori_database_item_set_uri (_data2_->item, _tmp1_);
#line 269 "/home/test/core/extensions/session.vala"
	midori_database_update ((MidoriDatabase*) self, _data2_->item, NULL, NULL);
#line 4597 "session.c"
}


static void
___lambda4__g_object_notify (GObject* _sender,
                             GParamSpec* pspec,
                             gpointer self)
{
#line 269 "/home/test/core/extensions/session.vala"
	__lambda4_ (self, pspec);
#line 4608 "session.c"
}


static void
__lambda5_ (Block2Data* _data2_,
            GParamSpec* pspec)
{
	TabbySessionDatabase* self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
#line 270 "/home/test/core/extensions/session.vala"
	self = _data2_->self;
#line 270 "/home/test/core/extensions/session.vala"
	g_return_if_fail (pspec != NULL);
#line 270 "/home/test/core/extensions/session.vala"
	_tmp0_ = webkit_web_view_get_title ((WebKitWebView*) _data2_->tab);
#line 270 "/home/test/core/extensions/session.vala"
	_tmp1_ = _tmp0_;
#line 270 "/home/test/core/extensions/session.vala"
	midori_database_item_set_title (_data2_->item, _tmp1_);
#line 4629 "session.c"
}


static void
___lambda5__g_object_notify (GObject* _sender,
                             GParamSpec* pspec,
                             gpointer self)
{
#line 270 "/home/test/core/extensions/session.vala"
	__lambda5_ (self, pspec);
#line 4640 "session.c"
}


static void
__lambda6_ (Block2Data* _data2_,
            GParamSpec* pspec)
{
	TabbySessionDatabase* self;
	gboolean _tmp0_;
	gboolean _tmp1_;
#line 271 "/home/test/core/extensions/session.vala"
	self = _data2_->self;
#line 271 "/home/test/core/extensions/session.vala"
	g_return_if_fail (pspec != NULL);
#line 271 "/home/test/core/extensions/session.vala"
	_tmp0_ = midori_tab_get_pinned (_data2_->tab);
#line 271 "/home/test/core/extensions/session.vala"
	_tmp1_ = _tmp0_;
#line 271 "/home/test/core/extensions/session.vala"
	g_object_set_data_full ((GObject*) _data2_->item, "pinned", (gpointer) ((gintptr) _tmp1_), NULL);
#line 271 "/home/test/core/extensions/session.vala"
	tabby_session_database_update_tab (self, _data2_->item, NULL, NULL);
#line 4663 "session.c"
}


static void
___lambda6__g_object_notify (GObject* _sender,
                             GParamSpec* pspec,
                             gpointer self)
{
#line 271 "/home/test/core/extensions/session.vala"
	__lambda6_ (self, pspec);
#line 4674 "session.c"
}


static void
__lambda7_ (Block2Data* _data2_)
{
	TabbySessionDatabase* self;
#line 272 "/home/test/core/extensions/session.vala"
	self = _data2_->self;
#line 272 "/home/test/core/extensions/session.vala"
	tabby_session_database_tab_removed (self, _data2_->tab);
#line 4686 "session.c"
}


static void
___lambda7__webkit_web_view_close (WebKitWebView* _sender,
                                   gpointer self)
{
#line 272 "/home/test/core/extensions/session.vala"
	__lambda7_ (self);
#line 4696 "session.c"
}


static void
tabby_session_database_connect_tab (TabbySessionDatabase* self,
                                    MidoriTab* tab,
                                    MidoriDatabaseItem* item)
{
	Block2Data* _data2_;
	MidoriTab* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	gconstpointer _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	MidoriDatabaseItem* _tmp7_;
#line 266 "/home/test/core/extensions/session.vala"
	g_return_if_fail (self != NULL);
#line 266 "/home/test/core/extensions/session.vala"
	g_return_if_fail (tab != NULL);
#line 266 "/home/test/core/extensions/session.vala"
	g_return_if_fail (item != NULL);
#line 266 "/home/test/core/extensions/session.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 266 "/home/test/core/extensions/session.vala"
	_data2_->_ref_count_ = 1;
#line 266 "/home/test/core/extensions/session.vala"
	_data2_->self = g_object_ref (self);
#line 266 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (tab);
#line 266 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data2_->tab);
#line 266 "/home/test/core/extensions/session.vala"
	_data2_->tab = _tmp0_;
#line 266 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 266 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data2_->item);
#line 266 "/home/test/core/extensions/session.vala"
	_data2_->item = _tmp1_;
#line 267 "/home/test/core/extensions/session.vala"
	_tmp2_ = midori_database_item_get_uri (_data2_->item);
#line 267 "/home/test/core/extensions/session.vala"
	_tmp3_ = _tmp2_;
#line 267 "/home/test/core/extensions/session.vala"
	_tmp4_ = g_object_get_data ((GObject*) _data2_->item, "session_id");
#line 267 "/home/test/core/extensions/session.vala"
	_tmp5_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp4_);
#line 267 "/home/test/core/extensions/session.vala"
	_tmp6_ = _tmp5_;
#line 267 "/home/test/core/extensions/session.vala"
	midori_loggable_debug ((MidoriLoggable*) self, "Connecting %s to session %s", _tmp3_, _tmp6_, NULL);
#line 267 "/home/test/core/extensions/session.vala"
	_g_free0 (_tmp6_);
#line 268 "/home/test/core/extensions/session.vala"
	_tmp7_ = _g_object_ref0 (_data2_->item);
#line 268 "/home/test/core/extensions/session.vala"
	g_object_set_data_full ((GObject*) _data2_->tab, "tabby-item", _tmp7_, g_object_unref);
#line 269 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((GObject*) _data2_->tab, "notify::uri", (GCallback) ___lambda4__g_object_notify, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 270 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((GObject*) _data2_->tab, "notify::title", (GCallback) ___lambda5__g_object_notify, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 271 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((GObject*) _data2_->tab, "notify::pinned", (GCallback) ___lambda6__g_object_notify, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 272 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((WebKitWebView*) _data2_->tab, "close", (GCallback) ___lambda7__webkit_web_view_close, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 266 "/home/test/core/extensions/session.vala"
	block2_data_unref (_data2_);
#line 266 "/home/test/core/extensions/session.vala"
	_data2_ = NULL;
#line 4768 "session.c"
}


static gboolean
tabby_session_database_tab_is_connected (TabbySessionDatabase* self,
                                         MidoriTab* tab)
{
	gboolean result = FALSE;
	gconstpointer _tmp0_;
#line 275 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 275 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (tab != NULL, FALSE);
#line 276 "/home/test/core/extensions/session.vala"
	_tmp0_ = g_object_get_data ((GObject*) tab, "tabby-item");
#line 276 "/home/test/core/extensions/session.vala"
	result = ((MidoriDatabaseItem*) _tmp0_) != NULL;
#line 276 "/home/test/core/extensions/session.vala"
	return result;
#line 4788 "session.c"
}


static void
tabby_session_database_tab_added_data_free (gpointer _data)
{
	TabbySessionDatabaseTabAddedData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->tab);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionDatabaseTabAddedData, _data_);
#line 4803 "session.c"
}


static void
tabby_session_database_tab_added (TabbySessionDatabase* self,
                                  MidoriTab* tab,
                                  gint64 id,
                                  GAsyncReadyCallback _callback_,
                                  gpointer _user_data_)
{
	TabbySessionDatabaseTabAddedData* _data_;
	TabbySessionDatabase* _tmp0_;
	MidoriTab* _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionDatabaseTabAddedData);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_database_tab_added_data_free);
#line 13 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (tab);
#line 13 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->tab);
#line 13 "/home/test/core/extensions/session.vala"
	_data_->tab = _tmp1_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_->id = id;
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_tab_added_co (_data_);
#line 4837 "session.c"
}


static void
tabby_session_database_tab_added_finish (TabbySessionDatabase* self,
                                         GAsyncResult* _res_)
{
	TabbySessionDatabaseTabAddedData* _data_;
#line 13 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 4848 "session.c"
}


static void
tabby_session_database_tab_added_ready (GObject* source_object,
                                        GAsyncResult* _res_,
                                        gpointer _user_data_)
{
	TabbySessionDatabaseTabAddedData* _data_;
#line 287 "/home/test/core/extensions/session.vala"
	_data_ = _user_data_;
#line 287 "/home/test/core/extensions/session.vala"
	_data_->_source_object_ = source_object;
#line 287 "/home/test/core/extensions/session.vala"
	_data_->_res_ = _res_;
#line 287 "/home/test/core/extensions/session.vala"
	tabby_session_database_tab_added_co (_data_);
#line 4866 "session.c"
}


static gboolean
tabby_session_database_tab_added_co (TabbySessionDatabaseTabAddedData* _data_)
{
#line 279 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 279 "/home/test/core/extensions/session.vala"
		case 0:
#line 4877 "session.c"
		goto _state_0;
#line 279 "/home/test/core/extensions/session.vala"
		case 1:
#line 4881 "session.c"
		goto _state_1;
		default:
#line 279 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 4886 "session.c"
	}
	_state_0:
#line 280 "/home/test/core/extensions/session.vala"
	if (tabby_session_database_tab_is_connected (_data_->self, _data_->tab)) {
#line 281 "/home/test/core/extensions/session.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 281 "/home/test/core/extensions/session.vala"
		if (_data_->_state_ != 0) {
#line 281 "/home/test/core/extensions/session.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 281 "/home/test/core/extensions/session.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 4899 "session.c"
			}
		}
#line 281 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 281 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 4906 "session.c"
	}
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = midori_tab_get_display_uri (_data_->tab);
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = midori_tab_get_display_title (_data_->tab);
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp3_ = _data_->_tmp2_;
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp4_ = g_date_time_new_now_local ();
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp6_ = midori_database_item_new (_data_->_tmp1_, _data_->_tmp3_, g_date_time_to_unix (_data_->_tmp5_));
#line 283 "/home/test/core/extensions/session.vala"
	_data_->_tmp7_ = _data_->_tmp6_;
#line 283 "/home/test/core/extensions/session.vala"
	_g_date_time_unref0 (_data_->_tmp5_);
#line 283 "/home/test/core/extensions/session.vala"
	_data_->item = _data_->_tmp7_;
#line 285 "/home/test/core/extensions/session.vala"
	_data_->_tmp8_ = _data_->item;
#line 285 "/home/test/core/extensions/session.vala"
	g_object_set_data_full ((GObject*) _data_->_tmp8_, "session_id", _data_->id, NULL);
#line 4932 "session.c"
	{
#line 287 "/home/test/core/extensions/session.vala"
		_data_->_tmp9_ = _data_->item;
#line 287 "/home/test/core/extensions/session.vala"
		_data_->_state_ = 1;
#line 287 "/home/test/core/extensions/session.vala"
		midori_database_insert ((MidoriDatabase*) _data_->self, _data_->_tmp9_, tabby_session_database_tab_added_ready, _data_);
#line 287 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 4942 "session.c"
		_state_1:
#line 287 "/home/test/core/extensions/session.vala"
		midori_database_insert_finish ((MidoriDatabase*) _data_->self, _data_->_res_, &_data_->_inner_error0_);
#line 287 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 287 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 4950 "session.c"
				goto __catch4_midori_database_error;
			}
#line 287 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->item);
#line 287 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 287 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 287 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 287 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 4963 "session.c"
		}
#line 288 "/home/test/core/extensions/session.vala"
		_data_->_tmp10_ = _data_->item;
#line 288 "/home/test/core/extensions/session.vala"
		tabby_session_database_connect_tab (_data_->self, _data_->tab, _data_->_tmp10_);
#line 4969 "session.c"
	}
	goto __finally4;
	__catch4_midori_database_error:
	{
#line 286 "/home/test/core/extensions/session.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 286 "/home/test/core/extensions/session.vala"
		_data_->_inner_error0_ = NULL;
#line 290 "/home/test/core/extensions/session.vala"
		_data_->_tmp11_ = _data_->_error_;
#line 290 "/home/test/core/extensions/session.vala"
		_data_->_tmp12_ = _data_->_tmp11_->message;
#line 290 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:290: Failed add tab to session database: %s", _data_->_tmp12_);
#line 286 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_data_->_error_);
#line 4986 "session.c"
	}
	__finally4:
#line 286 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 286 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->item);
#line 286 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 286 "/home/test/core/extensions/session.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 286 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 286 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 5001 "session.c"
	}
#line 279 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->item);
#line 279 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 279 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 279 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 279 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 5013 "session.c"
		}
	}
#line 279 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 279 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 5020 "session.c"
}


static void
tabby_session_database_tab_removed (TabbySessionDatabase* self,
                                    MidoriTab* tab)
{
	MidoriDatabaseItem* item = NULL;
	gconstpointer _tmp0_;
	MidoriDatabaseItem* _tmp1_;
	gconstpointer _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
#line 294 "/home/test/core/extensions/session.vala"
	g_return_if_fail (self != NULL);
#line 294 "/home/test/core/extensions/session.vala"
	g_return_if_fail (tab != NULL);
#line 295 "/home/test/core/extensions/session.vala"
	_tmp0_ = g_object_get_data ((GObject*) tab, "tabby-item");
#line 295 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 ((MidoriDatabaseItem*) _tmp0_);
#line 295 "/home/test/core/extensions/session.vala"
	item = _tmp1_;
#line 296 "/home/test/core/extensions/session.vala"
	_tmp2_ = g_object_get_data ((GObject*) item, "session_id");
#line 296 "/home/test/core/extensions/session.vala"
	_tmp3_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp2_);
#line 296 "/home/test/core/extensions/session.vala"
	_tmp4_ = _tmp3_;
#line 296 "/home/test/core/extensions/session.vala"
	_tmp5_ = midori_tab_get_display_uri (tab);
#line 296 "/home/test/core/extensions/session.vala"
	_tmp6_ = _tmp5_;
#line 296 "/home/test/core/extensions/session.vala"
	midori_loggable_debug ((MidoriLoggable*) self, "Trashing tab %s:%s", _tmp4_, _tmp6_, NULL);
#line 296 "/home/test/core/extensions/session.vala"
	_g_free0 (_tmp4_);
#line 297 "/home/test/core/extensions/session.vala"
	midori_database_item_delete (item, NULL, NULL);
#line 294 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (item);
#line 5064 "session.c"
}


static void
tabby_session_database_class_init (TabbySessionDatabaseClass * klass)
{
#line 13 "/home/test/core/extensions/session.vala"
	tabby_session_database_parent_class = g_type_class_peek_parent (klass);
#line 13 "/home/test/core/extensions/session.vala"
	g_type_class_add_private (klass, sizeof (TabbySessionDatabasePrivate));
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->query = (void (*) (MidoriDatabase*, const gchar*, gint64, GCancellable*, GAsyncReadyCallback, gpointer)) tabby_session_database_real_query;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->query_finish = (GList* (*) (MidoriDatabase*, GAsyncResult*, GError**)) tabby_session_database_real_query_finish;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->insert = (void (*) (MidoriDatabase*, MidoriDatabaseItem*, GAsyncReadyCallback, gpointer)) tabby_session_database_real_insert;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->insert_finish = (gboolean (*) (MidoriDatabase*, GAsyncResult*, GError**)) tabby_session_database_real_insert_finish;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->update = (void (*) (MidoriDatabase*, MidoriDatabaseItem*, GAsyncReadyCallback, gpointer)) tabby_session_database_real_update;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->update_finish = (gboolean (*) (MidoriDatabase*, GAsyncResult*, GError**)) tabby_session_database_real_update_finish;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->delete = (void (*) (MidoriDatabase*, MidoriDatabaseItem*, GAsyncReadyCallback, gpointer)) tabby_session_database_real_delete;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->delete_finish = (gboolean (*) (MidoriDatabase*, GAsyncResult*, GError**)) tabby_session_database_real_delete_finish;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->clear = (void (*) (MidoriDatabase*, GTimeSpan, GAsyncReadyCallback, gpointer)) tabby_session_database_real_clear;
#line 13 "/home/test/core/extensions/session.vala"
	((MidoriDatabaseClass *) klass)->clear_finish = (gboolean (*) (MidoriDatabase*, GAsyncResult*, GError**)) tabby_session_database_real_clear_finish;
#line 13 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_session_database_finalize;
#line 5097 "session.c"
}


static void
tabby_session_database_instance_init (TabbySessionDatabase * self)
{
#line 13 "/home/test/core/extensions/session.vala"
	self->priv = TABBY_SESSION_DATABASE_GET_PRIVATE (self);
#line 5106 "session.c"
}


static void
tabby_session_database_finalize (GObject * obj)
{
	TabbySessionDatabase * self;
#line 13 "/home/test/core/extensions/session.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_TYPE_SESSION_DATABASE, TabbySessionDatabase);
#line 16 "/home/test/core/extensions/session.vala"
	_g_hash_table_unref0 (self->priv->browsers);
#line 13 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (tabby_session_database_parent_class)->finalize (obj);
#line 5120 "session.c"
}


GType
tabby_session_database_get_type (void)
{
	return tabby_session_database_type_id;
}


GType
tabby_session_database_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (TabbySessionDatabaseClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_session_database_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbySessionDatabase), 0, (GInstanceInitFunc) tabby_session_database_instance_init, NULL };
	tabby_session_database_type_id = g_type_module_register_type (module, MIDORI_TYPE_DATABASE, "TabbySessionDatabase", &g_define_type_info, 0);
	return tabby_session_database_type_id;
}


static gboolean
_tabby_session_restore_or_connect_midori_browser_default_tab (MidoriBrowser* _sender,
                                                              gpointer self)
{
	gboolean result;
	result = tabby_session_restore_or_connect ((TabbySession*) self);
#line 316 "/home/test/core/extensions/session.vala"
	return result;
#line 5148 "session.c"
}


static void
tabby_session_real_activate (MidoriBrowserActivatable* base)
{
	TabbySession * self;
	gboolean _tmp0_ = FALSE;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	MidoriBrowser* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	MidoriBrowser* _tmp12_;
	MidoriBrowser* _tmp13_;
	MidoriBrowser* _tmp14_;
	gconstpointer _tmp15_;
	gboolean _tmp16_;
	MidoriBrowser* _tmp17_;
	MidoriBrowser* _tmp18_;
	MidoriBrowser* _tmp19_;
	GError* _inner_error0_ = NULL;
#line 306 "/home/test/core/extensions/session.vala"
	self = (TabbySession*) base;
#line 308 "/home/test/core/extensions/session.vala"
	_tmp1_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 308 "/home/test/core/extensions/session.vala"
	_tmp2_ = _tmp1_;
#line 308 "/home/test/core/extensions/session.vala"
	_tmp3_ = _tmp2_;
#line 308 "/home/test/core/extensions/session.vala"
	_tmp4_ = midori_browser_get_is_locked (_tmp3_);
#line 308 "/home/test/core/extensions/session.vala"
	_tmp5_ = _tmp4_;
#line 308 "/home/test/core/extensions/session.vala"
	_tmp6_ = _tmp5_;
#line 308 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_tmp3_);
#line 308 "/home/test/core/extensions/session.vala"
	if (_tmp6_) {
#line 308 "/home/test/core/extensions/session.vala"
		_tmp0_ = TRUE;
#line 5192 "session.c"
	} else {
		MidoriBrowser* _tmp7_;
		MidoriBrowser* _tmp8_;
		MidoriBrowser* _tmp9_;
		WebKitWebContext* _tmp10_;
		WebKitWebContext* _tmp11_;
#line 308 "/home/test/core/extensions/session.vala"
		_tmp7_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 308 "/home/test/core/extensions/session.vala"
		_tmp8_ = _tmp7_;
#line 308 "/home/test/core/extensions/session.vala"
		_tmp9_ = _tmp8_;
#line 308 "/home/test/core/extensions/session.vala"
		_tmp10_ = midori_browser_get_web_context (_tmp9_);
#line 308 "/home/test/core/extensions/session.vala"
		_tmp11_ = _tmp10_;
#line 308 "/home/test/core/extensions/session.vala"
		_tmp0_ = webkit_web_context_is_ephemeral (_tmp11_);
#line 308 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_tmp9_);
#line 5213 "session.c"
	}
#line 308 "/home/test/core/extensions/session.vala"
	if (_tmp0_) {
#line 309 "/home/test/core/extensions/session.vala"
		return;
#line 5219 "session.c"
	}
#line 312 "/home/test/core/extensions/session.vala"
	_tmp12_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 312 "/home/test/core/extensions/session.vala"
	_tmp13_ = _tmp12_;
#line 312 "/home/test/core/extensions/session.vala"
	_tmp14_ = _tmp13_;
#line 312 "/home/test/core/extensions/session.vala"
	_tmp15_ = g_object_get_data ((GObject*) _tmp14_, "tabby_connected");
#line 312 "/home/test/core/extensions/session.vala"
	_tmp16_ = (gboolean) ((gintptr) _tmp15_);
#line 312 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_tmp14_);
#line 312 "/home/test/core/extensions/session.vala"
	if (_tmp16_) {
#line 313 "/home/test/core/extensions/session.vala"
		return;
#line 5237 "session.c"
	}
#line 316 "/home/test/core/extensions/session.vala"
	_tmp17_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 316 "/home/test/core/extensions/session.vala"
	_tmp18_ = _tmp17_;
#line 316 "/home/test/core/extensions/session.vala"
	_tmp19_ = _tmp18_;
#line 316 "/home/test/core/extensions/session.vala"
	g_signal_connect_object (_tmp19_, "default-tab", (GCallback) _tabby_session_restore_or_connect_midori_browser_default_tab, self, 0);
#line 316 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_tmp19_);
#line 5249 "session.c"
	{
		TabbySessionDatabase* session = NULL;
		TabbySessionDatabase* _tmp20_;
		gboolean _tmp21_;
#line 318 "/home/test/core/extensions/session.vala"
		_tmp20_ = tabby_session_database_get_default (&_inner_error0_);
#line 318 "/home/test/core/extensions/session.vala"
		session = _tmp20_;
#line 318 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 318 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 5262 "session.c"
				goto __catch5_midori_database_error;
			}
#line 318 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 318 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 318 "/home/test/core/extensions/session.vala"
			return;
#line 5271 "session.c"
		}
#line 319 "/home/test/core/extensions/session.vala"
		_tmp21_ = tabby_session_session_restored;
#line 319 "/home/test/core/extensions/session.vala"
		if (_tmp21_) {
#line 5277 "session.c"
			TabbySessionDatabase* _tmp22_;
			MidoriBrowser* _tmp23_;
			MidoriBrowser* _tmp24_;
			MidoriBrowser* _tmp25_;
			MidoriBrowser* _tmp26_;
			MidoriBrowser* _tmp27_;
			MidoriBrowser* _tmp28_;
#line 320 "/home/test/core/extensions/session.vala"
			_tmp22_ = session;
#line 320 "/home/test/core/extensions/session.vala"
			_tmp23_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 320 "/home/test/core/extensions/session.vala"
			_tmp24_ = _tmp23_;
#line 320 "/home/test/core/extensions/session.vala"
			_tmp25_ = _tmp24_;
#line 320 "/home/test/core/extensions/session.vala"
			tabby_session_database_connect_browser (_tmp22_, _tmp25_, (gint64) -1);
#line 320 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_tmp25_);
#line 321 "/home/test/core/extensions/session.vala"
			_tmp26_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 321 "/home/test/core/extensions/session.vala"
			_tmp27_ = _tmp26_;
#line 321 "/home/test/core/extensions/session.vala"
			_tmp28_ = _tmp27_;
#line 321 "/home/test/core/extensions/session.vala"
			g_action_group_activate_action ((GActionGroup*) _tmp28_, "tab-new", NULL);
#line 321 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_tmp28_);
#line 5307 "session.c"
		} else {
			TabbySessionDatabase* _tmp29_;
#line 323 "/home/test/core/extensions/session.vala"
			tabby_session_session_restored = TRUE;
#line 324 "/home/test/core/extensions/session.vala"
			_tmp29_ = session;
#line 324 "/home/test/core/extensions/session.vala"
			tabby_session_restore_session (self, _tmp29_, NULL, NULL);
#line 5316 "session.c"
		}
#line 317 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (session);
#line 5320 "session.c"
	}
	goto __finally5;
	__catch5_midori_database_error:
	{
		GError* _error_ = NULL;
		GError* _tmp30_;
		const gchar* _tmp31_;
#line 317 "/home/test/core/extensions/session.vala"
		_error_ = _inner_error0_;
#line 317 "/home/test/core/extensions/session.vala"
		_inner_error0_ = NULL;
#line 327 "/home/test/core/extensions/session.vala"
		_tmp30_ = _error_;
#line 327 "/home/test/core/extensions/session.vala"
		_tmp31_ = _tmp30_->message;
#line 327 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:327: Failed to restore session: %s", _tmp31_);
#line 317 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_error_);
#line 5340 "session.c"
	}
	__finally5:
#line 317 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 317 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 317 "/home/test/core/extensions/session.vala"
		g_clear_error (&_inner_error0_);
#line 317 "/home/test/core/extensions/session.vala"
		return;
#line 5351 "session.c"
	}
}


static gboolean
tabby_session_restore_or_connect (TabbySession* self)
{
	gboolean result = FALSE;
	GError* _inner_error0_ = NULL;
#line 331 "/home/test/core/extensions/session.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 5363 "session.c"
	{
		TabbySessionDatabase* session = NULL;
		TabbySessionDatabase* _tmp0_;
		MidoriCoreSettings* settings = NULL;
		MidoriCoreSettings* _tmp2_;
		MidoriCoreSettings* _tmp3_;
		MidoriStartupType _tmp4_;
		MidoriStartupType _tmp5_;
#line 333 "/home/test/core/extensions/session.vala"
		_tmp0_ = tabby_session_database_get_default (&_inner_error0_);
#line 333 "/home/test/core/extensions/session.vala"
		session = _tmp0_;
#line 333 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 5378 "session.c"
			gboolean _tmp1_ = FALSE;
#line 333 "/home/test/core/extensions/session.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 5382 "session.c"
				goto __catch6_midori_database_error;
			}
#line 333 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 333 "/home/test/core/extensions/session.vala"
			g_clear_error (&_inner_error0_);
#line 333 "/home/test/core/extensions/session.vala"
			return _tmp1_;
#line 5391 "session.c"
		}
#line 334 "/home/test/core/extensions/session.vala"
		_tmp2_ = midori_core_settings_get_default ();
#line 334 "/home/test/core/extensions/session.vala"
		settings = _tmp2_;
#line 335 "/home/test/core/extensions/session.vala"
		_tmp3_ = settings;
#line 335 "/home/test/core/extensions/session.vala"
		_tmp4_ = midori_core_settings_get_load_on_startup (_tmp3_);
#line 335 "/home/test/core/extensions/session.vala"
		_tmp5_ = _tmp4_;
#line 335 "/home/test/core/extensions/session.vala"
		if (_tmp5_ == MIDORI_STARTUP_SPEED_DIAL) {
#line 5405 "session.c"
			TabbySessionDatabase* _tmp6_;
			MidoriBrowser* _tmp7_;
			MidoriBrowser* _tmp8_;
			MidoriBrowser* _tmp9_;
#line 336 "/home/test/core/extensions/session.vala"
			_tmp6_ = session;
#line 336 "/home/test/core/extensions/session.vala"
			_tmp7_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 336 "/home/test/core/extensions/session.vala"
			_tmp8_ = _tmp7_;
#line 336 "/home/test/core/extensions/session.vala"
			_tmp9_ = _tmp8_;
#line 336 "/home/test/core/extensions/session.vala"
			tabby_session_database_connect_browser (_tmp6_, _tmp9_, (gint64) -1);
#line 336 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_tmp9_);
#line 5422 "session.c"
		} else {
			MidoriCoreSettings* _tmp10_;
			MidoriStartupType _tmp11_;
			MidoriStartupType _tmp12_;
#line 337 "/home/test/core/extensions/session.vala"
			_tmp10_ = settings;
#line 337 "/home/test/core/extensions/session.vala"
			_tmp11_ = midori_core_settings_get_load_on_startup (_tmp10_);
#line 337 "/home/test/core/extensions/session.vala"
			_tmp12_ = _tmp11_;
#line 337 "/home/test/core/extensions/session.vala"
			if (_tmp12_ == MIDORI_STARTUP_HOMEPAGE) {
#line 5435 "session.c"
				TabbySessionDatabase* _tmp13_;
				MidoriBrowser* _tmp14_;
				MidoriBrowser* _tmp15_;
				MidoriBrowser* _tmp16_;
				MidoriBrowser* _tmp17_;
				MidoriBrowser* _tmp18_;
				MidoriBrowser* _tmp19_;
#line 338 "/home/test/core/extensions/session.vala"
				_tmp13_ = session;
#line 338 "/home/test/core/extensions/session.vala"
				_tmp14_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 338 "/home/test/core/extensions/session.vala"
				_tmp15_ = _tmp14_;
#line 338 "/home/test/core/extensions/session.vala"
				_tmp16_ = _tmp15_;
#line 338 "/home/test/core/extensions/session.vala"
				tabby_session_database_connect_browser (_tmp13_, _tmp16_, (gint64) -1);
#line 338 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_tmp16_);
#line 339 "/home/test/core/extensions/session.vala"
				_tmp17_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 339 "/home/test/core/extensions/session.vala"
				_tmp18_ = _tmp17_;
#line 339 "/home/test/core/extensions/session.vala"
				_tmp19_ = _tmp18_;
#line 339 "/home/test/core/extensions/session.vala"
				g_action_group_activate_action ((GActionGroup*) _tmp19_, "homepage", NULL);
#line 339 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (_tmp19_);
#line 340 "/home/test/core/extensions/session.vala"
				result = TRUE;
#line 340 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (settings);
#line 340 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (session);
#line 340 "/home/test/core/extensions/session.vala"
				return result;
#line 5473 "session.c"
			} else {
#line 342 "/home/test/core/extensions/session.vala"
				result = TRUE;
#line 342 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (settings);
#line 342 "/home/test/core/extensions/session.vala"
				_g_object_unref0 (session);
#line 342 "/home/test/core/extensions/session.vala"
				return result;
#line 5483 "session.c"
			}
		}
#line 332 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (settings);
#line 332 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (session);
#line 5490 "session.c"
	}
	goto __finally6;
	__catch6_midori_database_error:
	{
		GError* _error_ = NULL;
		GError* _tmp20_;
		const gchar* _tmp21_;
#line 332 "/home/test/core/extensions/session.vala"
		_error_ = _inner_error0_;
#line 332 "/home/test/core/extensions/session.vala"
		_inner_error0_ = NULL;
#line 345 "/home/test/core/extensions/session.vala"
		_tmp20_ = _error_;
#line 345 "/home/test/core/extensions/session.vala"
		_tmp21_ = _tmp20_->message;
#line 345 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:345: Failed to restore session: %s", _tmp21_);
#line 332 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_error_);
#line 5510 "session.c"
	}
	__finally6:
#line 332 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 5515 "session.c"
		gboolean _tmp22_ = FALSE;
#line 332 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 332 "/home/test/core/extensions/session.vala"
		g_clear_error (&_inner_error0_);
#line 332 "/home/test/core/extensions/session.vala"
		return _tmp22_;
#line 5523 "session.c"
	}
#line 347 "/home/test/core/extensions/session.vala"
	result = FALSE;
#line 347 "/home/test/core/extensions/session.vala"
	return result;
#line 5529 "session.c"
}


static void
tabby_session_restore_session_data_free (gpointer _data)
{
	TabbySessionRestoreSessionData* _data_;
	_data_ = _data;
#line 301 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->session);
#line 301 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 301 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbySessionRestoreSessionData, _data_);
#line 5544 "session.c"
}


static void
tabby_session_restore_session (TabbySession* self,
                               TabbySessionDatabase* session,
                               GAsyncReadyCallback _callback_,
                               gpointer _user_data_)
{
	TabbySessionRestoreSessionData* _data_;
	TabbySession* _tmp0_;
	TabbySessionDatabase* _tmp1_;
#line 301 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbySessionRestoreSessionData);
#line 301 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 301 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_session_restore_session_data_free);
#line 301 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 301 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 301 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (session);
#line 301 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->session);
#line 301 "/home/test/core/extensions/session.vala"
	_data_->session = _tmp1_;
#line 301 "/home/test/core/extensions/session.vala"
	tabby_session_restore_session_co (_data_);
#line 5575 "session.c"
}


static void
tabby_session_restore_session_finish (TabbySession* self,
                                      GAsyncResult* _res_)
{
	TabbySessionRestoreSessionData* _data_;
#line 301 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 5586 "session.c"
}


static void
tabby_session_restore_session_ready (GObject* source_object,
                                     GAsyncResult* _res_,
                                     gpointer _user_data_)
{
	TabbySessionRestoreSessionData* _data_;
#line 352 "/home/test/core/extensions/session.vala"
	_data_ = _user_data_;
#line 352 "/home/test/core/extensions/session.vala"
	_data_->_source_object_ = source_object;
#line 352 "/home/test/core/extensions/session.vala"
	_data_->_res_ = _res_;
#line 352 "/home/test/core/extensions/session.vala"
	tabby_session_restore_session_co (_data_);
#line 5604 "session.c"
}


static gboolean
tabby_session_restore_session_co (TabbySessionRestoreSessionData* _data_)
{
#line 350 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 350 "/home/test/core/extensions/session.vala"
		case 0:
#line 5615 "session.c"
		goto _state_0;
#line 350 "/home/test/core/extensions/session.vala"
		case 1:
#line 5619 "session.c"
		goto _state_1;
		default:
#line 350 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 5624 "session.c"
	}
	_state_0:
	{
#line 352 "/home/test/core/extensions/session.vala"
		_data_->_tmp0_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 352 "/home/test/core/extensions/session.vala"
		_data_->_tmp1_ = _data_->_tmp0_;
#line 352 "/home/test/core/extensions/session.vala"
		_data_->_tmp2_ = _data_->_tmp1_;
#line 352 "/home/test/core/extensions/session.vala"
		_data_->_state_ = 1;
#line 352 "/home/test/core/extensions/session.vala"
		tabby_session_database_restore_windows (_data_->session, _data_->_tmp2_, tabby_session_restore_session_ready, _data_);
#line 352 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 5640 "session.c"
		_state_1:
#line 352 "/home/test/core/extensions/session.vala"
		_data_->_tmp3_ = tabby_session_database_restore_windows_finish (_data_->session, _data_->_res_, &_data_->_inner_error0_);
#line 352 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->_tmp2_);
#line 352 "/home/test/core/extensions/session.vala"
		_data_->restored = _data_->_tmp3_;
#line 352 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 352 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 5652 "session.c"
				goto __catch7_midori_database_error;
			}
#line 352 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 352 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 352 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 352 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 5663 "session.c"
		}
#line 353 "/home/test/core/extensions/session.vala"
		if (!_data_->restored) {
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp4_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp5_ = _data_->_tmp4_;
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp6_ = _data_->_tmp5_;
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp7_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp8_ = _data_->_tmp7_;
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp9_ = _data_->_tmp8_;
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp10_ = midori_browser_get_web_context (_data_->_tmp9_);
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp11_ = _data_->_tmp10_;
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp12_ = midori_tab_new (NULL, _data_->_tmp11_, NULL, NULL);
#line 354 "/home/test/core/extensions/session.vala"
			g_object_ref_sink (_data_->_tmp12_);
#line 354 "/home/test/core/extensions/session.vala"
			_data_->_tmp13_ = _data_->_tmp12_;
#line 354 "/home/test/core/extensions/session.vala"
			midori_browser_add (_data_->_tmp6_, _data_->_tmp13_);
#line 354 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp13_);
#line 354 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp9_);
#line 354 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp6_);
#line 355 "/home/test/core/extensions/session.vala"
			_data_->_tmp14_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 355 "/home/test/core/extensions/session.vala"
			_data_->_tmp15_ = _data_->_tmp14_;
#line 355 "/home/test/core/extensions/session.vala"
			_data_->_tmp16_ = _data_->_tmp15_;
#line 355 "/home/test/core/extensions/session.vala"
			tabby_session_database_connect_browser (_data_->session, _data_->_tmp16_, (gint64) -1);
#line 355 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp16_);
#line 5707 "session.c"
		}
	}
	goto __finally7;
	__catch7_midori_database_error:
	{
#line 351 "/home/test/core/extensions/session.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 351 "/home/test/core/extensions/session.vala"
		_data_->_inner_error0_ = NULL;
#line 358 "/home/test/core/extensions/session.vala"
		_data_->_tmp17_ = _data_->_error_;
#line 358 "/home/test/core/extensions/session.vala"
		_data_->_tmp18_ = _data_->_tmp17_->message;
#line 358 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:358: Failed to restore session: %s", _data_->_tmp18_);
#line 351 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_data_->_error_);
#line 5725 "session.c"
	}
	__finally7:
#line 351 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 351 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 351 "/home/test/core/extensions/session.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 351 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 351 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 5738 "session.c"
	}
#line 350 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 350 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 350 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 350 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 5748 "session.c"
		}
	}
#line 350 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 350 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 5755 "session.c"
}


TabbySession*
tabby_session_construct (GType object_type)
{
	TabbySession * self = NULL;
#line 301 "/home/test/core/extensions/session.vala"
	self = (TabbySession*) g_object_new (object_type, NULL);
#line 301 "/home/test/core/extensions/session.vala"
	return self;
#line 5767 "session.c"
}


TabbySession*
tabby_session_new (void)
{
#line 301 "/home/test/core/extensions/session.vala"
	return tabby_session_construct (TABBY_TYPE_SESSION);
#line 5776 "session.c"
}


static MidoriBrowser*
tabby_session_real_get_browser (MidoriBrowserActivatable* base)
{
	MidoriBrowser* result;
	TabbySession* self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
#line 302 "/home/test/core/extensions/session.vala"
	self = (TabbySession*) base;
#line 302 "/home/test/core/extensions/session.vala"
	_tmp0_ = self->priv->_browser;
#line 302 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 302 "/home/test/core/extensions/session.vala"
	result = _tmp1_;
#line 302 "/home/test/core/extensions/session.vala"
	return result;
#line 5797 "session.c"
}


static void
tabby_session_real_set_browser (MidoriBrowserActivatable* base,
                                MidoriBrowser* value)
{
	TabbySession* self;
#line 302 "/home/test/core/extensions/session.vala"
	self = (TabbySession*) base;
#line 302 "/home/test/core/extensions/session.vala"
	if (tabby_session_real_get_browser (base) != value) {
#line 5810 "session.c"
		MidoriBrowser* _tmp0_;
#line 302 "/home/test/core/extensions/session.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 302 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (self->priv->_browser);
#line 302 "/home/test/core/extensions/session.vala"
		self->priv->_browser = _tmp0_;
#line 302 "/home/test/core/extensions/session.vala"
		g_object_notify_by_pspec ((GObject *) self, tabby_session_properties[TABBY_SESSION_BROWSER_PROPERTY]);
#line 5820 "session.c"
	}
}


static void
tabby_session_class_init (TabbySessionClass * klass)
{
#line 301 "/home/test/core/extensions/session.vala"
	tabby_session_parent_class = g_type_class_peek_parent (klass);
#line 301 "/home/test/core/extensions/session.vala"
	g_type_class_add_private (klass, sizeof (TabbySessionPrivate));
#line 301 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_tabby_session_get_property;
#line 301 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_tabby_session_set_property;
#line 301 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_session_finalize;
#line 301 "/home/test/core/extensions/session.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_SESSION_BROWSER_PROPERTY, tabby_session_properties[TABBY_SESSION_BROWSER_PROPERTY] = g_param_spec_object ("browser", "browser", "browser", MIDORI_TYPE_BROWSER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 5840 "session.c"
}


static void
tabby_session_midori_browser_activatable_interface_init (MidoriBrowserActivatableIface * iface)
{
#line 301 "/home/test/core/extensions/session.vala"
	tabby_session_midori_browser_activatable_parent_iface = g_type_interface_peek_parent (iface);
#line 301 "/home/test/core/extensions/session.vala"
	iface->activate = (void (*) (MidoriBrowserActivatable*)) tabby_session_real_activate;
#line 301 "/home/test/core/extensions/session.vala"
	iface->get_browser = tabby_session_real_get_browser;
#line 301 "/home/test/core/extensions/session.vala"
	iface->set_browser = tabby_session_real_set_browser;
#line 5855 "session.c"
}


static void
tabby_session_instance_init (TabbySession * self)
{
#line 301 "/home/test/core/extensions/session.vala"
	self->priv = TABBY_SESSION_GET_PRIVATE (self);
#line 5864 "session.c"
}


static void
tabby_session_finalize (GObject * obj)
{
	TabbySession * self;
#line 301 "/home/test/core/extensions/session.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_TYPE_SESSION, TabbySession);
#line 302 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (self->priv->_browser);
#line 301 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (tabby_session_parent_class)->finalize (obj);
#line 5878 "session.c"
}


GType
tabby_session_get_type (void)
{
	return tabby_session_type_id;
}


GType
tabby_session_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (TabbySessionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_session_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbySession), 0, (GInstanceInitFunc) tabby_session_instance_init, NULL };
	static const GInterfaceInfo midori_browser_activatable_info = { (GInterfaceInitFunc) tabby_session_midori_browser_activatable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	tabby_session_type_id = g_type_module_register_type (module, peas_extension_base_get_type (), "TabbySession", &g_define_type_info, 0);
	g_type_module_add_interface (module, tabby_session_type_id, MIDORI_TYPE_BROWSER_ACTIVATABLE, &midori_browser_activatable_info);
	return tabby_session_type_id;
}


static void
_vala_tabby_session_get_property (GObject * object,
                                  guint property_id,
                                  GValue * value,
                                  GParamSpec * pspec)
{
	TabbySession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_TYPE_SESSION, TabbySession);
#line 301 "/home/test/core/extensions/session.vala"
	switch (property_id) {
#line 301 "/home/test/core/extensions/session.vala"
		case TABBY_SESSION_BROWSER_PROPERTY:
#line 301 "/home/test/core/extensions/session.vala"
		g_value_take_object (value, midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self));
#line 301 "/home/test/core/extensions/session.vala"
		break;
#line 5916 "session.c"
		default:
#line 301 "/home/test/core/extensions/session.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 301 "/home/test/core/extensions/session.vala"
		break;
#line 5922 "session.c"
	}
}


static void
_vala_tabby_session_set_property (GObject * object,
                                  guint property_id,
                                  const GValue * value,
                                  GParamSpec * pspec)
{
	TabbySession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_TYPE_SESSION, TabbySession);
#line 301 "/home/test/core/extensions/session.vala"
	switch (property_id) {
#line 301 "/home/test/core/extensions/session.vala"
		case TABBY_SESSION_BROWSER_PROPERTY:
#line 301 "/home/test/core/extensions/session.vala"
		midori_browser_activatable_set_browser ((MidoriBrowserActivatable*) self, g_value_get_object (value));
#line 301 "/home/test/core/extensions/session.vala"
		break;
#line 5943 "session.c"
		default:
#line 301 "/home/test/core/extensions/session.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 301 "/home/test/core/extensions/session.vala"
		break;
#line 5949 "session.c"
	}
}


static Block3Data*
block3_data_ref (Block3Data* _data3_)
{
#line 366 "/home/test/core/extensions/session.vala"
	g_atomic_int_inc (&_data3_->_ref_count_);
#line 366 "/home/test/core/extensions/session.vala"
	return _data3_;
#line 5961 "session.c"
}


static void
block3_data_unref (void * _userdata_)
{
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
#line 366 "/home/test/core/extensions/session.vala"
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
#line 5972 "session.c"
		TabbyPreferences* self;
#line 366 "/home/test/core/extensions/session.vala"
		self = _data3_->self;
#line 366 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data3_->box);
#line 366 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (self);
#line 366 "/home/test/core/extensions/session.vala"
		g_slice_free (Block3Data, _data3_);
#line 5982 "session.c"
	}
}


static void
__lambda10_ (Block3Data* _data3_)
{
	TabbyPreferences* self;
#line 378 "/home/test/core/extensions/session.vala"
	self = _data3_->self;
#line 379 "/home/test/core/extensions/session.vala"
	gtk_widget_destroy ((GtkWidget*) _data3_->box);
#line 5995 "session.c"
}


static void
___lambda10__midori_preferences_activatable_deactivate (MidoriPreferencesActivatable* _sender,
                                                        gpointer self)
{
#line 378 "/home/test/core/extensions/session.vala"
	__lambda10_ (self);
#line 6005 "session.c"
}


static void
tabby_preferences_real_activate (MidoriPreferencesActivatable* base)
{
	TabbyPreferences * self;
	Block3Data* _data3_;
	MidoriCoreSettings* settings = NULL;
	MidoriCoreSettings* _tmp0_;
	MidoriLabelWidget* _tmp1_;
	GtkComboBoxText* combo = NULL;
	GtkComboBoxText* _tmp2_;
	MidoriLabelWidget* button = NULL;
	MidoriLabelWidget* _tmp3_;
	MidoriPreferences* _tmp4_;
	MidoriPreferences* _tmp5_;
	MidoriPreferences* _tmp6_;
#line 366 "/home/test/core/extensions/session.vala"
	self = (TabbyPreferences*) base;
#line 366 "/home/test/core/extensions/session.vala"
	_data3_ = g_slice_new0 (Block3Data);
#line 366 "/home/test/core/extensions/session.vala"
	_data3_->_ref_count_ = 1;
#line 366 "/home/test/core/extensions/session.vala"
	_data3_->self = g_object_ref (self);
#line 367 "/home/test/core/extensions/session.vala"
	_tmp0_ = midori_core_settings_get_default ();
#line 367 "/home/test/core/extensions/session.vala"
	settings = _tmp0_;
#line 368 "/home/test/core/extensions/session.vala"
	_tmp1_ = midori_label_widget_new (_ ("Startup"), NULL);
#line 368 "/home/test/core/extensions/session.vala"
	g_object_ref_sink (_tmp1_);
#line 368 "/home/test/core/extensions/session.vala"
	_data3_->box = _tmp1_;
#line 369 "/home/test/core/extensions/session.vala"
	_tmp2_ = (GtkComboBoxText*) gtk_combo_box_text_new ();
#line 369 "/home/test/core/extensions/session.vala"
	g_object_ref_sink (_tmp2_);
#line 369 "/home/test/core/extensions/session.vala"
	combo = _tmp2_;
#line 370 "/home/test/core/extensions/session.vala"
	gtk_combo_box_text_append (combo, "0", _ ("Show Speed Dial"));
#line 371 "/home/test/core/extensions/session.vala"
	gtk_combo_box_text_append (combo, "1", _ ("Show Homepage"));
#line 372 "/home/test/core/extensions/session.vala"
	gtk_combo_box_text_append (combo, "2", _ ("Show last open tabs"));
#line 373 "/home/test/core/extensions/session.vala"
	g_object_bind_property_with_closures ((GObject*) settings, "load-on-startup", (GObject*) combo, "active", G_BINDING_SYNC_CREATE | G_BINDING_BIDIRECTIONAL, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 374 "/home/test/core/extensions/session.vala"
	_tmp3_ = midori_label_widget_new (_ ("When Midori starts:"), (GtkWidget*) combo);
#line 374 "/home/test/core/extensions/session.vala"
	g_object_ref_sink (_tmp3_);
#line 374 "/home/test/core/extensions/session.vala"
	button = _tmp3_;
#line 375 "/home/test/core/extensions/session.vala"
	gtk_container_add ((GtkContainer*) _data3_->box, (GtkWidget*) button);
#line 376 "/home/test/core/extensions/session.vala"
	gtk_widget_show_all ((GtkWidget*) _data3_->box);
#line 377 "/home/test/core/extensions/session.vala"
	_tmp4_ = midori_preferences_activatable_get_preferences ((MidoriPreferencesActivatable*) self);
#line 377 "/home/test/core/extensions/session.vala"
	_tmp5_ = _tmp4_;
#line 377 "/home/test/core/extensions/session.vala"
	_tmp6_ = _tmp5_;
#line 377 "/home/test/core/extensions/session.vala"
	midori_preferences_add (_tmp6_, _ ("Browsing"), (GtkWidget*) _data3_->box);
#line 377 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_tmp6_);
#line 378 "/home/test/core/extensions/session.vala"
	g_signal_connect_data ((MidoriPreferencesActivatable*) self, "deactivate", (GCallback) ___lambda10__midori_preferences_activatable_deactivate, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
#line 366 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (button);
#line 366 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (combo);
#line 366 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (settings);
#line 366 "/home/test/core/extensions/session.vala"
	block3_data_unref (_data3_);
#line 366 "/home/test/core/extensions/session.vala"
	_data3_ = NULL;
#line 6088 "session.c"
}


TabbyPreferences*
tabby_preferences_construct (GType object_type)
{
	TabbyPreferences * self = NULL;
#line 363 "/home/test/core/extensions/session.vala"
	self = (TabbyPreferences*) g_object_new (object_type, NULL);
#line 363 "/home/test/core/extensions/session.vala"
	return self;
#line 6100 "session.c"
}


TabbyPreferences*
tabby_preferences_new (void)
{
#line 363 "/home/test/core/extensions/session.vala"
	return tabby_preferences_construct (TABBY_TYPE_PREFERENCES);
#line 6109 "session.c"
}


static MidoriPreferences*
tabby_preferences_real_get_preferences (MidoriPreferencesActivatable* base)
{
	MidoriPreferences* result;
	TabbyPreferences* self;
	MidoriPreferences* _tmp0_;
	MidoriPreferences* _tmp1_;
#line 364 "/home/test/core/extensions/session.vala"
	self = (TabbyPreferences*) base;
#line 364 "/home/test/core/extensions/session.vala"
	_tmp0_ = self->priv->_preferences;
#line 364 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 364 "/home/test/core/extensions/session.vala"
	result = _tmp1_;
#line 364 "/home/test/core/extensions/session.vala"
	return result;
#line 6130 "session.c"
}


static void
tabby_preferences_real_set_preferences (MidoriPreferencesActivatable* base,
                                        MidoriPreferences* value)
{
	TabbyPreferences* self;
#line 364 "/home/test/core/extensions/session.vala"
	self = (TabbyPreferences*) base;
#line 364 "/home/test/core/extensions/session.vala"
	if (tabby_preferences_real_get_preferences (base) != value) {
#line 6143 "session.c"
		MidoriPreferences* _tmp0_;
#line 364 "/home/test/core/extensions/session.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 364 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (self->priv->_preferences);
#line 364 "/home/test/core/extensions/session.vala"
		self->priv->_preferences = _tmp0_;
#line 364 "/home/test/core/extensions/session.vala"
		g_object_notify_by_pspec ((GObject *) self, tabby_preferences_properties[TABBY_PREFERENCES_PREFERENCES_PROPERTY]);
#line 6153 "session.c"
	}
}


static void
tabby_preferences_class_init (TabbyPreferencesClass * klass)
{
#line 363 "/home/test/core/extensions/session.vala"
	tabby_preferences_parent_class = g_type_class_peek_parent (klass);
#line 363 "/home/test/core/extensions/session.vala"
	g_type_class_add_private (klass, sizeof (TabbyPreferencesPrivate));
#line 363 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_tabby_preferences_get_property;
#line 363 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_tabby_preferences_set_property;
#line 363 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_preferences_finalize;
#line 363 "/home/test/core/extensions/session.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_PREFERENCES_PREFERENCES_PROPERTY, tabby_preferences_properties[TABBY_PREFERENCES_PREFERENCES_PROPERTY] = g_param_spec_object ("preferences", "preferences", "preferences", MIDORI_TYPE_PREFERENCES, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 6173 "session.c"
}


static void
tabby_preferences_midori_preferences_activatable_interface_init (MidoriPreferencesActivatableIface * iface)
{
#line 363 "/home/test/core/extensions/session.vala"
	tabby_preferences_midori_preferences_activatable_parent_iface = g_type_interface_peek_parent (iface);
#line 363 "/home/test/core/extensions/session.vala"
	iface->activate = (void (*) (MidoriPreferencesActivatable*)) tabby_preferences_real_activate;
#line 363 "/home/test/core/extensions/session.vala"
	iface->get_preferences = tabby_preferences_real_get_preferences;
#line 363 "/home/test/core/extensions/session.vala"
	iface->set_preferences = tabby_preferences_real_set_preferences;
#line 6188 "session.c"
}


static void
tabby_preferences_instance_init (TabbyPreferences * self)
{
#line 363 "/home/test/core/extensions/session.vala"
	self->priv = TABBY_PREFERENCES_GET_PRIVATE (self);
#line 6197 "session.c"
}


static void
tabby_preferences_finalize (GObject * obj)
{
	TabbyPreferences * self;
#line 363 "/home/test/core/extensions/session.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_TYPE_PREFERENCES, TabbyPreferences);
#line 364 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (self->priv->_preferences);
#line 363 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (tabby_preferences_parent_class)->finalize (obj);
#line 6211 "session.c"
}


GType
tabby_preferences_get_type (void)
{
	return tabby_preferences_type_id;
}


GType
tabby_preferences_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (TabbyPreferencesClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_preferences_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyPreferences), 0, (GInstanceInitFunc) tabby_preferences_instance_init, NULL };
	static const GInterfaceInfo midori_preferences_activatable_info = { (GInterfaceInitFunc) tabby_preferences_midori_preferences_activatable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	tabby_preferences_type_id = g_type_module_register_type (module, G_TYPE_OBJECT, "TabbyPreferences", &g_define_type_info, 0);
	g_type_module_add_interface (module, tabby_preferences_type_id, MIDORI_TYPE_PREFERENCES_ACTIVATABLE, &midori_preferences_activatable_info);
	return tabby_preferences_type_id;
}


static void
_vala_tabby_preferences_get_property (GObject * object,
                                      guint property_id,
                                      GValue * value,
                                      GParamSpec * pspec)
{
	TabbyPreferences * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_TYPE_PREFERENCES, TabbyPreferences);
#line 363 "/home/test/core/extensions/session.vala"
	switch (property_id) {
#line 363 "/home/test/core/extensions/session.vala"
		case TABBY_PREFERENCES_PREFERENCES_PROPERTY:
#line 363 "/home/test/core/extensions/session.vala"
		g_value_take_object (value, midori_preferences_activatable_get_preferences ((MidoriPreferencesActivatable*) self));
#line 363 "/home/test/core/extensions/session.vala"
		break;
#line 6249 "session.c"
		default:
#line 363 "/home/test/core/extensions/session.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 363 "/home/test/core/extensions/session.vala"
		break;
#line 6255 "session.c"
	}
}


static void
_vala_tabby_preferences_set_property (GObject * object,
                                      guint property_id,
                                      const GValue * value,
                                      GParamSpec * pspec)
{
	TabbyPreferences * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_TYPE_PREFERENCES, TabbyPreferences);
#line 363 "/home/test/core/extensions/session.vala"
	switch (property_id) {
#line 363 "/home/test/core/extensions/session.vala"
		case TABBY_PREFERENCES_PREFERENCES_PROPERTY:
#line 363 "/home/test/core/extensions/session.vala"
		midori_preferences_activatable_set_preferences ((MidoriPreferencesActivatable*) self, g_value_get_object (value));
#line 363 "/home/test/core/extensions/session.vala"
		break;
#line 6276 "session.c"
		default:
#line 363 "/home/test/core/extensions/session.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 363 "/home/test/core/extensions/session.vala"
		break;
#line 6282 "session.c"
	}
}


static void
tabby_clear_session_real_activate (MidoriClearPrivateDataActivatable* base)
{
	TabbyClearSession * self;
	GtkCheckButton* _tmp0_;
	GtkCheckButton* _tmp1_;
	GtkBox* _tmp2_;
	GtkBox* _tmp3_;
	GtkBox* _tmp4_;
	GtkCheckButton* _tmp5_;
#line 389 "/home/test/core/extensions/session.vala"
	self = (TabbyClearSession*) base;
#line 390 "/home/test/core/extensions/session.vala"
	_tmp0_ = (GtkCheckButton*) gtk_check_button_new_with_mnemonic (_ ("Last open _tabs"));
#line 390 "/home/test/core/extensions/session.vala"
	g_object_ref_sink (_tmp0_);
#line 390 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (self->priv->button);
#line 390 "/home/test/core/extensions/session.vala"
	self->priv->button = _tmp0_;
#line 391 "/home/test/core/extensions/session.vala"
	_tmp1_ = self->priv->button;
#line 391 "/home/test/core/extensions/session.vala"
	gtk_widget_show ((GtkWidget*) _tmp1_);
#line 392 "/home/test/core/extensions/session.vala"
	_tmp2_ = midori_clear_private_data_activatable_get_box ((MidoriClearPrivateDataActivatable*) self);
#line 392 "/home/test/core/extensions/session.vala"
	_tmp3_ = _tmp2_;
#line 392 "/home/test/core/extensions/session.vala"
	_tmp4_ = _tmp3_;
#line 392 "/home/test/core/extensions/session.vala"
	_tmp5_ = self->priv->button;
#line 392 "/home/test/core/extensions/session.vala"
	gtk_container_add ((GtkContainer*) _tmp4_, (GtkWidget*) _tmp5_);
#line 392 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_tmp4_);
#line 6323 "session.c"
}


static void
tabby_clear_session_real_clear_data_free (gpointer _data)
{
	TabbyClearSessionClearData* _data_;
	_data_ = _data;
#line 384 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (_data_->self);
#line 384 "/home/test/core/extensions/session.vala"
	g_slice_free (TabbyClearSessionClearData, _data_);
#line 6336 "session.c"
}


static void
tabby_clear_session_real_clear (MidoriClearPrivateDataActivatable* base,
                                GTimeSpan timespan,
                                GAsyncReadyCallback _callback_,
                                gpointer _user_data_)
{
	TabbyClearSession * self;
	TabbyClearSessionClearData* _data_;
	TabbyClearSession* _tmp0_;
#line 384 "/home/test/core/extensions/session.vala"
	self = (TabbyClearSession*) base;
#line 384 "/home/test/core/extensions/session.vala"
	_data_ = g_slice_new0 (TabbyClearSessionClearData);
#line 384 "/home/test/core/extensions/session.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 384 "/home/test/core/extensions/session.vala"
	g_task_set_task_data (_data_->_async_result, _data_, tabby_clear_session_real_clear_data_free);
#line 384 "/home/test/core/extensions/session.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 384 "/home/test/core/extensions/session.vala"
	_data_->self = _tmp0_;
#line 384 "/home/test/core/extensions/session.vala"
	_data_->timespan = timespan;
#line 384 "/home/test/core/extensions/session.vala"
	tabby_clear_session_real_clear_co (_data_);
#line 6365 "session.c"
}


static void
tabby_clear_session_real_clear_finish (MidoriClearPrivateDataActivatable* base,
                                       GAsyncResult* _res_)
{
	TabbyClearSessionClearData* _data_;
#line 384 "/home/test/core/extensions/session.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 6376 "session.c"
}


static void
tabby_clear_session_clear_ready (GObject* source_object,
                                 GAsyncResult* _res_,
                                 gpointer _user_data_)
{
	TabbyClearSessionClearData* _data_;
#line 401 "/home/test/core/extensions/session.vala"
	_data_ = _user_data_;
#line 401 "/home/test/core/extensions/session.vala"
	_data_->_source_object_ = source_object;
#line 401 "/home/test/core/extensions/session.vala"
	_data_->_res_ = _res_;
#line 401 "/home/test/core/extensions/session.vala"
	tabby_clear_session_real_clear_co (_data_);
#line 6394 "session.c"
}


static gboolean
tabby_clear_session_real_clear_co (TabbyClearSessionClearData* _data_)
{
#line 395 "/home/test/core/extensions/session.vala"
	switch (_data_->_state_) {
#line 395 "/home/test/core/extensions/session.vala"
		case 0:
#line 6405 "session.c"
		goto _state_0;
#line 395 "/home/test/core/extensions/session.vala"
		case 1:
#line 6409 "session.c"
		goto _state_1;
		default:
#line 395 "/home/test/core/extensions/session.vala"
		g_assert_not_reached ();
#line 6414 "session.c"
	}
	_state_0:
#line 396 "/home/test/core/extensions/session.vala"
	_data_->_tmp0_ = _data_->self->priv->button;
#line 396 "/home/test/core/extensions/session.vala"
	_data_->_tmp1_ = gtk_toggle_button_get_active ((GtkToggleButton*) _data_->_tmp0_);
#line 396 "/home/test/core/extensions/session.vala"
	_data_->_tmp2_ = _data_->_tmp1_;
#line 396 "/home/test/core/extensions/session.vala"
	if (!_data_->_tmp2_) {
#line 397 "/home/test/core/extensions/session.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 397 "/home/test/core/extensions/session.vala"
		if (_data_->_state_ != 0) {
#line 397 "/home/test/core/extensions/session.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 397 "/home/test/core/extensions/session.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 6433 "session.c"
			}
		}
#line 397 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 397 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 6440 "session.c"
	}
	{
#line 401 "/home/test/core/extensions/session.vala"
		_data_->_tmp4_ = tabby_session_database_get_default (&_data_->_inner_error0_);
#line 401 "/home/test/core/extensions/session.vala"
		_data_->_tmp3_ = _data_->_tmp4_;
#line 401 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 401 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 6451 "session.c"
				goto __catch8_midori_database_error;
			}
#line 401 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 401 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 401 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 401 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 6462 "session.c"
		}
#line 401 "/home/test/core/extensions/session.vala"
		_data_->_state_ = 1;
#line 401 "/home/test/core/extensions/session.vala"
		midori_database_clear ((MidoriDatabase*) _data_->_tmp3_, _data_->timespan, tabby_clear_session_clear_ready, _data_);
#line 401 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 6470 "session.c"
		_state_1:
#line 401 "/home/test/core/extensions/session.vala"
		midori_database_clear_finish ((MidoriDatabase*) _data_->_tmp3_, _data_->_res_, &_data_->_inner_error0_);
#line 401 "/home/test/core/extensions/session.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 401 "/home/test/core/extensions/session.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 401 "/home/test/core/extensions/session.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 6480 "session.c"
				goto __catch8_midori_database_error;
			}
#line 401 "/home/test/core/extensions/session.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 401 "/home/test/core/extensions/session.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 401 "/home/test/core/extensions/session.vala"
			g_object_unref (_data_->_async_result);
#line 401 "/home/test/core/extensions/session.vala"
			return FALSE;
#line 6491 "session.c"
		}
#line 400 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (_data_->_tmp3_);
#line 6495 "session.c"
	}
	goto __finally8;
	__catch8_midori_database_error:
	{
#line 400 "/home/test/core/extensions/session.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 400 "/home/test/core/extensions/session.vala"
		_data_->_inner_error0_ = NULL;
#line 403 "/home/test/core/extensions/session.vala"
		_data_->_tmp5_ = _data_->_error_;
#line 403 "/home/test/core/extensions/session.vala"
		_data_->_tmp6_ = _data_->_tmp5_->message;
#line 403 "/home/test/core/extensions/session.vala"
		g_critical ("session.vala:403: Failed to clear session: %s", _data_->_tmp6_);
#line 400 "/home/test/core/extensions/session.vala"
		_g_error_free0 (_data_->_error_);
#line 6512 "session.c"
	}
	__finally8:
#line 400 "/home/test/core/extensions/session.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 400 "/home/test/core/extensions/session.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 400 "/home/test/core/extensions/session.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 400 "/home/test/core/extensions/session.vala"
		g_object_unref (_data_->_async_result);
#line 400 "/home/test/core/extensions/session.vala"
		return FALSE;
#line 6525 "session.c"
	}
#line 395 "/home/test/core/extensions/session.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 395 "/home/test/core/extensions/session.vala"
	if (_data_->_state_ != 0) {
#line 395 "/home/test/core/extensions/session.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 395 "/home/test/core/extensions/session.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 6535 "session.c"
		}
	}
#line 395 "/home/test/core/extensions/session.vala"
	g_object_unref (_data_->_async_result);
#line 395 "/home/test/core/extensions/session.vala"
	return FALSE;
#line 6542 "session.c"
}


TabbyClearSession*
tabby_clear_session_construct (GType object_type)
{
	TabbyClearSession * self = NULL;
#line 384 "/home/test/core/extensions/session.vala"
	self = (TabbyClearSession*) g_object_new (object_type, NULL);
#line 384 "/home/test/core/extensions/session.vala"
	return self;
#line 6554 "session.c"
}


TabbyClearSession*
tabby_clear_session_new (void)
{
#line 384 "/home/test/core/extensions/session.vala"
	return tabby_clear_session_construct (TABBY_TYPE_CLEAR_SESSION);
#line 6563 "session.c"
}


static GtkBox*
tabby_clear_session_real_get_box (MidoriClearPrivateDataActivatable* base)
{
	GtkBox* result;
	TabbyClearSession* self;
	GtkBox* _tmp0_;
	GtkBox* _tmp1_;
#line 385 "/home/test/core/extensions/session.vala"
	self = (TabbyClearSession*) base;
#line 385 "/home/test/core/extensions/session.vala"
	_tmp0_ = self->priv->_box;
#line 385 "/home/test/core/extensions/session.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 385 "/home/test/core/extensions/session.vala"
	result = _tmp1_;
#line 385 "/home/test/core/extensions/session.vala"
	return result;
#line 6584 "session.c"
}


static void
tabby_clear_session_real_set_box (MidoriClearPrivateDataActivatable* base,
                                  GtkBox* value)
{
	TabbyClearSession* self;
#line 385 "/home/test/core/extensions/session.vala"
	self = (TabbyClearSession*) base;
#line 385 "/home/test/core/extensions/session.vala"
	if (tabby_clear_session_real_get_box (base) != value) {
#line 6597 "session.c"
		GtkBox* _tmp0_;
#line 385 "/home/test/core/extensions/session.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 385 "/home/test/core/extensions/session.vala"
		_g_object_unref0 (self->priv->_box);
#line 385 "/home/test/core/extensions/session.vala"
		self->priv->_box = _tmp0_;
#line 385 "/home/test/core/extensions/session.vala"
		g_object_notify_by_pspec ((GObject *) self, tabby_clear_session_properties[TABBY_CLEAR_SESSION_BOX_PROPERTY]);
#line 6607 "session.c"
	}
}


static void
tabby_clear_session_class_init (TabbyClearSessionClass * klass)
{
#line 384 "/home/test/core/extensions/session.vala"
	tabby_clear_session_parent_class = g_type_class_peek_parent (klass);
#line 384 "/home/test/core/extensions/session.vala"
	g_type_class_add_private (klass, sizeof (TabbyClearSessionPrivate));
#line 384 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_tabby_clear_session_get_property;
#line 384 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_tabby_clear_session_set_property;
#line 384 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (klass)->finalize = tabby_clear_session_finalize;
#line 384 "/home/test/core/extensions/session.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), TABBY_CLEAR_SESSION_BOX_PROPERTY, tabby_clear_session_properties[TABBY_CLEAR_SESSION_BOX_PROPERTY] = g_param_spec_object ("box", "box", "box", gtk_box_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 6627 "session.c"
}


static void
tabby_clear_session_midori_clear_private_data_activatable_interface_init (MidoriClearPrivateDataActivatableIface * iface)
{
#line 384 "/home/test/core/extensions/session.vala"
	tabby_clear_session_midori_clear_private_data_activatable_parent_iface = g_type_interface_peek_parent (iface);
#line 384 "/home/test/core/extensions/session.vala"
	iface->activate = (void (*) (MidoriClearPrivateDataActivatable*)) tabby_clear_session_real_activate;
#line 384 "/home/test/core/extensions/session.vala"
	iface->clear = (void (*) (MidoriClearPrivateDataActivatable*, GTimeSpan, GAsyncReadyCallback, gpointer)) tabby_clear_session_real_clear;
#line 384 "/home/test/core/extensions/session.vala"
	iface->clear_finish = (void (*) (MidoriClearPrivateDataActivatable*, GAsyncResult*)) tabby_clear_session_real_clear_finish;
#line 384 "/home/test/core/extensions/session.vala"
	iface->get_box = tabby_clear_session_real_get_box;
#line 384 "/home/test/core/extensions/session.vala"
	iface->set_box = tabby_clear_session_real_set_box;
#line 6646 "session.c"
}


static void
tabby_clear_session_instance_init (TabbyClearSession * self)
{
#line 384 "/home/test/core/extensions/session.vala"
	self->priv = TABBY_CLEAR_SESSION_GET_PRIVATE (self);
#line 6655 "session.c"
}


static void
tabby_clear_session_finalize (GObject * obj)
{
	TabbyClearSession * self;
#line 384 "/home/test/core/extensions/session.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TABBY_TYPE_CLEAR_SESSION, TabbyClearSession);
#line 385 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (self->priv->_box);
#line 387 "/home/test/core/extensions/session.vala"
	_g_object_unref0 (self->priv->button);
#line 384 "/home/test/core/extensions/session.vala"
	G_OBJECT_CLASS (tabby_clear_session_parent_class)->finalize (obj);
#line 6671 "session.c"
}


GType
tabby_clear_session_get_type (void)
{
	return tabby_clear_session_type_id;
}


GType
tabby_clear_session_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (TabbyClearSessionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) tabby_clear_session_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (TabbyClearSession), 0, (GInstanceInitFunc) tabby_clear_session_instance_init, NULL };
	static const GInterfaceInfo midori_clear_private_data_activatable_info = { (GInterfaceInitFunc) tabby_clear_session_midori_clear_private_data_activatable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	tabby_clear_session_type_id = g_type_module_register_type (module, peas_extension_base_get_type (), "TabbyClearSession", &g_define_type_info, 0);
	g_type_module_add_interface (module, tabby_clear_session_type_id, MIDORI_TYPE_CLEAR_PRIVATE_DATA_ACTIVATABLE, &midori_clear_private_data_activatable_info);
	return tabby_clear_session_type_id;
}


static void
_vala_tabby_clear_session_get_property (GObject * object,
                                        guint property_id,
                                        GValue * value,
                                        GParamSpec * pspec)
{
	TabbyClearSession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_TYPE_CLEAR_SESSION, TabbyClearSession);
#line 384 "/home/test/core/extensions/session.vala"
	switch (property_id) {
#line 384 "/home/test/core/extensions/session.vala"
		case TABBY_CLEAR_SESSION_BOX_PROPERTY:
#line 384 "/home/test/core/extensions/session.vala"
		g_value_take_object (value, midori_clear_private_data_activatable_get_box ((MidoriClearPrivateDataActivatable*) self));
#line 384 "/home/test/core/extensions/session.vala"
		break;
#line 6709 "session.c"
		default:
#line 384 "/home/test/core/extensions/session.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 384 "/home/test/core/extensions/session.vala"
		break;
#line 6715 "session.c"
	}
}


static void
_vala_tabby_clear_session_set_property (GObject * object,
                                        guint property_id,
                                        const GValue * value,
                                        GParamSpec * pspec)
{
	TabbyClearSession * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TABBY_TYPE_CLEAR_SESSION, TabbyClearSession);
#line 384 "/home/test/core/extensions/session.vala"
	switch (property_id) {
#line 384 "/home/test/core/extensions/session.vala"
		case TABBY_CLEAR_SESSION_BOX_PROPERTY:
#line 384 "/home/test/core/extensions/session.vala"
		midori_clear_private_data_activatable_set_box ((MidoriClearPrivateDataActivatable*) self, g_value_get_object (value));
#line 384 "/home/test/core/extensions/session.vala"
		break;
#line 6736 "session.c"
		default:
#line 384 "/home/test/core/extensions/session.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 384 "/home/test/core/extensions/session.vala"
		break;
#line 6742 "session.c"
	}
}


void
peas_register_types (GTypeModule* module)
{
#line 410 "/home/test/core/extensions/session.vala"
	g_return_if_fail (module != NULL);
#line 410 "/home/test/core/extensions/session.vala"
	tabby_session_database_register_type (module);
#line 410 "/home/test/core/extensions/session.vala"
	tabby_session_register_type (module);
#line 410 "/home/test/core/extensions/session.vala"
	tabby_preferences_register_type (module);
#line 410 "/home/test/core/extensions/session.vala"
	tabby_clear_session_register_type (module);
#line 411 "/home/test/core/extensions/session.vala"
	peas_object_module_register_extension_type (G_TYPE_CHECK_INSTANCE_CAST (module, peas_object_module_get_type (), PeasObjectModule), MIDORI_TYPE_BROWSER_ACTIVATABLE, TABBY_TYPE_SESSION);
#line 413 "/home/test/core/extensions/session.vala"
	peas_object_module_register_extension_type (G_TYPE_CHECK_INSTANCE_CAST (module, peas_object_module_get_type (), PeasObjectModule), MIDORI_TYPE_PREFERENCES_ACTIVATABLE, TABBY_TYPE_PREFERENCES);
#line 415 "/home/test/core/extensions/session.vala"
	peas_object_module_register_extension_type (G_TYPE_CHECK_INSTANCE_CAST (module, peas_object_module_get_type (), PeasObjectModule), MIDORI_TYPE_CLEAR_PRIVATE_DATA_ACTIVATABLE, TABBY_TYPE_CLEAR_SESSION);
#line 6766 "session.c"
}



