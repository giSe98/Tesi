/* web-extensions.c generated by valac 0.40.23, the Vala compiler
 * generated from web-extensions.vala, do not modify */

/*
 Copyright (C) 2019 Christian Dywan <christian@twotoats.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <json-glib/json-glib.h>
#include "webkit2/webkit2.h"
#include "midori-core.h"
#include "archive.h"
#include "archive_entry.h"
#include "JavaScriptCore/JavaScript.h"
#include <float.h>
#include <math.h>
#include <gtk/gtk.h>
#include <gdk/gdk.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include "config.h"
#include <libpeas/peas.h>


#define WEB_EXTENSION_TYPE_EXTENSION (web_extension_extension_get_type ())
#define WEB_EXTENSION_EXTENSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtension))
#define WEB_EXTENSION_EXTENSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtensionClass))
#define WEB_EXTENSION_IS_EXTENSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WEB_EXTENSION_TYPE_EXTENSION))
#define WEB_EXTENSION_IS_EXTENSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WEB_EXTENSION_TYPE_EXTENSION))
#define WEB_EXTENSION_EXTENSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtensionClass))

typedef struct _WebExtensionExtension WebExtensionExtension;
typedef struct _WebExtensionExtensionClass WebExtensionExtensionClass;
typedef struct _WebExtensionExtensionPrivate WebExtensionExtensionPrivate;

#define WEB_EXTENSION_TYPE_ACTION (web_extension_action_get_type ())
#define WEB_EXTENSION_ACTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WEB_EXTENSION_TYPE_ACTION, WebExtensionAction))
#define WEB_EXTENSION_ACTION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WEB_EXTENSION_TYPE_ACTION, WebExtensionActionClass))
#define WEB_EXTENSION_IS_ACTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WEB_EXTENSION_TYPE_ACTION))
#define WEB_EXTENSION_IS_ACTION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WEB_EXTENSION_TYPE_ACTION))
#define WEB_EXTENSION_ACTION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WEB_EXTENSION_TYPE_ACTION, WebExtensionActionClass))

typedef struct _WebExtensionAction WebExtensionAction;
typedef struct _WebExtensionActionClass WebExtensionActionClass;
enum  {
	WEB_EXTENSION_EXTENSION_0_PROPERTY,
	WEB_EXTENSION_EXTENSION_FILE_PROPERTY,
	WEB_EXTENSION_EXTENSION_NAME_PROPERTY,
	WEB_EXTENSION_EXTENSION_DESCRIPTION_PROPERTY,
	WEB_EXTENSION_EXTENSION_BACKGROUND_PAGE_PROPERTY,
	WEB_EXTENSION_EXTENSION_BACKGROUND_SCRIPTS_PROPERTY,
	WEB_EXTENSION_EXTENSION_CONTENT_SCRIPTS_PROPERTY,
	WEB_EXTENSION_EXTENSION_CONTENT_STYLES_PROPERTY,
	WEB_EXTENSION_EXTENSION_BROWSER_ACTION_PROPERTY,
	WEB_EXTENSION_EXTENSION_SIDEBAR_PROPERTY,
	WEB_EXTENSION_EXTENSION_NUM_PROPERTIES
};
static GParamSpec* web_extension_extension_properties[WEB_EXTENSION_EXTENSION_NUM_PROPERTIES];
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_bytes_unref0(var) ((var == NULL) ? NULL : (var = (g_bytes_unref (var), NULL)))
typedef struct _WebExtensionExtensionGetResourceData WebExtensionExtensionGetResourceData;
typedef struct _WebExtensionActionPrivate WebExtensionActionPrivate;
enum  {
	WEB_EXTENSION_ACTION_0_PROPERTY,
	WEB_EXTENSION_ACTION_ICON_PROPERTY,
	WEB_EXTENSION_ACTION_TITLE_PROPERTY,
	WEB_EXTENSION_ACTION_POPUP_PROPERTY,
	WEB_EXTENSION_ACTION_NUM_PROPERTIES
};
static GParamSpec* web_extension_action_properties[WEB_EXTENSION_ACTION_NUM_PROPERTIES];

#define WEB_EXTENSION_TYPE_EXTENSION_MANAGER (web_extension_extension_manager_get_type ())
#define WEB_EXTENSION_EXTENSION_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WEB_EXTENSION_TYPE_EXTENSION_MANAGER, WebExtensionExtensionManager))
#define WEB_EXTENSION_EXTENSION_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WEB_EXTENSION_TYPE_EXTENSION_MANAGER, WebExtensionExtensionManagerClass))
#define WEB_EXTENSION_IS_EXTENSION_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WEB_EXTENSION_TYPE_EXTENSION_MANAGER))
#define WEB_EXTENSION_IS_EXTENSION_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WEB_EXTENSION_TYPE_EXTENSION_MANAGER))
#define WEB_EXTENSION_EXTENSION_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WEB_EXTENSION_TYPE_EXTENSION_MANAGER, WebExtensionExtensionManagerClass))

typedef struct _WebExtensionExtensionManager WebExtensionExtensionManager;
typedef struct _WebExtensionExtensionManagerClass WebExtensionExtensionManagerClass;
typedef struct _WebExtensionExtensionManagerPrivate WebExtensionExtensionManagerPrivate;
enum  {
	WEB_EXTENSION_EXTENSION_MANAGER_0_PROPERTY,
	WEB_EXTENSION_EXTENSION_MANAGER_NUM_PROPERTIES
};
static GParamSpec* web_extension_extension_manager_properties[WEB_EXTENSION_EXTENSION_MANAGER_NUM_PROPERTIES];
typedef void (*WebExtensionExtensionManagerExtensionManagerForeachFunc) (WebExtensionExtension* extension, gpointer user_data);
typedef struct _Block1Data Block1Data;
#define __vala_JsonNode_free0(var) ((var == NULL) ? NULL : (var = (_vala_JsonNode_free (var), NULL)))
#define _archive_read_free0(var) ((var == NULL) ? NULL : (var = (archive_read_free (var), NULL)))
#define _json_object_unref0(var) ((var == NULL) ? NULL : (var = (json_object_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _webkit_user_script_unref0(var) ((var == NULL) ? NULL : (var = (webkit_user_script_unref (var), NULL)))
#define _webkit_user_style_sheet_unref0(var) ((var == NULL) ? NULL : (var = (webkit_user_style_sheet_unref (var), NULL)))
typedef struct _WebExtensionExtensionManagerLoadFromFolderData WebExtensionExtensionManagerLoadFromFolderData;
#define _0(var) ((var == NULL) ? NULL : (var = ( (var), NULL)))
#define _JSStringRelease0(var) ((var == NULL) ? NULL : (var = (JSStringRelease (var), NULL)))
typedef struct _Block2Data Block2Data;
enum  {
	WEB_EXTENSION_EXTENSION_MANAGER_EXTENSION_ADDED_SIGNAL,
	WEB_EXTENSION_EXTENSION_MANAGER_NUM_SIGNALS
};
static guint web_extension_extension_manager_signals[WEB_EXTENSION_EXTENSION_MANAGER_NUM_SIGNALS] = {0};

#define WEB_EXTENSION_TYPE_WEB_VIEW (web_extension_web_view_get_type ())
#define WEB_EXTENSION_WEB_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WEB_EXTENSION_TYPE_WEB_VIEW, WebExtensionWebView))
#define WEB_EXTENSION_WEB_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WEB_EXTENSION_TYPE_WEB_VIEW, WebExtensionWebViewClass))
#define WEB_EXTENSION_IS_WEB_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WEB_EXTENSION_TYPE_WEB_VIEW))
#define WEB_EXTENSION_IS_WEB_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WEB_EXTENSION_TYPE_WEB_VIEW))
#define WEB_EXTENSION_WEB_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WEB_EXTENSION_TYPE_WEB_VIEW, WebExtensionWebViewClass))

typedef struct _WebExtensionWebView WebExtensionWebView;
typedef struct _WebExtensionWebViewClass WebExtensionWebViewClass;
typedef struct _WebExtensionWebViewPrivate WebExtensionWebViewPrivate;
enum  {
	WEB_EXTENSION_WEB_VIEW_0_PROPERTY,
	WEB_EXTENSION_WEB_VIEW_NUM_PROPERTIES
};
static GParamSpec* web_extension_web_view_properties[WEB_EXTENSION_WEB_VIEW_NUM_PROPERTIES];

#define WEB_EXTENSION_TYPE_BUTTON (web_extension_button_get_type ())
#define WEB_EXTENSION_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WEB_EXTENSION_TYPE_BUTTON, WebExtensionButton))
#define WEB_EXTENSION_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WEB_EXTENSION_TYPE_BUTTON, WebExtensionButtonClass))
#define WEB_EXTENSION_IS_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WEB_EXTENSION_TYPE_BUTTON))
#define WEB_EXTENSION_IS_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WEB_EXTENSION_TYPE_BUTTON))
#define WEB_EXTENSION_BUTTON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WEB_EXTENSION_TYPE_BUTTON, WebExtensionButtonClass))

typedef struct _WebExtensionButton WebExtensionButton;
typedef struct _WebExtensionButtonClass WebExtensionButtonClass;
typedef struct _WebExtensionButtonPrivate WebExtensionButtonPrivate;
enum  {
	WEB_EXTENSION_BUTTON_0_PROPERTY,
	WEB_EXTENSION_BUTTON_NUM_PROPERTIES
};
static GParamSpec* web_extension_button_properties[WEB_EXTENSION_BUTTON_NUM_PROPERTIES];
typedef struct _WebExtensionButtonLoadIconData WebExtensionButtonLoadIconData;

#define WEB_EXTENSION_TYPE_BROWSER (web_extension_browser_get_type ())
#define WEB_EXTENSION_BROWSER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowser))
#define WEB_EXTENSION_BROWSER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowserClass))
#define WEB_EXTENSION_IS_BROWSER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), WEB_EXTENSION_TYPE_BROWSER))
#define WEB_EXTENSION_IS_BROWSER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), WEB_EXTENSION_TYPE_BROWSER))
#define WEB_EXTENSION_BROWSER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowserClass))

typedef struct _WebExtensionBrowser WebExtensionBrowser;
typedef struct _WebExtensionBrowserClass WebExtensionBrowserClass;
typedef struct _WebExtensionBrowserPrivate WebExtensionBrowserPrivate;
enum  {
	WEB_EXTENSION_BROWSER_0_PROPERTY,
	WEB_EXTENSION_BROWSER_BROWSER_PROPERTY,
	WEB_EXTENSION_BROWSER_NUM_PROPERTIES
};
static GParamSpec* web_extension_browser_properties[WEB_EXTENSION_BROWSER_NUM_PROPERTIES];
typedef struct _WebExtensionBrowserExtensionSchemeData WebExtensionBrowserExtensionSchemeData;
typedef struct _WebExtensionBrowserInstallExtensionData WebExtensionBrowserInstallExtensionData;

struct _WebExtensionExtension {
	GObject parent_instance;
	WebExtensionExtensionPrivate * priv;
};

struct _WebExtensionExtensionClass {
	GObjectClass parent_class;
};

struct _WebExtensionExtensionPrivate {
	GHashTable* _files;
	GFile* _file;
	gchar* _name;
	gchar* _description;
	gchar* _background_page;
	GList* _background_scripts;
	GList* _content_scripts;
	GList* _content_styles;
	WebExtensionAction* _browser_action;
	WebExtensionAction* _sidebar;
};

struct _WebExtensionExtensionGetResourceData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	WebExtensionExtension* self;
	gchar* resource;
	GBytes* result;
	gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _resource;
	gchar* _tmp3_;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
	const gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gboolean _tmp11_;
	GHashTable* _tmp12_;
	GHashTable* _tmp13_;
	const gchar* _tmp14_;
	GHashTable* _tmp15_;
	const gchar* _tmp16_;
	gconstpointer _tmp17_;
	GBytes* _tmp18_;
	GFile* child;
	GFile* _tmp19_;
	const gchar* _tmp20_;
	GFile* _tmp21_;
	GFile* _tmp22_;
	guint8* data;
	gint data_length1;
	gint _data_size_;
	gboolean _tmp23_;
	GFile* _tmp24_;
	guint8* _tmp25_;
	gsize _tmp26_;
	gboolean _tmp27_;
	guint8* _tmp28_;
	gint _tmp28__length1;
	GBytes* _tmp29_;
	const gchar* _tmp30_;
	gchar* _tmp31_;
	gchar* _tmp32_;
	GError* _tmp33_;
	GError* _tmp34_;
	GError* _inner_error0_;
};

struct _WebExtensionAction {
	GObject parent_instance;
	WebExtensionActionPrivate * priv;
};

struct _WebExtensionActionClass {
	GObjectClass parent_class;
};

struct _WebExtensionActionPrivate {
	gchar* _icon;
	gchar* _title;
	gchar* _popup;
};

struct _WebExtensionExtensionManager {
	GObject parent_instance;
	WebExtensionExtensionManagerPrivate * priv;
	GHashTable* extensions;
};

struct _WebExtensionExtensionManagerClass {
	GObjectClass parent_class;
};

struct _Block1Data {
	int _ref_count_;
	WebExtensionExtensionManager* self;
	WebExtensionExtensionManagerExtensionManagerForeachFunc func;
	gpointer func_target;
};

struct _WebExtensionExtensionManagerLoadFromFolderData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	WebExtensionExtensionManager* self;
	WebKitUserContentManager* content;
	GFile* folder;
	gchar* _tmp0_;
	gchar* _tmp1_;
	GFileEnumerator* enumerator;
	GFileEnumerator* _tmp2_;
	GFileInfo* info;
	GFileInfo* _tmp3_;
	GFileEnumerator* _tmp4_;
	GFileInfo* _tmp5_;
	GFileInfo* _tmp6_;
	GFileInfo* _tmp7_;
	GFile* file;
	GFileInfo* _tmp8_;
	const gchar* _tmp9_;
	GFile* _tmp10_;
	gchar* id;
	GFile* _tmp11_;
	gchar* _tmp12_;
	MidoriCoreSettings* _tmp13_;
	MidoriCoreSettings* _tmp14_;
	const gchar* _tmp15_;
	gboolean _tmp16_;
	WebExtensionExtension* extension;
	GHashTable* _tmp17_;
	const gchar* _tmp18_;
	gconstpointer _tmp19_;
	WebExtensionExtension* _tmp20_;
	WebExtensionExtension* _tmp21_;
	GInputStream* stream;
	GFile* _tmp22_;
	WebExtensionExtension* _tmp23_;
	GFile* _tmp24_;
	gchar* _tmp25_;
	gchar* _tmp26_;
	gboolean _tmp27_;
	struct archive* archive;
	struct archive* _tmp28_;
	struct archive* _tmp29_;
	struct archive* _tmp30_;
	GFile* _tmp31_;
	gchar* _tmp32_;
	gchar* _tmp33_;
	gboolean _tmp34_;
	struct archive_entry* entry;
	struct archive* _tmp35_;
	struct archive_entry* _tmp36_;
	int _tmp37_;
	struct archive_entry* _tmp38_;
	const gchar* _tmp39_;
	guint8* buffer;
	gint buffer_length1;
	gint _buffer_size_;
	gint64 offset;
	struct archive* _tmp40_;
	guint8* _tmp41_;
	size_t _tmp42_;
	gint64 _tmp43_;
	guint8* _tmp44_;
	gint _tmp44__length1;
	guint8* _tmp45_;
	gint _tmp45__length1;
	guint8* _tmp46_;
	gint _tmp46__length1;
	GMemoryInputStream* _tmp47_;
	guint8* _vala1_buffer;
	gint _vala1_buffer_length1;
	gint __vala1_buffer_size_;
	gint64 _vala1_offset;
	struct archive* _tmp48_;
	guint8* _tmp49_;
	size_t _tmp50_;
	gint64 _tmp51_;
	guint8* _tmp52_;
	gint _tmp52__length1;
	guint8* _tmp53_;
	gint _tmp53__length1;
	WebExtensionExtension* _tmp54_;
	struct archive_entry* _tmp55_;
	const gchar* _tmp56_;
	guint8* _tmp57_;
	gint _tmp57__length1;
	GBytes* _tmp58_;
	GBytes* _tmp59_;
	GInputStream* _tmp60_;
	GFile* _tmp61_;
	gchar* _tmp62_;
	gchar* _tmp63_;
	gchar* _tmp64_;
	gchar* _tmp65_;
	GError* _tmp66_;
	GError* _tmp67_;
	GFile* _tmp68_;
	gchar* _tmp69_;
	gchar* _tmp70_;
	struct archive* _tmp71_;
	const gchar* _tmp72_;
	gchar* _tmp73_;
	gchar* _tmp74_;
	GError* _tmp75_;
	GError* _tmp76_;
	GFile* manifest_file;
	GFile* _tmp77_;
	GFile* _tmp78_;
	GFile* _tmp79_;
	GFileInputStream* _tmp80_;
	GFile* _tmp81_;
	GFileInputStream* _tmp82_;
	GDataInputStream* _tmp83_;
	JsonParser* json;
	JsonParser* _tmp84_;
	JsonParser* _tmp85_;
	GInputStream* _tmp86_;
	const gchar* _tmp87_;
	GFile* _tmp88_;
	gchar* _tmp89_;
	gchar* _tmp90_;
	JsonObject* manifest;
	JsonParser* _tmp91_;
	JsonNode* _tmp92_;
	JsonObject* _tmp93_;
	JsonObject* _tmp94_;
	JsonObject* _tmp95_;
	WebExtensionExtension* _tmp96_;
	JsonObject* _tmp97_;
	const gchar* _tmp98_;
	JsonObject* _tmp99_;
	JsonObject* background;
	JsonObject* _tmp100_;
	JsonObject* _tmp101_;
	JsonObject* _tmp102_;
	JsonObject* _tmp103_;
	JsonObject* _tmp104_;
	WebExtensionExtension* _tmp105_;
	JsonObject* _tmp106_;
	const gchar* _tmp107_;
	gchar* _tmp108_;
	JsonObject* _tmp109_;
	JsonObject* _tmp110_;
	JsonArray* _tmp111_;
	GList* _tmp112_;
	GList* element_collection;
	GList* element_it;
	JsonNode* element;
	WebExtensionExtension* _tmp113_;
	GList* _tmp114_;
	GList* _tmp115_;
	JsonNode* _tmp116_;
	const gchar* _tmp117_;
	gchar* _tmp118_;
	JsonObject* _tmp119_;
	JsonObject* action;
	JsonObject* _tmp120_;
	JsonObject* _tmp121_;
	JsonObject* _tmp122_;
	JsonObject* _tmp123_;
	const gchar* _tmp124_;
	JsonObject* _tmp125_;
	JsonObject* _tmp126_;
	const gchar* _tmp127_;
	const gchar* _tmp128_;
	JsonObject* _tmp129_;
	JsonObject* _tmp130_;
	const gchar* _tmp131_;
	WebExtensionExtension* _tmp132_;
	JsonObject* _tmp133_;
	gchar* _tmp134_;
	gchar* _tmp135_;
	WebExtensionAction* _tmp136_;
	WebExtensionAction* _tmp137_;
	JsonObject* _tmp138_;
	JsonObject* _tmp139_;
	JsonObject* _tmp140_;
	JsonObject* _tmp141_;
	JsonObject* _tmp142_;
	JsonObject* sidebar;
	JsonObject* _tmp143_;
	JsonObject* _tmp144_;
	const gchar* _tmp145_;
	JsonObject* _tmp146_;
	JsonObject* _tmp147_;
	const gchar* _tmp148_;
	const gchar* _tmp149_;
	JsonObject* _tmp150_;
	JsonObject* _tmp151_;
	const gchar* _tmp152_;
	WebExtensionExtension* _tmp153_;
	JsonObject* _tmp154_;
	gchar* _tmp155_;
	gchar* _tmp156_;
	WebExtensionAction* _tmp157_;
	WebExtensionAction* _tmp158_;
	JsonObject* _tmp159_;
	JsonObject* _tmp160_;
	JsonArray* _tmp161_;
	GList* _tmp162_;
	GList* _vala1_element_collection;
	GList* _vala1_element_it;
	JsonNode* _vala1_element;
	JsonObject* content_script;
	JsonNode* _tmp163_;
	JsonObject* _tmp164_;
	JsonObject* _tmp165_;
	JsonObject* _tmp166_;
	JsonObject* _tmp167_;
	JsonArray* _tmp168_;
	GList* _tmp169_;
	GList* js_collection;
	GList* js_it;
	JsonNode* js;
	WebExtensionExtension* _tmp170_;
	GList* _tmp171_;
	GList* _tmp172_;
	JsonNode* _tmp173_;
	const gchar* _tmp174_;
	gchar* _tmp175_;
	JsonObject* _tmp176_;
	JsonObject* _tmp177_;
	JsonArray* _tmp178_;
	GList* _tmp179_;
	GList* css_collection;
	GList* css_it;
	JsonNode* css;
	WebExtensionExtension* _tmp180_;
	GList* _tmp181_;
	GList* _tmp182_;
	JsonNode* _tmp183_;
	const gchar* _tmp184_;
	gchar* _tmp185_;
	GHashTable* _tmp186_;
	const gchar* _tmp187_;
	gchar* _tmp188_;
	WebExtensionExtension* _tmp189_;
	WebExtensionExtension* _tmp190_;
	WebExtensionExtension* _tmp191_;
	GError* _error_;
	WebExtensionExtension* _tmp192_;
	const gchar* _tmp193_;
	const gchar* _tmp194_;
	GError* _tmp195_;
	const gchar* _tmp196_;
	WebExtensionExtension* _tmp197_;
	GList* _tmp198_;
	GList* _tmp199_;
	GList* filename_collection;
	GList* filename_it;
	gchar* _tmp200_;
	gchar* filename;
	GBytes* script;
	WebExtensionExtension* _tmp201_;
	const gchar* _tmp202_;
	GBytes* _tmp203_;
	GBytes* _tmp204_;
	gsize _tmp205_;
	guint8* _tmp206_;
	WebKitUserScript* _tmp207_;
	WebKitUserScript* _tmp208_;
	GError* _vala1__error_;
	WebExtensionExtension* _tmp209_;
	const gchar* _tmp210_;
	const gchar* _tmp211_;
	const gchar* _tmp212_;
	WebExtensionExtension* _tmp213_;
	GList* _tmp214_;
	GList* _tmp215_;
	GList* _vala1_filename_collection;
	GList* _vala1_filename_it;
	gchar* _tmp216_;
	gchar* _vala1_filename;
	GBytes* stylesheet;
	WebExtensionExtension* _tmp217_;
	const gchar* _tmp218_;
	GBytes* _tmp219_;
	GBytes* _tmp220_;
	gsize _tmp221_;
	guint8* _tmp222_;
	WebKitUserStyleSheet* _tmp223_;
	WebKitUserStyleSheet* _tmp224_;
	GError* _vala2__error_;
	WebExtensionExtension* _tmp225_;
	const gchar* _tmp226_;
	const gchar* _tmp227_;
	const gchar* _tmp228_;
	GError* _inner_error0_;
};

struct _Block2Data {
	int _ref_count_;
	WebExtensionExtensionManager* self;
	WebKitWebView* web_view;
};

struct _WebExtensionWebView {
	WebKitWebView parent_instance;
	WebExtensionWebViewPrivate * priv;
};

struct _WebExtensionWebViewClass {
	WebKitWebViewClass parent_class;
};

struct _WebExtensionButton {
	GtkMenuButton parent_instance;
	WebExtensionButtonPrivate * priv;
};

struct _WebExtensionButtonClass {
	GtkMenuButtonClass parent_class;
};

struct _WebExtensionButtonLoadIconData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	WebExtensionButton* self;
	WebExtensionExtension* extension;
	GtkImage* icon;
	gint icon_width;
	gint icon_height;
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	gint _tmp6_;
	gint _tmp7_;
	GBytes* image;
	WebExtensionAction* _tmp8_;
	WebExtensionAction* _tmp9_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	GBytes* _tmp12_;
	GMemoryInputStream* stream;
	GBytes* _tmp13_;
	gsize _tmp14_;
	guint8* _tmp15_;
	guint8* _tmp16_;
	gint _tmp16__length1;
	GMemoryInputStream* _tmp17_;
	GdkPixbuf* _tmp18_;
	GMemoryInputStream* _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	GdkPixbuf* _tmp22_;
	GError* _error_;
	const gchar* _tmp23_;
	const gchar* _tmp24_;
	GError* _tmp25_;
	const gchar* _tmp26_;
	GError* _inner_error0_;
};

struct _WebExtensionBrowser {
	GObject parent_instance;
	WebExtensionBrowserPrivate * priv;
};

struct _WebExtensionBrowserClass {
	GObjectClass parent_class;
};

struct _WebExtensionBrowserPrivate {
	MidoriBrowser* _browser;
};

struct _WebExtensionBrowserExtensionSchemeData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	WebExtensionBrowser* self;
	WebKitURISchemeRequest* request;
	gchar** path;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar** _tmp3_;
	gchar** _tmp4_;
	gchar** _tmp5_;
	gint _tmp5__length1;
	gint path_length1;
	gint _path_size_;
	gchar* id;
	gchar** _tmp6_;
	gint _tmp6__length1;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* resource;
	gchar** _tmp9_;
	gint _tmp9__length1;
	const gchar* _tmp10_;
	gchar* _tmp11_;
	WebExtensionExtensionManager* manager;
	WebExtensionExtensionManager* _tmp12_;
	WebExtensionExtension* extension;
	WebExtensionExtensionManager* _tmp13_;
	GHashTable* _tmp14_;
	const gchar* _tmp15_;
	gconstpointer _tmp16_;
	WebExtensionExtension* _tmp17_;
	WebExtensionExtension* _tmp18_;
	GBytes* data;
	WebExtensionExtension* _tmp19_;
	const gchar* _tmp20_;
	GBytes* _tmp21_;
	GMemoryInputStream* stream;
	GBytes* _tmp22_;
	gsize _tmp23_;
	guint8* _tmp24_;
	guint8* _tmp25_;
	gint _tmp25__length1;
	GMemoryInputStream* _tmp26_;
	GMemoryInputStream* _tmp27_;
	GBytes* _tmp28_;
	gint _tmp29_;
	gint _tmp30_;
	GError* _error_;
	GError* _tmp31_;
	const gchar* _tmp32_;
	GError* _tmp33_;
	const gchar* _tmp34_;
	GError* _inner_error0_;
};

struct _WebExtensionBrowserInstallExtensionData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	WebExtensionBrowser* self;
	WebExtensionExtension* extension;
	WebExtensionAction* _tmp0_;
	WebExtensionAction* _tmp1_;
	MidoriBrowser* _tmp2_;
	MidoriBrowser* _tmp3_;
	MidoriBrowser* _tmp4_;
	WebExtensionButton* _tmp5_;
	WebExtensionButton* _tmp6_;
	WebExtensionAction* _tmp7_;
	WebExtensionAction* _tmp8_;
	GtkScrolledWindow* scrolled;
	GtkScrolledWindow* _tmp9_;
	WebExtensionWebView* web_view;
	WebExtensionAction* _tmp10_;
	WebExtensionAction* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	WebExtensionWebView* _tmp14_;
	GtkScrolledWindow* _tmp15_;
	GtkScrolledWindow* _tmp16_;
	WebExtensionWebView* _tmp17_;
	MidoriBrowser* _tmp18_;
	MidoriBrowser* _tmp19_;
	MidoriBrowser* _tmp20_;
	GtkScrolledWindow* _tmp21_;
	GtkScrolledWindow* _tmp22_;
	GtkContainer* _tmp23_;
	GtkContainer* _tmp24_;
	GtkScrolledWindow* _tmp25_;
	WebExtensionAction* _tmp26_;
	WebExtensionAction* _tmp27_;
	const gchar* _tmp28_;
	const gchar* _tmp29_;
	guint src;
	guint _tmp30_;
	WebExtensionWebView* background;
	const gchar* _tmp31_;
	const gchar* _tmp32_;
	WebExtensionWebView* _tmp33_;
	MidoriBrowser* _tmp34_;
	MidoriBrowser* _tmp35_;
	MidoriBrowser* _tmp36_;
	GtkWidget* _tmp37_;
	WebExtensionWebView* _tmp38_;
	GList* _tmp39_;
	GList* _tmp40_;
	GList* filename_collection;
	GList* filename_it;
	gchar* _tmp41_;
	gchar* filename;
	GBytes* script;
	const gchar* _tmp42_;
	GBytes* _tmp43_;
	GBytes* _tmp44_;
	const gchar* _tmp45_;
	const gchar* _tmp46_;
	const gchar* _tmp47_;
	WebExtensionWebView* _tmp48_;
	WebKitUserContentManager* _tmp49_;
	GBytes* _tmp50_;
	gsize _tmp51_;
	guint8* _tmp52_;
	WebKitUserScript* _tmp53_;
	WebKitUserScript* _tmp54_;
	GError* _inner_error0_;
};


static gpointer web_extension_extension_parent_class = NULL;
static GType web_extension_extension_type_id = 0;
static gpointer web_extension_action_parent_class = NULL;
static GType web_extension_action_type_id = 0;
static gpointer web_extension_extension_manager_parent_class = NULL;
static WebExtensionExtensionManager* web_extension_extension_manager__default;
static WebExtensionExtensionManager* web_extension_extension_manager__default = NULL;
static GType web_extension_extension_manager_type_id = 0;
static gpointer web_extension_web_view_parent_class = NULL;
static GType web_extension_web_view_type_id = 0;
static gpointer web_extension_button_parent_class = NULL;
static GType web_extension_button_type_id = 0;
static gpointer web_extension_browser_parent_class = NULL;
static MidoriBrowserActivatableIface * web_extension_browser_midori_browser_activatable_parent_iface = NULL;
static GType web_extension_browser_type_id = 0;

GType web_extension_extension_register_type (GTypeModule * module);
GType web_extension_extension_get_type (void) G_GNUC_CONST;
GType web_extension_action_register_type (GTypeModule * module);
GType web_extension_action_get_type (void) G_GNUC_CONST;
#define WEB_EXTENSION_EXTENSION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtensionPrivate))
static void _g_free0_ (gpointer var);
static inline void _g_list_free__g_free0_ (GList* self);
WebExtensionExtension* web_extension_extension_new (GFile* file);
WebExtensionExtension* web_extension_extension_construct (GType object_type,
                                                          GFile* file);
void web_extension_extension_add_resource (WebExtensionExtension* self,
                                           const gchar* resource,
                                           GBytes* data);
static void _g_bytes_unref0_ (gpointer var);
static void web_extension_extension_get_resource_data_free (gpointer _data);
void web_extension_extension_get_resource (WebExtensionExtension* self,
                                           const gchar* resource,
                                           GAsyncReadyCallback _callback_,
                                           gpointer _user_data_);
GBytes* web_extension_extension_get_resource_finish (WebExtensionExtension* self,
                                                     GAsyncResult* _res_,
                                                     GError** error);
static gboolean web_extension_extension_get_resource_co (WebExtensionExtensionGetResourceData* _data_);
GFile* web_extension_extension_get_file (WebExtensionExtension* self);
static void web_extension_extension_get_resource_ready (GObject* source_object,
                                                 GAsyncResult* _res_,
                                                 gpointer _user_data_);
const gchar* web_extension_extension_get_name (WebExtensionExtension* self);
void web_extension_extension_set_file (WebExtensionExtension* self,
                                       GFile* value);
void web_extension_extension_set_name (WebExtensionExtension* self,
                                       const gchar* value);
const gchar* web_extension_extension_get_description (WebExtensionExtension* self);
void web_extension_extension_set_description (WebExtensionExtension* self,
                                              const gchar* value);
const gchar* web_extension_extension_get_background_page (WebExtensionExtension* self);
void web_extension_extension_set_background_page (WebExtensionExtension* self,
                                                  gchar* value);
GList* web_extension_extension_get_background_scripts (WebExtensionExtension* self);
void web_extension_extension_set_background_scripts (WebExtensionExtension* self,
                                                     GList* value);
GList* web_extension_extension_get_content_scripts (WebExtensionExtension* self);
void web_extension_extension_set_content_scripts (WebExtensionExtension* self,
                                                  GList* value);
GList* web_extension_extension_get_content_styles (WebExtensionExtension* self);
void web_extension_extension_set_content_styles (WebExtensionExtension* self,
                                                 GList* value);
WebExtensionAction* web_extension_extension_get_browser_action (WebExtensionExtension* self);
void web_extension_extension_set_browser_action (WebExtensionExtension* self,
                                                 WebExtensionAction* value);
WebExtensionAction* web_extension_extension_get_sidebar (WebExtensionExtension* self);
void web_extension_extension_set_sidebar (WebExtensionExtension* self,
                                          WebExtensionAction* value);
static void web_extension_extension_finalize (GObject * obj);
static void _vala_web_extension_extension_get_property (GObject * object,
                                                 guint property_id,
                                                 GValue * value,
                                                 GParamSpec * pspec);
static void _vala_web_extension_extension_set_property (GObject * object,
                                                 guint property_id,
                                                 const GValue * value,
                                                 GParamSpec * pspec);
#define WEB_EXTENSION_ACTION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), WEB_EXTENSION_TYPE_ACTION, WebExtensionActionPrivate))
WebExtensionAction* web_extension_action_new (const gchar* icon,
                                              const gchar* title,
                                              const gchar* popup);
WebExtensionAction* web_extension_action_construct (GType object_type,
                                                    const gchar* icon,
                                                    const gchar* title,
                                                    const gchar* popup);
const gchar* web_extension_action_get_icon (WebExtensionAction* self);
void web_extension_action_set_icon (WebExtensionAction* self,
                                    const gchar* value);
const gchar* web_extension_action_get_title (WebExtensionAction* self);
void web_extension_action_set_title (WebExtensionAction* self,
                                     const gchar* value);
const gchar* web_extension_action_get_popup (WebExtensionAction* self);
void web_extension_action_set_popup (WebExtensionAction* self,
                                     const gchar* value);
static void web_extension_action_finalize (GObject * obj);
static void _vala_web_extension_action_get_property (GObject * object,
                                              guint property_id,
                                              GValue * value,
                                              GParamSpec * pspec);
static void _vala_web_extension_action_set_property (GObject * object,
                                              guint property_id,
                                              const GValue * value,
                                              GParamSpec * pspec);
GType web_extension_extension_manager_register_type (GTypeModule * module);
GType web_extension_extension_manager_get_type (void) G_GNUC_CONST;
void web_extension_extension_manager_foreach (WebExtensionExtensionManager* self,
                                              WebExtensionExtensionManagerExtensionManagerForeachFunc func,
                                              gpointer func_target);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static void __lambda4_ (Block1Data* _data1_,
                 const gchar* key,
                 WebExtensionExtension* value);
static void ___lambda4__gh_func (gconstpointer key,
                          gconstpointer value,
                          gpointer self);
static gchar* web_extension_extension_manager_pick_default_icon (WebExtensionExtensionManager* self,
                                                          JsonObject* action);
static JsonNode* _vala_JsonNode_copy (JsonNode* self);
static void _vala_JsonNode_free (JsonNode* self);
WebExtensionExtensionManager* web_extension_extension_manager_get_default (void);
WebExtensionExtensionManager* web_extension_extension_manager_new (void);
WebExtensionExtensionManager* web_extension_extension_manager_construct (GType object_type);
static void _g_object_unref0_ (gpointer var);
static void web_extension_extension_manager_load_from_folder_data_free (gpointer _data);
void web_extension_extension_manager_load_from_folder (WebExtensionExtensionManager* self,
                                                       WebKitUserContentManager* content,
                                                       GFile* folder,
                                                       GAsyncReadyCallback _callback_,
                                                       gpointer _user_data_);
void web_extension_extension_manager_load_from_folder_finish (WebExtensionExtensionManager* self,
                                                              GAsyncResult* _res_,
                                                              GError** error);
static gboolean web_extension_extension_manager_load_from_folder_co (WebExtensionExtensionManagerLoadFromFolderData* _data_);
static void web_extension_extension_manager_load_from_folder_ready (GObject* source_object,
                                                             GAsyncResult* _res_,
                                                             gpointer _user_data_);
static guint8* _vala_array_dup1 (guint8* self,
                          int length);
static guint8* _vala_array_dup2 (guint8* self,
                          int length);
static void _g_free_gdestroy_notify (void* data);
static guint8* _vala_array_dup3 (guint8* self,
                          int length);
static void web_extension_extension_manager_web_extension_message_received (WebExtensionExtensionManager* self,
                                                                     WebKitWebView* web_view,
                                                                     WebKitJavascriptResult* _result_);
gchar* web_extension_js_to_string (struct OpaqueJSContext* context,
                                   const struct OpaqueJSValue* value);
static MidoriBrowser* web_extension_extension_manager_get_browser (WebExtensionExtensionManager* self);
static MidoriApp* web_extension_extension_manager_get_app (WebExtensionExtensionManager* self);
void web_extension_extension_manager_install_api (WebExtensionExtensionManager* self,
                                                  WebKitWebView* web_view);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void ___lambda5_ (Block2Data* _data2_,
                  WebKitJavascriptResult* _result_);
static void ____lambda5__webkit_user_content_manager_script_message_received (WebKitUserContentManager* _sender,
                                                                       WebKitJavascriptResult* js_result,
                                                                       gpointer self);
static void web_extension_extension_manager_finalize (GObject * obj);
static void _vala_web_extension_extension_manager_get_property (GObject * object,
                                                         guint property_id,
                                                         GValue * value,
                                                         GParamSpec * pspec);
GType web_extension_web_view_register_type (GTypeModule * module);
GType web_extension_web_view_get_type (void) G_GNUC_CONST;
WebExtensionWebView* web_extension_web_view_new (WebExtensionExtension* extension,
                                                 const gchar* uri);
WebExtensionWebView* web_extension_web_view_construct (GType object_type,
                                                       WebExtensionExtension* extension,
                                                       const gchar* uri);
static gboolean web_extension_web_view_real_context_menu (WebKitWebView* base,
                                                   WebKitContextMenu* menu,
                                                   GdkEvent* event,
                                                   WebKitHitTestResult* hit);
static void web_extension_web_view_real_close (WebKitWebView* base);
static gboolean web_extension_web_view_real_web_process_crashed (WebKitWebView* base);
GType web_extension_button_register_type (GTypeModule * module);
GType web_extension_button_get_type (void) G_GNUC_CONST;
WebExtensionButton* web_extension_button_new (WebExtensionExtension* extension);
WebExtensionButton* web_extension_button_construct (GType object_type,
                                                    WebExtensionExtension* extension);
static void web_extension_button_load_icon (WebExtensionButton* self,
                                     WebExtensionExtension* extension,
                                     GtkImage* icon,
                                     GAsyncReadyCallback _callback_,
                                     gpointer _user_data_);
static void web_extension_button_load_icon_finish (WebExtensionButton* self,
                                            GAsyncResult* _res_);
static void web_extension_button_load_icon_data_free (gpointer _data);
static gboolean web_extension_button_load_icon_co (WebExtensionButtonLoadIconData* _data_);
static void web_extension_button_load_icon_ready (GObject* source_object,
                                           GAsyncResult* _res_,
                                           gpointer _user_data_);
static guint8* _vala_array_dup4 (guint8* self,
                          int length);
GType web_extension_browser_register_type (GTypeModule * module);
GType web_extension_browser_get_type (void) G_GNUC_CONST;
#define WEB_EXTENSION_BROWSER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowserPrivate))
static void web_extension_browser_extension_scheme_data_free (gpointer _data);
static void web_extension_browser_extension_scheme (WebExtensionBrowser* self,
                                             WebKitURISchemeRequest* request,
                                             GAsyncReadyCallback _callback_,
                                             gpointer _user_data_);
static void web_extension_browser_extension_scheme_finish (WebExtensionBrowser* self,
                                                    GAsyncResult* _res_);
static gboolean web_extension_browser_extension_scheme_co (WebExtensionBrowserExtensionSchemeData* _data_);
static void web_extension_browser_extension_scheme_ready (GObject* source_object,
                                                   GAsyncResult* _res_,
                                                   gpointer _user_data_);
static guint8* _vala_array_dup5 (guint8* self,
                          int length);
static void web_extension_browser_install_extension_data_free (gpointer _data);
static void web_extension_browser_install_extension (WebExtensionBrowser* self,
                                              WebExtensionExtension* extension,
                                              GAsyncReadyCallback _callback_,
                                              gpointer _user_data_);
static void web_extension_browser_install_extension_finish (WebExtensionBrowser* self,
                                                     GAsyncResult* _res_,
                                                     GError** error);
static gboolean web_extension_browser_install_extension_co (WebExtensionBrowserInstallExtensionData* _data_);
static gboolean _web_extension_browser_install_extension_co_gsource_func (gpointer self);
static void web_extension_browser_install_extension_ready (GObject* source_object,
                                                    GAsyncResult* _res_,
                                                    gpointer _user_data_);
static void web_extension_browser_real_activate (MidoriBrowserActivatable* base);
static void __lambda6_ (WebExtensionBrowser* self,
                 WebKitURISchemeRequest* request);
static void ___lambda6__web_kit_uri_scheme_request_callback (WebKitURISchemeRequest* request,
                                                      gpointer self);
static void __lambda7_ (WebExtensionBrowser* self,
                 GObject* extension);
static void ___lambda7__web_extension_extension_manager_extension_added (WebExtensionExtensionManager* _sender,
                                                                  GObject* extension,
                                                                  gpointer self);
static void __lambda8_ (WebExtensionBrowser* self,
                 WebExtensionExtension* extension);
static void ___lambda8__web_extension_extension_manager_extension_manager_foreach_func (WebExtensionExtension* extension,
                                                                                 gpointer self);
static void web_extension_browser_tab_added (WebExtensionBrowser* self,
                                      GtkWidget* widget);
static void _web_extension_browser_tab_added_gtk_container_add (GtkContainer* _sender,
                                                         GtkWidget* widget,
                                                         gpointer self);
WebExtensionBrowser* web_extension_browser_new (void);
WebExtensionBrowser* web_extension_browser_construct (GType object_type);
static void web_extension_browser_finalize (GObject * obj);
static void _vala_web_extension_browser_get_property (GObject * object,
                                               guint property_id,
                                               GValue * value,
                                               GParamSpec * pspec);
static void _vala_web_extension_browser_set_property (GObject * object,
                                               guint property_id,
                                               const GValue * value,
                                               GParamSpec * pspec);
void peas_register_types (GTypeModule* module);
GType web_extension_extension_register_type (GTypeModule * module);
GType web_extension_action_register_type (GTypeModule * module);
GType web_extension_extension_manager_register_type (GTypeModule * module);
GType web_extension_web_view_register_type (GTypeModule * module);
GType web_extension_button_register_type (GTypeModule * module);
GType web_extension_browser_register_type (GTypeModule * module);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static void
_g_free0_ (gpointer var)
{
#line 20 "/home/test/core/extensions/web-extensions.vala"
	var = (g_free (var), NULL);
#line 1061 "web-extensions.c"
}


static inline void
_g_list_free__g_free0_ (GList* self)
{
#line 20 "/home/test/core/extensions/web-extensions.vala"
	g_list_free_full (self, (GDestroyNotify) _g_free0_);
#line 1070 "web-extensions.c"
}


WebExtensionExtension*
web_extension_extension_construct (GType object_type,
                                   GFile* file)
{
	WebExtensionExtension * self = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 26 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (file != NULL, NULL);
#line 27 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = g_file_get_basename (file);
#line 27 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _tmp0_;
#line 27 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionExtension*) g_object_new (object_type, "file", file, "name", _tmp1_, NULL);
#line 27 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_tmp1_);
#line 26 "/home/test/core/extensions/web-extensions.vala"
	return self;
#line 1093 "web-extensions.c"
}


WebExtensionExtension*
web_extension_extension_new (GFile* file)
{
#line 26 "/home/test/core/extensions/web-extensions.vala"
	return web_extension_extension_construct (WEB_EXTENSION_TYPE_EXTENSION, file);
#line 1102 "web-extensions.c"
}


static void
_g_bytes_unref0_ (gpointer var)
{
#line 32 "/home/test/core/extensions/web-extensions.vala"
	(var == NULL) ? NULL : (var = (g_bytes_unref (var), NULL));
#line 1111 "web-extensions.c"
}


static gpointer
_g_bytes_ref0 (gpointer self)
{
#line 34 "/home/test/core/extensions/web-extensions.vala"
	return self ? g_bytes_ref (self) : NULL;
#line 1120 "web-extensions.c"
}


void
web_extension_extension_add_resource (WebExtensionExtension* self,
                                      const gchar* resource,
                                      GBytes* data)
{
	GHashTable* _tmp0_;
	GHashTable* _tmp4_;
	gchar* _tmp5_;
	GBytes* _tmp6_;
#line 30 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 30 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (resource != NULL);
#line 30 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (data != NULL);
#line 31 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_files;
#line 31 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp0_ == NULL) {
#line 1143 "web-extensions.c"
		GHashFunc _tmp1_;
		GEqualFunc _tmp2_;
		GHashTable* _tmp3_;
#line 32 "/home/test/core/extensions/web-extensions.vala"
		_tmp1_ = g_str_hash;
#line 32 "/home/test/core/extensions/web-extensions.vala"
		_tmp2_ = g_str_equal;
#line 32 "/home/test/core/extensions/web-extensions.vala"
		_tmp3_ = g_hash_table_new_full (_tmp1_, _tmp2_, _g_free0_, _g_bytes_unref0_);
#line 32 "/home/test/core/extensions/web-extensions.vala"
		_g_hash_table_unref0 (self->priv->_files);
#line 32 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_files = _tmp3_;
#line 1157 "web-extensions.c"
	}
#line 34 "/home/test/core/extensions/web-extensions.vala"
	_tmp4_ = self->priv->_files;
#line 34 "/home/test/core/extensions/web-extensions.vala"
	_tmp5_ = g_strdup (resource);
#line 34 "/home/test/core/extensions/web-extensions.vala"
	_tmp6_ = _g_bytes_ref0 (data);
#line 34 "/home/test/core/extensions/web-extensions.vala"
	g_hash_table_insert (_tmp4_, _tmp5_, _tmp6_);
#line 1167 "web-extensions.c"
}


static void
web_extension_extension_get_resource_data_free (gpointer _data)
{
	WebExtensionExtensionGetResourceData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->resource);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_g_bytes_unref0 (_data_->result);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_slice_free (WebExtensionExtensionGetResourceData, _data_);
#line 1184 "web-extensions.c"
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 13 "/home/test/core/extensions/web-extensions.vala"
	return self ? g_object_ref (self) : NULL;
#line 1193 "web-extensions.c"
}


void
web_extension_extension_get_resource (WebExtensionExtension* self,
                                      const gchar* resource,
                                      GAsyncReadyCallback _callback_,
                                      gpointer _user_data_)
{
	WebExtensionExtensionGetResourceData* _data_;
	WebExtensionExtension* _tmp0_;
	gchar* _tmp1_;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_slice_new0 (WebExtensionExtensionGetResourceData);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_task_set_task_data (_data_->_async_result, _data_, web_extension_extension_get_resource_data_free);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = g_strdup (resource);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->resource);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_data_->resource = _tmp1_;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_get_resource_co (_data_);
#line 1224 "web-extensions.c"
}


GBytes*
web_extension_extension_get_resource_finish (WebExtensionExtension* self,
                                             GAsyncResult* _res_,
                                             GError** error)
{
	GBytes* result;
	WebExtensionExtensionGetResourceData* _data_;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/web-extensions.vala"
		return NULL;
#line 1241 "web-extensions.c"
	}
#line 13 "/home/test/core/extensions/web-extensions.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	_data_->result = NULL;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1249 "web-extensions.c"
}


static glong
string_strnlen (gchar* str,
                glong maxlen)
{
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1392 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = memchr (str, 0, (gsize) maxlen);
#line 1392 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	end = _tmp0_;
#line 1393 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = end;
#line 1393 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ == NULL) {
#line 1394 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = maxlen;
#line 1394 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1273 "web-extensions.c"
	} else {
		gchar* _tmp2_;
#line 1396 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = end;
#line 1396 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (glong) (_tmp2_ - str);
#line 1396 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1282 "web-extensions.c"
	}
}


static gchar*
string_substring (const gchar* self,
                  glong offset,
                  glong len)
{
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp6_;
	gchar* _tmp7_;
#line 1403 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1405 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (offset >= ((glong) 0)) {
#line 1405 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = len >= ((glong) 0);
#line 1303 "web-extensions.c"
	} else {
#line 1405 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = FALSE;
#line 1307 "web-extensions.c"
	}
#line 1405 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp0_) {
#line 1407 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		string_length = string_strnlen ((gchar*) self, offset + len);
#line 1313 "web-extensions.c"
	} else {
		gint _tmp1_;
		gint _tmp2_;
#line 1409 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = strlen (self);
#line 1409 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _tmp1_;
#line 1409 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		string_length = (glong) _tmp2_;
#line 1323 "web-extensions.c"
	}
#line 1412 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (offset < ((glong) 0)) {
#line 1327 "web-extensions.c"
		glong _tmp3_;
#line 1413 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp3_ = string_length;
#line 1413 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		offset = _tmp3_ + offset;
#line 1414 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_return_val_if_fail (offset >= ((glong) 0), NULL);
#line 1335 "web-extensions.c"
	} else {
		glong _tmp4_;
#line 1416 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp4_ = string_length;
#line 1416 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_return_val_if_fail (offset <= _tmp4_, NULL);
#line 1342 "web-extensions.c"
	}
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (len < ((glong) 0)) {
#line 1346 "web-extensions.c"
		glong _tmp5_;
#line 1419 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp5_ = string_length;
#line 1419 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		len = _tmp5_ - offset;
#line 1352 "web-extensions.c"
	}
#line 1421 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp6_ = string_length;
#line 1421 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail ((offset + len) <= _tmp6_, NULL);
#line 1422 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp7_ = g_strndup (((gchar*) self) + offset, (gsize) len);
#line 1422 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp7_;
#line 1422 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1364 "web-extensions.c"
}


static void
web_extension_extension_get_resource_ready (GObject* source_object,
                                            GAsyncResult* _res_,
                                            gpointer _user_data_)
{
	WebExtensionExtensionGetResourceData* _data_;
#line 48 "/home/test/core/extensions/web-extensions.vala"
	_data_ = _user_data_;
#line 48 "/home/test/core/extensions/web-extensions.vala"
	_data_->_source_object_ = source_object;
#line 48 "/home/test/core/extensions/web-extensions.vala"
	_data_->_res_ = _res_;
#line 48 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_get_resource_co (_data_);
#line 1382 "web-extensions.c"
}


static gboolean
web_extension_extension_get_resource_co (WebExtensionExtensionGetResourceData* _data_)
{
#line 37 "/home/test/core/extensions/web-extensions.vala"
	switch (_data_->_state_) {
#line 37 "/home/test/core/extensions/web-extensions.vala"
		case 0:
#line 1393 "web-extensions.c"
		goto _state_0;
#line 37 "/home/test/core/extensions/web-extensions.vala"
		case 1:
#line 1397 "web-extensions.c"
		goto _state_1;
		default:
#line 37 "/home/test/core/extensions/web-extensions.vala"
		g_assert_not_reached ();
#line 1402 "web-extensions.c"
	}
	_state_0:
#line 39 "/home/test/core/extensions/web-extensions.vala"
	if (g_str_has_prefix (_data_->resource, ".")) {
#line 39 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp1_ = string_substring (_data_->resource, (glong) 1, (glong) -1);
#line 39 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_tmp0_);
#line 39 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp0_ = _data_->_tmp1_;
#line 1413 "web-extensions.c"
	} else {
#line 39 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp2_ = g_strdup (_data_->resource);
#line 39 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_tmp0_);
#line 39 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp0_ = _data_->_tmp2_;
#line 1421 "web-extensions.c"
	}
#line 39 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp3_ = g_strdup (_data_->_tmp0_);
#line 39 "/home/test/core/extensions/web-extensions.vala"
	_data_->_resource = _data_->_tmp3_;
#line 40 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp5_ = _data_->_resource;
#line 40 "/home/test/core/extensions/web-extensions.vala"
	if (g_str_has_prefix (_data_->_tmp5_, "/")) {
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp6_ = _data_->_resource;
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp7_ = string_substring (_data_->_tmp6_, (glong) 1, (glong) -1);
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_tmp4_);
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp4_ = _data_->_tmp7_;
#line 1439 "web-extensions.c"
	} else {
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp8_ = _data_->_resource;
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp9_ = g_strdup (_data_->_tmp8_);
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_tmp4_);
#line 40 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp4_ = _data_->_tmp9_;
#line 1449 "web-extensions.c"
	}
#line 40 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp10_ = g_strdup (_data_->_tmp4_);
#line 40 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_resource);
#line 40 "/home/test/core/extensions/web-extensions.vala"
	_data_->_resource = _data_->_tmp10_;
#line 42 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp12_ = _data_->self->priv->_files;
#line 42 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_tmp12_ != NULL) {
#line 42 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp13_ = _data_->self->priv->_files;
#line 42 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp14_ = _data_->_resource;
#line 42 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp11_ = g_hash_table_contains (_data_->_tmp13_, _data_->_tmp14_);
#line 1467 "web-extensions.c"
	} else {
#line 42 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp11_ = FALSE;
#line 1471 "web-extensions.c"
	}
#line 42 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_tmp11_) {
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp15_ = _data_->self->priv->_files;
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp16_ = _data_->_resource;
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp17_ = g_hash_table_lookup (_data_->_tmp15_, _data_->_tmp16_);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp18_ = _g_bytes_ref0 ((GBytes*) _data_->_tmp17_);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_data_->result = _data_->_tmp18_;
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_tmp4_);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_resource);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->_tmp0_);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		if (_data_->_state_ != 0) {
#line 43 "/home/test/core/extensions/web-extensions.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 43 "/home/test/core/extensions/web-extensions.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1499 "web-extensions.c"
			}
		}
#line 43 "/home/test/core/extensions/web-extensions.vala"
		g_object_unref (_data_->_async_result);
#line 43 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 1506 "web-extensions.c"
	}
#line 45 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp19_ = _data_->self->priv->_file;
#line 45 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp20_ = _data_->_resource;
#line 45 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp21_ = g_file_get_child (_data_->_tmp19_, _data_->_tmp20_);
#line 45 "/home/test/core/extensions/web-extensions.vala"
	_data_->child = _data_->_tmp21_;
#line 46 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp22_ = _data_->child;
#line 46 "/home/test/core/extensions/web-extensions.vala"
	if (g_file_query_exists (_data_->_tmp22_, NULL)) {
#line 47 "/home/test/core/extensions/web-extensions.vala"
		_data_->data_length1 = 0;
#line 47 "/home/test/core/extensions/web-extensions.vala"
		_data_->_data_size_ = 0;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp24_ = _data_->child;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp25_ = NULL;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->_state_ = 1;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		g_file_load_contents_async (_data_->_tmp24_, NULL, web_extension_extension_get_resource_ready, _data_);
#line 48 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 1534 "web-extensions.c"
		_state_1:
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp27_ = g_file_load_contents_finish (_data_->_tmp24_, _data_->_res_, &_data_->_tmp25_, &_data_->_tmp26_, NULL, &_data_->_inner_error0_);
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->data = (g_free (_data_->data), NULL);
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->data = _data_->_tmp25_;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->data_length1 = _data_->_tmp26_;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->_data_size_ = _data_->data_length1;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp23_ = _data_->_tmp27_;
#line 48 "/home/test/core/extensions/web-extensions.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 48 "/home/test/core/extensions/web-extensions.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			_data_->data = (g_free (_data_->data), NULL);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->child);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->_tmp4_);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->_resource);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->_tmp0_);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			g_object_unref (_data_->_async_result);
#line 48 "/home/test/core/extensions/web-extensions.vala"
			return FALSE;
#line 1566 "web-extensions.c"
		}
#line 48 "/home/test/core/extensions/web-extensions.vala"
		if (_data_->_tmp23_) {
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp28_ = _data_->data;
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp28__length1 = _data_->data_length1;
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp29_ = g_bytes_new (_data_->_tmp28_, _data_->_tmp28__length1);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_data_->result = _data_->_tmp29_;
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_data_->data = (g_free (_data_->data), NULL);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->child);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->_tmp4_);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->_resource);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->_tmp0_);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			if (_data_->_state_ != 0) {
#line 49 "/home/test/core/extensions/web-extensions.vala"
				while (!g_task_get_completed (_data_->_async_result)) {
#line 49 "/home/test/core/extensions/web-extensions.vala"
					g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1596 "web-extensions.c"
				}
			}
#line 49 "/home/test/core/extensions/web-extensions.vala"
			g_object_unref (_data_->_async_result);
#line 49 "/home/test/core/extensions/web-extensions.vala"
			return FALSE;
#line 1603 "web-extensions.c"
		}
#line 46 "/home/test/core/extensions/web-extensions.vala"
		_data_->data = (g_free (_data_->data), NULL);
#line 1607 "web-extensions.c"
	}
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp30_ = _data_->self->priv->_name;
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp31_ = g_strdup_printf ("Failed to open '%s': Not found in %s", _data_->resource, _data_->_tmp30_);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp32_ = _data_->_tmp31_;
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp33_ = g_error_new_literal (G_FILE_ERROR, G_FILE_ERROR_IO, _data_->_tmp32_);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp34_ = _data_->_tmp33_;
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_tmp32_);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_data_->_inner_error0_ = _data_->_tmp34_;
#line 52 "/home/test/core/extensions/web-extensions.vala"
	g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->child);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_tmp4_);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_resource);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_tmp0_);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	g_object_unref (_data_->_async_result);
#line 52 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 1637 "web-extensions.c"
}


GFile*
web_extension_extension_get_file (WebExtensionExtension* self)
{
	GFile* result;
	GFile* _tmp0_;
#line 15 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 15 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_file;
#line 15 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 15 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1654 "web-extensions.c"
}


void
web_extension_extension_set_file (WebExtensionExtension* self,
                                  GFile* value)
{
#line 15 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 15 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_extension_get_file (self) != value) {
#line 1666 "web-extensions.c"
		GFile* _tmp0_;
#line 15 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 15 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (self->priv->_file);
#line 15 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_file = _tmp0_;
#line 15 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_FILE_PROPERTY]);
#line 1676 "web-extensions.c"
	}
}


const gchar*
web_extension_extension_get_name (WebExtensionExtension* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 17 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 17 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_name;
#line 17 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 17 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1694 "web-extensions.c"
}


void
web_extension_extension_set_name (WebExtensionExtension* self,
                                  const gchar* value)
{
#line 17 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 17 "/home/test/core/extensions/web-extensions.vala"
	if (g_strcmp0 (value, web_extension_extension_get_name (self)) != 0) {
#line 1706 "web-extensions.c"
		gchar* _tmp0_;
#line 17 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = g_strdup (value);
#line 17 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (self->priv->_name);
#line 17 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_name = _tmp0_;
#line 17 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_NAME_PROPERTY]);
#line 1716 "web-extensions.c"
	}
}


const gchar*
web_extension_extension_get_description (WebExtensionExtension* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 18 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 18 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_description;
#line 18 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 18 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1734 "web-extensions.c"
}


void
web_extension_extension_set_description (WebExtensionExtension* self,
                                         const gchar* value)
{
#line 18 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 18 "/home/test/core/extensions/web-extensions.vala"
	if (g_strcmp0 (value, web_extension_extension_get_description (self)) != 0) {
#line 1746 "web-extensions.c"
		gchar* _tmp0_;
#line 18 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = g_strdup (value);
#line 18 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (self->priv->_description);
#line 18 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_description = _tmp0_;
#line 18 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_DESCRIPTION_PROPERTY]);
#line 1756 "web-extensions.c"
	}
}


const gchar*
web_extension_extension_get_background_page (WebExtensionExtension* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 19 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 19 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_background_page;
#line 19 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 19 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1774 "web-extensions.c"
}


void
web_extension_extension_set_background_page (WebExtensionExtension* self,
                                             gchar* value)
{
#line 19 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 19 "/home/test/core/extensions/web-extensions.vala"
	if (g_strcmp0 (value, web_extension_extension_get_background_page (self)) != 0) {
#line 1786 "web-extensions.c"
		gchar* _tmp0_;
#line 19 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = value;
#line 19 "/home/test/core/extensions/web-extensions.vala"
		value = NULL;
#line 19 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (self->priv->_background_page);
#line 19 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_background_page = _tmp0_;
#line 19 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (value);
#line 19 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_BACKGROUND_PAGE_PROPERTY]);
#line 1800 "web-extensions.c"
	}
}


GList*
web_extension_extension_get_background_scripts (WebExtensionExtension* self)
{
	GList* result;
	GList* _tmp0_;
#line 20 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 20 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_background_scripts;
#line 20 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 20 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1818 "web-extensions.c"
}


void
web_extension_extension_set_background_scripts (WebExtensionExtension* self,
                                                GList* value)
{
#line 20 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 20 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_extension_get_background_scripts (self) != value) {
#line 1830 "web-extensions.c"
		GList* _tmp0_;
#line 20 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = value;
#line 20 "/home/test/core/extensions/web-extensions.vala"
		value = NULL;
#line 20 "/home/test/core/extensions/web-extensions.vala"
		(self->priv->_background_scripts == NULL) ? NULL : (self->priv->_background_scripts = (_g_list_free__g_free0_ (self->priv->_background_scripts), NULL));
#line 20 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_background_scripts = _tmp0_;
#line 20 "/home/test/core/extensions/web-extensions.vala"
		(value == NULL) ? NULL : (value = (_g_list_free__g_free0_ (value), NULL));
#line 20 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_BACKGROUND_SCRIPTS_PROPERTY]);
#line 1844 "web-extensions.c"
	}
}


GList*
web_extension_extension_get_content_scripts (WebExtensionExtension* self)
{
	GList* result;
	GList* _tmp0_;
#line 21 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 21 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_content_scripts;
#line 21 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 21 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1862 "web-extensions.c"
}


void
web_extension_extension_set_content_scripts (WebExtensionExtension* self,
                                             GList* value)
{
#line 21 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 21 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_extension_get_content_scripts (self) != value) {
#line 1874 "web-extensions.c"
		GList* _tmp0_;
#line 21 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = value;
#line 21 "/home/test/core/extensions/web-extensions.vala"
		value = NULL;
#line 21 "/home/test/core/extensions/web-extensions.vala"
		(self->priv->_content_scripts == NULL) ? NULL : (self->priv->_content_scripts = (_g_list_free__g_free0_ (self->priv->_content_scripts), NULL));
#line 21 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_content_scripts = _tmp0_;
#line 21 "/home/test/core/extensions/web-extensions.vala"
		(value == NULL) ? NULL : (value = (_g_list_free__g_free0_ (value), NULL));
#line 21 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_CONTENT_SCRIPTS_PROPERTY]);
#line 1888 "web-extensions.c"
	}
}


GList*
web_extension_extension_get_content_styles (WebExtensionExtension* self)
{
	GList* result;
	GList* _tmp0_;
#line 22 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 22 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_content_styles;
#line 22 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 22 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1906 "web-extensions.c"
}


void
web_extension_extension_set_content_styles (WebExtensionExtension* self,
                                            GList* value)
{
#line 22 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 22 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_extension_get_content_styles (self) != value) {
#line 1918 "web-extensions.c"
		GList* _tmp0_;
#line 22 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = value;
#line 22 "/home/test/core/extensions/web-extensions.vala"
		value = NULL;
#line 22 "/home/test/core/extensions/web-extensions.vala"
		(self->priv->_content_styles == NULL) ? NULL : (self->priv->_content_styles = (_g_list_free__g_free0_ (self->priv->_content_styles), NULL));
#line 22 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_content_styles = _tmp0_;
#line 22 "/home/test/core/extensions/web-extensions.vala"
		(value == NULL) ? NULL : (value = (_g_list_free__g_free0_ (value), NULL));
#line 22 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_CONTENT_STYLES_PROPERTY]);
#line 1932 "web-extensions.c"
	}
}


WebExtensionAction*
web_extension_extension_get_browser_action (WebExtensionExtension* self)
{
	WebExtensionAction* result;
	WebExtensionAction* _tmp0_;
#line 23 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 23 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_browser_action;
#line 23 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 23 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1950 "web-extensions.c"
}


void
web_extension_extension_set_browser_action (WebExtensionExtension* self,
                                            WebExtensionAction* value)
{
#line 23 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 23 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_extension_get_browser_action (self) != value) {
#line 1962 "web-extensions.c"
		WebExtensionAction* _tmp0_;
#line 23 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 23 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (self->priv->_browser_action);
#line 23 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_browser_action = _tmp0_;
#line 23 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_BROWSER_ACTION_PROPERTY]);
#line 1972 "web-extensions.c"
	}
}


WebExtensionAction*
web_extension_extension_get_sidebar (WebExtensionExtension* self)
{
	WebExtensionAction* result;
	WebExtensionAction* _tmp0_;
#line 24 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 24 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_sidebar;
#line 24 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 24 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 1990 "web-extensions.c"
}


void
web_extension_extension_set_sidebar (WebExtensionExtension* self,
                                     WebExtensionAction* value)
{
#line 24 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 24 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_extension_get_sidebar (self) != value) {
#line 2002 "web-extensions.c"
		WebExtensionAction* _tmp0_;
#line 24 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 24 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (self->priv->_sidebar);
#line 24 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_sidebar = _tmp0_;
#line 24 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_SIDEBAR_PROPERTY]);
#line 2012 "web-extensions.c"
	}
}


static void
web_extension_extension_class_init (WebExtensionExtensionClass * klass)
{
#line 13 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_parent_class = g_type_class_peek_parent (klass);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_type_class_add_private (klass, sizeof (WebExtensionExtensionPrivate));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_web_extension_extension_get_property;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_web_extension_extension_set_property;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->finalize = web_extension_extension_finalize;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_FILE_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_FILE_PROPERTY] = g_param_spec_object ("file", "file", "file", g_file_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_NAME_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_NAME_PROPERTY] = g_param_spec_string ("name", "name", "name", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_DESCRIPTION_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_DESCRIPTION_PROPERTY] = g_param_spec_string ("description", "description", "description", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_BACKGROUND_PAGE_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_BACKGROUND_PAGE_PROPERTY] = g_param_spec_string ("background-page", "background-page", "background-page", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_BACKGROUND_SCRIPTS_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_BACKGROUND_SCRIPTS_PROPERTY] = g_param_spec_pointer ("background-scripts", "background-scripts", "background-scripts", G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_CONTENT_SCRIPTS_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_CONTENT_SCRIPTS_PROPERTY] = g_param_spec_pointer ("content-scripts", "content-scripts", "content-scripts", G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_CONTENT_STYLES_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_CONTENT_STYLES_PROPERTY] = g_param_spec_pointer ("content-styles", "content-styles", "content-styles", G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_BROWSER_ACTION_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_BROWSER_ACTION_PROPERTY] = g_param_spec_object ("browser-action", "browser-action", "browser-action", WEB_EXTENSION_TYPE_ACTION, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 13 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_EXTENSION_SIDEBAR_PROPERTY, web_extension_extension_properties[WEB_EXTENSION_EXTENSION_SIDEBAR_PROPERTY] = g_param_spec_object ("sidebar", "sidebar", "sidebar", WEB_EXTENSION_TYPE_ACTION, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 2048 "web-extensions.c"
}


static void
web_extension_extension_instance_init (WebExtensionExtension * self)
{
#line 13 "/home/test/core/extensions/web-extensions.vala"
	self->priv = WEB_EXTENSION_EXTENSION_GET_PRIVATE (self);
#line 2057 "web-extensions.c"
}


static void
web_extension_extension_finalize (GObject * obj)
{
	WebExtensionExtension * self;
#line 13 "/home/test/core/extensions/web-extensions.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtension);
#line 14 "/home/test/core/extensions/web-extensions.vala"
	_g_hash_table_unref0 (self->priv->_files);
#line 15 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (self->priv->_file);
#line 17 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (self->priv->_name);
#line 18 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (self->priv->_description);
#line 19 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (self->priv->_background_page);
#line 20 "/home/test/core/extensions/web-extensions.vala"
	(self->priv->_background_scripts == NULL) ? NULL : (self->priv->_background_scripts = (_g_list_free__g_free0_ (self->priv->_background_scripts), NULL));
#line 21 "/home/test/core/extensions/web-extensions.vala"
	(self->priv->_content_scripts == NULL) ? NULL : (self->priv->_content_scripts = (_g_list_free__g_free0_ (self->priv->_content_scripts), NULL));
#line 22 "/home/test/core/extensions/web-extensions.vala"
	(self->priv->_content_styles == NULL) ? NULL : (self->priv->_content_styles = (_g_list_free__g_free0_ (self->priv->_content_styles), NULL));
#line 23 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (self->priv->_browser_action);
#line 24 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (self->priv->_sidebar);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (web_extension_extension_parent_class)->finalize (obj);
#line 2089 "web-extensions.c"
}


GType
web_extension_extension_get_type (void)
{
	return web_extension_extension_type_id;
}


GType
web_extension_extension_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (WebExtensionExtensionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) web_extension_extension_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (WebExtensionExtension), 0, (GInstanceInitFunc) web_extension_extension_instance_init, NULL };
	web_extension_extension_type_id = g_type_module_register_type (module, G_TYPE_OBJECT, "WebExtensionExtension", &g_define_type_info, 0);
	return web_extension_extension_type_id;
}


static void
_vala_web_extension_extension_get_property (GObject * object,
                                            guint property_id,
                                            GValue * value,
                                            GParamSpec * pspec)
{
	WebExtensionExtension * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtension);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_FILE_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_object (value, web_extension_extension_get_file (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_NAME_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_string (value, web_extension_extension_get_name (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_DESCRIPTION_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_string (value, web_extension_extension_get_description (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_BACKGROUND_PAGE_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_string (value, web_extension_extension_get_background_page (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_BACKGROUND_SCRIPTS_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_pointer (value, web_extension_extension_get_background_scripts (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_CONTENT_SCRIPTS_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_pointer (value, web_extension_extension_get_content_scripts (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_CONTENT_STYLES_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_pointer (value, web_extension_extension_get_content_styles (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_BROWSER_ACTION_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_object (value, web_extension_extension_get_browser_action (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_SIDEBAR_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_object (value, web_extension_extension_get_sidebar (self));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2173 "web-extensions.c"
		default:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2179 "web-extensions.c"
	}
}


static void
_vala_web_extension_extension_set_property (GObject * object,
                                            guint property_id,
                                            const GValue * value,
                                            GParamSpec * pspec)
{
	WebExtensionExtension * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtension);
#line 13 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_FILE_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_file (self, g_value_get_object (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_NAME_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_name (self, g_value_get_string (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_DESCRIPTION_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_description (self, g_value_get_string (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_BACKGROUND_PAGE_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_background_page (self, g_value_get_string (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_BACKGROUND_SCRIPTS_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_background_scripts (self, g_value_get_pointer (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_CONTENT_SCRIPTS_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_content_scripts (self, g_value_get_pointer (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_CONTENT_STYLES_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_content_styles (self, g_value_get_pointer (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_BROWSER_ACTION_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_browser_action (self, g_value_get_object (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 13 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_EXTENSION_SIDEBAR_PROPERTY:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_set_sidebar (self, g_value_get_object (value));
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2248 "web-extensions.c"
		default:
#line 13 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 13 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2254 "web-extensions.c"
	}
}


WebExtensionAction*
web_extension_action_construct (GType object_type,
                                const gchar* icon,
                                const gchar* title,
                                const gchar* popup)
{
	WebExtensionAction * self = NULL;
#line 62 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionAction*) g_object_new (object_type, "icon", icon, "title", title, "popup", popup, NULL);
#line 61 "/home/test/core/extensions/web-extensions.vala"
	return self;
#line 2270 "web-extensions.c"
}


WebExtensionAction*
web_extension_action_new (const gchar* icon,
                          const gchar* title,
                          const gchar* popup)
{
#line 61 "/home/test/core/extensions/web-extensions.vala"
	return web_extension_action_construct (WEB_EXTENSION_TYPE_ACTION, icon, title, popup);
#line 2281 "web-extensions.c"
}


const gchar*
web_extension_action_get_icon (WebExtensionAction* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 57 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 57 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_icon;
#line 57 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 57 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 2298 "web-extensions.c"
}


void
web_extension_action_set_icon (WebExtensionAction* self,
                               const gchar* value)
{
#line 57 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 57 "/home/test/core/extensions/web-extensions.vala"
	if (g_strcmp0 (value, web_extension_action_get_icon (self)) != 0) {
#line 2310 "web-extensions.c"
		gchar* _tmp0_;
#line 57 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = g_strdup (value);
#line 57 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (self->priv->_icon);
#line 57 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_icon = _tmp0_;
#line 57 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_action_properties[WEB_EXTENSION_ACTION_ICON_PROPERTY]);
#line 2320 "web-extensions.c"
	}
}


const gchar*
web_extension_action_get_title (WebExtensionAction* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 58 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 58 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_title;
#line 58 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 58 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 2338 "web-extensions.c"
}


void
web_extension_action_set_title (WebExtensionAction* self,
                                const gchar* value)
{
#line 58 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 58 "/home/test/core/extensions/web-extensions.vala"
	if (g_strcmp0 (value, web_extension_action_get_title (self)) != 0) {
#line 2350 "web-extensions.c"
		gchar* _tmp0_;
#line 58 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = g_strdup (value);
#line 58 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (self->priv->_title);
#line 58 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_title = _tmp0_;
#line 58 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_action_properties[WEB_EXTENSION_ACTION_TITLE_PROPERTY]);
#line 2360 "web-extensions.c"
	}
}


const gchar*
web_extension_action_get_popup (WebExtensionAction* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 59 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 59 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_popup;
#line 59 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp0_;
#line 59 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 2378 "web-extensions.c"
}


void
web_extension_action_set_popup (WebExtensionAction* self,
                                const gchar* value)
{
#line 59 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 59 "/home/test/core/extensions/web-extensions.vala"
	if (g_strcmp0 (value, web_extension_action_get_popup (self)) != 0) {
#line 2390 "web-extensions.c"
		gchar* _tmp0_;
#line 59 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = g_strdup (value);
#line 59 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (self->priv->_popup);
#line 59 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_popup = _tmp0_;
#line 59 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_action_properties[WEB_EXTENSION_ACTION_POPUP_PROPERTY]);
#line 2400 "web-extensions.c"
	}
}


static void
web_extension_action_class_init (WebExtensionActionClass * klass)
{
#line 56 "/home/test/core/extensions/web-extensions.vala"
	web_extension_action_parent_class = g_type_class_peek_parent (klass);
#line 56 "/home/test/core/extensions/web-extensions.vala"
	g_type_class_add_private (klass, sizeof (WebExtensionActionPrivate));
#line 56 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_web_extension_action_get_property;
#line 56 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_web_extension_action_set_property;
#line 56 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->finalize = web_extension_action_finalize;
#line 56 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_ACTION_ICON_PROPERTY, web_extension_action_properties[WEB_EXTENSION_ACTION_ICON_PROPERTY] = g_param_spec_string ("icon", "icon", "icon", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 56 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_ACTION_TITLE_PROPERTY, web_extension_action_properties[WEB_EXTENSION_ACTION_TITLE_PROPERTY] = g_param_spec_string ("title", "title", "title", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 56 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_ACTION_POPUP_PROPERTY, web_extension_action_properties[WEB_EXTENSION_ACTION_POPUP_PROPERTY] = g_param_spec_string ("popup", "popup", "popup", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 2424 "web-extensions.c"
}


static void
web_extension_action_instance_init (WebExtensionAction * self)
{
#line 56 "/home/test/core/extensions/web-extensions.vala"
	self->priv = WEB_EXTENSION_ACTION_GET_PRIVATE (self);
#line 2433 "web-extensions.c"
}


static void
web_extension_action_finalize (GObject * obj)
{
	WebExtensionAction * self;
#line 56 "/home/test/core/extensions/web-extensions.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, WEB_EXTENSION_TYPE_ACTION, WebExtensionAction);
#line 57 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (self->priv->_icon);
#line 58 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (self->priv->_title);
#line 59 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (self->priv->_popup);
#line 56 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (web_extension_action_parent_class)->finalize (obj);
#line 2451 "web-extensions.c"
}


GType
web_extension_action_get_type (void)
{
	return web_extension_action_type_id;
}


GType
web_extension_action_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (WebExtensionActionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) web_extension_action_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (WebExtensionAction), 0, (GInstanceInitFunc) web_extension_action_instance_init, NULL };
	web_extension_action_type_id = g_type_module_register_type (module, G_TYPE_OBJECT, "WebExtensionAction", &g_define_type_info, 0);
	return web_extension_action_type_id;
}


static void
_vala_web_extension_action_get_property (GObject * object,
                                         guint property_id,
                                         GValue * value,
                                         GParamSpec * pspec)
{
	WebExtensionAction * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_ACTION, WebExtensionAction);
#line 56 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 56 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_ACTION_ICON_PROPERTY:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_string (value, web_extension_action_get_icon (self));
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 56 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_ACTION_TITLE_PROPERTY:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_string (value, web_extension_action_get_title (self));
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 56 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_ACTION_POPUP_PROPERTY:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		g_value_set_string (value, web_extension_action_get_popup (self));
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2499 "web-extensions.c"
		default:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2505 "web-extensions.c"
	}
}


static void
_vala_web_extension_action_set_property (GObject * object,
                                         guint property_id,
                                         const GValue * value,
                                         GParamSpec * pspec)
{
	WebExtensionAction * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_ACTION, WebExtensionAction);
#line 56 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 56 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_ACTION_ICON_PROPERTY:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		web_extension_action_set_icon (self, g_value_get_string (value));
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 56 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_ACTION_TITLE_PROPERTY:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		web_extension_action_set_title (self, g_value_get_string (value));
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 56 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_ACTION_POPUP_PROPERTY:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		web_extension_action_set_popup (self, g_value_get_string (value));
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2538 "web-extensions.c"
		default:
#line 56 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 56 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 2544 "web-extensions.c"
	}
}


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 71 "/home/test/core/extensions/web-extensions.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 71 "/home/test/core/extensions/web-extensions.vala"
	return _data1_;
#line 2556 "web-extensions.c"
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 71 "/home/test/core/extensions/web-extensions.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 2567 "web-extensions.c"
		WebExtensionExtensionManager* self;
#line 71 "/home/test/core/extensions/web-extensions.vala"
		self = _data1_->self;
#line 71 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (self);
#line 71 "/home/test/core/extensions/web-extensions.vala"
		g_slice_free (Block1Data, _data1_);
#line 2575 "web-extensions.c"
	}
}


static void
__lambda4_ (Block1Data* _data1_,
            const gchar* key,
            WebExtensionExtension* value)
{
	WebExtensionExtensionManager* self;
#line 72 "/home/test/core/extensions/web-extensions.vala"
	self = _data1_->self;
#line 72 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (key != NULL);
#line 72 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (value != NULL);
#line 73 "/home/test/core/extensions/web-extensions.vala"
	_data1_->func (value, _data1_->func_target);
#line 2594 "web-extensions.c"
}


static void
___lambda4__gh_func (gconstpointer key,
                     gconstpointer value,
                     gpointer self)
{
#line 72 "/home/test/core/extensions/web-extensions.vala"
	__lambda4_ (self, (const gchar*) key, (WebExtensionExtension*) value);
#line 2605 "web-extensions.c"
}


void
web_extension_extension_manager_foreach (WebExtensionExtensionManager* self,
                                         WebExtensionExtensionManagerExtensionManagerForeachFunc func,
                                         gpointer func_target)
{
	Block1Data* _data1_;
	GHashTable* _tmp0_;
#line 71 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 71 "/home/test/core/extensions/web-extensions.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 71 "/home/test/core/extensions/web-extensions.vala"
	_data1_->_ref_count_ = 1;
#line 71 "/home/test/core/extensions/web-extensions.vala"
	_data1_->self = g_object_ref (self);
#line 71 "/home/test/core/extensions/web-extensions.vala"
	_data1_->func = func;
#line 71 "/home/test/core/extensions/web-extensions.vala"
	_data1_->func_target = func_target;
#line 72 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->extensions;
#line 72 "/home/test/core/extensions/web-extensions.vala"
	g_hash_table_foreach (_tmp0_, ___lambda4__gh_func, _data1_);
#line 71 "/home/test/core/extensions/web-extensions.vala"
	block1_data_unref (_data1_);
#line 71 "/home/test/core/extensions/web-extensions.vala"
	_data1_ = NULL;
#line 2636 "web-extensions.c"
}


static JsonNode*
_vala_JsonNode_copy (JsonNode* self)
{
#line 84 "/home/test/core/extensions/web-extensions.vala"
	return g_boxed_copy (json_node_get_type (), self);
#line 2645 "web-extensions.c"
}


static gpointer
__vala_JsonNode_copy0 (gpointer self)
{
#line 84 "/home/test/core/extensions/web-extensions.vala"
	return self ? _vala_JsonNode_copy (self) : NULL;
#line 2654 "web-extensions.c"
}


static void
_vala_JsonNode_free (JsonNode* self)
{
#line 88 "/home/test/core/extensions/web-extensions.vala"
	g_boxed_free (json_node_get_type (), self);
#line 2663 "web-extensions.c"
}


static gchar*
web_extension_extension_manager_pick_default_icon (WebExtensionExtensionManager* self,
                                                   JsonObject* action)
{
	gchar* result = NULL;
#line 82 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 82 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (action != NULL, NULL);
#line 83 "/home/test/core/extensions/web-extensions.vala"
	if (json_object_has_member (action, "default_icon")) {
#line 2678 "web-extensions.c"
		JsonNode* node = NULL;
		JsonNode* _tmp0_;
		JsonNode* _tmp1_;
		JsonNode* _tmp2_;
#line 84 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = json_object_get_member (action, "default_icon");
#line 84 "/home/test/core/extensions/web-extensions.vala"
		_tmp1_ = __vala_JsonNode_copy0 (_tmp0_);
#line 84 "/home/test/core/extensions/web-extensions.vala"
		node = _tmp1_;
#line 85 "/home/test/core/extensions/web-extensions.vala"
		_tmp2_ = node;
#line 85 "/home/test/core/extensions/web-extensions.vala"
		if (_tmp2_ != NULL) {
#line 2693 "web-extensions.c"
			JsonNode* _tmp3_;
#line 86 "/home/test/core/extensions/web-extensions.vala"
			_tmp3_ = node;
#line 86 "/home/test/core/extensions/web-extensions.vala"
			if (json_node_get_node_type (_tmp3_) == JSON_NODE_OBJECT) {
#line 2699 "web-extensions.c"
				JsonNode* _tmp4_;
				JsonObject* _tmp5_;
				GList* _tmp6_;
#line 87 "/home/test/core/extensions/web-extensions.vala"
				_tmp4_ = node;
#line 87 "/home/test/core/extensions/web-extensions.vala"
				_tmp5_ = json_node_get_object (_tmp4_);
#line 87 "/home/test/core/extensions/web-extensions.vala"
				_tmp6_ = json_object_get_members (_tmp5_);
#line 2709 "web-extensions.c"
				{
					GList* size_collection = NULL;
					GList* size_it = NULL;
#line 87 "/home/test/core/extensions/web-extensions.vala"
					size_collection = _tmp6_;
#line 87 "/home/test/core/extensions/web-extensions.vala"
					for (size_it = size_collection; size_it != NULL; size_it = size_it->next) {
#line 2717 "web-extensions.c"
						const gchar* size = NULL;
#line 87 "/home/test/core/extensions/web-extensions.vala"
						size = (const gchar*) size_it->data;
#line 2721 "web-extensions.c"
						{
							JsonNode* _tmp7_;
							JsonObject* _tmp8_;
							const gchar* _tmp9_;
							const gchar* _tmp10_;
							gchar* _tmp11_;
#line 88 "/home/test/core/extensions/web-extensions.vala"
							_tmp7_ = node;
#line 88 "/home/test/core/extensions/web-extensions.vala"
							_tmp8_ = json_node_get_object (_tmp7_);
#line 88 "/home/test/core/extensions/web-extensions.vala"
							_tmp9_ = size;
#line 88 "/home/test/core/extensions/web-extensions.vala"
							_tmp10_ = json_object_get_string_member (_tmp8_, _tmp9_);
#line 88 "/home/test/core/extensions/web-extensions.vala"
							_tmp11_ = g_strdup (_tmp10_);
#line 88 "/home/test/core/extensions/web-extensions.vala"
							result = _tmp11_;
#line 88 "/home/test/core/extensions/web-extensions.vala"
							(size_collection == NULL) ? NULL : (size_collection = (g_list_free (size_collection), NULL));
#line 88 "/home/test/core/extensions/web-extensions.vala"
							__vala_JsonNode_free0 (node);
#line 88 "/home/test/core/extensions/web-extensions.vala"
							return result;
#line 2746 "web-extensions.c"
						}
					}
#line 87 "/home/test/core/extensions/web-extensions.vala"
					(size_collection == NULL) ? NULL : (size_collection = (g_list_free (size_collection), NULL));
#line 2751 "web-extensions.c"
				}
			} else {
				JsonNode* _tmp12_;
#line 90 "/home/test/core/extensions/web-extensions.vala"
				_tmp12_ = node;
#line 90 "/home/test/core/extensions/web-extensions.vala"
				if (json_node_get_node_type (_tmp12_) == JSON_NODE_VALUE) {
#line 2759 "web-extensions.c"
					JsonNode* _tmp13_;
					const gchar* _tmp14_;
					gchar* _tmp15_;
#line 91 "/home/test/core/extensions/web-extensions.vala"
					_tmp13_ = node;
#line 91 "/home/test/core/extensions/web-extensions.vala"
					_tmp14_ = json_node_get_string (_tmp13_);
#line 91 "/home/test/core/extensions/web-extensions.vala"
					_tmp15_ = g_strdup (_tmp14_);
#line 91 "/home/test/core/extensions/web-extensions.vala"
					result = _tmp15_;
#line 91 "/home/test/core/extensions/web-extensions.vala"
					__vala_JsonNode_free0 (node);
#line 91 "/home/test/core/extensions/web-extensions.vala"
					return result;
#line 2775 "web-extensions.c"
				}
			}
		}
#line 83 "/home/test/core/extensions/web-extensions.vala"
		__vala_JsonNode_free0 (node);
#line 2781 "web-extensions.c"
	}
#line 95 "/home/test/core/extensions/web-extensions.vala"
	result = NULL;
#line 95 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 2787 "web-extensions.c"
}


static void
_g_object_unref0_ (gpointer var)
{
#line 101 "/home/test/core/extensions/web-extensions.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 2796 "web-extensions.c"
}


WebExtensionExtensionManager*
web_extension_extension_manager_get_default (void)
{
	WebExtensionExtensionManager* result = NULL;
	WebExtensionExtensionManager* _tmp0_;
	WebExtensionExtensionManager* _tmp6_;
	WebExtensionExtensionManager* _tmp7_;
#line 99 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = web_extension_extension_manager__default;
#line 99 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp0_ == NULL) {
#line 2811 "web-extensions.c"
		WebExtensionExtensionManager* _tmp1_;
		WebExtensionExtensionManager* _tmp2_;
		GHashFunc _tmp3_;
		GEqualFunc _tmp4_;
		GHashTable* _tmp5_;
#line 100 "/home/test/core/extensions/web-extensions.vala"
		_tmp1_ = web_extension_extension_manager_new ();
#line 100 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (web_extension_extension_manager__default);
#line 100 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_manager__default = _tmp1_;
#line 101 "/home/test/core/extensions/web-extensions.vala"
		_tmp2_ = web_extension_extension_manager__default;
#line 101 "/home/test/core/extensions/web-extensions.vala"
		_tmp3_ = g_str_hash;
#line 101 "/home/test/core/extensions/web-extensions.vala"
		_tmp4_ = g_str_equal;
#line 101 "/home/test/core/extensions/web-extensions.vala"
		_tmp5_ = g_hash_table_new_full (_tmp3_, _tmp4_, _g_free0_, _g_object_unref0_);
#line 101 "/home/test/core/extensions/web-extensions.vala"
		_g_hash_table_unref0 (_tmp2_->extensions);
#line 101 "/home/test/core/extensions/web-extensions.vala"
		_tmp2_->extensions = _tmp5_;
#line 2835 "web-extensions.c"
	}
#line 103 "/home/test/core/extensions/web-extensions.vala"
	_tmp6_ = web_extension_extension_manager__default;
#line 103 "/home/test/core/extensions/web-extensions.vala"
	_tmp7_ = _g_object_ref0 (_tmp6_);
#line 103 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp7_;
#line 103 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 2845 "web-extensions.c"
}


static void
web_extension_extension_manager_load_from_folder_data_free (gpointer _data)
{
	WebExtensionExtensionManagerLoadFromFolderData* _data_;
	_data_ = _data;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->content);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->folder);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->self);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	g_slice_free (WebExtensionExtensionManagerLoadFromFolderData, _data_);
#line 2862 "web-extensions.c"
}


void
web_extension_extension_manager_load_from_folder (WebExtensionExtensionManager* self,
                                                  WebKitUserContentManager* content,
                                                  GFile* folder,
                                                  GAsyncReadyCallback _callback_,
                                                  gpointer _user_data_)
{
	WebExtensionExtensionManagerLoadFromFolderData* _data_;
	WebExtensionExtensionManager* _tmp0_;
	WebKitUserContentManager* _tmp1_;
	GFile* _tmp2_;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_slice_new0 (WebExtensionExtensionManagerLoadFromFolderData);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	g_task_set_task_data (_data_->_async_result, _data_, web_extension_extension_manager_load_from_folder_data_free);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_data_->self = _tmp0_;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _g_object_ref0 (content);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->content);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_data_->content = _tmp1_;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = _g_object_ref0 (folder);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->folder);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_data_->folder = _tmp2_;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_load_from_folder_co (_data_);
#line 2901 "web-extensions.c"
}


void
web_extension_extension_manager_load_from_folder_finish (WebExtensionExtensionManager* self,
                                                         GAsyncResult* _res_,
                                                         GError** error)
{
	WebExtensionExtensionManagerLoadFromFolderData* _data_;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	if (NULL == _data_) {
#line 66 "/home/test/core/extensions/web-extensions.vala"
		return;
#line 2917 "web-extensions.c"
	}
}


static void
web_extension_extension_manager_load_from_folder_ready (GObject* source_object,
                                                        GAsyncResult* _res_,
                                                        gpointer _user_data_)
{
	WebExtensionExtensionManagerLoadFromFolderData* _data_;
#line 108 "/home/test/core/extensions/web-extensions.vala"
	_data_ = _user_data_;
#line 108 "/home/test/core/extensions/web-extensions.vala"
	_data_->_source_object_ = source_object;
#line 108 "/home/test/core/extensions/web-extensions.vala"
	_data_->_res_ = _res_;
#line 108 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_load_from_folder_co (_data_);
#line 2936 "web-extensions.c"
}


static guint8*
_vala_array_dup1 (guint8* self,
                  int length)
{
#line 134 "/home/test/core/extensions/web-extensions.vala"
	return g_memdup (self, length * sizeof (guint8));
#line 2946 "web-extensions.c"
}


static guint8*
_vala_array_dup2 (guint8* self,
                  int length)
{
#line 135 "/home/test/core/extensions/web-extensions.vala"
	return g_memdup (self, length * sizeof (guint8));
#line 2956 "web-extensions.c"
}


static void
_g_free_gdestroy_notify (void* data)
{
#line 135 "/home/test/core/extensions/web-extensions.vala"
	g_free (data);
#line 2965 "web-extensions.c"
}


static guint8*
_vala_array_dup3 (guint8* self,
                  int length)
{
#line 139 "/home/test/core/extensions/web-extensions.vala"
	return g_memdup (self, length * sizeof (guint8));
#line 2975 "web-extensions.c"
}


static gpointer
_json_object_ref0 (gpointer self)
{
#line 166 "/home/test/core/extensions/web-extensions.vala"
	return self ? json_object_ref (self) : NULL;
#line 2984 "web-extensions.c"
}


static gboolean
web_extension_extension_manager_load_from_folder_co (WebExtensionExtensionManagerLoadFromFolderData* _data_)
{
#line 106 "/home/test/core/extensions/web-extensions.vala"
	switch (_data_->_state_) {
#line 106 "/home/test/core/extensions/web-extensions.vala"
		case 0:
#line 2995 "web-extensions.c"
		goto _state_0;
#line 106 "/home/test/core/extensions/web-extensions.vala"
		case 1:
#line 2999 "web-extensions.c"
		goto _state_1;
#line 106 "/home/test/core/extensions/web-extensions.vala"
		case 2:
#line 3003 "web-extensions.c"
		goto _state_2;
#line 106 "/home/test/core/extensions/web-extensions.vala"
		case 3:
#line 3007 "web-extensions.c"
		goto _state_3;
#line 106 "/home/test/core/extensions/web-extensions.vala"
		case 4:
#line 3011 "web-extensions.c"
		goto _state_4;
#line 106 "/home/test/core/extensions/web-extensions.vala"
		case 5:
#line 3015 "web-extensions.c"
		goto _state_5;
		default:
#line 106 "/home/test/core/extensions/web-extensions.vala"
		g_assert_not_reached ();
#line 3020 "web-extensions.c"
	}
	_state_0:
#line 107 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp0_ = g_file_get_path (_data_->folder);
#line 107 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 107 "/home/test/core/extensions/web-extensions.vala"
	g_debug ("web-extensions.vala:107: Load web extensions from %s", _data_->_tmp1_);
#line 107 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_tmp1_);
#line 108 "/home/test/core/extensions/web-extensions.vala"
	_data_->_state_ = 1;
#line 108 "/home/test/core/extensions/web-extensions.vala"
	g_file_enumerate_children_async (_data_->folder, G_FILE_ATTRIBUTE_STANDARD_NAME, 0, G_PRIORITY_DEFAULT, NULL, web_extension_extension_manager_load_from_folder_ready, _data_);
#line 108 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 3037 "web-extensions.c"
	_state_1:
#line 108 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp2_ = g_file_enumerate_children_finish (_data_->folder, _data_->_res_, &_data_->_inner_error0_);
#line 108 "/home/test/core/extensions/web-extensions.vala"
	_data_->enumerator = _data_->_tmp2_;
#line 108 "/home/test/core/extensions/web-extensions.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 108 "/home/test/core/extensions/web-extensions.vala"
		g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 108 "/home/test/core/extensions/web-extensions.vala"
		g_object_unref (_data_->_async_result);
#line 108 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 3051 "web-extensions.c"
	}
#line 110 "/home/test/core/extensions/web-extensions.vala"
	while (TRUE) {
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp4_ = _data_->enumerator;
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp5_ = g_file_enumerator_next_file (_data_->_tmp4_, NULL, &_data_->_inner_error0_);
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp3_ = _data_->_tmp5_;
#line 110 "/home/test/core/extensions/web-extensions.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 110 "/home/test/core/extensions/web-extensions.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 110 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->info);
#line 110 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->enumerator);
#line 110 "/home/test/core/extensions/web-extensions.vala"
			g_object_unref (_data_->_async_result);
#line 110 "/home/test/core/extensions/web-extensions.vala"
			return FALSE;
#line 3073 "web-extensions.c"
		}
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp6_ = _data_->_tmp3_;
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp3_ = NULL;
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->info);
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->info = _data_->_tmp6_;
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp7_ = _data_->info;
#line 110 "/home/test/core/extensions/web-extensions.vala"
		if (!(_data_->_tmp7_ != NULL)) {
#line 110 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 110 "/home/test/core/extensions/web-extensions.vala"
			break;
#line 3091 "web-extensions.c"
		}
#line 111 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp8_ = _data_->info;
#line 111 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp9_ = g_file_info_get_name (_data_->_tmp8_);
#line 111 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp10_ = g_file_get_child (_data_->folder, _data_->_tmp9_);
#line 111 "/home/test/core/extensions/web-extensions.vala"
		_data_->file = _data_->_tmp10_;
#line 112 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp11_ = _data_->file;
#line 112 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp12_ = g_file_get_basename (_data_->_tmp11_);
#line 112 "/home/test/core/extensions/web-extensions.vala"
		_data_->id = _data_->_tmp12_;
#line 113 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp13_ = midori_core_settings_get_default ();
#line 113 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp14_ = _data_->_tmp13_;
#line 113 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp15_ = _data_->id;
#line 113 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp16_ = !midori_core_settings_get_plugin_enabled (_data_->_tmp14_, _data_->_tmp15_);
#line 113 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->_tmp14_);
#line 113 "/home/test/core/extensions/web-extensions.vala"
		if (_data_->_tmp16_) {
#line 114 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_data_->id);
#line 114 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->file);
#line 114 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 114 "/home/test/core/extensions/web-extensions.vala"
			continue;
#line 3127 "web-extensions.c"
		}
#line 117 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp17_ = _data_->self->extensions;
#line 117 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp18_ = _data_->id;
#line 117 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp19_ = g_hash_table_lookup (_data_->_tmp17_, _data_->_tmp18_);
#line 117 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp20_ = _g_object_ref0 ((WebExtensionExtension*) _data_->_tmp19_);
#line 117 "/home/test/core/extensions/web-extensions.vala"
		_data_->extension = _data_->_tmp20_;
#line 118 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp21_ = _data_->extension;
#line 118 "/home/test/core/extensions/web-extensions.vala"
		if (_data_->_tmp21_ == NULL) {
#line 119 "/home/test/core/extensions/web-extensions.vala"
			_data_->stream = NULL;
#line 120 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp22_ = _data_->file;
#line 120 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp23_ = web_extension_extension_new (_data_->_tmp22_);
#line 120 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->extension);
#line 120 "/home/test/core/extensions/web-extensions.vala"
			_data_->extension = _data_->_tmp23_;
#line 3153 "web-extensions.c"
			{
#line 124 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp24_ = _data_->file;
#line 124 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp25_ = g_file_get_basename (_data_->_tmp24_);
#line 124 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp26_ = _data_->_tmp25_;
#line 124 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp27_ = g_regex_match_simple ("\\.(crx|nex|xpi)", _data_->_tmp26_, G_REGEX_CASELESS, G_REGEX_MATCH_NOTEMPTY);
#line 124 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (_data_->_tmp26_);
#line 124 "/home/test/core/extensions/web-extensions.vala"
				if (_data_->_tmp27_) {
#line 126 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp28_ = archive_read_new ();
#line 126 "/home/test/core/extensions/web-extensions.vala"
					_data_->archive = _data_->_tmp28_;
#line 127 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp29_ = _data_->archive;
#line 127 "/home/test/core/extensions/web-extensions.vala"
					archive_read_support_format_zip (_data_->_tmp29_);
#line 128 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp30_ = _data_->archive;
#line 128 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp31_ = _data_->file;
#line 128 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp32_ = g_file_get_path (_data_->_tmp31_);
#line 128 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp33_ = _data_->_tmp32_;
#line 128 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp34_ = archive_read_open_filename (_data_->_tmp30_, _data_->_tmp33_, (gsize) 10240) == ARCHIVE_OK;
#line 128 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (_data_->_tmp33_);
#line 128 "/home/test/core/extensions/web-extensions.vala"
					if (_data_->_tmp34_) {
#line 130 "/home/test/core/extensions/web-extensions.vala"
						while (TRUE) {
#line 130 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp35_ = _data_->archive;
#line 130 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp36_ = NULL;
#line 130 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp37_ = archive_read_next_header (_data_->_tmp35_, &_data_->_tmp36_);
#line 130 "/home/test/core/extensions/web-extensions.vala"
							_data_->entry = _data_->_tmp36_;
#line 130 "/home/test/core/extensions/web-extensions.vala"
							if (!(_data_->_tmp37_ == ARCHIVE_OK)) {
#line 130 "/home/test/core/extensions/web-extensions.vala"
								break;
#line 3203 "web-extensions.c"
							}
#line 131 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp38_ = _data_->entry;
#line 131 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp39_ = archive_entry_pathname (_data_->_tmp38_);
#line 131 "/home/test/core/extensions/web-extensions.vala"
							if (g_strcmp0 (_data_->_tmp39_, "manifest.json") == 0) {
#line 132 "/home/test/core/extensions/web-extensions.vala"
								_data_->buffer_length1 = 0;
#line 132 "/home/test/core/extensions/web-extensions.vala"
								_data_->_buffer_size_ = 0;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp40_ = _data_->archive;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp41_ = NULL;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp43_ = 0LL;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								archive_read_data_block (_data_->_tmp40_, &_data_->_tmp41_, &_data_->_tmp42_, &_data_->_tmp43_);
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->buffer = (g_free (_data_->buffer), NULL);
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp44_ = (_data_->_tmp41_ != NULL) ? _vala_array_dup1 (_data_->_tmp41_, _data_->_tmp42_) : ((gpointer) _data_->_tmp41_);
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp44__length1 = _data_->_tmp42_;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->buffer = _data_->_tmp44_;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->buffer_length1 = _data_->_tmp44__length1;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->_buffer_size_ = _data_->buffer_length1;
#line 134 "/home/test/core/extensions/web-extensions.vala"
								_data_->offset = _data_->_tmp43_;
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp45_ = _data_->buffer;
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp45__length1 = _data_->buffer_length1;
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp46_ = (_data_->_tmp45_ != NULL) ? _vala_array_dup2 (_data_->_tmp45_, _data_->_tmp45__length1) : ((gpointer) _data_->_tmp45_);
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp46__length1 = _data_->_tmp45__length1;
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp47_ = (GMemoryInputStream*) g_memory_input_stream_new_from_data (_data_->_tmp46_, _data_->_tmp46__length1, _g_free_gdestroy_notify);
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_g_object_unref0 (_data_->stream);
#line 135 "/home/test/core/extensions/web-extensions.vala"
								_data_->stream = (GInputStream*) _data_->_tmp47_;
#line 131 "/home/test/core/extensions/web-extensions.vala"
								_data_->buffer = (g_free (_data_->buffer), NULL);
#line 3253 "web-extensions.c"
							} else {
#line 137 "/home/test/core/extensions/web-extensions.vala"
								_data_->_vala1_buffer_length1 = 0;
#line 137 "/home/test/core/extensions/web-extensions.vala"
								_data_->__vala1_buffer_size_ = 0;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp48_ = _data_->archive;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp49_ = NULL;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp51_ = 0LL;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								archive_read_data_block (_data_->_tmp48_, &_data_->_tmp49_, &_data_->_tmp50_, &_data_->_tmp51_);
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_vala1_buffer = (g_free (_data_->_vala1_buffer), NULL);
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp52_ = (_data_->_tmp49_ != NULL) ? _vala_array_dup3 (_data_->_tmp49_, _data_->_tmp50_) : ((gpointer) _data_->_tmp49_);
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp52__length1 = _data_->_tmp50_;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_vala1_buffer = _data_->_tmp52_;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_vala1_buffer_length1 = _data_->_tmp52__length1;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->__vala1_buffer_size_ = _data_->_vala1_buffer_length1;
#line 139 "/home/test/core/extensions/web-extensions.vala"
								_data_->_vala1_offset = _data_->_tmp51_;
#line 140 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp53_ = _data_->_vala1_buffer;
#line 140 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp53__length1 = _data_->_vala1_buffer_length1;
#line 140 "/home/test/core/extensions/web-extensions.vala"
								if (_data_->_tmp53__length1 > 0) {
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp54_ = _data_->extension;
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp55_ = _data_->entry;
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp56_ = archive_entry_pathname (_data_->_tmp55_);
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp57_ = _data_->_vala1_buffer;
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp57__length1 = _data_->_vala1_buffer_length1;
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp58_ = g_bytes_new (_data_->_tmp57_, _data_->_tmp57__length1);
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp59_ = _data_->_tmp58_;
#line 141 "/home/test/core/extensions/web-extensions.vala"
									web_extension_extension_add_resource (_data_->_tmp54_, _data_->_tmp56_, _data_->_tmp59_);
#line 141 "/home/test/core/extensions/web-extensions.vala"
									_g_bytes_unref0 (_data_->_tmp59_);
#line 3305 "web-extensions.c"
								}
#line 131 "/home/test/core/extensions/web-extensions.vala"
								_data_->_vala1_buffer = (g_free (_data_->_vala1_buffer), NULL);
#line 3309 "web-extensions.c"
							}
						}
#line 146 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp60_ = _data_->stream;
#line 146 "/home/test/core/extensions/web-extensions.vala"
						if (_data_->_tmp60_ == NULL) {
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp61_ = _data_->file;
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp62_ = g_file_get_path (_data_->_tmp61_);
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp63_ = _data_->_tmp62_;
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp64_ = g_strdup_printf ("Failed to open '%s': no manifest.json", _data_->_tmp63_);
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp65_ = _data_->_tmp64_;
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp66_ = g_error_new_literal (G_FILE_ERROR, G_FILE_ERROR_IO, _data_->_tmp65_);
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp67_ = _data_->_tmp66_;
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_g_free0 (_data_->_tmp65_);
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_g_free0 (_data_->_tmp63_);
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_data_->_inner_error0_ = _data_->_tmp67_;
#line 147 "/home/test/core/extensions/web-extensions.vala"
							_archive_read_free0 (_data_->archive);
#line 3338 "web-extensions.c"
							goto __catch0_g_error;
						}
					} else {
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp68_ = _data_->file;
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp69_ = g_file_get_path (_data_->_tmp68_);
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp70_ = _data_->_tmp69_;
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp71_ = _data_->archive;
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp72_ = archive_error_string (_data_->_tmp71_);
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp73_ = g_strdup_printf ("Failed to open '%s': %s", _data_->_tmp70_, _data_->_tmp72_);
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp74_ = _data_->_tmp73_;
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp75_ = g_error_new_literal (G_FILE_ERROR, G_FILE_ERROR_IO, _data_->_tmp74_);
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp76_ = _data_->_tmp75_;
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->_tmp74_);
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->_tmp70_);
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_data_->_inner_error0_ = _data_->_tmp76_;
#line 150 "/home/test/core/extensions/web-extensions.vala"
						_archive_read_free0 (_data_->archive);
#line 3368 "web-extensions.c"
						goto __catch0_g_error;
					}
#line 124 "/home/test/core/extensions/web-extensions.vala"
					_archive_read_free0 (_data_->archive);
#line 3373 "web-extensions.c"
				} else {
#line 154 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp77_ = _data_->file;
#line 154 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp78_ = g_file_get_child (_data_->_tmp77_, "manifest.json");
#line 154 "/home/test/core/extensions/web-extensions.vala"
					_data_->manifest_file = _data_->_tmp78_;
#line 155 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp79_ = _data_->manifest_file;
#line 155 "/home/test/core/extensions/web-extensions.vala"
					if (g_file_query_exists (_data_->_tmp79_, NULL)) {
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp81_ = _data_->manifest_file;
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_data_->_state_ = 2;
#line 156 "/home/test/core/extensions/web-extensions.vala"
						g_file_read_async (_data_->_tmp81_, G_PRIORITY_DEFAULT, NULL, web_extension_extension_manager_load_from_folder_ready, _data_);
#line 156 "/home/test/core/extensions/web-extensions.vala"
						return FALSE;
#line 3393 "web-extensions.c"
						_state_2:
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp82_ = g_file_read_finish (_data_->_tmp81_, _data_->_res_, &_data_->_inner_error0_);
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp80_ = _data_->_tmp82_;
#line 156 "/home/test/core/extensions/web-extensions.vala"
						if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 156 "/home/test/core/extensions/web-extensions.vala"
							_g_object_unref0 (_data_->manifest_file);
#line 3403 "web-extensions.c"
							goto __catch0_g_error;
						}
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp83_ = g_data_input_stream_new ((GInputStream*) _data_->_tmp80_);
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->stream);
#line 156 "/home/test/core/extensions/web-extensions.vala"
						_data_->stream = (GInputStream*) _data_->_tmp83_;
#line 155 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->_tmp80_);
#line 3414 "web-extensions.c"
					} else {
#line 158 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->manifest_file);
#line 158 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->stream);
#line 158 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->extension);
#line 158 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->id);
#line 158 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->file);
#line 158 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->_tmp3_);
#line 158 "/home/test/core/extensions/web-extensions.vala"
						continue;
#line 3430 "web-extensions.c"
					}
#line 124 "/home/test/core/extensions/web-extensions.vala"
					_g_object_unref0 (_data_->manifest_file);
#line 3434 "web-extensions.c"
				}
#line 162 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp84_ = json_parser_new ();
#line 162 "/home/test/core/extensions/web-extensions.vala"
				_data_->json = _data_->_tmp84_;
#line 163 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp85_ = _data_->json;
#line 163 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp86_ = _data_->stream;
#line 163 "/home/test/core/extensions/web-extensions.vala"
				_data_->_state_ = 3;
#line 163 "/home/test/core/extensions/web-extensions.vala"
				json_parser_load_from_stream_async (_data_->_tmp85_, _data_->_tmp86_, NULL, web_extension_extension_manager_load_from_folder_ready, _data_);
#line 163 "/home/test/core/extensions/web-extensions.vala"
				return FALSE;
#line 3450 "web-extensions.c"
				_state_3:
#line 163 "/home/test/core/extensions/web-extensions.vala"
				json_parser_load_from_stream_finish (_data_->_tmp85_, _data_->_res_, &_data_->_inner_error0_);
#line 163 "/home/test/core/extensions/web-extensions.vala"
				if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 163 "/home/test/core/extensions/web-extensions.vala"
					_g_object_unref0 (_data_->json);
#line 3458 "web-extensions.c"
					goto __catch0_g_error;
				}
#line 165 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp87_ = _data_->id;
#line 165 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp88_ = _data_->file;
#line 165 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp89_ = g_file_get_path (_data_->_tmp88_);
#line 165 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp90_ = _data_->_tmp89_;
#line 165 "/home/test/core/extensions/web-extensions.vala"
				g_debug ("web-extensions.vala:165: Loading web extension %s from %s", _data_->_tmp87_, _data_->_tmp90_);
#line 165 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (_data_->_tmp90_);
#line 166 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp91_ = _data_->json;
#line 166 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp92_ = json_parser_get_root (_data_->_tmp91_);
#line 166 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp93_ = json_node_get_object (_data_->_tmp92_);
#line 166 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp94_ = _json_object_ref0 (_data_->_tmp93_);
#line 166 "/home/test/core/extensions/web-extensions.vala"
				_data_->manifest = _data_->_tmp94_;
#line 167 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp95_ = _data_->manifest;
#line 167 "/home/test/core/extensions/web-extensions.vala"
				if (json_object_has_member (_data_->_tmp95_, "name")) {
#line 168 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp96_ = _data_->extension;
#line 168 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp97_ = _data_->manifest;
#line 168 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp98_ = json_object_get_string_member (_data_->_tmp97_, "name");
#line 168 "/home/test/core/extensions/web-extensions.vala"
					web_extension_extension_set_name (_data_->_tmp96_, _data_->_tmp98_);
#line 3495 "web-extensions.c"
				}
#line 171 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp99_ = _data_->manifest;
#line 171 "/home/test/core/extensions/web-extensions.vala"
				if (json_object_has_member (_data_->_tmp99_, "background")) {
#line 172 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp100_ = _data_->manifest;
#line 172 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp101_ = json_object_get_object_member (_data_->_tmp100_, "background");
#line 172 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp102_ = _json_object_ref0 (_data_->_tmp101_);
#line 172 "/home/test/core/extensions/web-extensions.vala"
					_data_->background = _data_->_tmp102_;
#line 173 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp103_ = _data_->background;
#line 173 "/home/test/core/extensions/web-extensions.vala"
					if (_data_->_tmp103_ != NULL) {
#line 174 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp104_ = _data_->background;
#line 174 "/home/test/core/extensions/web-extensions.vala"
						if (json_object_has_member (_data_->_tmp104_, "page")) {
#line 175 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp105_ = _data_->extension;
#line 175 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp106_ = _data_->background;
#line 175 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp107_ = json_object_get_string_member (_data_->_tmp106_, "page");
#line 175 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp108_ = g_strdup (_data_->_tmp107_);
#line 175 "/home/test/core/extensions/web-extensions.vala"
							web_extension_extension_set_background_page (_data_->_tmp105_, _data_->_tmp108_);
#line 3527 "web-extensions.c"
						}
#line 178 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp109_ = _data_->background;
#line 178 "/home/test/core/extensions/web-extensions.vala"
						if (json_object_has_member (_data_->_tmp109_, "scripts")) {
#line 179 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp110_ = _data_->background;
#line 179 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp111_ = json_object_get_array_member (_data_->_tmp110_, "scripts");
#line 179 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp112_ = json_array_get_elements (_data_->_tmp111_);
#line 3539 "web-extensions.c"
							{
#line 179 "/home/test/core/extensions/web-extensions.vala"
								_data_->element_collection = _data_->_tmp112_;
#line 179 "/home/test/core/extensions/web-extensions.vala"
								for (_data_->element_it = _data_->element_collection; _data_->element_it != NULL; _data_->element_it = _data_->element_it->next) {
#line 179 "/home/test/core/extensions/web-extensions.vala"
									_data_->element = (JsonNode*) _data_->element_it->data;
#line 3547 "web-extensions.c"
									{
#line 180 "/home/test/core/extensions/web-extensions.vala"
										_data_->_tmp113_ = _data_->extension;
#line 180 "/home/test/core/extensions/web-extensions.vala"
										_data_->_tmp114_ = web_extension_extension_get_background_scripts (_data_->_tmp113_);
#line 180 "/home/test/core/extensions/web-extensions.vala"
										_data_->_tmp115_ = _data_->_tmp114_;
#line 180 "/home/test/core/extensions/web-extensions.vala"
										_data_->_tmp116_ = _data_->element;
#line 180 "/home/test/core/extensions/web-extensions.vala"
										_data_->_tmp117_ = json_node_get_string (_data_->_tmp116_);
#line 180 "/home/test/core/extensions/web-extensions.vala"
										_data_->_tmp118_ = g_strdup (_data_->_tmp117_);
#line 180 "/home/test/core/extensions/web-extensions.vala"
										web_extension_extension_set_background_scripts (_data_->_tmp113_, g_list_append (_data_->_tmp115_, _data_->_tmp118_));
#line 3563 "web-extensions.c"
									}
								}
#line 179 "/home/test/core/extensions/web-extensions.vala"
								(_data_->element_collection == NULL) ? NULL : (_data_->element_collection = (g_list_free (_data_->element_collection), NULL));
#line 3568 "web-extensions.c"
							}
						}
					}
#line 171 "/home/test/core/extensions/web-extensions.vala"
					_json_object_unref0 (_data_->background);
#line 3574 "web-extensions.c"
				}
#line 186 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp119_ = _data_->manifest;
#line 186 "/home/test/core/extensions/web-extensions.vala"
				if (json_object_has_member (_data_->_tmp119_, "browser_action")) {
#line 187 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp120_ = _data_->manifest;
#line 187 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp121_ = json_object_get_object_member (_data_->_tmp120_, "browser_action");
#line 187 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp122_ = _json_object_ref0 (_data_->_tmp121_);
#line 187 "/home/test/core/extensions/web-extensions.vala"
					_data_->action = _data_->_tmp122_;
#line 188 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp123_ = _data_->action;
#line 188 "/home/test/core/extensions/web-extensions.vala"
					if (_data_->_tmp123_ != NULL) {
#line 191 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp125_ = _data_->action;
#line 191 "/home/test/core/extensions/web-extensions.vala"
						if (json_object_has_member (_data_->_tmp125_, "default_title")) {
#line 191 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp126_ = _data_->action;
#line 191 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp127_ = json_object_get_string_member (_data_->_tmp126_, "default_title");
#line 191 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp124_ = _data_->_tmp127_;
#line 3602 "web-extensions.c"
						} else {
#line 191 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp124_ = NULL;
#line 3606 "web-extensions.c"
						}
#line 192 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp129_ = _data_->action;
#line 192 "/home/test/core/extensions/web-extensions.vala"
						if (json_object_has_member (_data_->_tmp129_, "default_popup")) {
#line 192 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp130_ = _data_->action;
#line 192 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp131_ = json_object_get_string_member (_data_->_tmp130_, "default_popup");
#line 192 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp128_ = _data_->_tmp131_;
#line 3618 "web-extensions.c"
						} else {
#line 192 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp128_ = NULL;
#line 3622 "web-extensions.c"
						}
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp132_ = _data_->extension;
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp133_ = _data_->action;
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp134_ = web_extension_extension_manager_pick_default_icon (_data_->self, _data_->_tmp133_);
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp135_ = _data_->_tmp134_;
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp136_ = web_extension_action_new (_data_->_tmp135_, _data_->_tmp124_, _data_->_tmp128_);
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp137_ = _data_->_tmp136_;
#line 189 "/home/test/core/extensions/web-extensions.vala"
						web_extension_extension_set_browser_action (_data_->_tmp132_, _data_->_tmp137_);
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->_tmp137_);
#line 189 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->_tmp135_);
#line 3642 "web-extensions.c"
					}
#line 186 "/home/test/core/extensions/web-extensions.vala"
					_json_object_unref0 (_data_->action);
#line 3646 "web-extensions.c"
				}
#line 196 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp138_ = _data_->manifest;
#line 196 "/home/test/core/extensions/web-extensions.vala"
				if (json_object_has_member (_data_->_tmp138_, "sidebar_action")) {
#line 197 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp140_ = _data_->manifest;
#line 197 "/home/test/core/extensions/web-extensions.vala"
					if (json_object_has_member (_data_->_tmp140_, "sidebar_action")) {
#line 197 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp141_ = _data_->manifest;
#line 197 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp142_ = json_object_get_object_member (_data_->_tmp141_, "sidebar_action");
#line 197 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp139_ = _data_->_tmp142_;
#line 3662 "web-extensions.c"
					} else {
#line 197 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp139_ = NULL;
#line 3666 "web-extensions.c"
					}
#line 197 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp143_ = _json_object_ref0 (_data_->_tmp139_);
#line 197 "/home/test/core/extensions/web-extensions.vala"
					_data_->sidebar = _data_->_tmp143_;
#line 198 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp144_ = _data_->sidebar;
#line 198 "/home/test/core/extensions/web-extensions.vala"
					if (_data_->_tmp144_ != NULL) {
#line 201 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp146_ = _data_->sidebar;
#line 201 "/home/test/core/extensions/web-extensions.vala"
						if (json_object_has_member (_data_->_tmp146_, "default_title")) {
#line 201 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp147_ = _data_->sidebar;
#line 201 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp148_ = json_object_get_string_member (_data_->_tmp147_, "default_title");
#line 201 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp145_ = _data_->_tmp148_;
#line 3686 "web-extensions.c"
						} else {
#line 201 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp145_ = NULL;
#line 3690 "web-extensions.c"
						}
#line 202 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp150_ = _data_->sidebar;
#line 202 "/home/test/core/extensions/web-extensions.vala"
						if (json_object_has_member (_data_->_tmp150_, "default_panel")) {
#line 202 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp151_ = _data_->sidebar;
#line 202 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp152_ = json_object_get_string_member (_data_->_tmp151_, "default_panel");
#line 202 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp149_ = _data_->_tmp152_;
#line 3702 "web-extensions.c"
						} else {
#line 202 "/home/test/core/extensions/web-extensions.vala"
							_data_->_tmp149_ = NULL;
#line 3706 "web-extensions.c"
						}
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp153_ = _data_->extension;
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp154_ = _data_->sidebar;
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp155_ = web_extension_extension_manager_pick_default_icon (_data_->self, _data_->_tmp154_);
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp156_ = _data_->_tmp155_;
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp157_ = web_extension_action_new (_data_->_tmp156_, _data_->_tmp145_, _data_->_tmp149_);
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp158_ = _data_->_tmp157_;
#line 199 "/home/test/core/extensions/web-extensions.vala"
						web_extension_extension_set_sidebar (_data_->_tmp153_, _data_->_tmp158_);
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->_tmp158_);
#line 199 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->_tmp156_);
#line 3726 "web-extensions.c"
					}
#line 196 "/home/test/core/extensions/web-extensions.vala"
					_json_object_unref0 (_data_->sidebar);
#line 3730 "web-extensions.c"
				}
#line 206 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp159_ = _data_->manifest;
#line 206 "/home/test/core/extensions/web-extensions.vala"
				if (json_object_has_member (_data_->_tmp159_, "content_scripts")) {
#line 207 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp160_ = _data_->manifest;
#line 207 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp161_ = json_object_get_array_member (_data_->_tmp160_, "content_scripts");
#line 207 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp162_ = json_array_get_elements (_data_->_tmp161_);
#line 3742 "web-extensions.c"
					{
#line 207 "/home/test/core/extensions/web-extensions.vala"
						_data_->_vala1_element_collection = _data_->_tmp162_;
#line 207 "/home/test/core/extensions/web-extensions.vala"
						for (_data_->_vala1_element_it = _data_->_vala1_element_collection; _data_->_vala1_element_it != NULL; _data_->_vala1_element_it = _data_->_vala1_element_it->next) {
#line 207 "/home/test/core/extensions/web-extensions.vala"
							_data_->_vala1_element = (JsonNode*) _data_->_vala1_element_it->data;
#line 3750 "web-extensions.c"
							{
#line 208 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp163_ = _data_->_vala1_element;
#line 208 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp164_ = json_node_get_object (_data_->_tmp163_);
#line 208 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp165_ = _json_object_ref0 (_data_->_tmp164_);
#line 208 "/home/test/core/extensions/web-extensions.vala"
								_data_->content_script = _data_->_tmp165_;
#line 209 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp166_ = _data_->content_script;
#line 209 "/home/test/core/extensions/web-extensions.vala"
								if (json_object_has_member (_data_->_tmp166_, "js")) {
#line 210 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp167_ = _data_->content_script;
#line 210 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp168_ = json_object_get_array_member (_data_->_tmp167_, "js");
#line 210 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp169_ = json_array_get_elements (_data_->_tmp168_);
#line 3770 "web-extensions.c"
									{
#line 210 "/home/test/core/extensions/web-extensions.vala"
										_data_->js_collection = _data_->_tmp169_;
#line 210 "/home/test/core/extensions/web-extensions.vala"
										for (_data_->js_it = _data_->js_collection; _data_->js_it != NULL; _data_->js_it = _data_->js_it->next) {
#line 210 "/home/test/core/extensions/web-extensions.vala"
											_data_->js = (JsonNode*) _data_->js_it->data;
#line 3778 "web-extensions.c"
											{
#line 211 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp170_ = _data_->extension;
#line 211 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp171_ = web_extension_extension_get_content_scripts (_data_->_tmp170_);
#line 211 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp172_ = _data_->_tmp171_;
#line 211 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp173_ = _data_->js;
#line 211 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp174_ = json_node_get_string (_data_->_tmp173_);
#line 211 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp175_ = g_strdup (_data_->_tmp174_);
#line 211 "/home/test/core/extensions/web-extensions.vala"
												web_extension_extension_set_content_scripts (_data_->_tmp170_, g_list_append (_data_->_tmp172_, _data_->_tmp175_));
#line 3794 "web-extensions.c"
											}
										}
#line 210 "/home/test/core/extensions/web-extensions.vala"
										(_data_->js_collection == NULL) ? NULL : (_data_->js_collection = (g_list_free (_data_->js_collection), NULL));
#line 3799 "web-extensions.c"
									}
								}
#line 215 "/home/test/core/extensions/web-extensions.vala"
								_data_->_tmp176_ = _data_->content_script;
#line 215 "/home/test/core/extensions/web-extensions.vala"
								if (json_object_has_member (_data_->_tmp176_, "css")) {
#line 216 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp177_ = _data_->content_script;
#line 216 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp178_ = json_object_get_array_member (_data_->_tmp177_, "css");
#line 216 "/home/test/core/extensions/web-extensions.vala"
									_data_->_tmp179_ = json_array_get_elements (_data_->_tmp178_);
#line 3812 "web-extensions.c"
									{
#line 216 "/home/test/core/extensions/web-extensions.vala"
										_data_->css_collection = _data_->_tmp179_;
#line 216 "/home/test/core/extensions/web-extensions.vala"
										for (_data_->css_it = _data_->css_collection; _data_->css_it != NULL; _data_->css_it = _data_->css_it->next) {
#line 216 "/home/test/core/extensions/web-extensions.vala"
											_data_->css = (JsonNode*) _data_->css_it->data;
#line 3820 "web-extensions.c"
											{
#line 217 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp180_ = _data_->extension;
#line 217 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp181_ = web_extension_extension_get_content_styles (_data_->_tmp180_);
#line 217 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp182_ = _data_->_tmp181_;
#line 217 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp183_ = _data_->css;
#line 217 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp184_ = json_node_get_string (_data_->_tmp183_);
#line 217 "/home/test/core/extensions/web-extensions.vala"
												_data_->_tmp185_ = g_strdup (_data_->_tmp184_);
#line 217 "/home/test/core/extensions/web-extensions.vala"
												web_extension_extension_set_content_styles (_data_->_tmp180_, g_list_append (_data_->_tmp182_, _data_->_tmp185_));
#line 3836 "web-extensions.c"
											}
										}
#line 216 "/home/test/core/extensions/web-extensions.vala"
										(_data_->css_collection == NULL) ? NULL : (_data_->css_collection = (g_list_free (_data_->css_collection), NULL));
#line 3841 "web-extensions.c"
									}
								}
#line 207 "/home/test/core/extensions/web-extensions.vala"
								_json_object_unref0 (_data_->content_script);
#line 3846 "web-extensions.c"
							}
						}
#line 207 "/home/test/core/extensions/web-extensions.vala"
						(_data_->_vala1_element_collection == NULL) ? NULL : (_data_->_vala1_element_collection = (g_list_free (_data_->_vala1_element_collection), NULL));
#line 3851 "web-extensions.c"
					}
				}
#line 223 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp186_ = _data_->self->extensions;
#line 223 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp187_ = _data_->id;
#line 223 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp188_ = g_strdup (_data_->_tmp187_);
#line 223 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp189_ = _data_->extension;
#line 223 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp190_ = _g_object_ref0 (_data_->_tmp189_);
#line 223 "/home/test/core/extensions/web-extensions.vala"
				g_hash_table_insert (_data_->_tmp186_, _data_->_tmp188_, _data_->_tmp190_);
#line 224 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp191_ = _data_->extension;
#line 224 "/home/test/core/extensions/web-extensions.vala"
				g_signal_emit (_data_->self, web_extension_extension_manager_signals[WEB_EXTENSION_EXTENSION_MANAGER_EXTENSION_ADDED_SIGNAL], 0, (GObject*) _data_->_tmp191_);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_json_object_unref0 (_data_->manifest);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->json);
#line 3874 "web-extensions.c"
			}
			goto __finally0;
			__catch0_g_error:
			{
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_data_->_error_ = _data_->_inner_error0_;
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_data_->_inner_error0_ = NULL;
#line 226 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp192_ = _data_->extension;
#line 226 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp193_ = web_extension_extension_get_name (_data_->_tmp192_);
#line 226 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp194_ = _data_->_tmp193_;
#line 226 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp195_ = _data_->_error_;
#line 226 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp196_ = _data_->_tmp195_->message;
#line 226 "/home/test/core/extensions/web-extensions.vala"
				g_warning ("web-extensions.vala:226: Failed to load extension '%s': %s\n", _data_->_tmp194_, _data_->_tmp196_);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_error_free0 (_data_->_error_);
#line 3897 "web-extensions.c"
			}
			__finally0:
#line 122 "/home/test/core/extensions/web-extensions.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 122 "/home/test/core/extensions/web-extensions.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->stream);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->extension);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (_data_->id);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->file);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->_tmp3_);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->info);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				_g_object_unref0 (_data_->enumerator);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				g_object_unref (_data_->_async_result);
#line 122 "/home/test/core/extensions/web-extensions.vala"
				return FALSE;
#line 3922 "web-extensions.c"
			}
#line 118 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->stream);
#line 3926 "web-extensions.c"
		}
#line 230 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp197_ = _data_->extension;
#line 230 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp198_ = web_extension_extension_get_content_scripts (_data_->_tmp197_);
#line 230 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp199_ = _data_->_tmp198_;
#line 3934 "web-extensions.c"
		{
#line 230 "/home/test/core/extensions/web-extensions.vala"
			_data_->filename_collection = _data_->_tmp199_;
#line 230 "/home/test/core/extensions/web-extensions.vala"
			for (_data_->filename_it = _data_->filename_collection; _data_->filename_it != NULL; _data_->filename_it = _data_->filename_it->next) {
#line 230 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp200_ = g_strdup ((const gchar*) _data_->filename_it->data);
#line 230 "/home/test/core/extensions/web-extensions.vala"
				_data_->filename = _data_->_tmp200_;
#line 3944 "web-extensions.c"
				{
					{
#line 232 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp201_ = _data_->extension;
#line 232 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp202_ = _data_->filename;
#line 232 "/home/test/core/extensions/web-extensions.vala"
						_data_->_state_ = 4;
#line 232 "/home/test/core/extensions/web-extensions.vala"
						web_extension_extension_get_resource (_data_->_tmp201_, _data_->_tmp202_, web_extension_extension_manager_load_from_folder_ready, _data_);
#line 232 "/home/test/core/extensions/web-extensions.vala"
						return FALSE;
#line 3957 "web-extensions.c"
						_state_4:
#line 232 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp203_ = web_extension_extension_get_resource_finish (_data_->_tmp201_, _data_->_res_, &_data_->_inner_error0_);
#line 232 "/home/test/core/extensions/web-extensions.vala"
						_data_->script = _data_->_tmp203_;
#line 232 "/home/test/core/extensions/web-extensions.vala"
						if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 3965 "web-extensions.c"
							goto __catch1_g_error;
						}
#line 233 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp204_ = _data_->script;
#line 233 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp205_ = 0;
#line 233 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp206_ = g_bytes_get_data (_data_->_tmp204_, &_data_->_tmp205_);
#line 233 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp207_ = webkit_user_script_new ((const gchar*) _data_->_tmp206_, WEBKIT_USER_CONTENT_INJECT_TOP_FRAME, WEBKIT_USER_SCRIPT_INJECT_AT_DOCUMENT_END, NULL, NULL);
#line 233 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp208_ = _data_->_tmp207_;
#line 233 "/home/test/core/extensions/web-extensions.vala"
						webkit_user_content_manager_add_script (_data_->content, _data_->_tmp208_);
#line 233 "/home/test/core/extensions/web-extensions.vala"
						_webkit_user_script_unref0 (_data_->_tmp208_);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_bytes_unref0 (_data_->script);
#line 3984 "web-extensions.c"
					}
					goto __finally1;
					__catch1_g_error:
					{
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_data_->_vala1__error_ = _data_->_inner_error0_;
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_data_->_inner_error0_ = NULL;
#line 238 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp209_ = _data_->extension;
#line 238 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp210_ = web_extension_extension_get_name (_data_->_tmp209_);
#line 238 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp211_ = _data_->_tmp210_;
#line 238 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp212_ = _data_->filename;
#line 238 "/home/test/core/extensions/web-extensions.vala"
						g_warning ("web-extensions.vala:238: Failed to inject content script for '%s': %s", _data_->_tmp211_, _data_->_tmp212_);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_error_free0 (_data_->_vala1__error_);
#line 4005 "web-extensions.c"
					}
					__finally1:
#line 231 "/home/test/core/extensions/web-extensions.vala"
					if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 231 "/home/test/core/extensions/web-extensions.vala"
						g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->filename);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->extension);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->id);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->file);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->_tmp3_);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->info);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->enumerator);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						g_object_unref (_data_->_async_result);
#line 231 "/home/test/core/extensions/web-extensions.vala"
						return FALSE;
#line 4030 "web-extensions.c"
					}
#line 230 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (_data_->filename);
#line 4034 "web-extensions.c"
				}
			}
		}
#line 241 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp213_ = _data_->extension;
#line 241 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp214_ = web_extension_extension_get_content_styles (_data_->_tmp213_);
#line 241 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp215_ = _data_->_tmp214_;
#line 4044 "web-extensions.c"
		{
#line 241 "/home/test/core/extensions/web-extensions.vala"
			_data_->_vala1_filename_collection = _data_->_tmp215_;
#line 241 "/home/test/core/extensions/web-extensions.vala"
			for (_data_->_vala1_filename_it = _data_->_vala1_filename_collection; _data_->_vala1_filename_it != NULL; _data_->_vala1_filename_it = _data_->_vala1_filename_it->next) {
#line 241 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp216_ = g_strdup ((const gchar*) _data_->_vala1_filename_it->data);
#line 241 "/home/test/core/extensions/web-extensions.vala"
				_data_->_vala1_filename = _data_->_tmp216_;
#line 4054 "web-extensions.c"
				{
					{
#line 243 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp217_ = _data_->extension;
#line 243 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp218_ = _data_->_vala1_filename;
#line 243 "/home/test/core/extensions/web-extensions.vala"
						_data_->_state_ = 5;
#line 243 "/home/test/core/extensions/web-extensions.vala"
						web_extension_extension_get_resource (_data_->_tmp217_, _data_->_tmp218_, web_extension_extension_manager_load_from_folder_ready, _data_);
#line 243 "/home/test/core/extensions/web-extensions.vala"
						return FALSE;
#line 4067 "web-extensions.c"
						_state_5:
#line 243 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp219_ = web_extension_extension_get_resource_finish (_data_->_tmp217_, _data_->_res_, &_data_->_inner_error0_);
#line 243 "/home/test/core/extensions/web-extensions.vala"
						_data_->stylesheet = _data_->_tmp219_;
#line 243 "/home/test/core/extensions/web-extensions.vala"
						if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 4075 "web-extensions.c"
							goto __catch2_g_error;
						}
#line 244 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp220_ = _data_->stylesheet;
#line 244 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp221_ = 0;
#line 244 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp222_ = g_bytes_get_data (_data_->_tmp220_, &_data_->_tmp221_);
#line 244 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp223_ = webkit_user_style_sheet_new ((const gchar*) _data_->_tmp222_, WEBKIT_USER_CONTENT_INJECT_TOP_FRAME, WEBKIT_USER_STYLE_LEVEL_USER, NULL, NULL);
#line 244 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp224_ = _data_->_tmp223_;
#line 244 "/home/test/core/extensions/web-extensions.vala"
						webkit_user_content_manager_add_style_sheet (_data_->content, _data_->_tmp224_);
#line 244 "/home/test/core/extensions/web-extensions.vala"
						_webkit_user_style_sheet_unref0 (_data_->_tmp224_);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_bytes_unref0 (_data_->stylesheet);
#line 4094 "web-extensions.c"
					}
					goto __finally2;
					__catch2_g_error:
					{
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_data_->_vala2__error_ = _data_->_inner_error0_;
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_data_->_inner_error0_ = NULL;
#line 249 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp225_ = _data_->extension;
#line 249 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp226_ = web_extension_extension_get_name (_data_->_tmp225_);
#line 249 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp227_ = _data_->_tmp226_;
#line 249 "/home/test/core/extensions/web-extensions.vala"
						_data_->_tmp228_ = _data_->_vala1_filename;
#line 249 "/home/test/core/extensions/web-extensions.vala"
						g_warning ("web-extensions.vala:249: Failed to inject content stylesheet for '%s':" \
" %s", _data_->_tmp227_, _data_->_tmp228_);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_error_free0 (_data_->_vala2__error_);
#line 4115 "web-extensions.c"
					}
					__finally2:
#line 242 "/home/test/core/extensions/web-extensions.vala"
					if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 242 "/home/test/core/extensions/web-extensions.vala"
						g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->_vala1_filename);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->extension);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_free0 (_data_->id);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->file);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->_tmp3_);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->info);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						_g_object_unref0 (_data_->enumerator);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						g_object_unref (_data_->_async_result);
#line 242 "/home/test/core/extensions/web-extensions.vala"
						return FALSE;
#line 4140 "web-extensions.c"
					}
#line 241 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (_data_->_vala1_filename);
#line 4144 "web-extensions.c"
				}
			}
		}
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->extension);
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->id);
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->file);
#line 110 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->_tmp3_);
#line 4156 "web-extensions.c"
	}
#line 106 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->info);
#line 106 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->enumerator);
#line 106 "/home/test/core/extensions/web-extensions.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 106 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_state_ != 0) {
#line 106 "/home/test/core/extensions/web-extensions.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 106 "/home/test/core/extensions/web-extensions.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 4170 "web-extensions.c"
		}
	}
#line 106 "/home/test/core/extensions/web-extensions.vala"
	g_object_unref (_data_->_async_result);
#line 106 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 4177 "web-extensions.c"
}


static void
web_extension_extension_manager_web_extension_message_received (WebExtensionExtensionManager* self,
                                                                WebKitWebView* web_view,
                                                                WebKitJavascriptResult* _result_)
{
	struct OpaqueJSContext* context = NULL;
	struct OpaqueJSContext* _tmp0_;
	const struct OpaqueJSValue* value = NULL;
	const struct OpaqueJSValue* _tmp1_;
	const struct OpaqueJSValue* _tmp2_;
	struct OpaqueJSContext* _tmp3_;
#line 258 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 258 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (web_view != NULL);
#line 258 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (_result_ != NULL);
#line 259 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = webkit_javascript_result_get_global_context (_result_);
#line 259 "/home/test/core/extensions/web-extensions.vala"
	context = _tmp0_;
#line 260 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = webkit_javascript_result_get_value (_result_);
#line 260 "/home/test/core/extensions/web-extensions.vala"
	value = _tmp1_;
#line 261 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = value;
#line 261 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = context;
#line 261 "/home/test/core/extensions/web-extensions.vala"
	if (JSValueIsObject ((const struct OpaqueJSContext*) _tmp3_, _tmp2_)) {
#line 4212 "web-extensions.c"
		struct OpaqueJSValue* object = NULL;
		const struct OpaqueJSValue* _tmp4_;
		struct OpaqueJSContext* _tmp5_;
		struct OpaqueJSValue* _tmp6_;
		gchar* fn = NULL;
		struct OpaqueJSContext* _tmp7_;
		struct OpaqueJSValue* _tmp8_;
		struct OpaqueJSContext* _tmp9_;
		struct OpaqueJSString* _tmp10_;
		struct OpaqueJSString* _tmp11_;
		const struct OpaqueJSValue* _tmp12_;
		const struct OpaqueJSValue* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		gboolean _tmp16_ = FALSE;
		const gchar* _tmp17_;
#line 262 "/home/test/core/extensions/web-extensions.vala"
		_tmp4_ = value;
#line 262 "/home/test/core/extensions/web-extensions.vala"
		_tmp5_ = context;
#line 262 "/home/test/core/extensions/web-extensions.vala"
		_tmp6_ = JSValueToObject ((const struct OpaqueJSContext*) _tmp5_, _tmp4_, NULL);
#line 262 "/home/test/core/extensions/web-extensions.vala"
		object = _tmp6_;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp7_ = context;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp8_ = object;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp9_ = context;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp10_ = JSStringCreateWithUTF8CString ("fn");
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp11_ = _tmp10_;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp12_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp9_, _tmp8_, _tmp11_, NULL);
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp13_ = _tmp12_;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp14_ = web_extension_js_to_string (_tmp7_, _tmp13_);
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_tmp15_ = _tmp14_;
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_0 (_tmp13_);
#line 263 "/home/test/core/extensions/web-extensions.vala"
		_JSStringRelease0 (_tmp11_);
#line 263 "/home/test/core/extensions/web-extensions.vala"
		fn = _tmp15_;
#line 264 "/home/test/core/extensions/web-extensions.vala"
		_tmp17_ = fn;
#line 264 "/home/test/core/extensions/web-extensions.vala"
		if (_tmp17_ != NULL) {
#line 4265 "web-extensions.c"
			const gchar* _tmp18_;
#line 264 "/home/test/core/extensions/web-extensions.vala"
			_tmp18_ = fn;
#line 264 "/home/test/core/extensions/web-extensions.vala"
			_tmp16_ = g_str_has_prefix (_tmp18_, "tabs.create");
#line 4271 "web-extensions.c"
		} else {
#line 264 "/home/test/core/extensions/web-extensions.vala"
			_tmp16_ = FALSE;
#line 4275 "web-extensions.c"
		}
#line 264 "/home/test/core/extensions/web-extensions.vala"
		if (_tmp16_) {
#line 4279 "web-extensions.c"
			struct OpaqueJSValue* args = NULL;
			struct OpaqueJSValue* _tmp19_;
			struct OpaqueJSContext* _tmp20_;
			struct OpaqueJSString* _tmp21_;
			struct OpaqueJSString* _tmp22_;
			const struct OpaqueJSValue* _tmp23_;
			const struct OpaqueJSValue* _tmp24_;
			struct OpaqueJSContext* _tmp25_;
			struct OpaqueJSValue* _tmp26_;
			struct OpaqueJSValue* _tmp27_;
			gchar* url = NULL;
			struct OpaqueJSContext* _tmp28_;
			struct OpaqueJSValue* _tmp29_;
			struct OpaqueJSContext* _tmp30_;
			struct OpaqueJSString* _tmp31_;
			struct OpaqueJSString* _tmp32_;
			const struct OpaqueJSValue* _tmp33_;
			const struct OpaqueJSValue* _tmp34_;
			gchar* _tmp35_;
			gchar* _tmp36_;
			MidoriTab* tab = NULL;
			MidoriBrowser* _tmp37_;
			MidoriBrowser* _tmp38_;
			MidoriTab* _tmp39_;
			MidoriTab* _tmp40_;
			WebKitWebContext* _tmp41_;
			WebKitWebContext* _tmp42_;
			WebKitWebContext* _tmp43_;
			const gchar* _tmp44_;
			MidoriTab* _tmp45_;
			MidoriTab* _tmp46_;
			MidoriBrowser* _tmp47_;
			MidoriBrowser* _tmp48_;
			MidoriTab* _tmp49_;
			gdouble promise = 0.0;
			struct OpaqueJSValue* _tmp50_;
			struct OpaqueJSContext* _tmp51_;
			struct OpaqueJSString* _tmp52_;
			struct OpaqueJSString* _tmp53_;
			const struct OpaqueJSValue* _tmp54_;
			const struct OpaqueJSValue* _tmp55_;
			struct OpaqueJSContext* _tmp56_;
			gdouble _tmp57_;
			gdouble _tmp58_;
			gchar* _tmp59_;
			gchar* _tmp60_;
			gdouble _tmp61_;
			MidoriTab* _tmp62_;
			gchar* _tmp63_;
			gchar* _tmp64_;
			gchar* _tmp65_;
			gchar* _tmp66_;
			gchar* _tmp67_;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp19_ = object;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp20_ = context;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp21_ = JSStringCreateWithUTF8CString ("args");
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp22_ = _tmp21_;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp23_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp20_, _tmp19_, _tmp22_, NULL);
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp24_ = _tmp23_;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp25_ = context;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp26_ = JSValueToObject ((const struct OpaqueJSContext*) _tmp25_, _tmp24_, NULL);
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_tmp27_ = _tmp26_;
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_0 (_tmp24_);
#line 265 "/home/test/core/extensions/web-extensions.vala"
			_JSStringRelease0 (_tmp22_);
#line 265 "/home/test/core/extensions/web-extensions.vala"
			args = _tmp27_;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp28_ = context;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp29_ = args;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp30_ = context;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp31_ = JSStringCreateWithUTF8CString ("url");
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp32_ = _tmp31_;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp33_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp30_, _tmp29_, _tmp32_, NULL);
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp34_ = _tmp33_;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp35_ = web_extension_js_to_string (_tmp28_, _tmp34_);
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_tmp36_ = _tmp35_;
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_0 (_tmp34_);
#line 266 "/home/test/core/extensions/web-extensions.vala"
			_JSStringRelease0 (_tmp32_);
#line 266 "/home/test/core/extensions/web-extensions.vala"
			url = _tmp36_;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp37_ = web_extension_extension_manager_get_browser (self);
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp38_ = _tmp37_;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp39_ = midori_browser_get_tab (_tmp38_);
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp40_ = _tmp39_;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			g_object_get ((WebKitWebView*) _tmp40_, "web-context", &_tmp41_, NULL);
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp42_ = _tmp41_;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp43_ = _tmp42_;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp44_ = url;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp45_ = midori_tab_new (NULL, _tmp43_, _tmp44_, NULL);
#line 267 "/home/test/core/extensions/web-extensions.vala"
			g_object_ref_sink (_tmp45_);
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_tmp46_ = _tmp45_;
#line 267 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_tmp43_);
#line 267 "/home/test/core/extensions/web-extensions.vala"
			tab = _tmp46_;
#line 268 "/home/test/core/extensions/web-extensions.vala"
			_tmp47_ = web_extension_extension_manager_get_browser (self);
#line 268 "/home/test/core/extensions/web-extensions.vala"
			_tmp48_ = _tmp47_;
#line 268 "/home/test/core/extensions/web-extensions.vala"
			_tmp49_ = tab;
#line 268 "/home/test/core/extensions/web-extensions.vala"
			midori_browser_add (_tmp48_, _tmp49_);
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp50_ = object;
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp51_ = context;
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp52_ = JSStringCreateWithUTF8CString ("promise");
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp53_ = _tmp52_;
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp54_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp51_, _tmp50_, _tmp53_, NULL);
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp55_ = _tmp54_;
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp56_ = context;
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_tmp57_ = JSValueToNumber ((const struct OpaqueJSContext*) _tmp56_, _tmp55_, NULL);
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_0 (_tmp55_);
#line 269 "/home/test/core/extensions/web-extensions.vala"
			_JSStringRelease0 (_tmp53_);
#line 269 "/home/test/core/extensions/web-extensions.vala"
			promise = _tmp57_;
#line 270 "/home/test/core/extensions/web-extensions.vala"
			_tmp58_ = promise;
#line 270 "/home/test/core/extensions/web-extensions.vala"
			_tmp59_ = g_strdup_printf ("Calling back to promise #%.f", _tmp58_);
#line 270 "/home/test/core/extensions/web-extensions.vala"
			_tmp60_ = _tmp59_;
#line 270 "/home/test/core/extensions/web-extensions.vala"
			g_debug ("web-extensions.vala:270: %s", _tmp60_);
#line 270 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_tmp60_);
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp61_ = promise;
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp62_ = tab;
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp63_ = midori_tab_get_id (_tmp62_);
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp64_ = _tmp63_;
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp65_ = _tmp64_;
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp66_ = g_strdup_printf ("promises[%.f].resolve({id:%s});", _tmp61_, _tmp65_);
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_tmp67_ = _tmp66_;
#line 271 "/home/test/core/extensions/web-extensions.vala"
			webkit_web_view_run_javascript (web_view, _tmp67_, NULL, NULL, NULL);
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_tmp67_);
#line 271 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (_tmp65_);
#line 264 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (tab);
#line 264 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (url);
#line 264 "/home/test/core/extensions/web-extensions.vala"
			_0 (args);
#line 4473 "web-extensions.c"
		} else {
			gboolean _tmp68_ = FALSE;
			const gchar* _tmp69_;
#line 272 "/home/test/core/extensions/web-extensions.vala"
			_tmp69_ = fn;
#line 272 "/home/test/core/extensions/web-extensions.vala"
			if (_tmp69_ != NULL) {
#line 4481 "web-extensions.c"
				const gchar* _tmp70_;
#line 272 "/home/test/core/extensions/web-extensions.vala"
				_tmp70_ = fn;
#line 272 "/home/test/core/extensions/web-extensions.vala"
				_tmp68_ = g_str_has_prefix (_tmp70_, "tabs.executeScript");
#line 4487 "web-extensions.c"
			} else {
#line 272 "/home/test/core/extensions/web-extensions.vala"
				_tmp68_ = FALSE;
#line 4491 "web-extensions.c"
			}
#line 272 "/home/test/core/extensions/web-extensions.vala"
			if (_tmp68_) {
#line 4495 "web-extensions.c"
				struct OpaqueJSValue* args = NULL;
				struct OpaqueJSValue* _tmp71_;
				struct OpaqueJSContext* _tmp72_;
				struct OpaqueJSString* _tmp73_;
				struct OpaqueJSString* _tmp74_;
				const struct OpaqueJSValue* _tmp75_;
				const struct OpaqueJSValue* _tmp76_;
				struct OpaqueJSContext* _tmp77_;
				struct OpaqueJSValue* _tmp78_;
				struct OpaqueJSValue* _tmp79_;
				gchar* results = NULL;
				gchar* code = NULL;
				struct OpaqueJSContext* _tmp80_;
				struct OpaqueJSValue* _tmp81_;
				struct OpaqueJSContext* _tmp82_;
				struct OpaqueJSString* _tmp83_;
				struct OpaqueJSString* _tmp84_;
				const struct OpaqueJSValue* _tmp85_;
				const struct OpaqueJSValue* _tmp86_;
				gchar* _tmp87_;
				gchar* _tmp88_;
				const gchar* _tmp89_;
				gdouble promise = 0.0;
				struct OpaqueJSValue* _tmp96_;
				struct OpaqueJSContext* _tmp97_;
				struct OpaqueJSString* _tmp98_;
				struct OpaqueJSString* _tmp99_;
				const struct OpaqueJSValue* _tmp100_;
				const struct OpaqueJSValue* _tmp101_;
				struct OpaqueJSContext* _tmp102_;
				gdouble _tmp103_;
				gdouble _tmp104_;
				gchar* _tmp105_;
				gchar* _tmp106_;
				const gchar* _tmp107_ = NULL;
				const gchar* _tmp108_;
				gdouble _tmp109_;
				gchar* _tmp110_;
				gchar* _tmp111_;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp71_ = object;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp72_ = context;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp73_ = JSStringCreateWithUTF8CString ("args");
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp74_ = _tmp73_;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp75_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp72_, _tmp71_, _tmp74_, NULL);
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp76_ = _tmp75_;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp77_ = context;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp78_ = JSValueToObject ((const struct OpaqueJSContext*) _tmp77_, _tmp76_, NULL);
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_tmp79_ = _tmp78_;
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_0 (_tmp76_);
#line 273 "/home/test/core/extensions/web-extensions.vala"
				_JSStringRelease0 (_tmp74_);
#line 273 "/home/test/core/extensions/web-extensions.vala"
				args = _tmp79_;
#line 274 "/home/test/core/extensions/web-extensions.vala"
				results = NULL;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp80_ = context;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp81_ = args;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp82_ = context;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp83_ = JSStringCreateWithUTF8CString ("code");
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp84_ = _tmp83_;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp85_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp82_, _tmp81_, _tmp84_, NULL);
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp86_ = _tmp85_;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp87_ = web_extension_js_to_string (_tmp80_, _tmp86_);
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_tmp88_ = _tmp87_;
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_0 (_tmp86_);
#line 275 "/home/test/core/extensions/web-extensions.vala"
				_JSStringRelease0 (_tmp84_);
#line 275 "/home/test/core/extensions/web-extensions.vala"
				code = _tmp88_;
#line 276 "/home/test/core/extensions/web-extensions.vala"
				_tmp89_ = code;
#line 276 "/home/test/core/extensions/web-extensions.vala"
				if (_tmp89_ != NULL) {
#line 4589 "web-extensions.c"
					gchar* _tmp90_;
					MidoriBrowser* _tmp91_;
					MidoriBrowser* _tmp92_;
					MidoriTab* _tmp93_;
					MidoriTab* _tmp94_;
					const gchar* _tmp95_;
#line 277 "/home/test/core/extensions/web-extensions.vala"
					_tmp90_ = g_strdup ("[true]");
#line 277 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (results);
#line 277 "/home/test/core/extensions/web-extensions.vala"
					results = _tmp90_;
#line 278 "/home/test/core/extensions/web-extensions.vala"
					_tmp91_ = web_extension_extension_manager_get_browser (self);
#line 278 "/home/test/core/extensions/web-extensions.vala"
					_tmp92_ = _tmp91_;
#line 278 "/home/test/core/extensions/web-extensions.vala"
					_tmp93_ = midori_browser_get_tab (_tmp92_);
#line 278 "/home/test/core/extensions/web-extensions.vala"
					_tmp94_ = _tmp93_;
#line 278 "/home/test/core/extensions/web-extensions.vala"
					_tmp95_ = code;
#line 278 "/home/test/core/extensions/web-extensions.vala"
					webkit_web_view_run_javascript ((WebKitWebView*) _tmp94_, _tmp95_, NULL, NULL, NULL);
#line 4614 "web-extensions.c"
				}
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp96_ = object;
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp97_ = context;
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp98_ = JSStringCreateWithUTF8CString ("promise");
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp99_ = _tmp98_;
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp100_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp97_, _tmp96_, _tmp99_, NULL);
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp101_ = _tmp100_;
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp102_ = context;
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_tmp103_ = JSValueToNumber ((const struct OpaqueJSContext*) _tmp102_, _tmp101_, NULL);
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_0 (_tmp101_);
#line 280 "/home/test/core/extensions/web-extensions.vala"
				_JSStringRelease0 (_tmp99_);
#line 280 "/home/test/core/extensions/web-extensions.vala"
				promise = _tmp103_;
#line 281 "/home/test/core/extensions/web-extensions.vala"
				_tmp104_ = promise;
#line 281 "/home/test/core/extensions/web-extensions.vala"
				_tmp105_ = g_strdup_printf ("Calling back to promise #%.f", _tmp104_);
#line 281 "/home/test/core/extensions/web-extensions.vala"
				_tmp106_ = _tmp105_;
#line 281 "/home/test/core/extensions/web-extensions.vala"
				g_debug ("web-extensions.vala:281: %s", _tmp106_);
#line 281 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (_tmp106_);
#line 282 "/home/test/core/extensions/web-extensions.vala"
				_tmp108_ = results;
#line 282 "/home/test/core/extensions/web-extensions.vala"
				_tmp107_ = _tmp108_;
#line 282 "/home/test/core/extensions/web-extensions.vala"
				if (_tmp107_ == NULL) {
#line 282 "/home/test/core/extensions/web-extensions.vala"
					_tmp107_ = "[undefined]";
#line 4656 "web-extensions.c"
				}
#line 282 "/home/test/core/extensions/web-extensions.vala"
				_tmp109_ = promise;
#line 282 "/home/test/core/extensions/web-extensions.vala"
				_tmp110_ = g_strdup_printf ("promises[%.f].resolve(%s);", _tmp109_, _tmp107_);
#line 282 "/home/test/core/extensions/web-extensions.vala"
				_tmp111_ = _tmp110_;
#line 282 "/home/test/core/extensions/web-extensions.vala"
				webkit_web_view_run_javascript (web_view, _tmp111_, NULL, NULL, NULL);
#line 282 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (_tmp111_);
#line 272 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (code);
#line 272 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (results);
#line 272 "/home/test/core/extensions/web-extensions.vala"
				_0 (args);
#line 4674 "web-extensions.c"
			} else {
				gboolean _tmp112_ = FALSE;
				const gchar* _tmp113_;
#line 283 "/home/test/core/extensions/web-extensions.vala"
				_tmp113_ = fn;
#line 283 "/home/test/core/extensions/web-extensions.vala"
				if (_tmp113_ != NULL) {
#line 4682 "web-extensions.c"
					const gchar* _tmp114_;
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_tmp114_ = fn;
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_tmp112_ = g_str_has_prefix (_tmp114_, "notifications.create");
#line 4688 "web-extensions.c"
				} else {
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_tmp112_ = FALSE;
#line 4692 "web-extensions.c"
				}
#line 283 "/home/test/core/extensions/web-extensions.vala"
				if (_tmp112_) {
#line 4696 "web-extensions.c"
					struct OpaqueJSValue* args = NULL;
					struct OpaqueJSValue* _tmp115_;
					struct OpaqueJSContext* _tmp116_;
					struct OpaqueJSString* _tmp117_;
					struct OpaqueJSString* _tmp118_;
					const struct OpaqueJSValue* _tmp119_;
					const struct OpaqueJSValue* _tmp120_;
					struct OpaqueJSContext* _tmp121_;
					struct OpaqueJSValue* _tmp122_;
					struct OpaqueJSValue* _tmp123_;
					gchar* message = NULL;
					struct OpaqueJSContext* _tmp124_;
					struct OpaqueJSValue* _tmp125_;
					struct OpaqueJSContext* _tmp126_;
					struct OpaqueJSString* _tmp127_;
					struct OpaqueJSString* _tmp128_;
					const struct OpaqueJSValue* _tmp129_;
					const struct OpaqueJSValue* _tmp130_;
					gchar* _tmp131_;
					gchar* _tmp132_;
					gchar* title = NULL;
					struct OpaqueJSContext* _tmp133_;
					struct OpaqueJSValue* _tmp134_;
					struct OpaqueJSContext* _tmp135_;
					struct OpaqueJSString* _tmp136_;
					struct OpaqueJSString* _tmp137_;
					const struct OpaqueJSValue* _tmp138_;
					const struct OpaqueJSValue* _tmp139_;
					gchar* _tmp140_;
					gchar* _tmp141_;
					GNotification* notification = NULL;
					const gchar* _tmp142_;
					GNotification* _tmp143_;
					GNotification* _tmp144_;
					const gchar* _tmp145_;
					gchar* extension_uri = NULL;
					const gchar* _tmp146_;
					const gchar* _tmp147_;
					gchar* _tmp148_;
					MidoriApp* _tmp149_;
					MidoriApp* _tmp150_;
					const gchar* _tmp151_;
					GNotification* _tmp152_;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp115_ = object;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp116_ = context;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp117_ = JSStringCreateWithUTF8CString ("args");
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp118_ = _tmp117_;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp119_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp116_, _tmp115_, _tmp118_, NULL);
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp120_ = _tmp119_;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp121_ = context;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp122_ = JSValueToObject ((const struct OpaqueJSContext*) _tmp121_, _tmp120_, NULL);
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_tmp123_ = _tmp122_;
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_0 (_tmp120_);
#line 284 "/home/test/core/extensions/web-extensions.vala"
					_JSStringRelease0 (_tmp118_);
#line 284 "/home/test/core/extensions/web-extensions.vala"
					args = _tmp123_;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp124_ = context;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp125_ = args;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp126_ = context;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp127_ = JSStringCreateWithUTF8CString ("message");
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp128_ = _tmp127_;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp129_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp126_, _tmp125_, _tmp128_, NULL);
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp130_ = _tmp129_;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp131_ = web_extension_js_to_string (_tmp124_, _tmp130_);
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_tmp132_ = _tmp131_;
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_0 (_tmp130_);
#line 285 "/home/test/core/extensions/web-extensions.vala"
					_JSStringRelease0 (_tmp128_);
#line 285 "/home/test/core/extensions/web-extensions.vala"
					message = _tmp132_;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp133_ = context;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp134_ = args;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp135_ = context;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp136_ = JSStringCreateWithUTF8CString ("title");
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp137_ = _tmp136_;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp138_ = JSObjectGetProperty ((const struct OpaqueJSContext*) _tmp135_, _tmp134_, _tmp137_, NULL);
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp139_ = _tmp138_;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp140_ = web_extension_js_to_string (_tmp133_, _tmp139_);
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_tmp141_ = _tmp140_;
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_0 (_tmp139_);
#line 286 "/home/test/core/extensions/web-extensions.vala"
					_JSStringRelease0 (_tmp137_);
#line 286 "/home/test/core/extensions/web-extensions.vala"
					title = _tmp141_;
#line 287 "/home/test/core/extensions/web-extensions.vala"
					_tmp142_ = title;
#line 287 "/home/test/core/extensions/web-extensions.vala"
					_tmp143_ = g_notification_new (_tmp142_);
#line 287 "/home/test/core/extensions/web-extensions.vala"
					notification = _tmp143_;
#line 288 "/home/test/core/extensions/web-extensions.vala"
					_tmp144_ = notification;
#line 288 "/home/test/core/extensions/web-extensions.vala"
					_tmp145_ = message;
#line 288 "/home/test/core/extensions/web-extensions.vala"
					g_notification_set_body (_tmp144_, _tmp145_);
#line 290 "/home/test/core/extensions/web-extensions.vala"
					_tmp146_ = webkit_web_view_get_uri (web_view);
#line 290 "/home/test/core/extensions/web-extensions.vala"
					_tmp147_ = _tmp146_;
#line 290 "/home/test/core/extensions/web-extensions.vala"
					_tmp148_ = g_strdup (_tmp147_);
#line 290 "/home/test/core/extensions/web-extensions.vala"
					extension_uri = _tmp148_;
#line 291 "/home/test/core/extensions/web-extensions.vala"
					_tmp149_ = web_extension_extension_manager_get_app (self);
#line 291 "/home/test/core/extensions/web-extensions.vala"
					_tmp150_ = _tmp149_;
#line 291 "/home/test/core/extensions/web-extensions.vala"
					_tmp151_ = extension_uri;
#line 291 "/home/test/core/extensions/web-extensions.vala"
					_tmp152_ = notification;
#line 291 "/home/test/core/extensions/web-extensions.vala"
					g_application_send_notification ((GApplication*) _tmp150_, _tmp151_, _tmp152_);
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (extension_uri);
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_g_object_unref0 (notification);
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (title);
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (message);
#line 283 "/home/test/core/extensions/web-extensions.vala"
					_0 (args);
#line 4852 "web-extensions.c"
				} else {
					const gchar* _tmp153_;
#line 293 "/home/test/core/extensions/web-extensions.vala"
					_tmp153_ = fn;
#line 293 "/home/test/core/extensions/web-extensions.vala"
					g_warning ("web-extensions.vala:293: Unsupported Web Extension API: %s", _tmp153_);
#line 4859 "web-extensions.c"
				}
			}
		}
#line 261 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (fn);
#line 261 "/home/test/core/extensions/web-extensions.vala"
		_0 (object);
#line 4867 "web-extensions.c"
	} else {
		struct OpaqueJSContext* _tmp154_;
		const struct OpaqueJSValue* _tmp155_;
		gchar* _tmp156_;
		gchar* _tmp157_;
#line 296 "/home/test/core/extensions/web-extensions.vala"
		_tmp154_ = context;
#line 296 "/home/test/core/extensions/web-extensions.vala"
		_tmp155_ = value;
#line 296 "/home/test/core/extensions/web-extensions.vala"
		_tmp156_ = web_extension_js_to_string (_tmp154_, _tmp155_);
#line 296 "/home/test/core/extensions/web-extensions.vala"
		_tmp157_ = _tmp156_;
#line 296 "/home/test/core/extensions/web-extensions.vala"
		g_warning ("web-extensions.vala:296: Unexpected non-object value posted to Web Ext" \
"ension API: %s", _tmp157_);
#line 296 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_tmp157_);
#line 4885 "web-extensions.c"
	}
}


static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
#line 300 "/home/test/core/extensions/web-extensions.vala"
	g_atomic_int_inc (&_data2_->_ref_count_);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	return _data2_;
#line 4897 "web-extensions.c"
}


static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
#line 300 "/home/test/core/extensions/web-extensions.vala"
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
#line 4908 "web-extensions.c"
		WebExtensionExtensionManager* self;
#line 300 "/home/test/core/extensions/web-extensions.vala"
		self = _data2_->self;
#line 300 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data2_->web_view);
#line 300 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (self);
#line 300 "/home/test/core/extensions/web-extensions.vala"
		g_slice_free (Block2Data, _data2_);
#line 4918 "web-extensions.c"
	}
}


static void
___lambda5_ (Block2Data* _data2_,
             WebKitJavascriptResult* _result_)
{
	WebExtensionExtensionManager* self;
#line 305 "/home/test/core/extensions/web-extensions.vala"
	self = _data2_->self;
#line 305 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (_result_ != NULL);
#line 306 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_web_extension_message_received (self, _data2_->web_view, _result_);
#line 4934 "web-extensions.c"
}


static void
____lambda5__webkit_user_content_manager_script_message_received (WebKitUserContentManager* _sender,
                                                                  WebKitJavascriptResult* js_result,
                                                                  gpointer self)
{
#line 305 "/home/test/core/extensions/web-extensions.vala"
	___lambda5_ (self, js_result);
#line 4945 "web-extensions.c"
}


void
web_extension_extension_manager_install_api (WebExtensionExtensionManager* self,
                                             WebKitWebView* web_view)
{
	Block2Data* _data2_;
	WebKitWebView* _tmp0_;
	WebKitSettings* _tmp1_;
	WebKitUserContentManager* content = NULL;
	WebKitUserContentManager* _tmp2_;
	WebKitUserContentManager* _tmp3_;
	WebKitUserContentManager* _tmp4_;
	GError* _inner_error0_ = NULL;
#line 300 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (web_view != NULL);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_data2_ = g_slice_new0 (Block2Data);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_data2_->_ref_count_ = 1;
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_data2_->self = g_object_ref (self);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _g_object_ref0 (web_view);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data2_->web_view);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_data2_->web_view = _tmp0_;
#line 301 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = webkit_web_view_get_settings (_data2_->web_view);
#line 301 "/home/test/core/extensions/web-extensions.vala"
	webkit_settings_set_enable_write_console_messages_to_stdout (_tmp1_, TRUE);
#line 303 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = webkit_web_view_get_user_content_manager (_data2_->web_view);
#line 303 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 303 "/home/test/core/extensions/web-extensions.vala"
	content = _tmp3_;
#line 304 "/home/test/core/extensions/web-extensions.vala"
	_tmp4_ = content;
#line 304 "/home/test/core/extensions/web-extensions.vala"
	if (webkit_user_content_manager_register_script_message_handler (_tmp4_, "midori")) {
#line 4991 "web-extensions.c"
		WebKitUserContentManager* _tmp5_;
#line 305 "/home/test/core/extensions/web-extensions.vala"
		_tmp5_ = content;
#line 305 "/home/test/core/extensions/web-extensions.vala"
		g_signal_connect_data (_tmp5_, "script-message-received", (GCallback) ____lambda5__webkit_user_content_manager_script_message_received, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
#line 4997 "web-extensions.c"
		{
			GBytes* _tmp6_ = NULL;
			GBytes* _tmp7_;
			gchar* script = NULL;
			gsize _tmp8_ = 0;
			guint8* _tmp9_;
			gchar* _tmp10_;
			WebKitUserContentManager* _tmp11_;
			const gchar* _tmp12_;
			WebKitUserScript* _tmp13_;
			WebKitUserScript* _tmp14_;
#line 309 "/home/test/core/extensions/web-extensions.vala"
			_tmp7_ = g_resources_lookup_data ("/data/web-extension-api.js", G_RESOURCE_LOOKUP_FLAGS_NONE, &_inner_error0_);
#line 309 "/home/test/core/extensions/web-extensions.vala"
			_tmp6_ = _tmp7_;
#line 309 "/home/test/core/extensions/web-extensions.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 5015 "web-extensions.c"
				goto __catch3_g_error;
			}
#line 309 "/home/test/core/extensions/web-extensions.vala"
			_tmp9_ = g_bytes_get_data (_tmp6_, &_tmp8_);
#line 309 "/home/test/core/extensions/web-extensions.vala"
			_tmp10_ = g_strdup ((const gchar*) _tmp9_);
#line 309 "/home/test/core/extensions/web-extensions.vala"
			script = _tmp10_;
#line 311 "/home/test/core/extensions/web-extensions.vala"
			_tmp11_ = content;
#line 311 "/home/test/core/extensions/web-extensions.vala"
			_tmp12_ = script;
#line 311 "/home/test/core/extensions/web-extensions.vala"
			_tmp13_ = webkit_user_script_new ((const gchar*) _tmp12_, WEBKIT_USER_CONTENT_INJECT_ALL_FRAMES, WEBKIT_USER_SCRIPT_INJECT_AT_DOCUMENT_START, NULL, NULL);
#line 311 "/home/test/core/extensions/web-extensions.vala"
			_tmp14_ = _tmp13_;
#line 311 "/home/test/core/extensions/web-extensions.vala"
			webkit_user_content_manager_add_script (_tmp11_, _tmp14_);
#line 311 "/home/test/core/extensions/web-extensions.vala"
			_webkit_user_script_unref0 (_tmp14_);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_g_free0 (script);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_g_bytes_unref0 (_tmp6_);
#line 5040 "web-extensions.c"
		}
		goto __finally3;
		__catch3_g_error:
		{
			GError* _error_ = NULL;
			GError* _tmp15_;
			const gchar* _tmp16_;
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_error_ = _inner_error0_;
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_inner_error0_ = NULL;
#line 317 "/home/test/core/extensions/web-extensions.vala"
			_tmp15_ = _error_;
#line 317 "/home/test/core/extensions/web-extensions.vala"
			_tmp16_ = _tmp15_->message;
#line 317 "/home/test/core/extensions/web-extensions.vala"
			g_critical ("web-extensions.vala:317: Failed to setup WebExtension API: %s", _tmp16_);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_g_error_free0 (_error_);
#line 5060 "web-extensions.c"
		}
		__finally3:
#line 308 "/home/test/core/extensions/web-extensions.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (content);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			block2_data_unref (_data2_);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			_data2_ = NULL;
#line 308 "/home/test/core/extensions/web-extensions.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			g_clear_error (&_inner_error0_);
#line 308 "/home/test/core/extensions/web-extensions.vala"
			return;
#line 5077 "web-extensions.c"
		}
	} else {
#line 320 "/home/test/core/extensions/web-extensions.vala"
		g_warning ("web-extensions.vala:320: Failed to install WebExtension API handler");
#line 5082 "web-extensions.c"
	}
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (content);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	block2_data_unref (_data2_);
#line 300 "/home/test/core/extensions/web-extensions.vala"
	_data2_ = NULL;
#line 5090 "web-extensions.c"
}


WebExtensionExtensionManager*
web_extension_extension_manager_construct (GType object_type)
{
	WebExtensionExtensionManager * self = NULL;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionExtensionManager*) g_object_new (object_type, NULL);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	return self;
#line 5102 "web-extensions.c"
}


WebExtensionExtensionManager*
web_extension_extension_manager_new (void)
{
#line 66 "/home/test/core/extensions/web-extensions.vala"
	return web_extension_extension_manager_construct (WEB_EXTENSION_TYPE_EXTENSION_MANAGER);
#line 5111 "web-extensions.c"
}


static MidoriApp*
web_extension_extension_manager_get_app (WebExtensionExtensionManager* self)
{
	MidoriApp* result;
	GApplication* _tmp0_;
#line 255 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 255 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = g_application_get_default ();
#line 255 "/home/test/core/extensions/web-extensions.vala"
	result = G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, MIDORI_TYPE_APP) ? ((MidoriApp*) _tmp0_) : NULL;
#line 255 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 5128 "web-extensions.c"
}


static MidoriBrowser*
web_extension_extension_manager_get_browser (WebExtensionExtensionManager* self)
{
	MidoriBrowser* result;
	MidoriApp* _tmp0_;
	MidoriApp* _tmp1_;
	GtkWindow* _tmp2_;
	GtkWindow* _tmp3_;
#line 256 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 256 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = web_extension_extension_manager_get_app (self);
#line 256 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _tmp0_;
#line 256 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = gtk_application_get_active_window ((GtkApplication*) _tmp1_);
#line 256 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = _tmp2_;
#line 256 "/home/test/core/extensions/web-extensions.vala"
	result = G_TYPE_CHECK_INSTANCE_TYPE (_tmp3_, MIDORI_TYPE_BROWSER) ? ((MidoriBrowser*) _tmp3_) : NULL;
#line 256 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 5154 "web-extensions.c"
}


static void
web_extension_extension_manager_class_init (WebExtensionExtensionManagerClass * klass)
{
#line 66 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_parent_class = g_type_class_peek_parent (klass);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_web_extension_extension_manager_get_property;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->finalize = web_extension_extension_manager_finalize;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_signals[WEB_EXTENSION_EXTENSION_MANAGER_EXTENSION_ADDED_SIGNAL] = g_signal_new ("extension-added", WEB_EXTENSION_TYPE_EXTENSION_MANAGER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__OBJECT, G_TYPE_NONE, 1, G_TYPE_OBJECT);
#line 5169 "web-extensions.c"
}


static void
web_extension_extension_manager_instance_init (WebExtensionExtensionManager * self)
{
}


static void
web_extension_extension_manager_finalize (GObject * obj)
{
	WebExtensionExtensionManager * self;
#line 66 "/home/test/core/extensions/web-extensions.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, WEB_EXTENSION_TYPE_EXTENSION_MANAGER, WebExtensionExtensionManager);
#line 68 "/home/test/core/extensions/web-extensions.vala"
	_g_hash_table_unref0 (self->extensions);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (web_extension_extension_manager_parent_class)->finalize (obj);
#line 5189 "web-extensions.c"
}


GType
web_extension_extension_manager_get_type (void)
{
	return web_extension_extension_manager_type_id;
}


GType
web_extension_extension_manager_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (WebExtensionExtensionManagerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) web_extension_extension_manager_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (WebExtensionExtensionManager), 0, (GInstanceInitFunc) web_extension_extension_manager_instance_init, NULL };
	web_extension_extension_manager_type_id = g_type_module_register_type (module, G_TYPE_OBJECT, "WebExtensionExtensionManager", &g_define_type_info, 0);
	return web_extension_extension_manager_type_id;
}


static void
_vala_web_extension_extension_manager_get_property (GObject * object,
                                                    guint property_id,
                                                    GValue * value,
                                                    GParamSpec * pspec)
{
	WebExtensionExtensionManager * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_EXTENSION_MANAGER, WebExtensionExtensionManager);
#line 66 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 5219 "web-extensions.c"
		default:
#line 66 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 66 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 5225 "web-extensions.c"
	}
}


WebExtensionWebView*
web_extension_web_view_construct (GType object_type,
                                  WebExtensionExtension* extension,
                                  const gchar* uri)
{
	WebExtensionWebView * self = NULL;
	WebExtensionExtensionManager* manager = NULL;
	WebExtensionExtensionManager* _tmp0_;
	WebExtensionExtensionManager* _tmp1_;
#line 327 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (extension != NULL, NULL);
#line 328 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionWebView*) g_object_new (object_type, "visible", TRUE, NULL);
#line 330 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = web_extension_extension_manager_get_default ();
#line 330 "/home/test/core/extensions/web-extensions.vala"
	manager = _tmp0_;
#line 331 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = manager;
#line 331 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_install_api (_tmp1_, (WebKitWebView*) self);
#line 333 "/home/test/core/extensions/web-extensions.vala"
	if (uri != NULL) {
#line 5253 "web-extensions.c"
		gchar* id = NULL;
		GFile* _tmp2_;
		GFile* _tmp3_;
		gchar* _tmp4_;
		const gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
#line 334 "/home/test/core/extensions/web-extensions.vala"
		_tmp2_ = web_extension_extension_get_file (extension);
#line 334 "/home/test/core/extensions/web-extensions.vala"
		_tmp3_ = _tmp2_;
#line 334 "/home/test/core/extensions/web-extensions.vala"
		_tmp4_ = g_file_get_basename (_tmp3_);
#line 334 "/home/test/core/extensions/web-extensions.vala"
		id = _tmp4_;
#line 335 "/home/test/core/extensions/web-extensions.vala"
		_tmp5_ = id;
#line 335 "/home/test/core/extensions/web-extensions.vala"
		_tmp6_ = g_strdup_printf ("extension:///%s/%s", _tmp5_, uri);
#line 335 "/home/test/core/extensions/web-extensions.vala"
		_tmp7_ = _tmp6_;
#line 335 "/home/test/core/extensions/web-extensions.vala"
		webkit_web_view_load_uri ((WebKitWebView*) self, _tmp7_);
#line 335 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_tmp7_);
#line 333 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (id);
#line 5281 "web-extensions.c"
	} else {
		GFile* _tmp8_;
		GFile* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
#line 337 "/home/test/core/extensions/web-extensions.vala"
		_tmp8_ = web_extension_extension_get_file (extension);
#line 337 "/home/test/core/extensions/web-extensions.vala"
		_tmp9_ = _tmp8_;
#line 337 "/home/test/core/extensions/web-extensions.vala"
		_tmp10_ = g_file_get_uri (_tmp9_);
#line 337 "/home/test/core/extensions/web-extensions.vala"
		_tmp11_ = _tmp10_;
#line 337 "/home/test/core/extensions/web-extensions.vala"
		webkit_web_view_load_html ((WebKitWebView*) self, "<body></body>", _tmp11_);
#line 337 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_tmp11_);
#line 5299 "web-extensions.c"
	}
#line 327 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (manager);
#line 327 "/home/test/core/extensions/web-extensions.vala"
	return self;
#line 5305 "web-extensions.c"
}


WebExtensionWebView*
web_extension_web_view_new (WebExtensionExtension* extension,
                            const gchar* uri)
{
#line 327 "/home/test/core/extensions/web-extensions.vala"
	return web_extension_web_view_construct (WEB_EXTENSION_TYPE_WEB_VIEW, extension, uri);
#line 5315 "web-extensions.c"
}


static gboolean
web_extension_web_view_real_context_menu (WebKitWebView* base,
                                          WebKitContextMenu* menu,
                                          GdkEvent* event,
                                          WebKitHitTestResult* hit)
{
	WebExtensionWebView * self;
	gboolean result = FALSE;
#line 341 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionWebView*) base;
#line 341 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (menu != NULL, FALSE);
#line 341 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 341 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (hit != NULL, FALSE);
#line 344 "/home/test/core/extensions/web-extensions.vala"
	if (webkit_hit_test_result_context_is_editable (hit)) {
#line 345 "/home/test/core/extensions/web-extensions.vala"
		result = FALSE;
#line 345 "/home/test/core/extensions/web-extensions.vala"
		return result;
#line 5341 "web-extensions.c"
	}
#line 348 "/home/test/core/extensions/web-extensions.vala"
	result = TRUE;
#line 348 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 5347 "web-extensions.c"
}


static void
web_extension_web_view_real_close (WebKitWebView* base)
{
	WebExtensionWebView * self;
#line 351 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionWebView*) base;
#line 352 "/home/test/core/extensions/web-extensions.vala"
	gtk_widget_destroy ((GtkWidget*) self);
#line 5359 "web-extensions.c"
}


static gboolean
web_extension_web_view_real_web_process_crashed (WebKitWebView* base)
{
	WebExtensionWebView * self;
	gboolean result = FALSE;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
#line 355 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionWebView*) base;
#line 356 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = webkit_web_view_get_uri ((WebKitWebView*) self);
#line 356 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _tmp0_;
#line 356 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = webkit_web_view_get_uri ((WebKitWebView*) self);
#line 356 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = _tmp2_;
#line 356 "/home/test/core/extensions/web-extensions.vala"
	webkit_web_view_load_alternate_html ((WebKitWebView*) self, "<body><button onclick='location.reload();'>Reload</button></body>", _tmp1_, _tmp3_);
#line 357 "/home/test/core/extensions/web-extensions.vala"
	result = TRUE;
#line 357 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 5388 "web-extensions.c"
}


static void
web_extension_web_view_class_init (WebExtensionWebViewClass * klass)
{
#line 326 "/home/test/core/extensions/web-extensions.vala"
	web_extension_web_view_parent_class = g_type_class_peek_parent (klass);
#line 326 "/home/test/core/extensions/web-extensions.vala"
	((WebKitWebViewClass *) klass)->context_menu = (gboolean (*) (WebKitWebView*, WebKitContextMenu*, GdkEvent*, WebKitHitTestResult*)) web_extension_web_view_real_context_menu;
#line 326 "/home/test/core/extensions/web-extensions.vala"
	((WebKitWebViewClass *) klass)->close = (void (*) (WebKitWebView*)) web_extension_web_view_real_close;
#line 326 "/home/test/core/extensions/web-extensions.vala"
	((WebKitWebViewClass *) klass)->web_process_crashed = (gboolean (*) (WebKitWebView*)) web_extension_web_view_real_web_process_crashed;
#line 5403 "web-extensions.c"
}


static void
web_extension_web_view_instance_init (WebExtensionWebView * self)
{
}


GType
web_extension_web_view_get_type (void)
{
	return web_extension_web_view_type_id;
}


GType
web_extension_web_view_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (WebExtensionWebViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) web_extension_web_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (WebExtensionWebView), 0, (GInstanceInitFunc) web_extension_web_view_instance_init, NULL };
	web_extension_web_view_type_id = g_type_module_register_type (module, webkit_web_view_get_type (), "WebExtensionWebView", &g_define_type_info, 0);
	return web_extension_web_view_type_id;
}


WebExtensionButton*
web_extension_button_construct (GType object_type,
                                WebExtensionExtension* extension)
{
	WebExtensionButton * self = NULL;
	const gchar* _tmp0_ = NULL;
	WebExtensionAction* _tmp1_;
	WebExtensionAction* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	GtkImage* icon = NULL;
	GtkImage* _tmp7_;
	GtkImage* _tmp8_;
	GtkImage* _tmp9_;
	WebExtensionAction* _tmp10_;
	WebExtensionAction* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	WebExtensionAction* _tmp21_;
	WebExtensionAction* _tmp22_;
	const gchar* _tmp23_;
	const gchar* _tmp24_;
	GtkImage* _tmp35_;
#line 362 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (extension != NULL, NULL);
#line 362 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionButton*) g_object_new (object_type, NULL);
#line 363 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = web_extension_extension_get_browser_action (extension);
#line 363 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = _tmp1_;
#line 363 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = web_extension_action_get_title (_tmp2_);
#line 363 "/home/test/core/extensions/web-extensions.vala"
	_tmp4_ = _tmp3_;
#line 363 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _tmp4_;
#line 363 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp0_ == NULL) {
#line 5468 "web-extensions.c"
		const gchar* _tmp5_;
		const gchar* _tmp6_;
#line 363 "/home/test/core/extensions/web-extensions.vala"
		_tmp5_ = web_extension_extension_get_name (extension);
#line 363 "/home/test/core/extensions/web-extensions.vala"
		_tmp6_ = _tmp5_;
#line 363 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = _tmp6_;
#line 5477 "web-extensions.c"
	}
#line 363 "/home/test/core/extensions/web-extensions.vala"
	gtk_widget_set_tooltip_text ((GtkWidget*) self, _tmp0_);
#line 364 "/home/test/core/extensions/web-extensions.vala"
	gtk_widget_set_visible ((GtkWidget*) self, TRUE);
#line 365 "/home/test/core/extensions/web-extensions.vala"
	gtk_widget_set_focus_on_click ((GtkWidget*) self, FALSE);
#line 366 "/home/test/core/extensions/web-extensions.vala"
	_tmp7_ = (GtkImage*) gtk_image_new_from_icon_name ("midori-symbolic", (GtkIconSize) GTK_ICON_SIZE_BUTTON);
#line 366 "/home/test/core/extensions/web-extensions.vala"
	g_object_ref_sink (_tmp7_);
#line 366 "/home/test/core/extensions/web-extensions.vala"
	icon = _tmp7_;
#line 367 "/home/test/core/extensions/web-extensions.vala"
	_tmp8_ = icon;
#line 367 "/home/test/core/extensions/web-extensions.vala"
	g_object_set (_tmp8_, "use-fallback", TRUE, NULL);
#line 368 "/home/test/core/extensions/web-extensions.vala"
	_tmp9_ = icon;
#line 368 "/home/test/core/extensions/web-extensions.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp9_, TRUE);
#line 369 "/home/test/core/extensions/web-extensions.vala"
	_tmp10_ = web_extension_extension_get_browser_action (extension);
#line 369 "/home/test/core/extensions/web-extensions.vala"
	_tmp11_ = _tmp10_;
#line 369 "/home/test/core/extensions/web-extensions.vala"
	_tmp12_ = web_extension_action_get_icon (_tmp11_);
#line 369 "/home/test/core/extensions/web-extensions.vala"
	_tmp13_ = _tmp12_;
#line 369 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp13_ != NULL) {
#line 5509 "web-extensions.c"
		const gchar* _tmp14_;
		const gchar* _tmp15_;
		WebExtensionAction* _tmp16_;
		WebExtensionAction* _tmp17_;
		const gchar* _tmp18_;
		const gchar* _tmp19_;
		GtkImage* _tmp20_;
#line 370 "/home/test/core/extensions/web-extensions.vala"
		_tmp14_ = web_extension_extension_get_name (extension);
#line 370 "/home/test/core/extensions/web-extensions.vala"
		_tmp15_ = _tmp14_;
#line 370 "/home/test/core/extensions/web-extensions.vala"
		_tmp16_ = web_extension_extension_get_browser_action (extension);
#line 370 "/home/test/core/extensions/web-extensions.vala"
		_tmp17_ = _tmp16_;
#line 370 "/home/test/core/extensions/web-extensions.vala"
		_tmp18_ = web_extension_action_get_icon (_tmp17_);
#line 370 "/home/test/core/extensions/web-extensions.vala"
		_tmp19_ = _tmp18_;
#line 370 "/home/test/core/extensions/web-extensions.vala"
		g_debug ("web-extensions.vala:370: Icon for %s: %s\n", _tmp15_, _tmp19_);
#line 373 "/home/test/core/extensions/web-extensions.vala"
		_tmp20_ = icon;
#line 373 "/home/test/core/extensions/web-extensions.vala"
		web_extension_button_load_icon (self, extension, _tmp20_, NULL, NULL);
#line 5535 "web-extensions.c"
	}
#line 375 "/home/test/core/extensions/web-extensions.vala"
	_tmp21_ = web_extension_extension_get_browser_action (extension);
#line 375 "/home/test/core/extensions/web-extensions.vala"
	_tmp22_ = _tmp21_;
#line 375 "/home/test/core/extensions/web-extensions.vala"
	_tmp23_ = web_extension_action_get_popup (_tmp22_);
#line 375 "/home/test/core/extensions/web-extensions.vala"
	_tmp24_ = _tmp23_;
#line 375 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp24_ != NULL) {
#line 5547 "web-extensions.c"
		GtkPopover* _tmp25_;
		GtkPopover* _tmp26_;
		GtkPopover* _tmp27_;
		GtkPopover* _tmp28_;
		WebExtensionAction* _tmp29_;
		WebExtensionAction* _tmp30_;
		const gchar* _tmp31_;
		const gchar* _tmp32_;
		WebExtensionWebView* _tmp33_;
		WebExtensionWebView* _tmp34_;
#line 376 "/home/test/core/extensions/web-extensions.vala"
		_tmp25_ = (GtkPopover*) gtk_popover_new ((GtkWidget*) self);
#line 376 "/home/test/core/extensions/web-extensions.vala"
		g_object_ref_sink (_tmp25_);
#line 376 "/home/test/core/extensions/web-extensions.vala"
		_tmp26_ = _tmp25_;
#line 376 "/home/test/core/extensions/web-extensions.vala"
		gtk_menu_button_set_popover ((GtkMenuButton*) self, _tmp26_);
#line 376 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_tmp26_);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp27_ = gtk_menu_button_get_popover ((GtkMenuButton*) self);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp28_ = _tmp27_;
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp29_ = web_extension_extension_get_browser_action (extension);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp30_ = _tmp29_;
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp31_ = web_extension_action_get_popup (_tmp30_);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp32_ = _tmp31_;
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp33_ = web_extension_web_view_new (extension, _tmp32_);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		g_object_ref_sink (_tmp33_);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_tmp34_ = _tmp33_;
#line 377 "/home/test/core/extensions/web-extensions.vala"
		gtk_container_add ((GtkContainer*) _tmp28_, (GtkWidget*) _tmp34_);
#line 377 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_tmp34_);
#line 5590 "web-extensions.c"
	}
#line 379 "/home/test/core/extensions/web-extensions.vala"
	_tmp35_ = icon;
#line 379 "/home/test/core/extensions/web-extensions.vala"
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp35_);
#line 362 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (icon);
#line 362 "/home/test/core/extensions/web-extensions.vala"
	return self;
#line 5600 "web-extensions.c"
}


WebExtensionButton*
web_extension_button_new (WebExtensionExtension* extension)
{
#line 362 "/home/test/core/extensions/web-extensions.vala"
	return web_extension_button_construct (WEB_EXTENSION_TYPE_BUTTON, extension);
#line 5609 "web-extensions.c"
}


static void
web_extension_button_load_icon_data_free (gpointer _data)
{
	WebExtensionButtonLoadIconData* _data_;
	_data_ = _data;
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->extension);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->icon);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->self);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	g_slice_free (WebExtensionButtonLoadIconData, _data_);
#line 5626 "web-extensions.c"
}


static void
web_extension_button_load_icon (WebExtensionButton* self,
                                WebExtensionExtension* extension,
                                GtkImage* icon,
                                GAsyncReadyCallback _callback_,
                                gpointer _user_data_)
{
	WebExtensionButtonLoadIconData* _data_;
	WebExtensionButton* _tmp0_;
	WebExtensionExtension* _tmp1_;
	GtkImage* _tmp2_;
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_slice_new0 (WebExtensionButtonLoadIconData);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	g_task_set_task_data (_data_->_async_result, _data_, web_extension_button_load_icon_data_free);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_data_->self = _tmp0_;
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _g_object_ref0 (extension);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->extension);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_data_->extension = _tmp1_;
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = _g_object_ref0 (icon);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->icon);
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon = _tmp2_;
#line 361 "/home/test/core/extensions/web-extensions.vala"
	web_extension_button_load_icon_co (_data_);
#line 5665 "web-extensions.c"
}


static void
web_extension_button_load_icon_finish (WebExtensionButton* self,
                                       GAsyncResult* _res_)
{
	WebExtensionButtonLoadIconData* _data_;
#line 361 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 5676 "web-extensions.c"
}


static void
web_extension_button_load_icon_ready (GObject* source_object,
                                      GAsyncResult* _res_,
                                      gpointer _user_data_)
{
	WebExtensionButtonLoadIconData* _data_;
#line 390 "/home/test/core/extensions/web-extensions.vala"
	_data_ = _user_data_;
#line 390 "/home/test/core/extensions/web-extensions.vala"
	_data_->_source_object_ = source_object;
#line 390 "/home/test/core/extensions/web-extensions.vala"
	_data_->_res_ = _res_;
#line 390 "/home/test/core/extensions/web-extensions.vala"
	web_extension_button_load_icon_co (_data_);
#line 5694 "web-extensions.c"
}


static guint8*
_vala_array_dup4 (guint8* self,
                  int length)
{
#line 392 "/home/test/core/extensions/web-extensions.vala"
	return g_memdup (self, length * sizeof (guint8));
#line 5704 "web-extensions.c"
}


static gboolean
web_extension_button_load_icon_co (WebExtensionButtonLoadIconData* _data_)
{
#line 382 "/home/test/core/extensions/web-extensions.vala"
	switch (_data_->_state_) {
#line 382 "/home/test/core/extensions/web-extensions.vala"
		case 0:
#line 5715 "web-extensions.c"
		goto _state_0;
#line 382 "/home/test/core/extensions/web-extensions.vala"
		case 1:
#line 5719 "web-extensions.c"
		goto _state_1;
#line 382 "/home/test/core/extensions/web-extensions.vala"
		case 2:
#line 5723 "web-extensions.c"
		goto _state_2;
		default:
#line 382 "/home/test/core/extensions/web-extensions.vala"
		g_assert_not_reached ();
#line 5728 "web-extensions.c"
	}
	_state_0:
#line 384 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon_width = 16;
#line 384 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon_height = 16;
#line 385 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp0_ = 0;
#line 385 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp1_ = 0;
#line 385 "/home/test/core/extensions/web-extensions.vala"
	gtk_icon_size_lookup (GTK_ICON_SIZE_BUTTON, &_data_->_tmp0_, &_data_->_tmp1_);
#line 385 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon_width = _data_->_tmp0_;
#line 385 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon_height = _data_->_tmp1_;
#line 387 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp2_ = _data_->icon_width;
#line 387 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp3_ = gtk_widget_get_scale_factor ((GtkWidget*) _data_->self);
#line 387 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp4_ = _data_->_tmp3_;
#line 387 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon_width = _data_->_tmp2_ * _data_->_tmp4_;
#line 388 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp5_ = _data_->icon_height;
#line 388 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp6_ = gtk_widget_get_scale_factor ((GtkWidget*) _data_->self);
#line 388 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp7_ = _data_->_tmp6_;
#line 388 "/home/test/core/extensions/web-extensions.vala"
	_data_->icon_height = _data_->_tmp5_ * _data_->_tmp7_;
#line 5761 "web-extensions.c"
	{
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp8_ = web_extension_extension_get_browser_action (_data_->extension);
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp9_ = _data_->_tmp8_;
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp10_ = web_extension_action_get_icon (_data_->_tmp9_);
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp11_ = _data_->_tmp10_;
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->_state_ = 1;
#line 390 "/home/test/core/extensions/web-extensions.vala"
		web_extension_extension_get_resource (_data_->extension, _data_->_tmp11_, web_extension_button_load_icon_ready, _data_);
#line 390 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 5777 "web-extensions.c"
		_state_1:
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp12_ = web_extension_extension_get_resource_finish (_data_->extension, _data_->_res_, &_data_->_inner_error0_);
#line 390 "/home/test/core/extensions/web-extensions.vala"
		_data_->image = _data_->_tmp12_;
#line 390 "/home/test/core/extensions/web-extensions.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 5785 "web-extensions.c"
			goto __catch4_g_error;
		}
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp13_ = _data_->image;
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp14_ = 0;
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp15_ = g_bytes_get_data (_data_->_tmp13_, &_data_->_tmp14_);
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp16_ = (_data_->_tmp15_ != NULL) ? _vala_array_dup4 (_data_->_tmp15_, _data_->_tmp14_) : ((gpointer) _data_->_tmp15_);
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp16__length1 = _data_->_tmp14_;
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp17_ = (GMemoryInputStream*) g_memory_input_stream_new_from_data (_data_->_tmp16_, _data_->_tmp16__length1, _g_free_gdestroy_notify);
#line 392 "/home/test/core/extensions/web-extensions.vala"
		_data_->stream = _data_->_tmp17_;
#line 393 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp19_ = _data_->stream;
#line 393 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp20_ = _data_->icon_width;
#line 393 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp21_ = _data_->icon_height;
#line 393 "/home/test/core/extensions/web-extensions.vala"
		_data_->_state_ = 2;
#line 393 "/home/test/core/extensions/web-extensions.vala"
		gdk_pixbuf_new_from_stream_at_scale_async ((GInputStream*) _data_->_tmp19_, _data_->_tmp20_, _data_->_tmp21_, TRUE, NULL, web_extension_button_load_icon_ready, _data_);
#line 393 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 5814 "web-extensions.c"
		_state_2:
#line 393 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp22_ = (GdkPixbuf*) gdk_pixbuf_new_from_stream_finish (_data_->_res_, &_data_->_inner_error0_);
#line 393 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp18_ = _data_->_tmp22_;
#line 393 "/home/test/core/extensions/web-extensions.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 393 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->stream);
#line 393 "/home/test/core/extensions/web-extensions.vala"
			_g_bytes_unref0 (_data_->image);
#line 5826 "web-extensions.c"
			goto __catch4_g_error;
		}
#line 393 "/home/test/core/extensions/web-extensions.vala"
		g_object_set (_data_->icon, "pixbuf", _data_->_tmp18_, NULL);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->_tmp18_);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->stream);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		_g_bytes_unref0 (_data_->image);
#line 5837 "web-extensions.c"
	}
	goto __finally4;
	__catch4_g_error:
	{
#line 389 "/home/test/core/extensions/web-extensions.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 389 "/home/test/core/extensions/web-extensions.vala"
		_data_->_inner_error0_ = NULL;
#line 395 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp23_ = web_extension_extension_get_name (_data_->extension);
#line 395 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp24_ = _data_->_tmp23_;
#line 395 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp25_ = _data_->_error_;
#line 395 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp26_ = _data_->_tmp25_->message;
#line 395 "/home/test/core/extensions/web-extensions.vala"
		g_warning ("web-extensions.vala:395: Failed to set icon for %s: %s", _data_->_tmp24_, _data_->_tmp26_);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		_g_error_free0 (_data_->_error_);
#line 5858 "web-extensions.c"
	}
	__finally4:
#line 389 "/home/test/core/extensions/web-extensions.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 389 "/home/test/core/extensions/web-extensions.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		g_object_unref (_data_->_async_result);
#line 389 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 5871 "web-extensions.c"
	}
#line 382 "/home/test/core/extensions/web-extensions.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 382 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_state_ != 0) {
#line 382 "/home/test/core/extensions/web-extensions.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 382 "/home/test/core/extensions/web-extensions.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 5881 "web-extensions.c"
		}
	}
#line 382 "/home/test/core/extensions/web-extensions.vala"
	g_object_unref (_data_->_async_result);
#line 382 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 5888 "web-extensions.c"
}


static void
web_extension_button_class_init (WebExtensionButtonClass * klass)
{
#line 361 "/home/test/core/extensions/web-extensions.vala"
	web_extension_button_parent_class = g_type_class_peek_parent (klass);
#line 5897 "web-extensions.c"
}


static void
web_extension_button_instance_init (WebExtensionButton * self)
{
}


GType
web_extension_button_get_type (void)
{
	return web_extension_button_type_id;
}


GType
web_extension_button_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (WebExtensionButtonClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) web_extension_button_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (WebExtensionButton), 0, (GInstanceInitFunc) web_extension_button_instance_init, NULL };
	web_extension_button_type_id = g_type_module_register_type (module, gtk_menu_button_get_type (), "WebExtensionButton", &g_define_type_info, 0);
	return web_extension_button_type_id;
}


gchar*
web_extension_js_to_string (struct OpaqueJSContext* context,
                            const struct OpaqueJSValue* value)
{
	gchar* result = NULL;
	struct OpaqueJSString* str = NULL;
	struct OpaqueJSString* _tmp0_;
	guint8* buffer = NULL;
	struct OpaqueJSString* _tmp1_;
	guint8* _tmp2_;
	gint buffer_length1;
	gint _buffer_size_;
	struct OpaqueJSString* _tmp3_;
	guint8* _tmp4_;
	gint _tmp4__length1;
	guint8* _tmp5_;
	gint _tmp5__length1;
	gchar* _tmp6_;
#line 400 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (context != NULL, NULL);
#line 400 "/home/test/core/extensions/web-extensions.vala"
	g_return_val_if_fail (value != NULL, NULL);
#line 401 "/home/test/core/extensions/web-extensions.vala"
	if (!JSValueIsString ((const struct OpaqueJSContext*) context, value)) {
#line 402 "/home/test/core/extensions/web-extensions.vala"
		result = NULL;
#line 402 "/home/test/core/extensions/web-extensions.vala"
		return result;
#line 5951 "web-extensions.c"
	}
#line 404 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = JSValueToStringCopy ((const struct OpaqueJSContext*) context, value, NULL);
#line 404 "/home/test/core/extensions/web-extensions.vala"
	str = _tmp0_;
#line 405 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = str;
#line 405 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = g_new0 (guint8, JSStringGetMaximumUTF8CStringSize (_tmp1_));
#line 405 "/home/test/core/extensions/web-extensions.vala"
	buffer = _tmp2_;
#line 405 "/home/test/core/extensions/web-extensions.vala"
	buffer_length1 = JSStringGetMaximumUTF8CStringSize (_tmp1_);
#line 405 "/home/test/core/extensions/web-extensions.vala"
	_buffer_size_ = buffer_length1;
#line 406 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = str;
#line 406 "/home/test/core/extensions/web-extensions.vala"
	_tmp4_ = buffer;
#line 406 "/home/test/core/extensions/web-extensions.vala"
	_tmp4__length1 = buffer_length1;
#line 406 "/home/test/core/extensions/web-extensions.vala"
	JSStringGetUTF8CString (_tmp3_, _tmp4_, (gsize) _tmp4__length1);
#line 407 "/home/test/core/extensions/web-extensions.vala"
	_tmp5_ = buffer;
#line 407 "/home/test/core/extensions/web-extensions.vala"
	_tmp5__length1 = buffer_length1;
#line 407 "/home/test/core/extensions/web-extensions.vala"
	_tmp6_ = g_strdup ((const gchar*) _tmp5_);
#line 407 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp6_;
#line 407 "/home/test/core/extensions/web-extensions.vala"
	buffer = (g_free (buffer), NULL);
#line 407 "/home/test/core/extensions/web-extensions.vala"
	_JSStringRelease0 (str);
#line 407 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 5989 "web-extensions.c"
}


static void
web_extension_browser_extension_scheme_data_free (gpointer _data)
{
	WebExtensionBrowserExtensionSchemeData* _data_;
	_data_ = _data;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->request);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->self);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	g_slice_free (WebExtensionBrowserExtensionSchemeData, _data_);
#line 6004 "web-extensions.c"
}


static void
web_extension_browser_extension_scheme (WebExtensionBrowser* self,
                                        WebKitURISchemeRequest* request,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_)
{
	WebExtensionBrowserExtensionSchemeData* _data_;
	WebExtensionBrowser* _tmp0_;
	WebKitURISchemeRequest* _tmp1_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_slice_new0 (WebExtensionBrowserExtensionSchemeData);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	g_task_set_task_data (_data_->_async_result, _data_, web_extension_browser_extension_scheme_data_free);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_->self = _tmp0_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _g_object_ref0 (request);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->request);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_->request = _tmp1_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_extension_scheme_co (_data_);
#line 6035 "web-extensions.c"
}


static void
web_extension_browser_extension_scheme_finish (WebExtensionBrowser* self,
                                               GAsyncResult* _res_)
{
	WebExtensionBrowserExtensionSchemeData* _data_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 6046 "web-extensions.c"
}


static void
web_extension_browser_extension_scheme_ready (GObject* source_object,
                                              GAsyncResult* _res_,
                                              gpointer _user_data_)
{
	WebExtensionBrowserExtensionSchemeData* _data_;
#line 421 "/home/test/core/extensions/web-extensions.vala"
	_data_ = _user_data_;
#line 421 "/home/test/core/extensions/web-extensions.vala"
	_data_->_source_object_ = source_object;
#line 421 "/home/test/core/extensions/web-extensions.vala"
	_data_->_res_ = _res_;
#line 421 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_extension_scheme_co (_data_);
#line 6064 "web-extensions.c"
}


static guint8*
_vala_array_dup5 (guint8* self,
                  int length)
{
#line 422 "/home/test/core/extensions/web-extensions.vala"
	return g_memdup (self, length * sizeof (guint8));
#line 6074 "web-extensions.c"
}


static gint
_vala_g_bytes_get_length (GBytes* self)
{
	gint result;
#line 5148 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 5150 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = (gint) g_bytes_get_size (self);
#line 5150 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 6088 "web-extensions.c"
}


static gboolean
web_extension_browser_extension_scheme_co (WebExtensionBrowserExtensionSchemeData* _data_)
{
#line 413 "/home/test/core/extensions/web-extensions.vala"
	switch (_data_->_state_) {
#line 413 "/home/test/core/extensions/web-extensions.vala"
		case 0:
#line 6099 "web-extensions.c"
		goto _state_0;
#line 413 "/home/test/core/extensions/web-extensions.vala"
		case 1:
#line 6103 "web-extensions.c"
		goto _state_1;
		default:
#line 413 "/home/test/core/extensions/web-extensions.vala"
		g_assert_not_reached ();
#line 6108 "web-extensions.c"
	}
	_state_0:
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp0_ = webkit_uri_scheme_request_get_path (_data_->request);
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp1_ = string_substring (_data_->_tmp0_, (glong) 1, (glong) -1);
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp2_ = _data_->_tmp1_;
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp4_ = _data_->_tmp3_ = g_strsplit (_data_->_tmp2_, "/", 2);
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp5__length1 = _vala_array_length (_data_->_tmp3_);
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->_tmp2_);
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->path = _data_->_tmp5_;
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->path_length1 = _data_->_tmp5__length1;
#line 414 "/home/test/core/extensions/web-extensions.vala"
	_data_->_path_size_ = _data_->path_length1;
#line 415 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp6_ = _data_->path;
#line 415 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp6__length1 = _data_->path_length1;
#line 415 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp7_ = _data_->_tmp6_[0];
#line 415 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp8_ = g_strdup (_data_->_tmp7_);
#line 415 "/home/test/core/extensions/web-extensions.vala"
	_data_->id = _data_->_tmp8_;
#line 416 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp9_ = _data_->path;
#line 416 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp9__length1 = _data_->path_length1;
#line 416 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp10_ = _data_->_tmp9_[1];
#line 416 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp11_ = g_strdup (_data_->_tmp10_);
#line 416 "/home/test/core/extensions/web-extensions.vala"
	_data_->resource = _data_->_tmp11_;
#line 417 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp12_ = web_extension_extension_manager_get_default ();
#line 417 "/home/test/core/extensions/web-extensions.vala"
	_data_->manager = _data_->_tmp12_;
#line 418 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp13_ = _data_->manager;
#line 418 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp14_ = _data_->_tmp13_->extensions;
#line 418 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp15_ = _data_->id;
#line 418 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp16_ = g_hash_table_lookup (_data_->_tmp14_, _data_->_tmp15_);
#line 418 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp17_ = _g_object_ref0 ((WebExtensionExtension*) _data_->_tmp16_);
#line 418 "/home/test/core/extensions/web-extensions.vala"
	_data_->extension = _data_->_tmp17_;
#line 6167 "web-extensions.c"
	{
#line 420 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp18_ = _data_->extension;
#line 420 "/home/test/core/extensions/web-extensions.vala"
		if (_data_->_tmp18_ != NULL) {
#line 421 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp19_ = _data_->extension;
#line 421 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp20_ = _data_->resource;
#line 421 "/home/test/core/extensions/web-extensions.vala"
			_data_->_state_ = 1;
#line 421 "/home/test/core/extensions/web-extensions.vala"
			web_extension_extension_get_resource (_data_->_tmp19_, _data_->_tmp20_, web_extension_browser_extension_scheme_ready, _data_);
#line 421 "/home/test/core/extensions/web-extensions.vala"
			return FALSE;
#line 6183 "web-extensions.c"
			_state_1:
#line 421 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp21_ = web_extension_extension_get_resource_finish (_data_->_tmp19_, _data_->_res_, &_data_->_inner_error0_);
#line 421 "/home/test/core/extensions/web-extensions.vala"
			_data_->data = _data_->_tmp21_;
#line 421 "/home/test/core/extensions/web-extensions.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 6191 "web-extensions.c"
				goto __catch5_g_error;
			}
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp22_ = _data_->data;
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp23_ = 0;
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp24_ = g_bytes_get_data (_data_->_tmp22_, &_data_->_tmp23_);
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp25_ = (_data_->_tmp24_ != NULL) ? _vala_array_dup5 (_data_->_tmp24_, _data_->_tmp23_) : ((gpointer) _data_->_tmp24_);
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp25__length1 = _data_->_tmp23_;
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp26_ = (GMemoryInputStream*) g_memory_input_stream_new_from_data (_data_->_tmp25_, _data_->_tmp25__length1, _g_free_gdestroy_notify);
#line 422 "/home/test/core/extensions/web-extensions.vala"
			_data_->stream = _data_->_tmp26_;
#line 423 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp27_ = _data_->stream;
#line 423 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp28_ = _data_->data;
#line 423 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp29_ = _vala_g_bytes_get_length (_data_->_tmp28_);
#line 423 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp30_ = _data_->_tmp29_;
#line 423 "/home/test/core/extensions/web-extensions.vala"
			webkit_uri_scheme_request_finish (_data_->request, (GInputStream*) _data_->_tmp27_, (gint64) _data_->_tmp30_, "text/html");
#line 420 "/home/test/core/extensions/web-extensions.vala"
			_g_object_unref0 (_data_->stream);
#line 420 "/home/test/core/extensions/web-extensions.vala"
			_g_bytes_unref0 (_data_->data);
#line 6222 "web-extensions.c"
		}
	}
	goto __finally5;
	__catch5_g_error:
	{
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_data_->_inner_error0_ = NULL;
#line 426 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp31_ = _data_->_error_;
#line 426 "/home/test/core/extensions/web-extensions.vala"
		webkit_uri_scheme_request_finish_error (_data_->request, _data_->_tmp31_);
#line 427 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp32_ = webkit_uri_scheme_request_get_path (_data_->request);
#line 427 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp33_ = _data_->_error_;
#line 427 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp34_ = _data_->_tmp33_->message;
#line 427 "/home/test/core/extensions/web-extensions.vala"
		g_critical ("web-extensions.vala:427: Failed to render %s: %s", _data_->_tmp32_, _data_->_tmp34_);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_g_error_free0 (_data_->_error_);
#line 6246 "web-extensions.c"
	}
	__finally5:
#line 419 "/home/test/core/extensions/web-extensions.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->extension);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->manager);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->resource);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_g_free0 (_data_->id);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		_data_->path = (_vala_array_free (_data_->path, _data_->path_length1, (GDestroyNotify) g_free), NULL);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		g_object_unref (_data_->_async_result);
#line 419 "/home/test/core/extensions/web-extensions.vala"
		return FALSE;
#line 6269 "web-extensions.c"
	}
#line 429 "/home/test/core/extensions/web-extensions.vala"
	g_object_unref ((GObject*) _data_->request);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->extension);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->manager);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->resource);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (_data_->id);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	_data_->path = (_vala_array_free (_data_->path, _data_->path_length1, (GDestroyNotify) g_free), NULL);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_state_ != 0) {
#line 413 "/home/test/core/extensions/web-extensions.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 413 "/home/test/core/extensions/web-extensions.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 6291 "web-extensions.c"
		}
	}
#line 413 "/home/test/core/extensions/web-extensions.vala"
	g_object_unref (_data_->_async_result);
#line 413 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 6298 "web-extensions.c"
}


static void
web_extension_browser_install_extension_data_free (gpointer _data)
{
	WebExtensionBrowserInstallExtensionData* _data_;
	_data_ = _data;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->extension);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->self);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	g_slice_free (WebExtensionBrowserInstallExtensionData, _data_);
#line 6313 "web-extensions.c"
}


static void
web_extension_browser_install_extension (WebExtensionBrowser* self,
                                         WebExtensionExtension* extension,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_)
{
	WebExtensionBrowserInstallExtensionData* _data_;
	WebExtensionBrowser* _tmp0_;
	WebExtensionExtension* _tmp1_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_slice_new0 (WebExtensionBrowserInstallExtensionData);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	g_task_set_task_data (_data_->_async_result, _data_, web_extension_browser_install_extension_data_free);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_->self = _tmp0_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _g_object_ref0 (extension);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->extension);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_->extension = _tmp1_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_install_extension_co (_data_);
#line 6344 "web-extensions.c"
}


static void
web_extension_browser_install_extension_finish (WebExtensionBrowser* self,
                                                GAsyncResult* _res_,
                                                GError** error)
{
	WebExtensionBrowserInstallExtensionData* _data_;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	if (NULL == _data_) {
#line 410 "/home/test/core/extensions/web-extensions.vala"
		return;
#line 6360 "web-extensions.c"
	}
}


static gboolean
_web_extension_browser_install_extension_co_gsource_func (gpointer self)
{
	gboolean result;
	result = web_extension_browser_install_extension_co (self);
#line 447 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 6372 "web-extensions.c"
}


static void
web_extension_browser_install_extension_ready (GObject* source_object,
                                               GAsyncResult* _res_,
                                               gpointer _user_data_)
{
	WebExtensionBrowserInstallExtensionData* _data_;
#line 456 "/home/test/core/extensions/web-extensions.vala"
	_data_ = _user_data_;
#line 456 "/home/test/core/extensions/web-extensions.vala"
	_data_->_source_object_ = source_object;
#line 456 "/home/test/core/extensions/web-extensions.vala"
	_data_->_res_ = _res_;
#line 456 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_install_extension_co (_data_);
#line 6390 "web-extensions.c"
}


static gboolean
web_extension_browser_install_extension_co (WebExtensionBrowserInstallExtensionData* _data_)
{
#line 432 "/home/test/core/extensions/web-extensions.vala"
	switch (_data_->_state_) {
#line 432 "/home/test/core/extensions/web-extensions.vala"
		case 0:
#line 6401 "web-extensions.c"
		goto _state_0;
#line 432 "/home/test/core/extensions/web-extensions.vala"
		case 1:
#line 6405 "web-extensions.c"
		goto _state_1;
#line 432 "/home/test/core/extensions/web-extensions.vala"
		case 2:
#line 6409 "web-extensions.c"
		goto _state_2;
		default:
#line 432 "/home/test/core/extensions/web-extensions.vala"
		g_assert_not_reached ();
#line 6414 "web-extensions.c"
	}
	_state_0:
#line 433 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp0_ = web_extension_extension_get_browser_action (_data_->extension);
#line 433 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 433 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_tmp1_ != NULL) {
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp2_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp3_ = _data_->_tmp2_;
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp4_ = _data_->_tmp3_;
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp5_ = web_extension_button_new (WEB_EXTENSION_IS_EXTENSION (_data_->extension) ? ((WebExtensionExtension*) _data_->extension) : NULL);
#line 434 "/home/test/core/extensions/web-extensions.vala"
		g_object_ref_sink (_data_->_tmp5_);
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp6_ = _data_->_tmp5_;
#line 434 "/home/test/core/extensions/web-extensions.vala"
		midori_browser_add_button (_data_->_tmp4_, (GtkButton*) _data_->_tmp6_);
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->_tmp6_);
#line 434 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->_tmp4_);
#line 6441 "web-extensions.c"
	}
#line 437 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp7_ = web_extension_extension_get_sidebar (_data_->extension);
#line 437 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp8_ = _data_->_tmp7_;
#line 437 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_tmp8_ != NULL) {
#line 438 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp9_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
#line 438 "/home/test/core/extensions/web-extensions.vala"
		g_object_ref_sink (_data_->_tmp9_);
#line 438 "/home/test/core/extensions/web-extensions.vala"
		_data_->scrolled = _data_->_tmp9_;
#line 439 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp10_ = web_extension_extension_get_browser_action (_data_->extension);
#line 439 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp11_ = _data_->_tmp10_;
#line 439 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp12_ = web_extension_action_get_popup (_data_->_tmp11_);
#line 439 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp13_ = _data_->_tmp12_;
#line 439 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp14_ = web_extension_web_view_new (_data_->extension, _data_->_tmp13_);
#line 439 "/home/test/core/extensions/web-extensions.vala"
		g_object_ref_sink (_data_->_tmp14_);
#line 439 "/home/test/core/extensions/web-extensions.vala"
		_data_->web_view = _data_->_tmp14_;
#line 440 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp15_ = _data_->scrolled;
#line 440 "/home/test/core/extensions/web-extensions.vala"
		gtk_widget_show ((GtkWidget*) _data_->_tmp15_);
#line 441 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp16_ = _data_->scrolled;
#line 441 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp17_ = _data_->web_view;
#line 441 "/home/test/core/extensions/web-extensions.vala"
		gtk_container_add ((GtkContainer*) _data_->_tmp16_, (GtkWidget*) _data_->_tmp17_);
#line 442 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp18_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 442 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp19_ = _data_->_tmp18_;
#line 442 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp20_ = _data_->_tmp19_;
#line 442 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp21_ = _data_->scrolled;
#line 442 "/home/test/core/extensions/web-extensions.vala"
		midori_browser_add_panel (_data_->_tmp20_, (GtkWidget*) _data_->_tmp21_);
#line 442 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->_tmp20_);
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp22_ = _data_->scrolled;
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp23_ = gtk_widget_get_parent ((GtkWidget*) _data_->_tmp22_);
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp24_ = _data_->_tmp23_;
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp25_ = _data_->scrolled;
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp26_ = web_extension_extension_get_sidebar (_data_->extension);
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp27_ = _data_->_tmp26_;
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp28_ = web_extension_action_get_title (_data_->_tmp27_);
#line 443 "/home/test/core/extensions/web-extensions.vala"
		_data_->_tmp29_ = _data_->_tmp28_;
#line 443 "/home/test/core/extensions/web-extensions.vala"
		gtk_container_child_set (_data_->_tmp24_, (GtkWidget*) _data_->_tmp25_, "title", _data_->_tmp29_, NULL);
#line 437 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->web_view);
#line 437 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_data_->scrolled);
#line 6513 "web-extensions.c"
	}
#line 447 "/home/test/core/extensions/web-extensions.vala"
	_data_->src = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 500, _web_extension_browser_install_extension_co_gsource_func, _data_, NULL);
#line 448 "/home/test/core/extensions/web-extensions.vala"
	_data_->_state_ = 1;
#line 448 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 6521 "web-extensions.c"
	_state_1:
	;
#line 449 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp30_ = _data_->src;
#line 449 "/home/test/core/extensions/web-extensions.vala"
	g_source_remove (_data_->_tmp30_);
#line 452 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp31_ = web_extension_extension_get_background_page (_data_->extension);
#line 452 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp32_ = _data_->_tmp31_;
#line 452 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp33_ = web_extension_web_view_new (_data_->extension, _data_->_tmp32_);
#line 452 "/home/test/core/extensions/web-extensions.vala"
	g_object_ref_sink (_data_->_tmp33_);
#line 452 "/home/test/core/extensions/web-extensions.vala"
	_data_->background = _data_->_tmp33_;
#line 453 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp34_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) _data_->self);
#line 453 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp35_ = _data_->_tmp34_;
#line 453 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp36_ = _data_->_tmp35_;
#line 453 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp37_ = gtk_bin_get_child ((GtkBin*) _data_->_tmp36_);
#line 453 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp38_ = _data_->background;
#line 453 "/home/test/core/extensions/web-extensions.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp37_, gtk_container_get_type (), GtkContainer), (GtkWidget*) _data_->_tmp38_);
#line 453 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->_tmp36_);
#line 455 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp39_ = web_extension_extension_get_background_scripts (_data_->extension);
#line 455 "/home/test/core/extensions/web-extensions.vala"
	_data_->_tmp40_ = _data_->_tmp39_;
#line 6556 "web-extensions.c"
	{
#line 455 "/home/test/core/extensions/web-extensions.vala"
		_data_->filename_collection = _data_->_tmp40_;
#line 455 "/home/test/core/extensions/web-extensions.vala"
		for (_data_->filename_it = _data_->filename_collection; _data_->filename_it != NULL; _data_->filename_it = _data_->filename_it->next) {
#line 455 "/home/test/core/extensions/web-extensions.vala"
			_data_->_tmp41_ = g_strdup ((const gchar*) _data_->filename_it->data);
#line 455 "/home/test/core/extensions/web-extensions.vala"
			_data_->filename = _data_->_tmp41_;
#line 6566 "web-extensions.c"
			{
#line 456 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp42_ = _data_->filename;
#line 456 "/home/test/core/extensions/web-extensions.vala"
				_data_->_state_ = 2;
#line 456 "/home/test/core/extensions/web-extensions.vala"
				web_extension_extension_get_resource (_data_->extension, _data_->_tmp42_, web_extension_browser_install_extension_ready, _data_);
#line 456 "/home/test/core/extensions/web-extensions.vala"
				return FALSE;
#line 6576 "web-extensions.c"
				_state_2:
#line 456 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp43_ = web_extension_extension_get_resource_finish (_data_->extension, _data_->_res_, &_data_->_inner_error0_);
#line 456 "/home/test/core/extensions/web-extensions.vala"
				_data_->script = _data_->_tmp43_;
#line 456 "/home/test/core/extensions/web-extensions.vala"
				if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 456 "/home/test/core/extensions/web-extensions.vala"
					g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 456 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (_data_->filename);
#line 456 "/home/test/core/extensions/web-extensions.vala"
					_g_object_unref0 (_data_->background);
#line 456 "/home/test/core/extensions/web-extensions.vala"
					g_object_unref (_data_->_async_result);
#line 456 "/home/test/core/extensions/web-extensions.vala"
					return FALSE;
#line 6594 "web-extensions.c"
				}
#line 457 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp44_ = _data_->script;
#line 457 "/home/test/core/extensions/web-extensions.vala"
				if (_data_->_tmp44_ == NULL) {
#line 458 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp45_ = web_extension_extension_get_name (_data_->extension);
#line 458 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp46_ = _data_->_tmp45_;
#line 458 "/home/test/core/extensions/web-extensions.vala"
					_data_->_tmp47_ = _data_->filename;
#line 458 "/home/test/core/extensions/web-extensions.vala"
					g_warning ("web-extensions.vala:458: Failed to load background script for '%s': %s", _data_->_tmp46_, _data_->_tmp47_);
#line 459 "/home/test/core/extensions/web-extensions.vala"
					_g_bytes_unref0 (_data_->script);
#line 459 "/home/test/core/extensions/web-extensions.vala"
					_g_free0 (_data_->filename);
#line 459 "/home/test/core/extensions/web-extensions.vala"
					continue;
#line 6614 "web-extensions.c"
				}
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp48_ = _data_->background;
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp49_ = webkit_web_view_get_user_content_manager ((WebKitWebView*) _data_->_tmp48_);
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp50_ = _data_->script;
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp51_ = 0;
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp52_ = g_bytes_get_data (_data_->_tmp50_, &_data_->_tmp51_);
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp53_ = webkit_user_script_new ((const gchar*) _data_->_tmp52_, WEBKIT_USER_CONTENT_INJECT_TOP_FRAME, WEBKIT_USER_SCRIPT_INJECT_AT_DOCUMENT_END, NULL, NULL);
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_data_->_tmp54_ = _data_->_tmp53_;
#line 461 "/home/test/core/extensions/web-extensions.vala"
				webkit_user_content_manager_add_script (_data_->_tmp49_, _data_->_tmp54_);
#line 461 "/home/test/core/extensions/web-extensions.vala"
				_webkit_user_script_unref0 (_data_->_tmp54_);
#line 455 "/home/test/core/extensions/web-extensions.vala"
				_g_bytes_unref0 (_data_->script);
#line 455 "/home/test/core/extensions/web-extensions.vala"
				_g_free0 (_data_->filename);
#line 6638 "web-extensions.c"
			}
		}
	}
#line 432 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_data_->background);
#line 432 "/home/test/core/extensions/web-extensions.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 432 "/home/test/core/extensions/web-extensions.vala"
	if (_data_->_state_ != 0) {
#line 432 "/home/test/core/extensions/web-extensions.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 432 "/home/test/core/extensions/web-extensions.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 6652 "web-extensions.c"
		}
	}
#line 432 "/home/test/core/extensions/web-extensions.vala"
	g_object_unref (_data_->_async_result);
#line 432 "/home/test/core/extensions/web-extensions.vala"
	return FALSE;
#line 6659 "web-extensions.c"
}


static void
__lambda6_ (WebExtensionBrowser* self,
            WebKitURISchemeRequest* request)
{
#line 474 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (request != NULL);
#line 475 "/home/test/core/extensions/web-extensions.vala"
	g_object_ref ((GObject*) request);
#line 476 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_extension_scheme (self, request, NULL, NULL);
#line 6673 "web-extensions.c"
}


static void
___lambda6__web_kit_uri_scheme_request_callback (WebKitURISchemeRequest* request,
                                                 gpointer self)
{
#line 474 "/home/test/core/extensions/web-extensions.vala"
	__lambda6_ ((WebExtensionBrowser*) self, request);
#line 6683 "web-extensions.c"
}


static void
__lambda7_ (WebExtensionBrowser* self,
            GObject* extension)
{
#line 480 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (extension != NULL);
#line 481 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_install_extension (self, G_TYPE_CHECK_INSTANCE_CAST (extension, WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtension), NULL, NULL);
#line 6695 "web-extensions.c"
}


static void
___lambda7__web_extension_extension_manager_extension_added (WebExtensionExtensionManager* _sender,
                                                             GObject* extension,
                                                             gpointer self)
{
#line 480 "/home/test/core/extensions/web-extensions.vala"
	__lambda7_ ((WebExtensionBrowser*) self, extension);
#line 6706 "web-extensions.c"
}


static void
__lambda8_ (WebExtensionBrowser* self,
            WebExtensionExtension* extension)
{
#line 483 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (extension != NULL);
#line 484 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_install_extension (self, G_TYPE_CHECK_INSTANCE_CAST (extension, WEB_EXTENSION_TYPE_EXTENSION, WebExtensionExtension), NULL, NULL);
#line 6718 "web-extensions.c"
}


static void
___lambda8__web_extension_extension_manager_extension_manager_foreach_func (WebExtensionExtension* extension,
                                                                            gpointer self)
{
#line 483 "/home/test/core/extensions/web-extensions.vala"
	__lambda8_ ((WebExtensionBrowser*) self, extension);
#line 6728 "web-extensions.c"
}


static void
_web_extension_browser_tab_added_gtk_container_add (GtkContainer* _sender,
                                                    GtkWidget* widget,
                                                    gpointer self)
{
#line 487 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_tab_added ((WebExtensionBrowser*) self, widget);
#line 6739 "web-extensions.c"
}


static void
web_extension_browser_real_activate (MidoriBrowserActivatable* base)
{
	WebExtensionBrowser * self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	WebKitWebContext* context = NULL;
	MidoriBrowser* _tmp6_;
	MidoriBrowser* _tmp7_;
	MidoriBrowser* _tmp8_;
	WebKitWebContext* _tmp9_;
	WebKitWebContext* _tmp10_;
	WebKitWebContext* _tmp11_;
	WebKitWebContext* _tmp12_;
	WebKitWebContext* _tmp13_;
	WebExtensionExtensionManager* manager = NULL;
	WebExtensionExtensionManager* _tmp14_;
	WebExtensionExtensionManager* _tmp15_;
	WebExtensionExtensionManager* _tmp16_;
	MidoriBrowser* _tmp17_;
	MidoriBrowser* _tmp18_;
	MidoriBrowser* _tmp19_;
	GtkStack* _tmp20_;
	MidoriBrowser* _tmp21_;
	MidoriBrowser* _tmp22_;
	MidoriBrowser* _tmp23_;
	MidoriTab* _tmp24_;
	MidoriTab* _tmp25_;
	gboolean _tmp26_;
#line 468 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionBrowser*) base;
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _tmp0_;
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = _tmp1_;
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = midori_browser_get_is_locked (_tmp2_);
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_tmp4_ = _tmp3_;
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_tmp5_ = _tmp4_;
#line 469 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp2_);
#line 469 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp5_) {
#line 470 "/home/test/core/extensions/web-extensions.vala"
		return;
#line 6796 "web-extensions.c"
	}
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp6_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp7_ = _tmp6_;
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp8_ = _tmp7_;
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp9_ = midori_browser_get_web_context (_tmp8_);
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp10_ = _tmp9_;
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp11_ = _g_object_ref0 (_tmp10_);
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_tmp12_ = _tmp11_;
#line 473 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp8_);
#line 473 "/home/test/core/extensions/web-extensions.vala"
	context = _tmp12_;
#line 474 "/home/test/core/extensions/web-extensions.vala"
	_tmp13_ = context;
#line 474 "/home/test/core/extensions/web-extensions.vala"
	webkit_web_context_register_uri_scheme (_tmp13_, "extension", ___lambda6__web_kit_uri_scheme_request_callback, g_object_ref (self), g_object_unref);
#line 479 "/home/test/core/extensions/web-extensions.vala"
	_tmp14_ = web_extension_extension_manager_get_default ();
#line 479 "/home/test/core/extensions/web-extensions.vala"
	manager = _tmp14_;
#line 480 "/home/test/core/extensions/web-extensions.vala"
	_tmp15_ = manager;
#line 480 "/home/test/core/extensions/web-extensions.vala"
	g_signal_connect_object (_tmp15_, "extension-added", (GCallback) ___lambda7__web_extension_extension_manager_extension_added, self, 0);
#line 483 "/home/test/core/extensions/web-extensions.vala"
	_tmp16_ = manager;
#line 483 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_foreach (_tmp16_, ___lambda8__web_extension_extension_manager_extension_manager_foreach_func, self);
#line 487 "/home/test/core/extensions/web-extensions.vala"
	_tmp17_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 487 "/home/test/core/extensions/web-extensions.vala"
	_tmp18_ = _tmp17_;
#line 487 "/home/test/core/extensions/web-extensions.vala"
	_tmp19_ = _tmp18_;
#line 487 "/home/test/core/extensions/web-extensions.vala"
	_tmp20_ = _tmp19_->tabs;
#line 487 "/home/test/core/extensions/web-extensions.vala"
	g_signal_connect_object ((GtkContainer*) _tmp20_, "add", (GCallback) _web_extension_browser_tab_added_gtk_container_add, self, 0);
#line 487 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp19_);
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_tmp21_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_tmp22_ = _tmp21_;
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_tmp23_ = _tmp22_;
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_tmp24_ = midori_browser_get_tab (_tmp23_);
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_tmp25_ = _tmp24_;
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_tmp26_ = _tmp25_ != NULL;
#line 488 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp23_);
#line 488 "/home/test/core/extensions/web-extensions.vala"
	if (_tmp26_) {
#line 6860 "web-extensions.c"
		MidoriBrowser* _tmp27_;
		MidoriBrowser* _tmp28_;
		MidoriBrowser* _tmp29_;
		MidoriTab* _tmp30_;
		MidoriTab* _tmp31_;
#line 489 "/home/test/core/extensions/web-extensions.vala"
		_tmp27_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 489 "/home/test/core/extensions/web-extensions.vala"
		_tmp28_ = _tmp27_;
#line 489 "/home/test/core/extensions/web-extensions.vala"
		_tmp29_ = _tmp28_;
#line 489 "/home/test/core/extensions/web-extensions.vala"
		_tmp30_ = midori_browser_get_tab (_tmp29_);
#line 489 "/home/test/core/extensions/web-extensions.vala"
		_tmp31_ = _tmp30_;
#line 489 "/home/test/core/extensions/web-extensions.vala"
		web_extension_browser_tab_added (self, (GtkWidget*) _tmp31_);
#line 489 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (_tmp29_);
#line 6880 "web-extensions.c"
	}
#line 468 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (manager);
#line 468 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (context);
#line 6886 "web-extensions.c"
}


static void
web_extension_browser_tab_added (WebExtensionBrowser* self,
                                 GtkWidget* widget)
{
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	GtkStack* _tmp3_;
	guint _tmp4_;
	WebExtensionExtensionManager* manager = NULL;
	WebExtensionExtensionManager* _tmp5_;
	MidoriTab* tab = NULL;
	MidoriTab* _tmp6_;
	WebKitUserContentManager* content = NULL;
	WebKitUserContentManager* _tmp7_;
	WebKitUserContentManager* _tmp8_;
	GFile* builtin_path = NULL;
	GApplication* _tmp9_;
	GFile* _tmp10_;
	GFile* _tmp11_;
	GFile* _tmp12_;
	GFile* _tmp13_;
	GFile* _tmp14_;
	GFile* _tmp15_;
	GFile* _tmp16_;
	GFile* _tmp17_;
	gchar* user_path = NULL;
	const gchar* _tmp18_;
	gchar* _tmp19_;
	GFile* _tmp20_;
	GFile* _tmp21_;
#line 493 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (self != NULL);
#line 493 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (widget != NULL);
#line 494 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 494 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _tmp0_;
#line 494 "/home/test/core/extensions/web-extensions.vala"
	_tmp2_ = _tmp1_;
#line 494 "/home/test/core/extensions/web-extensions.vala"
	_tmp3_ = _tmp2_->tabs;
#line 494 "/home/test/core/extensions/web-extensions.vala"
	g_signal_parse_name ("add", gtk_container_get_type (), &_tmp4_, NULL, FALSE);
#line 494 "/home/test/core/extensions/web-extensions.vala"
	g_signal_handlers_disconnect_matched ((GtkContainer*) _tmp3_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp4_, 0, NULL, (GCallback) _web_extension_browser_tab_added_gtk_container_add, self);
#line 494 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp2_);
#line 496 "/home/test/core/extensions/web-extensions.vala"
	_tmp5_ = web_extension_extension_manager_get_default ();
#line 496 "/home/test/core/extensions/web-extensions.vala"
	manager = _tmp5_;
#line 497 "/home/test/core/extensions/web-extensions.vala"
	_tmp6_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (widget, MIDORI_TYPE_TAB) ? ((MidoriTab*) widget) : NULL);
#line 497 "/home/test/core/extensions/web-extensions.vala"
	tab = _tmp6_;
#line 499 "/home/test/core/extensions/web-extensions.vala"
	_tmp7_ = webkit_web_view_get_user_content_manager ((WebKitWebView*) tab);
#line 499 "/home/test/core/extensions/web-extensions.vala"
	_tmp8_ = _g_object_ref0 (_tmp7_);
#line 499 "/home/test/core/extensions/web-extensions.vala"
	content = _tmp8_;
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp9_ = g_application_get_default ();
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp10_ = midori_app_get_exec_path (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, MIDORI_TYPE_APP, MidoriApp));
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp11_ = _tmp10_;
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp12_ = g_file_get_parent (_tmp11_);
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp13_ = _tmp12_;
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp14_ = g_file_get_child (_tmp13_, "extensions");
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_tmp15_ = _tmp14_;
#line 501 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp13_);
#line 501 "/home/test/core/extensions/web-extensions.vala"
	builtin_path = _tmp15_;
#line 502 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_load_from_folder (manager, content, builtin_path, NULL, NULL);
#line 504 "/home/test/core/extensions/web-extensions.vala"
	_tmp16_ = g_file_new_for_path (PLUGINDIR);
#line 504 "/home/test/core/extensions/web-extensions.vala"
	_tmp17_ = _tmp16_;
#line 504 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_load_from_folder (manager, content, _tmp17_, NULL, NULL);
#line 504 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp17_);
#line 506 "/home/test/core/extensions/web-extensions.vala"
	_tmp18_ = g_get_user_data_dir ();
#line 506 "/home/test/core/extensions/web-extensions.vala"
	_tmp19_ = g_build_path (G_DIR_SEPARATOR_S, _tmp18_, PROJECT_NAME, "extensions", NULL);
#line 506 "/home/test/core/extensions/web-extensions.vala"
	user_path = _tmp19_;
#line 508 "/home/test/core/extensions/web-extensions.vala"
	_tmp20_ = g_file_new_for_path (user_path);
#line 508 "/home/test/core/extensions/web-extensions.vala"
	_tmp21_ = _tmp20_;
#line 508 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_load_from_folder (manager, content, _tmp21_, NULL, NULL);
#line 508 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (_tmp21_);
#line 493 "/home/test/core/extensions/web-extensions.vala"
	_g_free0 (user_path);
#line 493 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (builtin_path);
#line 493 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (content);
#line 493 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (tab);
#line 493 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (manager);
#line 7005 "web-extensions.c"
}


WebExtensionBrowser*
web_extension_browser_construct (GType object_type)
{
	WebExtensionBrowser * self = NULL;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionBrowser*) g_object_new (object_type, NULL);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	return self;
#line 7017 "web-extensions.c"
}


WebExtensionBrowser*
web_extension_browser_new (void)
{
#line 410 "/home/test/core/extensions/web-extensions.vala"
	return web_extension_browser_construct (WEB_EXTENSION_TYPE_BROWSER);
#line 7026 "web-extensions.c"
}


static MidoriBrowser*
web_extension_browser_real_get_browser (MidoriBrowserActivatable* base)
{
	MidoriBrowser* result;
	WebExtensionBrowser* self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
#line 411 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionBrowser*) base;
#line 411 "/home/test/core/extensions/web-extensions.vala"
	_tmp0_ = self->priv->_browser;
#line 411 "/home/test/core/extensions/web-extensions.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 411 "/home/test/core/extensions/web-extensions.vala"
	result = _tmp1_;
#line 411 "/home/test/core/extensions/web-extensions.vala"
	return result;
#line 7047 "web-extensions.c"
}


static void
web_extension_browser_real_set_browser (MidoriBrowserActivatable* base,
                                        MidoriBrowser* value)
{
	WebExtensionBrowser* self;
#line 411 "/home/test/core/extensions/web-extensions.vala"
	self = (WebExtensionBrowser*) base;
#line 411 "/home/test/core/extensions/web-extensions.vala"
	if (web_extension_browser_real_get_browser (base) != value) {
#line 7060 "web-extensions.c"
		MidoriBrowser* _tmp0_;
#line 411 "/home/test/core/extensions/web-extensions.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 411 "/home/test/core/extensions/web-extensions.vala"
		_g_object_unref0 (self->priv->_browser);
#line 411 "/home/test/core/extensions/web-extensions.vala"
		self->priv->_browser = _tmp0_;
#line 411 "/home/test/core/extensions/web-extensions.vala"
		g_object_notify_by_pspec ((GObject *) self, web_extension_browser_properties[WEB_EXTENSION_BROWSER_BROWSER_PROPERTY]);
#line 7070 "web-extensions.c"
	}
}


static void
web_extension_browser_class_init (WebExtensionBrowserClass * klass)
{
#line 410 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_parent_class = g_type_class_peek_parent (klass);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	g_type_class_add_private (klass, sizeof (WebExtensionBrowserPrivate));
#line 410 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_web_extension_browser_get_property;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_web_extension_browser_set_property;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (klass)->finalize = web_extension_browser_finalize;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), WEB_EXTENSION_BROWSER_BROWSER_PROPERTY, web_extension_browser_properties[WEB_EXTENSION_BROWSER_BROWSER_PROPERTY] = g_param_spec_object ("browser", "browser", "browser", MIDORI_TYPE_BROWSER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 7090 "web-extensions.c"
}


static void
web_extension_browser_midori_browser_activatable_interface_init (MidoriBrowserActivatableIface * iface)
{
#line 410 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_midori_browser_activatable_parent_iface = g_type_interface_peek_parent (iface);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	iface->activate = (void (*) (MidoriBrowserActivatable*)) web_extension_browser_real_activate;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	iface->get_browser = web_extension_browser_real_get_browser;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	iface->set_browser = web_extension_browser_real_set_browser;
#line 7105 "web-extensions.c"
}


static void
web_extension_browser_instance_init (WebExtensionBrowser * self)
{
#line 410 "/home/test/core/extensions/web-extensions.vala"
	self->priv = WEB_EXTENSION_BROWSER_GET_PRIVATE (self);
#line 7114 "web-extensions.c"
}


static void
web_extension_browser_finalize (GObject * obj)
{
	WebExtensionBrowser * self;
#line 410 "/home/test/core/extensions/web-extensions.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowser);
#line 411 "/home/test/core/extensions/web-extensions.vala"
	_g_object_unref0 (self->priv->_browser);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	G_OBJECT_CLASS (web_extension_browser_parent_class)->finalize (obj);
#line 7128 "web-extensions.c"
}


GType
web_extension_browser_get_type (void)
{
	return web_extension_browser_type_id;
}


GType
web_extension_browser_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (WebExtensionBrowserClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) web_extension_browser_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (WebExtensionBrowser), 0, (GInstanceInitFunc) web_extension_browser_instance_init, NULL };
	static const GInterfaceInfo midori_browser_activatable_info = { (GInterfaceInitFunc) web_extension_browser_midori_browser_activatable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	web_extension_browser_type_id = g_type_module_register_type (module, G_TYPE_OBJECT, "WebExtensionBrowser", &g_define_type_info, 0);
	g_type_module_add_interface (module, web_extension_browser_type_id, MIDORI_TYPE_BROWSER_ACTIVATABLE, &midori_browser_activatable_info);
	return web_extension_browser_type_id;
}


static void
_vala_web_extension_browser_get_property (GObject * object,
                                          guint property_id,
                                          GValue * value,
                                          GParamSpec * pspec)
{
	WebExtensionBrowser * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowser);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 410 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_BROWSER_BROWSER_PROPERTY:
#line 410 "/home/test/core/extensions/web-extensions.vala"
		g_value_take_object (value, midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self));
#line 410 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 7166 "web-extensions.c"
		default:
#line 410 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 410 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 7172 "web-extensions.c"
	}
}


static void
_vala_web_extension_browser_set_property (GObject * object,
                                          guint property_id,
                                          const GValue * value,
                                          GParamSpec * pspec)
{
	WebExtensionBrowser * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, WEB_EXTENSION_TYPE_BROWSER, WebExtensionBrowser);
#line 410 "/home/test/core/extensions/web-extensions.vala"
	switch (property_id) {
#line 410 "/home/test/core/extensions/web-extensions.vala"
		case WEB_EXTENSION_BROWSER_BROWSER_PROPERTY:
#line 410 "/home/test/core/extensions/web-extensions.vala"
		midori_browser_activatable_set_browser ((MidoriBrowserActivatable*) self, g_value_get_object (value));
#line 410 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 7193 "web-extensions.c"
		default:
#line 410 "/home/test/core/extensions/web-extensions.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 410 "/home/test/core/extensions/web-extensions.vala"
		break;
#line 7199 "web-extensions.c"
	}
}


void
peas_register_types (GTypeModule* module)
{
#line 514 "/home/test/core/extensions/web-extensions.vala"
	g_return_if_fail (module != NULL);
#line 514 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_register_type (module);
#line 514 "/home/test/core/extensions/web-extensions.vala"
	web_extension_action_register_type (module);
#line 514 "/home/test/core/extensions/web-extensions.vala"
	web_extension_extension_manager_register_type (module);
#line 514 "/home/test/core/extensions/web-extensions.vala"
	web_extension_web_view_register_type (module);
#line 514 "/home/test/core/extensions/web-extensions.vala"
	web_extension_button_register_type (module);
#line 514 "/home/test/core/extensions/web-extensions.vala"
	web_extension_browser_register_type (module);
#line 515 "/home/test/core/extensions/web-extensions.vala"
	peas_object_module_register_extension_type (G_TYPE_CHECK_INSTANCE_CAST (module, peas_object_module_get_type (), PeasObjectModule), MIDORI_TYPE_BROWSER_ACTIVATABLE, WEB_EXTENSION_TYPE_BROWSER);
#line 7223 "web-extensions.c"
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint
_vala_array_length (gpointer array)
{
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



