/* bookmarks.c generated by valac 0.40.23, the Vala compiler
 * generated from bookmarks.vala, do not modify */

/*
 Copyright (C) 2013-2018 Christian Dywan <christian@twotoats.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include "midori-core.h"
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <libpeas/peas.h>


#define BOOKMARKS_TYPE_BOOKMARKS_DATABASE (bookmarks_bookmarks_database_get_type ())
#define BOOKMARKS_BOOKMARKS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOOKMARKS_TYPE_BOOKMARKS_DATABASE, BookmarksBookmarksDatabase))
#define BOOKMARKS_BOOKMARKS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOOKMARKS_TYPE_BOOKMARKS_DATABASE, BookmarksBookmarksDatabaseClass))
#define BOOKMARKS_IS_BOOKMARKS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOOKMARKS_TYPE_BOOKMARKS_DATABASE))
#define BOOKMARKS_IS_BOOKMARKS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOOKMARKS_TYPE_BOOKMARKS_DATABASE))
#define BOOKMARKS_BOOKMARKS_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOOKMARKS_TYPE_BOOKMARKS_DATABASE, BookmarksBookmarksDatabaseClass))

typedef struct _BookmarksBookmarksDatabase BookmarksBookmarksDatabase;
typedef struct _BookmarksBookmarksDatabaseClass BookmarksBookmarksDatabaseClass;
typedef struct _BookmarksBookmarksDatabasePrivate BookmarksBookmarksDatabasePrivate;
enum  {
	BOOKMARKS_BOOKMARKS_DATABASE_0_PROPERTY,
	BOOKMARKS_BOOKMARKS_DATABASE_NUM_PROPERTIES
};
static GParamSpec* bookmarks_bookmarks_database_properties[BOOKMARKS_BOOKMARKS_DATABASE_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _BookmarksBookmarksDatabaseLookupData BookmarksBookmarksDatabaseLookupData;
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _BookmarksBookmarksDatabaseQueryData BookmarksBookmarksDatabaseQueryData;
typedef struct _BookmarksBookmarksDatabaseUpdateData BookmarksBookmarksDatabaseUpdateData;
typedef struct _BookmarksBookmarksDatabaseInsertData BookmarksBookmarksDatabaseInsertData;

#define BOOKMARKS_TYPE_BUTTON (bookmarks_button_get_type ())
#define BOOKMARKS_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOOKMARKS_TYPE_BUTTON, BookmarksButton))
#define BOOKMARKS_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOOKMARKS_TYPE_BUTTON, BookmarksButtonClass))
#define BOOKMARKS_IS_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOOKMARKS_TYPE_BUTTON))
#define BOOKMARKS_IS_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOOKMARKS_TYPE_BUTTON))
#define BOOKMARKS_BUTTON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOOKMARKS_TYPE_BUTTON, BookmarksButtonClass))

typedef struct _BookmarksButton BookmarksButton;
typedef struct _BookmarksButtonClass BookmarksButtonClass;
typedef struct _BookmarksButtonPrivate BookmarksButtonPrivate;
enum  {
	BOOKMARKS_BUTTON_0_PROPERTY,
	BOOKMARKS_BUTTON_NUM_PROPERTIES
};
static GParamSpec* bookmarks_button_properties[BOOKMARKS_BUTTON_NUM_PROPERTIES];
typedef struct _BookmarksButtonItemForTabData BookmarksButtonItemForTabData;
typedef struct _Block1Data Block1Data;
enum  {
	BOOKMARKS_BUTTON_ADD_BOOKMARK_SIGNAL,
	BOOKMARKS_BUTTON_NUM_SIGNALS
};
static guint bookmarks_button_signals[BOOKMARKS_BUTTON_NUM_SIGNALS] = {0};

#define BOOKMARKS_TYPE_FRONTEND (bookmarks_frontend_get_type ())
#define BOOKMARKS_FRONTEND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOOKMARKS_TYPE_FRONTEND, BookmarksFrontend))
#define BOOKMARKS_FRONTEND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOOKMARKS_TYPE_FRONTEND, BookmarksFrontendClass))
#define BOOKMARKS_IS_FRONTEND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOOKMARKS_TYPE_FRONTEND))
#define BOOKMARKS_IS_FRONTEND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOOKMARKS_TYPE_FRONTEND))
#define BOOKMARKS_FRONTEND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOOKMARKS_TYPE_FRONTEND, BookmarksFrontendClass))

typedef struct _BookmarksFrontend BookmarksFrontend;
typedef struct _BookmarksFrontendClass BookmarksFrontendClass;
typedef struct _BookmarksFrontendPrivate BookmarksFrontendPrivate;
enum  {
	BOOKMARKS_FRONTEND_0_PROPERTY,
	BOOKMARKS_FRONTEND_BROWSER_PROPERTY,
	BOOKMARKS_FRONTEND_NUM_PROPERTIES
};
static GParamSpec* bookmarks_frontend_properties[BOOKMARKS_FRONTEND_NUM_PROPERTIES];

#define BOOKMARKS_TYPE_COMPLETION (bookmarks_completion_get_type ())
#define BOOKMARKS_COMPLETION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOOKMARKS_TYPE_COMPLETION, BookmarksCompletion))
#define BOOKMARKS_COMPLETION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOOKMARKS_TYPE_COMPLETION, BookmarksCompletionClass))
#define BOOKMARKS_IS_COMPLETION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOOKMARKS_TYPE_COMPLETION))
#define BOOKMARKS_IS_COMPLETION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOOKMARKS_TYPE_COMPLETION))
#define BOOKMARKS_COMPLETION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOOKMARKS_TYPE_COMPLETION, BookmarksCompletionClass))

typedef struct _BookmarksCompletion BookmarksCompletion;
typedef struct _BookmarksCompletionClass BookmarksCompletionClass;
typedef struct _BookmarksCompletionPrivate BookmarksCompletionPrivate;
enum  {
	BOOKMARKS_COMPLETION_0_PROPERTY,
	BOOKMARKS_COMPLETION_COMPLETION_PROPERTY,
	BOOKMARKS_COMPLETION_NUM_PROPERTIES
};
static GParamSpec* bookmarks_completion_properties[BOOKMARKS_COMPLETION_NUM_PROPERTIES];

struct _BookmarksBookmarksDatabase {
	MidoriDatabase parent_instance;
	BookmarksBookmarksDatabasePrivate * priv;
};

struct _BookmarksBookmarksDatabaseClass {
	MidoriDatabaseClass parent_class;
};

struct _BookmarksBookmarksDatabaseLookupData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	BookmarksBookmarksDatabase* self;
	gchar* uri;
	MidoriDatabaseItem* result;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp3_;
	MidoriDatabaseStatement* _tmp4_;
	gboolean _tmp5_;
	MidoriDatabaseStatement* _tmp6_;
	gchar* title;
	MidoriDatabaseStatement* _tmp7_;
	gchar* _tmp8_;
	MidoriDatabaseItem* item;
	const gchar* _tmp9_;
	MidoriDatabaseItem* _tmp10_;
	MidoriDatabaseItem* _tmp11_;
	gint64 _tmp12_;
	MidoriDatabaseStatement* _tmp13_;
	MidoriDatabaseItem* _tmp14_;
	GError* _inner_error0_;
};

struct _BookmarksBookmarksDatabaseQueryData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	BookmarksBookmarksDatabase* self;
	gchar* filter;
	gint64 max_items;
	GCancellable* cancellable;
	GList* result;
	const gchar* _tmp0_;
	gchar* where;
	gchar* _tmp1_;
	gchar* sqlcmd;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp6_;
	MidoriDatabaseStatement* _tmp7_;
	gchar* real_filter;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	MidoriDatabaseStatement* _tmp14_;
	const gchar* _tmp15_;
	GList* items;
	gboolean _tmp16_;
	MidoriDatabaseStatement* _tmp17_;
	gchar* uri;
	MidoriDatabaseStatement* _tmp18_;
	gchar* _tmp19_;
	gchar* title;
	MidoriDatabaseStatement* _tmp20_;
	gchar* _tmp21_;
	MidoriDatabaseItem* item;
	const gchar* _tmp22_;
	const gchar* _tmp23_;
	MidoriDatabaseItem* _tmp24_;
	MidoriDatabaseItem* _tmp25_;
	gint64 _tmp26_;
	MidoriDatabaseStatement* _tmp27_;
	MidoriDatabaseItem* _tmp28_;
	MidoriDatabaseItem* _tmp29_;
	MidoriDatabaseItem* _tmp30_;
	guint src;
	guint _tmp31_;
	gboolean _tmp32_;
	gboolean _tmp33_;
	GError* _error_;
	GError* _tmp34_;
	const gchar* _tmp35_;
	GError* _inner_error0_;
};

struct _BookmarksBookmarksDatabaseUpdateData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	BookmarksBookmarksDatabase* self;
	MidoriDatabaseItem* item;
	gboolean result;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp3_;
	gint64 _tmp4_;
	gint64 _tmp5_;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	MidoriDatabaseStatement* _tmp10_;
	gboolean _tmp11_;
	MidoriDatabaseStatement* _tmp12_;
	GError* _error_;
	const gchar* _tmp13_;
	const gchar* _tmp14_;
	GError* _tmp15_;
	const gchar* _tmp16_;
	GError* _inner_error0_;
};

struct _BookmarksBookmarksDatabaseInsertData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	BookmarksBookmarksDatabase* self;
	MidoriDatabaseItem* item;
	gboolean result;
	gchar* sqlcmd;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	MidoriDatabaseStatement* statement;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	MidoriDatabaseStatement* _tmp8_;
	gboolean _tmp9_;
	MidoriDatabaseStatement* _tmp10_;
	gint64 _tmp11_;
	MidoriDatabaseStatement* _tmp12_;
	GError* _inner_error0_;
};

struct _BookmarksButton {
	GtkButton parent_instance;
	BookmarksButtonPrivate * priv;
};

struct _BookmarksButtonClass {
	GtkButtonClass parent_class;
	void (*add_bookmark) (BookmarksButton* self);
};

struct _BookmarksButtonPrivate {
	GtkPopover* popover;
	GtkEntry* entry_title;
	GtkButton* button_remove;
	MidoriBrowser* browser;
};

struct _BookmarksButtonItemForTabData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	BookmarksButton* self;
	MidoriTab* tab;
	MidoriDatabaseItem* result;
	MidoriDatabaseItem* item;
	gconstpointer _tmp0_;
	MidoriDatabaseItem* _tmp1_;
	MidoriDatabaseItem* _tmp2_;
	BookmarksBookmarksDatabase* _tmp3_;
	BookmarksBookmarksDatabase* _tmp4_;
	MidoriDatabaseItem* _tmp5_;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	MidoriDatabaseItem* _tmp8_;
	MidoriDatabaseItem* _tmp9_;
	GError* _error_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	GError* _tmp12_;
	const gchar* _tmp13_;
	MidoriDatabaseItem* _tmp14_;
	const gchar* _tmp15_;
	const gchar* _tmp16_;
	const gchar* _tmp17_;
	const gchar* _tmp18_;
	MidoriDatabaseItem* _tmp19_;
	BookmarksBookmarksDatabase* _tmp20_;
	BookmarksBookmarksDatabase* _tmp21_;
	MidoriDatabaseItem* _tmp22_;
	GError* _vala1__error_;
	MidoriDatabaseItem* _tmp23_;
	const gchar* _tmp24_;
	const gchar* _tmp25_;
	GError* _tmp26_;
	const gchar* _tmp27_;
	GtkEntry* _tmp28_;
	MidoriDatabaseItem* _tmp29_;
	const gchar* _tmp30_;
	const gchar* _tmp31_;
	MidoriDatabaseItem* _tmp32_;
	MidoriDatabaseItem* _tmp33_;
	GError* _inner_error0_;
};

struct _Block1Data {
	int _ref_count_;
	BookmarksButton* self;
	GSimpleAction* action;
	MidoriBrowser* browser;
};

struct _BookmarksFrontend {
	GObject parent_instance;
	BookmarksFrontendPrivate * priv;
};

struct _BookmarksFrontendClass {
	GObjectClass parent_class;
};

struct _BookmarksFrontendPrivate {
	MidoriBrowser* _browser;
};

struct _BookmarksCompletion {
	PeasExtensionBase parent_instance;
	BookmarksCompletionPrivate * priv;
};

struct _BookmarksCompletionClass {
	PeasExtensionBaseClass parent_class;
};

struct _BookmarksCompletionPrivate {
	MidoriCompletion* _completion;
};


static gpointer bookmarks_bookmarks_database_parent_class = NULL;
static BookmarksBookmarksDatabase* bookmarks_bookmarks_database__default;
static BookmarksBookmarksDatabase* bookmarks_bookmarks_database__default = NULL;
static GType bookmarks_bookmarks_database_type_id = 0;
static gpointer bookmarks_button_parent_class = NULL;
static GType bookmarks_button_type_id = 0;
static gpointer bookmarks_frontend_parent_class = NULL;
static MidoriBrowserActivatableIface * bookmarks_frontend_midori_browser_activatable_parent_iface = NULL;
static GType bookmarks_frontend_type_id = 0;
static gpointer bookmarks_completion_parent_class = NULL;
static MidoriCompletionActivatableIface * bookmarks_completion_midori_completion_activatable_parent_iface = NULL;
static GType bookmarks_completion_type_id = 0;

GType bookmarks_bookmarks_database_register_type (GTypeModule * module);
GType bookmarks_bookmarks_database_get_type (void) G_GNUC_CONST;
BookmarksBookmarksDatabase* bookmarks_bookmarks_database_get_default (GError** error);
static BookmarksBookmarksDatabase* bookmarks_bookmarks_database_new (GError** error);
static BookmarksBookmarksDatabase* bookmarks_bookmarks_database_construct (GType object_type,
                                                                    GError** error);
static void bookmarks_bookmarks_database_real_lookup_data_free (gpointer _data);
static void bookmarks_bookmarks_database_real_lookup (MidoriDatabase* base,
                                               const gchar* uri,
                                               GAsyncReadyCallback _callback_,
                                               gpointer _user_data_);
static gboolean bookmarks_bookmarks_database_real_lookup_co (BookmarksBookmarksDatabaseLookupData* _data_);
static void _g_object_unref0_ (gpointer var);
static inline void _g_list_free__g_object_unref0_ (GList* self);
static void bookmarks_bookmarks_database_real_query_data_free (gpointer _data);
static void bookmarks_bookmarks_database_real_query (MidoriDatabase* base,
                                              const gchar* filter,
                                              gint64 max_items,
                                              GCancellable* cancellable,
                                              GAsyncReadyCallback _callback_,
                                              gpointer _user_data_);
static gboolean bookmarks_bookmarks_database_real_query_co (BookmarksBookmarksDatabaseQueryData* _data_);
static gboolean _bookmarks_bookmarks_database_real_query_co_gsource_func (gpointer self);
static void bookmarks_bookmarks_database_real_update_data_free (gpointer _data);
static void bookmarks_bookmarks_database_real_update (MidoriDatabase* base,
                                               MidoriDatabaseItem* item,
                                               GAsyncReadyCallback _callback_,
                                               gpointer _user_data_);
static gboolean bookmarks_bookmarks_database_real_update_co (BookmarksBookmarksDatabaseUpdateData* _data_);
static void bookmarks_bookmarks_database_real_insert_data_free (gpointer _data);
static void bookmarks_bookmarks_database_real_insert (MidoriDatabase* base,
                                               MidoriDatabaseItem* item,
                                               GAsyncReadyCallback _callback_,
                                               gpointer _user_data_);
static gboolean bookmarks_bookmarks_database_real_insert_co (BookmarksBookmarksDatabaseInsertData* _data_);
static void bookmarks_bookmarks_database_finalize (GObject * obj);
GType bookmarks_button_register_type (GTypeModule * module);
GType bookmarks_button_get_type (void) G_GNUC_CONST;
#define BOOKMARKS_BUTTON_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), BOOKMARKS_TYPE_BUTTON, BookmarksButtonPrivate))
static void bookmarks_button_item_for_tab_data_free (gpointer _data);
static void bookmarks_button_item_for_tab (BookmarksButton* self,
                                    MidoriTab* tab,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_);
static MidoriDatabaseItem* bookmarks_button_item_for_tab_finish (BookmarksButton* self,
                                                          GAsyncResult* _res_);
static gboolean bookmarks_button_item_for_tab_co (BookmarksButtonItemForTabData* _data_);
static void bookmarks_button_item_for_tab_ready (GObject* source_object,
                                          GAsyncResult* _res_,
                                          gpointer _user_data_);
BookmarksButton* bookmarks_button_new (MidoriBrowser* browser);
BookmarksButton* bookmarks_button_construct (GType object_type,
                                             MidoriBrowser* browser);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static void bookmarks_button_bookmark_add_activated (BookmarksButton* self);
static void _bookmarks_button_bookmark_add_activated_g_simple_action_activate (GSimpleAction* _sender,
                                                                        GVariant* parameter,
                                                                        gpointer self);
static void __lambda4_ (Block1Data* _data1_);
static void ___lambda4__g_object_notify (GObject* _sender,
                                  GParamSpec* pspec,
                                  gpointer self);
static void bookmarks_button_real_add_bookmark (BookmarksButton* self);
static GObject * bookmarks_button_constructor (GType type,
                                        guint n_construct_properties,
                                        GObjectConstructParam * construct_properties);
static void _bookmarks_button___lambda5_ (BookmarksButton* self);
static void __bookmarks_button___lambda5__gtk_editable_changed (GtkEditable* _sender,
                                                         gpointer self);
static void _bookmarks_button___lambda6_ (BookmarksButton* self);
static void __bookmarks_button___lambda6__gtk_button_clicked (GtkButton* _sender,
                                                       gpointer self);
static void bookmarks_button_finalize (GObject * obj);
GType bookmarks_frontend_register_type (GTypeModule * module);
GType bookmarks_frontend_get_type (void) G_GNUC_CONST;
#define BOOKMARKS_FRONTEND_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), BOOKMARKS_TYPE_FRONTEND, BookmarksFrontendPrivate))
static void bookmarks_frontend_real_activate (MidoriBrowserActivatable* base);
BookmarksFrontend* bookmarks_frontend_new (void);
BookmarksFrontend* bookmarks_frontend_construct (GType object_type);
static void bookmarks_frontend_finalize (GObject * obj);
static void _vala_bookmarks_frontend_get_property (GObject * object,
                                            guint property_id,
                                            GValue * value,
                                            GParamSpec * pspec);
static void _vala_bookmarks_frontend_set_property (GObject * object,
                                            guint property_id,
                                            const GValue * value,
                                            GParamSpec * pspec);
GType bookmarks_completion_register_type (GTypeModule * module);
GType bookmarks_completion_get_type (void) G_GNUC_CONST;
#define BOOKMARKS_COMPLETION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), BOOKMARKS_TYPE_COMPLETION, BookmarksCompletionPrivate))
static void bookmarks_completion_real_activate (MidoriCompletionActivatable* base);
BookmarksCompletion* bookmarks_completion_new (void);
BookmarksCompletion* bookmarks_completion_construct (GType object_type);
static void bookmarks_completion_finalize (GObject * obj);
static void _vala_bookmarks_completion_get_property (GObject * object,
                                              guint property_id,
                                              GValue * value,
                                              GParamSpec * pspec);
static void _vala_bookmarks_completion_set_property (GObject * object,
                                              guint property_id,
                                              const GValue * value,
                                              GParamSpec * pspec);
void peas_register_types (GTypeModule* module);
GType bookmarks_bookmarks_database_register_type (GTypeModule * module);
GType bookmarks_button_register_type (GTypeModule * module);
GType bookmarks_frontend_register_type (GTypeModule * module);
GType bookmarks_completion_register_type (GTypeModule * module);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);


static gpointer
_g_object_ref0 (gpointer self)
{
#line 19 "/home/test/core/extensions/bookmarks.vala"
	return self ? g_object_ref (self) : NULL;
#line 497 "bookmarks.c"
}


BookmarksBookmarksDatabase*
bookmarks_bookmarks_database_get_default (GError** error)
{
	BookmarksBookmarksDatabase* result = NULL;
	BookmarksBookmarksDatabase* _tmp0_;
	BookmarksBookmarksDatabase* _tmp4_;
	BookmarksBookmarksDatabase* _tmp5_;
	GError* _inner_error0_ = NULL;
#line 16 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = bookmarks_bookmarks_database__default;
#line 16 "/home/test/core/extensions/bookmarks.vala"
	if (_tmp0_ == NULL) {
#line 513 "bookmarks.c"
		BookmarksBookmarksDatabase* _tmp1_ = NULL;
		BookmarksBookmarksDatabase* _tmp2_;
		BookmarksBookmarksDatabase* _tmp3_;
#line 17 "/home/test/core/extensions/bookmarks.vala"
		_tmp2_ = bookmarks_bookmarks_database_new (&_inner_error0_);
#line 17 "/home/test/core/extensions/bookmarks.vala"
		_tmp1_ = _tmp2_;
#line 17 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 17 "/home/test/core/extensions/bookmarks.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 17 "/home/test/core/extensions/bookmarks.vala"
				g_propagate_error (error, _inner_error0_);
#line 17 "/home/test/core/extensions/bookmarks.vala"
				return NULL;
#line 529 "bookmarks.c"
			} else {
#line 17 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 17 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_inner_error0_);
#line 17 "/home/test/core/extensions/bookmarks.vala"
				return NULL;
#line 537 "bookmarks.c"
			}
		}
#line 17 "/home/test/core/extensions/bookmarks.vala"
		_tmp3_ = _tmp1_;
#line 17 "/home/test/core/extensions/bookmarks.vala"
		_tmp1_ = NULL;
#line 17 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (bookmarks_bookmarks_database__default);
#line 17 "/home/test/core/extensions/bookmarks.vala"
		bookmarks_bookmarks_database__default = _tmp3_;
#line 16 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_tmp1_);
#line 550 "bookmarks.c"
	}
#line 19 "/home/test/core/extensions/bookmarks.vala"
	_tmp4_ = bookmarks_bookmarks_database__default;
#line 19 "/home/test/core/extensions/bookmarks.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 19 "/home/test/core/extensions/bookmarks.vala"
	result = _tmp5_;
#line 19 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 560 "bookmarks.c"
}


static BookmarksBookmarksDatabase*
bookmarks_bookmarks_database_construct (GType object_type,
                                        GError** error)
{
	BookmarksBookmarksDatabase * self = NULL;
	GError* _inner_error0_ = NULL;
#line 23 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksBookmarksDatabase*) g_object_new (object_type, "path", "bookmarks.db", NULL);
#line 24 "/home/test/core/extensions/bookmarks.vala"
	midori_database_init ((MidoriDatabase*) self, NULL, &_inner_error0_);
#line 24 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 24 "/home/test/core/extensions/bookmarks.vala"
		if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 24 "/home/test/core/extensions/bookmarks.vala"
			g_propagate_error (error, _inner_error0_);
#line 24 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (self);
#line 24 "/home/test/core/extensions/bookmarks.vala"
			return NULL;
#line 584 "bookmarks.c"
		} else {
#line 24 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 24 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_inner_error0_);
#line 24 "/home/test/core/extensions/bookmarks.vala"
			return NULL;
#line 592 "bookmarks.c"
		}
	}
#line 22 "/home/test/core/extensions/bookmarks.vala"
	return self;
#line 597 "bookmarks.c"
}


static BookmarksBookmarksDatabase*
bookmarks_bookmarks_database_new (GError** error)
{
#line 22 "/home/test/core/extensions/bookmarks.vala"
	return bookmarks_bookmarks_database_construct (BOOKMARKS_TYPE_BOOKMARKS_DATABASE, error);
#line 606 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_lookup_data_free (gpointer _data)
{
	BookmarksBookmarksDatabaseLookupData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->uri);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->result);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_slice_free (BookmarksBookmarksDatabaseLookupData, _data_);
#line 623 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_lookup (MidoriDatabase* base,
                                          const gchar* uri,
                                          GAsyncReadyCallback _callback_,
                                          gpointer _user_data_)
{
	BookmarksBookmarksDatabase * self;
	BookmarksBookmarksDatabaseLookupData* _data_;
	BookmarksBookmarksDatabase* _tmp0_;
	gchar* _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksBookmarksDatabase*) base;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_slice_new0 (BookmarksBookmarksDatabaseLookupData);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_task_set_task_data (_data_->_async_result, _data_, bookmarks_bookmarks_database_real_lookup_data_free);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = g_strdup (uri);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->uri);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->uri = _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_bookmarks_database_real_lookup_co (_data_);
#line 657 "bookmarks.c"
}


static MidoriDatabaseItem*
bookmarks_bookmarks_database_real_lookup_finish (MidoriDatabase* base,
                                                 GAsyncResult* _res_,
                                                 GError** error)
{
	MidoriDatabaseItem* result;
	BookmarksBookmarksDatabaseLookupData* _data_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/bookmarks.vala"
		return NULL;
#line 674 "bookmarks.c"
	}
#line 13 "/home/test/core/extensions/bookmarks.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = NULL;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 682 "bookmarks.c"
}


static gboolean
bookmarks_bookmarks_database_real_lookup_co (BookmarksBookmarksDatabaseLookupData* _data_)
{
#line 27 "/home/test/core/extensions/bookmarks.vala"
	switch (_data_->_state_) {
#line 27 "/home/test/core/extensions/bookmarks.vala"
		case 0:
#line 693 "bookmarks.c"
		goto _state_0;
		default:
#line 27 "/home/test/core/extensions/bookmarks.vala"
		g_assert_not_reached ();
#line 698 "bookmarks.c"
	}
	_state_0:
#line 28 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 28 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 28 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n" \
"                SELECT id, title FROM %s WHERE uri = :uri LIMIT 1\n" \
"                ", _data_->_tmp1_);
#line 28 "/home/test/core/extensions/bookmarks.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 31 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp3_ = _data_->sqlcmd;
#line 31 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp4_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp3_, &_data_->_inner_error0_, ":uri", G_TYPE_STRING, _data_->uri, NULL);
#line 31 "/home/test/core/extensions/bookmarks.vala"
	_data_->statement = _data_->_tmp4_;
#line 31 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 31 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 31 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 727 "bookmarks.c"
		} else {
#line 31 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 31 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 739 "bookmarks.c"
		}
	}
#line 33 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp6_ = _data_->statement;
#line 33 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp5_ = midori_database_statement_step (_data_->_tmp6_, &_data_->_inner_error0_);
#line 33 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 33 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 33 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 760 "bookmarks.c"
		} else {
#line 33 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 33 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 774 "bookmarks.c"
		}
	}
#line 33 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_tmp5_) {
#line 34 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp7_ = _data_->statement;
#line 34 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp8_ = midori_database_statement_get_string (_data_->_tmp7_, "title", &_data_->_inner_error0_);
#line 34 "/home/test/core/extensions/bookmarks.vala"
		_data_->title = _data_->_tmp8_;
#line 34 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 34 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 34 "/home/test/core/extensions/bookmarks.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 799 "bookmarks.c"
			} else {
#line 34 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 34 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 813 "bookmarks.c"
			}
		}
#line 35 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp9_ = _data_->title;
#line 35 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp10_ = midori_database_item_new (_data_->uri, _data_->_tmp9_, (gint64) 0);
#line 35 "/home/test/core/extensions/bookmarks.vala"
		_data_->item = _data_->_tmp10_;
#line 36 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp11_ = _data_->item;
#line 36 "/home/test/core/extensions/bookmarks.vala"
		midori_database_item_set_database (_data_->_tmp11_, (MidoriDatabase*) _data_->self);
#line 37 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp13_ = _data_->statement;
#line 37 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp12_ = midori_database_statement_get_int64 (_data_->_tmp13_, "id", &_data_->_inner_error0_);
#line 37 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 37 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 37 "/home/test/core/extensions/bookmarks.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->title);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 848 "bookmarks.c"
			} else {
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->title);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 37 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 866 "bookmarks.c"
			}
		}
#line 37 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp14_ = _data_->item;
#line 37 "/home/test/core/extensions/bookmarks.vala"
		midori_database_item_set_id (_data_->_tmp14_, _data_->_tmp12_);
#line 38 "/home/test/core/extensions/bookmarks.vala"
		_data_->result = _data_->item;
#line 38 "/home/test/core/extensions/bookmarks.vala"
		_g_free0 (_data_->title);
#line 38 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_data_->statement);
#line 38 "/home/test/core/extensions/bookmarks.vala"
		_g_free0 (_data_->sqlcmd);
#line 38 "/home/test/core/extensions/bookmarks.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 38 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_state_ != 0) {
#line 38 "/home/test/core/extensions/bookmarks.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 38 "/home/test/core/extensions/bookmarks.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 889 "bookmarks.c"
			}
		}
#line 38 "/home/test/core/extensions/bookmarks.vala"
		g_object_unref (_data_->_async_result);
#line 38 "/home/test/core/extensions/bookmarks.vala"
		return FALSE;
#line 896 "bookmarks.c"
	}
#line 40 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = NULL;
#line 40 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->statement);
#line 40 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->sqlcmd);
#line 40 "/home/test/core/extensions/bookmarks.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 40 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_state_ != 0) {
#line 40 "/home/test/core/extensions/bookmarks.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 40 "/home/test/core/extensions/bookmarks.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 912 "bookmarks.c"
		}
	}
#line 40 "/home/test/core/extensions/bookmarks.vala"
	g_object_unref (_data_->_async_result);
#line 40 "/home/test/core/extensions/bookmarks.vala"
	return FALSE;
#line 919 "bookmarks.c"
}


static void
_g_object_unref0_ (gpointer var)
{
#line 13 "/home/test/core/extensions/bookmarks.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 928 "bookmarks.c"
}


static inline void
_g_list_free__g_object_unref0_ (GList* self)
{
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_list_free_full (self, (GDestroyNotify) _g_object_unref0_);
#line 937 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_query_data_free (gpointer _data)
{
	BookmarksBookmarksDatabaseQueryData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->filter);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->cancellable);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	(_data_->result == NULL) ? NULL : (_data_->result = (_g_list_free__g_object_unref0_ (_data_->result), NULL));
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_slice_free (BookmarksBookmarksDatabaseQueryData, _data_);
#line 956 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_query (MidoriDatabase* base,
                                         const gchar* filter,
                                         gint64 max_items,
                                         GCancellable* cancellable,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_)
{
	BookmarksBookmarksDatabase * self;
	BookmarksBookmarksDatabaseQueryData* _data_;
	BookmarksBookmarksDatabase* _tmp0_;
	gchar* _tmp1_;
	GCancellable* _tmp2_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksBookmarksDatabase*) base;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_slice_new0 (BookmarksBookmarksDatabaseQueryData);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), cancellable, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_task_set_task_data (_data_->_async_result, _data_, bookmarks_bookmarks_database_real_query_data_free);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = g_strdup (filter);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->filter);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->filter = _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->max_items = max_items;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = _g_object_ref0 (cancellable);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->cancellable);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->cancellable = _tmp2_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_bookmarks_database_real_query_co (_data_);
#line 1001 "bookmarks.c"
}


static GList*
bookmarks_bookmarks_database_real_query_finish (MidoriDatabase* base,
                                                GAsyncResult* _res_,
                                                GError** error)
{
	GList* result;
	BookmarksBookmarksDatabaseQueryData* _data_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	if (NULL == _data_) {
#line 13 "/home/test/core/extensions/bookmarks.vala"
		return NULL;
#line 1018 "bookmarks.c"
	}
#line 13 "/home/test/core/extensions/bookmarks.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = NULL;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 1026 "bookmarks.c"
}


static gchar*
string_replace (const gchar* self,
                const gchar* old,
                const gchar* replacement)
{
	gchar* result = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GError* _inner_error0_ = NULL;
#line 1479 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1479 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (old != NULL, NULL);
#line 1479 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (replacement != NULL, NULL);
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if ((*((gchar*) self)) == '\0') {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = TRUE;
#line 1049 "bookmarks.c"
	} else {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = (*((gchar*) old)) == '\0';
#line 1053 "bookmarks.c"
	}
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_) {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = TRUE;
#line 1059 "bookmarks.c"
	} else {
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = g_strcmp0 (old, replacement) == 0;
#line 1063 "bookmarks.c"
	}
#line 1480 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp0_) {
#line 1067 "bookmarks.c"
		gchar* _tmp2_;
#line 1481 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = g_strdup (self);
#line 1481 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = _tmp2_;
#line 1481 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1075 "bookmarks.c"
	}
	{
		GRegex* regex = NULL;
		gchar* _tmp3_;
		gchar* _tmp4_;
		GRegex* _tmp5_;
		GRegex* _tmp6_;
		gchar* _tmp7_ = NULL;
		GRegex* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp3_ = g_regex_escape_string (old, -1);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp4_ = _tmp3_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp5_ = g_regex_new (_tmp4_, 0, 0, &_inner_error0_);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp6_ = _tmp5_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_free0 (_tmp4_);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		regex = _tmp6_;
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			if (_inner_error0_->domain == G_REGEX_ERROR) {
#line 1103 "bookmarks.c"
				goto __catch1_g_regex_error;
			}
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_clear_error (&_inner_error0_);
#line 1484 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			return NULL;
#line 1112 "bookmarks.c"
		}
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp8_ = regex;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp9_ = g_regex_replace_literal (_tmp8_, self, (gssize) -1, 0, replacement, 0, &_inner_error0_);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp7_ = _tmp9_;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			_g_regex_unref0 (regex);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			if (_inner_error0_->domain == G_REGEX_ERROR) {
#line 1126 "bookmarks.c"
				goto __catch1_g_regex_error;
			}
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			g_clear_error (&_inner_error0_);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
			return NULL;
#line 1135 "bookmarks.c"
		}
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp10_ = _tmp7_;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp7_ = NULL;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = _tmp10_;
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_free0 (_tmp7_);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_regex_unref0 (regex);
#line 1485 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1149 "bookmarks.c"
	}
	goto __finally1;
	__catch1_g_regex_error:
	{
		GError* e = NULL;
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		e = _inner_error0_;
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_inner_error0_ = NULL;
#line 1487 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_assert_not_reached ();
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_g_error_free0 (e);
#line 1163 "bookmarks.c"
	}
	__finally1:
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_clear_error (&_inner_error0_);
#line 1483 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return NULL;
#line 1174 "bookmarks.c"
	}
}


static gboolean
_bookmarks_bookmarks_database_real_query_co_gsource_func (gpointer self)
{
	gboolean result;
	result = bookmarks_bookmarks_database_real_query_co (self);
#line 69 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 1186 "bookmarks.c"
}


static gboolean
bookmarks_bookmarks_database_real_query_co (BookmarksBookmarksDatabaseQueryData* _data_)
{
#line 43 "/home/test/core/extensions/bookmarks.vala"
	switch (_data_->_state_) {
#line 43 "/home/test/core/extensions/bookmarks.vala"
		case 0:
#line 1197 "bookmarks.c"
		goto _state_0;
#line 43 "/home/test/core/extensions/bookmarks.vala"
		case 1:
#line 1201 "bookmarks.c"
		goto _state_1;
		default:
#line 43 "/home/test/core/extensions/bookmarks.vala"
		g_assert_not_reached ();
#line 1206 "bookmarks.c"
	}
	_state_0:
#line 44 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->filter != NULL) {
#line 44 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp0_ = "WHERE uri LIKE :filter OR title LIKE :filter";
#line 1213 "bookmarks.c"
	} else {
#line 44 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp0_ = "";
#line 1217 "bookmarks.c"
	}
#line 44 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp1_ = g_strdup (_data_->_tmp0_);
#line 44 "/home/test/core/extensions/bookmarks.vala"
	_data_->where = _data_->_tmp1_;
#line 45 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp2_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 45 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp3_ = _data_->_tmp2_;
#line 45 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp4_ = _data_->where;
#line 45 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp5_ = g_strdup_printf ("\n" \
"                SELECT id, uri, title, visit_count AS ct FROM %s\n" \
"                %s\n" \
"                GROUP BY uri\n" \
"                ORDER BY ct DESC LIMIT :limit\n" \
"                ", _data_->_tmp3_, _data_->_tmp4_);
#line 45 "/home/test/core/extensions/bookmarks.vala"
	_data_->sqlcmd = _data_->_tmp5_;
#line 1233 "bookmarks.c"
	{
#line 53 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp6_ = _data_->sqlcmd;
#line 53 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp7_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp6_, &_data_->_inner_error0_, ":limit", G_TYPE_INT64, _data_->max_items, NULL);
#line 53 "/home/test/core/extensions/bookmarks.vala"
		_data_->statement = _data_->_tmp7_;
#line 53 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 53 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 1245 "bookmarks.c"
				goto __catch0_midori_database_error;
			}
#line 53 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 53 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->where);
#line 53 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 53 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 53 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 53 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1260 "bookmarks.c"
		}
#line 55 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->filter != NULL) {
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp8_ = string_replace (_data_->filter, " ", "%");
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp9_ = _data_->_tmp8_;
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp10_ = g_strconcat ("%", _data_->_tmp9_, NULL);
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp11_ = _data_->_tmp10_;
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp12_ = g_strconcat (_data_->_tmp11_, "%", NULL);
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp13_ = _data_->_tmp12_;
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->_tmp11_);
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->_tmp9_);
#line 56 "/home/test/core/extensions/bookmarks.vala"
			_data_->real_filter = _data_->_tmp13_;
#line 57 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp14_ = _data_->statement;
#line 57 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp15_ = _data_->real_filter;
#line 57 "/home/test/core/extensions/bookmarks.vala"
			midori_database_statement_bind (_data_->_tmp14_, ":filter", &_data_->_inner_error0_, G_TYPE_STRING, _data_->_tmp15_, NULL);
#line 57 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 57 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->real_filter);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 1296 "bookmarks.c"
					goto __catch0_midori_database_error;
				}
#line 57 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->where);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 57 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 1311 "bookmarks.c"
			}
#line 55 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->real_filter);
#line 1315 "bookmarks.c"
		}
#line 60 "/home/test/core/extensions/bookmarks.vala"
		_data_->items = NULL;
#line 61 "/home/test/core/extensions/bookmarks.vala"
		while (TRUE) {
#line 61 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp17_ = _data_->statement;
#line 61 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp16_ = midori_database_statement_step (_data_->_tmp17_, &_data_->_inner_error0_);
#line 61 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 61 "/home/test/core/extensions/bookmarks.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 61 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 61 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 1333 "bookmarks.c"
					goto __catch0_midori_database_error;
				}
#line 61 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 61 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->where);
#line 61 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 61 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 61 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 61 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 1348 "bookmarks.c"
			}
#line 61 "/home/test/core/extensions/bookmarks.vala"
			if (!_data_->_tmp16_) {
#line 61 "/home/test/core/extensions/bookmarks.vala"
				break;
#line 1354 "bookmarks.c"
			}
#line 62 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp18_ = _data_->statement;
#line 62 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp19_ = midori_database_statement_get_string (_data_->_tmp18_, "uri", &_data_->_inner_error0_);
#line 62 "/home/test/core/extensions/bookmarks.vala"
			_data_->uri = _data_->_tmp19_;
#line 62 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 62 "/home/test/core/extensions/bookmarks.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 62 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 62 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 1370 "bookmarks.c"
					goto __catch0_midori_database_error;
				}
#line 62 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 62 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->where);
#line 62 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 62 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 62 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 62 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 1385 "bookmarks.c"
			}
#line 63 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp20_ = _data_->statement;
#line 63 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp21_ = midori_database_statement_get_string (_data_->_tmp20_, "title", &_data_->_inner_error0_);
#line 63 "/home/test/core/extensions/bookmarks.vala"
			_data_->title = _data_->_tmp21_;
#line 63 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 63 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->uri);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 63 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 1403 "bookmarks.c"
					goto __catch0_midori_database_error;
				}
#line 63 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->where);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 63 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 1418 "bookmarks.c"
			}
#line 64 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp22_ = _data_->uri;
#line 64 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp23_ = _data_->title;
#line 64 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp24_ = midori_database_item_new (_data_->_tmp22_, _data_->_tmp23_, (gint64) 0);
#line 64 "/home/test/core/extensions/bookmarks.vala"
			_data_->item = _data_->_tmp24_;
#line 65 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp25_ = _data_->item;
#line 65 "/home/test/core/extensions/bookmarks.vala"
			midori_database_item_set_database (_data_->_tmp25_, (MidoriDatabase*) _data_->self);
#line 66 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp27_ = _data_->statement;
#line 66 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp26_ = midori_database_statement_get_int64 (_data_->_tmp27_, "id", &_data_->_inner_error0_);
#line 66 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 66 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->title);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->uri);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 66 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 1450 "bookmarks.c"
					goto __catch0_midori_database_error;
				}
#line 66 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->where);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 66 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 1465 "bookmarks.c"
			}
#line 66 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp28_ = _data_->item;
#line 66 "/home/test/core/extensions/bookmarks.vala"
			midori_database_item_set_id (_data_->_tmp28_, _data_->_tmp26_);
#line 67 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp29_ = _data_->item;
#line 67 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp30_ = _g_object_ref0 (_data_->_tmp29_);
#line 67 "/home/test/core/extensions/bookmarks.vala"
			_data_->items = g_list_append (_data_->items, _data_->_tmp30_);
#line 69 "/home/test/core/extensions/bookmarks.vala"
			_data_->src = g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _bookmarks_bookmarks_database_real_query_co_gsource_func, _data_, NULL);
#line 70 "/home/test/core/extensions/bookmarks.vala"
			_data_->_state_ = 1;
#line 70 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1483 "bookmarks.c"
			_state_1:
			;
#line 71 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp31_ = _data_->src;
#line 71 "/home/test/core/extensions/bookmarks.vala"
			g_source_remove (_data_->_tmp31_);
#line 73 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->cancellable != NULL) {
#line 73 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp32_ = g_cancellable_is_cancelled (_data_->cancellable);
#line 1494 "bookmarks.c"
			} else {
#line 73 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp32_ = FALSE;
#line 1498 "bookmarks.c"
			}
#line 73 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_tmp32_) {
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_data_->result = NULL;
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->title);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->uri);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->where);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_state_ != 0) {
#line 74 "/home/test/core/extensions/bookmarks.vala"
					while (!g_task_get_completed (_data_->_async_result)) {
#line 74 "/home/test/core/extensions/bookmarks.vala"
						g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1526 "bookmarks.c"
					}
				}
#line 74 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 74 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 1533 "bookmarks.c"
			}
#line 61 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->item);
#line 61 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->title);
#line 61 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->uri);
#line 1541 "bookmarks.c"
		}
#line 76 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->cancellable != NULL) {
#line 76 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp33_ = g_cancellable_is_cancelled (_data_->cancellable);
#line 1547 "bookmarks.c"
		} else {
#line 76 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp33_ = FALSE;
#line 1551 "bookmarks.c"
		}
#line 76 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_tmp33_) {
#line 77 "/home/test/core/extensions/bookmarks.vala"
			_data_->result = NULL;
#line 77 "/home/test/core/extensions/bookmarks.vala"
			(_data_->items == NULL) ? NULL : (_data_->items = (_g_list_free__g_object_unref0_ (_data_->items), NULL));
#line 77 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 77 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 77 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->where);
#line 77 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 77 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_state_ != 0) {
#line 77 "/home/test/core/extensions/bookmarks.vala"
				while (!g_task_get_completed (_data_->_async_result)) {
#line 77 "/home/test/core/extensions/bookmarks.vala"
					g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1573 "bookmarks.c"
				}
			}
#line 77 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 77 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1580 "bookmarks.c"
		}
#line 78 "/home/test/core/extensions/bookmarks.vala"
		_data_->result = _data_->items;
#line 78 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_data_->statement);
#line 78 "/home/test/core/extensions/bookmarks.vala"
		_g_free0 (_data_->sqlcmd);
#line 78 "/home/test/core/extensions/bookmarks.vala"
		_g_free0 (_data_->where);
#line 78 "/home/test/core/extensions/bookmarks.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 78 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_state_ != 0) {
#line 78 "/home/test/core/extensions/bookmarks.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 78 "/home/test/core/extensions/bookmarks.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1598 "bookmarks.c"
			}
		}
#line 78 "/home/test/core/extensions/bookmarks.vala"
		g_object_unref (_data_->_async_result);
#line 78 "/home/test/core/extensions/bookmarks.vala"
		return FALSE;
#line 1605 "bookmarks.c"
	}
	goto __finally0;
	__catch0_midori_database_error:
	{
#line 52 "/home/test/core/extensions/bookmarks.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 52 "/home/test/core/extensions/bookmarks.vala"
		_data_->_inner_error0_ = NULL;
#line 80 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp34_ = _data_->_error_;
#line 80 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp35_ = _data_->_tmp34_->message;
#line 80 "/home/test/core/extensions/bookmarks.vala"
		g_critical ("bookmarks.vala:80: Failed to query bookmarks: %s", _data_->_tmp35_);
#line 52 "/home/test/core/extensions/bookmarks.vala"
		_g_error_free0 (_data_->_error_);
#line 1622 "bookmarks.c"
	}
	__finally0:
#line 52 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 52 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 52 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->where);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1639 "bookmarks.c"
		} else {
#line 52 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->where);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 52 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1653 "bookmarks.c"
		}
	}
#line 82 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = NULL;
#line 82 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->sqlcmd);
#line 82 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->where);
#line 82 "/home/test/core/extensions/bookmarks.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 82 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_state_ != 0) {
#line 82 "/home/test/core/extensions/bookmarks.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 82 "/home/test/core/extensions/bookmarks.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1670 "bookmarks.c"
		}
	}
#line 82 "/home/test/core/extensions/bookmarks.vala"
	g_object_unref (_data_->_async_result);
#line 82 "/home/test/core/extensions/bookmarks.vala"
	return FALSE;
#line 1677 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_update_data_free (gpointer _data)
{
	BookmarksBookmarksDatabaseUpdateData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_slice_free (BookmarksBookmarksDatabaseUpdateData, _data_);
#line 1692 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_update (MidoriDatabase* base,
                                          MidoriDatabaseItem* item,
                                          GAsyncReadyCallback _callback_,
                                          gpointer _user_data_)
{
	BookmarksBookmarksDatabase * self;
	BookmarksBookmarksDatabaseUpdateData* _data_;
	BookmarksBookmarksDatabase* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksBookmarksDatabase*) base;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_slice_new0 (BookmarksBookmarksDatabaseUpdateData);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_task_set_task_data (_data_->_async_result, _data_, bookmarks_bookmarks_database_real_update_data_free);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->item = _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_bookmarks_database_real_update_co (_data_);
#line 1726 "bookmarks.c"
}


static gboolean
bookmarks_bookmarks_database_real_update_finish (MidoriDatabase* base,
                                                 GAsyncResult* _res_,
                                                 GError** error)
{
	gboolean result;
	BookmarksBookmarksDatabaseUpdateData* _data_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	if (NULL == _data_) {
#line 1741 "bookmarks.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/bookmarks.vala"
		return _tmp0_;
#line 1745 "bookmarks.c"
	}
#line 13 "/home/test/core/extensions/bookmarks.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 1751 "bookmarks.c"
}


static gboolean
bookmarks_bookmarks_database_real_update_co (BookmarksBookmarksDatabaseUpdateData* _data_)
{
#line 85 "/home/test/core/extensions/bookmarks.vala"
	switch (_data_->_state_) {
#line 85 "/home/test/core/extensions/bookmarks.vala"
		case 0:
#line 1762 "bookmarks.c"
		goto _state_0;
		default:
#line 85 "/home/test/core/extensions/bookmarks.vala"
		g_assert_not_reached ();
#line 1767 "bookmarks.c"
	}
	_state_0:
#line 86 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 86 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 86 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n" \
"                UPDATE %s SET uri = :uri, title = :title WHERE id = :i" \
"d\n" \
"                ", _data_->_tmp1_);
#line 86 "/home/test/core/extensions/bookmarks.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 1778 "bookmarks.c"
	{
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp3_ = _data_->sqlcmd;
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp4_ = midori_database_item_get_id (_data_->item);
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp5_ = _data_->_tmp4_;
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp6_ = midori_database_item_get_uri (_data_->item);
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp7_ = _data_->_tmp6_;
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp8_ = midori_database_item_get_title (_data_->item);
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp9_ = _data_->_tmp8_;
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp10_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp3_, &_data_->_inner_error0_, ":id", G_TYPE_INT64, _data_->_tmp5_, ":uri", G_TYPE_STRING, _data_->_tmp7_, ":title", G_TYPE_STRING, _data_->_tmp9_, NULL);
#line 90 "/home/test/core/extensions/bookmarks.vala"
		_data_->statement = _data_->_tmp10_;
#line 90 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 1800 "bookmarks.c"
			goto __catch2_g_error;
		}
#line 94 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp12_ = _data_->statement;
#line 94 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp11_ = midori_database_statement_exec (_data_->_tmp12_, &_data_->_inner_error0_);
#line 94 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 94 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 1811 "bookmarks.c"
			goto __catch2_g_error;
		}
#line 94 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_tmp11_) {
#line 95 "/home/test/core/extensions/bookmarks.vala"
			_data_->result = TRUE;
#line 95 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 95 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 95 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 95 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_state_ != 0) {
#line 95 "/home/test/core/extensions/bookmarks.vala"
				while (!g_task_get_completed (_data_->_async_result)) {
#line 95 "/home/test/core/extensions/bookmarks.vala"
					g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1830 "bookmarks.c"
				}
			}
#line 95 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 95 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1837 "bookmarks.c"
		}
#line 89 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_data_->statement);
#line 1841 "bookmarks.c"
	}
	goto __finally2;
	__catch2_g_error:
	{
#line 89 "/home/test/core/extensions/bookmarks.vala"
		_data_->_error_ = _data_->_inner_error0_;
#line 89 "/home/test/core/extensions/bookmarks.vala"
		_data_->_inner_error0_ = NULL;
#line 98 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp13_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 98 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp14_ = _data_->_tmp13_;
#line 98 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp15_ = _data_->_error_;
#line 98 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp16_ = _data_->_tmp15_->message;
#line 98 "/home/test/core/extensions/bookmarks.vala"
		g_critical ("bookmarks.vala:98: Failed to update %s: %s", _data_->_tmp14_, _data_->_tmp16_);
#line 89 "/home/test/core/extensions/bookmarks.vala"
		_g_error_free0 (_data_->_error_);
#line 1862 "bookmarks.c"
	}
	__finally2:
#line 89 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 89 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 89 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1877 "bookmarks.c"
		} else {
#line 89 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 89 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 1889 "bookmarks.c"
		}
	}
#line 100 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = FALSE;
#line 100 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->sqlcmd);
#line 100 "/home/test/core/extensions/bookmarks.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 100 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_state_ != 0) {
#line 100 "/home/test/core/extensions/bookmarks.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 100 "/home/test/core/extensions/bookmarks.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1904 "bookmarks.c"
		}
	}
#line 100 "/home/test/core/extensions/bookmarks.vala"
	g_object_unref (_data_->_async_result);
#line 100 "/home/test/core/extensions/bookmarks.vala"
	return FALSE;
#line 1911 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_insert_data_free (gpointer _data)
{
	BookmarksBookmarksDatabaseInsertData* _data_;
	_data_ = _data;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_slice_free (BookmarksBookmarksDatabaseInsertData, _data_);
#line 1926 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_real_insert (MidoriDatabase* base,
                                          MidoriDatabaseItem* item,
                                          GAsyncReadyCallback _callback_,
                                          gpointer _user_data_)
{
	BookmarksBookmarksDatabase * self;
	BookmarksBookmarksDatabaseInsertData* _data_;
	BookmarksBookmarksDatabase* _tmp0_;
	MidoriDatabaseItem* _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksBookmarksDatabase*) base;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_slice_new0 (BookmarksBookmarksDatabaseInsertData);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	g_task_set_task_data (_data_->_async_result, _data_, bookmarks_bookmarks_database_real_insert_data_free);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->self = _tmp0_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _g_object_ref0 (item);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->item);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_->item = _tmp1_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_bookmarks_database_real_insert_co (_data_);
#line 1960 "bookmarks.c"
}


static gboolean
bookmarks_bookmarks_database_real_insert_finish (MidoriDatabase* base,
                                                 GAsyncResult* _res_,
                                                 GError** error)
{
	gboolean result;
	BookmarksBookmarksDatabaseInsertData* _data_;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	if (NULL == _data_) {
#line 1975 "bookmarks.c"
		gboolean _tmp0_ = FALSE;
#line 13 "/home/test/core/extensions/bookmarks.vala"
		return _tmp0_;
#line 1979 "bookmarks.c"
	}
#line 13 "/home/test/core/extensions/bookmarks.vala"
	result = _data_->result;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 1985 "bookmarks.c"
}


static gboolean
bookmarks_bookmarks_database_real_insert_co (BookmarksBookmarksDatabaseInsertData* _data_)
{
#line 103 "/home/test/core/extensions/bookmarks.vala"
	switch (_data_->_state_) {
#line 103 "/home/test/core/extensions/bookmarks.vala"
		case 0:
#line 1996 "bookmarks.c"
		goto _state_0;
		default:
#line 103 "/home/test/core/extensions/bookmarks.vala"
		g_assert_not_reached ();
#line 2001 "bookmarks.c"
	}
	_state_0:
#line 104 "/home/test/core/extensions/bookmarks.vala"
	midori_database_item_set_database (_data_->item, (MidoriDatabase*) _data_->self);
#line 106 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp0_ = midori_database_get_table ((MidoriDatabase*) _data_->self);
#line 106 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp1_ = _data_->_tmp0_;
#line 106 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp2_ = g_strdup_printf ("\n" \
"                INSERT INTO %s (uri, title) VALUES (:uri, :title)\n" \
"                ", _data_->_tmp1_);
#line 106 "/home/test/core/extensions/bookmarks.vala"
	_data_->sqlcmd = _data_->_tmp2_;
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp3_ = _data_->sqlcmd;
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp4_ = midori_database_item_get_uri (_data_->item);
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp6_ = midori_database_item_get_title (_data_->item);
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp7_ = _data_->_tmp6_;
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp8_ = midori_database_prepare ((MidoriDatabase*) _data_->self, _data_->_tmp3_, &_data_->_inner_error0_, ":uri", G_TYPE_STRING, _data_->_tmp5_, ":title", G_TYPE_STRING, _data_->_tmp7_, NULL);
#line 109 "/home/test/core/extensions/bookmarks.vala"
	_data_->statement = _data_->_tmp8_;
#line 109 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 109 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 109 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 2040 "bookmarks.c"
		} else {
#line 109 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 109 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 2052 "bookmarks.c"
		}
	}
#line 112 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp10_ = _data_->statement;
#line 112 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp9_ = midori_database_statement_exec (_data_->_tmp10_, &_data_->_inner_error0_);
#line 112 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 112 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 112 "/home/test/core/extensions/bookmarks.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 2073 "bookmarks.c"
		} else {
#line 112 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->statement);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			_g_free0 (_data_->sqlcmd);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 112 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 2087 "bookmarks.c"
		}
	}
#line 112 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_tmp9_) {
#line 113 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp12_ = _data_->statement;
#line 113 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp11_ = midori_database_statement_row_id (_data_->_tmp12_, &_data_->_inner_error0_);
#line 113 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 113 "/home/test/core/extensions/bookmarks.vala"
			if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 113 "/home/test/core/extensions/bookmarks.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 2110 "bookmarks.c"
			} else {
#line 113 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->statement);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				_g_free0 (_data_->sqlcmd);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 113 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 2124 "bookmarks.c"
			}
		}
#line 113 "/home/test/core/extensions/bookmarks.vala"
		midori_database_item_set_id (_data_->item, _data_->_tmp11_);
#line 114 "/home/test/core/extensions/bookmarks.vala"
		_data_->result = TRUE;
#line 114 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_data_->statement);
#line 114 "/home/test/core/extensions/bookmarks.vala"
		_g_free0 (_data_->sqlcmd);
#line 114 "/home/test/core/extensions/bookmarks.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 114 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_state_ != 0) {
#line 114 "/home/test/core/extensions/bookmarks.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 114 "/home/test/core/extensions/bookmarks.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2143 "bookmarks.c"
			}
		}
#line 114 "/home/test/core/extensions/bookmarks.vala"
		g_object_unref (_data_->_async_result);
#line 114 "/home/test/core/extensions/bookmarks.vala"
		return FALSE;
#line 2150 "bookmarks.c"
	}
#line 116 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = FALSE;
#line 116 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->statement);
#line 116 "/home/test/core/extensions/bookmarks.vala"
	_g_free0 (_data_->sqlcmd);
#line 116 "/home/test/core/extensions/bookmarks.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 116 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_state_ != 0) {
#line 116 "/home/test/core/extensions/bookmarks.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 116 "/home/test/core/extensions/bookmarks.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2166 "bookmarks.c"
		}
	}
#line 116 "/home/test/core/extensions/bookmarks.vala"
	g_object_unref (_data_->_async_result);
#line 116 "/home/test/core/extensions/bookmarks.vala"
	return FALSE;
#line 2173 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_class_init (BookmarksBookmarksDatabaseClass * klass)
{
#line 13 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_bookmarks_database_parent_class = g_type_class_peek_parent (klass);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->lookup = (void (*) (MidoriDatabase*, const gchar*, GAsyncReadyCallback, gpointer)) bookmarks_bookmarks_database_real_lookup;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->lookup_finish = (MidoriDatabaseItem* (*) (MidoriDatabase*, GAsyncResult*, GError**)) bookmarks_bookmarks_database_real_lookup_finish;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->query = (void (*) (MidoriDatabase*, const gchar*, gint64, GCancellable*, GAsyncReadyCallback, gpointer)) bookmarks_bookmarks_database_real_query;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->query_finish = (GList* (*) (MidoriDatabase*, GAsyncResult*, GError**)) bookmarks_bookmarks_database_real_query_finish;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->update = (void (*) (MidoriDatabase*, MidoriDatabaseItem*, GAsyncReadyCallback, gpointer)) bookmarks_bookmarks_database_real_update;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->update_finish = (gboolean (*) (MidoriDatabase*, GAsyncResult*, GError**)) bookmarks_bookmarks_database_real_update_finish;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->insert = (void (*) (MidoriDatabase*, MidoriDatabaseItem*, GAsyncReadyCallback, gpointer)) bookmarks_bookmarks_database_real_insert;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	((MidoriDatabaseClass *) klass)->insert_finish = (gboolean (*) (MidoriDatabase*, GAsyncResult*, GError**)) bookmarks_bookmarks_database_real_insert_finish;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->finalize = bookmarks_bookmarks_database_finalize;
#line 2200 "bookmarks.c"
}


static void
bookmarks_bookmarks_database_instance_init (BookmarksBookmarksDatabase * self)
{
}


static void
bookmarks_bookmarks_database_finalize (GObject * obj)
{
	BookmarksBookmarksDatabase * self;
#line 13 "/home/test/core/extensions/bookmarks.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BOOKMARKS_TYPE_BOOKMARKS_DATABASE, BookmarksBookmarksDatabase);
#line 13 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (bookmarks_bookmarks_database_parent_class)->finalize (obj);
#line 2218 "bookmarks.c"
}


GType
bookmarks_bookmarks_database_get_type (void)
{
	return bookmarks_bookmarks_database_type_id;
}


GType
bookmarks_bookmarks_database_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BookmarksBookmarksDatabaseClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bookmarks_bookmarks_database_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BookmarksBookmarksDatabase), 0, (GInstanceInitFunc) bookmarks_bookmarks_database_instance_init, NULL };
	bookmarks_bookmarks_database_type_id = g_type_module_register_type (module, MIDORI_TYPE_DATABASE, "BookmarksBookmarksDatabase", &g_define_type_info, 0);
	return bookmarks_bookmarks_database_type_id;
}


static void
bookmarks_button_item_for_tab_data_free (gpointer _data)
{
	BookmarksButtonItemForTabData* _data_;
	_data_ = _data;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->tab);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->result);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->self);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	g_slice_free (BookmarksButtonItemForTabData, _data_);
#line 2251 "bookmarks.c"
}


static void
bookmarks_button_item_for_tab (BookmarksButton* self,
                               MidoriTab* tab,
                               GAsyncReadyCallback _callback_,
                               gpointer _user_data_)
{
	BookmarksButtonItemForTabData* _data_;
	BookmarksButton* _tmp0_;
	MidoriTab* _tmp1_;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_slice_new0 (BookmarksButtonItemForTabData);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	g_task_set_task_data (_data_->_async_result, _data_, bookmarks_button_item_for_tab_data_free);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_data_->self = _tmp0_;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _g_object_ref0 (tab);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data_->tab);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_data_->tab = _tmp1_;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_item_for_tab_co (_data_);
#line 2282 "bookmarks.c"
}


static MidoriDatabaseItem*
bookmarks_button_item_for_tab_finish (BookmarksButton* self,
                                      GAsyncResult* _res_)
{
	MidoriDatabaseItem* result;
	BookmarksButtonItemForTabData* _data_;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	result = _data_->result;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = NULL;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 2300 "bookmarks.c"
}


static void
bookmarks_button_item_for_tab_ready (GObject* source_object,
                                     GAsyncResult* _res_,
                                     gpointer _user_data_)
{
	BookmarksButtonItemForTabData* _data_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
	_data_ = _user_data_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
	_data_->_source_object_ = source_object;
#line 151 "/home/test/core/extensions/bookmarks.vala"
	_data_->_res_ = _res_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_item_for_tab_co (_data_);
#line 2318 "bookmarks.c"
}


static gboolean
bookmarks_button_item_for_tab_co (BookmarksButtonItemForTabData* _data_)
{
#line 147 "/home/test/core/extensions/bookmarks.vala"
	switch (_data_->_state_) {
#line 147 "/home/test/core/extensions/bookmarks.vala"
		case 0:
#line 2329 "bookmarks.c"
		goto _state_0;
#line 147 "/home/test/core/extensions/bookmarks.vala"
		case 1:
#line 2333 "bookmarks.c"
		goto _state_1;
#line 147 "/home/test/core/extensions/bookmarks.vala"
		case 2:
#line 2337 "bookmarks.c"
		goto _state_2;
		default:
#line 147 "/home/test/core/extensions/bookmarks.vala"
		g_assert_not_reached ();
#line 2342 "bookmarks.c"
	}
	_state_0:
#line 148 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp0_ = g_object_get_data ((GObject*) _data_->tab, "bookmarks-item");
#line 148 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp1_ = _g_object_ref0 ((MidoriDatabaseItem*) _data_->_tmp0_);
#line 148 "/home/test/core/extensions/bookmarks.vala"
	_data_->item = _data_->_tmp1_;
#line 149 "/home/test/core/extensions/bookmarks.vala"
	_data_->_tmp2_ = _data_->item;
#line 149 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_tmp2_ == NULL) {
#line 2355 "bookmarks.c"
		{
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp4_ = bookmarks_bookmarks_database_get_default (&_data_->_inner_error0_);
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp3_ = _data_->_tmp4_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 151 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 2365 "bookmarks.c"
					goto __catch3_midori_database_error;
				}
#line 151 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 2378 "bookmarks.c"
			}
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp6_ = midori_tab_get_display_uri (_data_->tab);
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp7_ = _data_->_tmp6_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_state_ = 1;
#line 151 "/home/test/core/extensions/bookmarks.vala"
			midori_database_lookup ((MidoriDatabase*) _data_->_tmp3_, _data_->_tmp7_, bookmarks_button_item_for_tab_ready, _data_);
#line 151 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 2390 "bookmarks.c"
			_state_1:
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp8_ = midori_database_lookup_finish ((MidoriDatabase*) _data_->_tmp3_, _data_->_res_, &_data_->_inner_error0_);
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp5_ = _data_->_tmp8_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 151 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->_tmp3_);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 2402 "bookmarks.c"
					goto __catch3_midori_database_error;
				}
#line 151 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 151 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 2415 "bookmarks.c"
			}
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp9_ = _data_->_tmp5_;
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp5_ = NULL;
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->item);
#line 151 "/home/test/core/extensions/bookmarks.vala"
			_data_->item = _data_->_tmp9_;
#line 150 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->_tmp5_);
#line 150 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 2429 "bookmarks.c"
		}
		goto __finally3;
		__catch3_midori_database_error:
		{
#line 150 "/home/test/core/extensions/bookmarks.vala"
			_data_->_error_ = _data_->_inner_error0_;
#line 150 "/home/test/core/extensions/bookmarks.vala"
			_data_->_inner_error0_ = NULL;
#line 153 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp10_ = midori_tab_get_display_uri (_data_->tab);
#line 153 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp11_ = _data_->_tmp10_;
#line 153 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp12_ = _data_->_error_;
#line 153 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp13_ = _data_->_tmp12_->message;
#line 153 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("bookmarks.vala:153: Failed to lookup %s in bookmarks database: %s", _data_->_tmp11_, _data_->_tmp13_);
#line 150 "/home/test/core/extensions/bookmarks.vala"
			_g_error_free0 (_data_->_error_);
#line 2450 "bookmarks.c"
		}
		__finally3:
#line 150 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 150 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->item);
#line 150 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 150 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 150 "/home/test/core/extensions/bookmarks.vala"
			g_object_unref (_data_->_async_result);
#line 150 "/home/test/core/extensions/bookmarks.vala"
			return FALSE;
#line 2465 "bookmarks.c"
		}
#line 155 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp14_ = _data_->item;
#line 155 "/home/test/core/extensions/bookmarks.vala"
		if (_data_->_tmp14_ == NULL) {
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp15_ = midori_tab_get_display_uri (_data_->tab);
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp16_ = _data_->_tmp15_;
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp17_ = midori_tab_get_display_title (_data_->tab);
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp18_ = _data_->_tmp17_;
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_data_->_tmp19_ = midori_database_item_new (_data_->_tmp16_, _data_->_tmp18_, (gint64) 0);
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_g_object_unref0 (_data_->item);
#line 156 "/home/test/core/extensions/bookmarks.vala"
			_data_->item = _data_->_tmp19_;
#line 2485 "bookmarks.c"
			{
#line 158 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp21_ = bookmarks_bookmarks_database_get_default (&_data_->_inner_error0_);
#line 158 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp20_ = _data_->_tmp21_;
#line 158 "/home/test/core/extensions/bookmarks.vala"
				if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 158 "/home/test/core/extensions/bookmarks.vala"
					if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 2495 "bookmarks.c"
						goto __catch4_midori_database_error;
					}
#line 158 "/home/test/core/extensions/bookmarks.vala"
					_g_object_unref0 (_data_->item);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					g_clear_error (&_data_->_inner_error0_);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					g_object_unref (_data_->_async_result);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					return FALSE;
#line 2508 "bookmarks.c"
				}
#line 158 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp22_ = _data_->item;
#line 158 "/home/test/core/extensions/bookmarks.vala"
				_data_->_state_ = 2;
#line 158 "/home/test/core/extensions/bookmarks.vala"
				midori_database_insert ((MidoriDatabase*) _data_->_tmp20_, _data_->_tmp22_, bookmarks_button_item_for_tab_ready, _data_);
#line 158 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 2518 "bookmarks.c"
				_state_2:
#line 158 "/home/test/core/extensions/bookmarks.vala"
				midori_database_insert_finish ((MidoriDatabase*) _data_->_tmp20_, _data_->_res_, &_data_->_inner_error0_);
#line 158 "/home/test/core/extensions/bookmarks.vala"
				if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 158 "/home/test/core/extensions/bookmarks.vala"
					_g_object_unref0 (_data_->_tmp20_);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					if (_data_->_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 2528 "bookmarks.c"
						goto __catch4_midori_database_error;
					}
#line 158 "/home/test/core/extensions/bookmarks.vala"
					_g_object_unref0 (_data_->item);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					g_clear_error (&_data_->_inner_error0_);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					g_object_unref (_data_->_async_result);
#line 158 "/home/test/core/extensions/bookmarks.vala"
					return FALSE;
#line 2541 "bookmarks.c"
				}
#line 157 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->_tmp20_);
#line 2545 "bookmarks.c"
			}
			goto __finally4;
			__catch4_midori_database_error:
			{
#line 157 "/home/test/core/extensions/bookmarks.vala"
				_data_->_vala1__error_ = _data_->_inner_error0_;
#line 157 "/home/test/core/extensions/bookmarks.vala"
				_data_->_inner_error0_ = NULL;
#line 160 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp23_ = _data_->item;
#line 160 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp24_ = midori_database_item_get_uri (_data_->_tmp23_);
#line 160 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp25_ = _data_->_tmp24_;
#line 160 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp26_ = _data_->_vala1__error_;
#line 160 "/home/test/core/extensions/bookmarks.vala"
				_data_->_tmp27_ = _data_->_tmp26_->message;
#line 160 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("bookmarks.vala:160: Failed to add %s to bookmarks database: %s", _data_->_tmp25_, _data_->_tmp27_);
#line 157 "/home/test/core/extensions/bookmarks.vala"
				_g_error_free0 (_data_->_vala1__error_);
#line 2568 "bookmarks.c"
			}
			__finally4:
#line 157 "/home/test/core/extensions/bookmarks.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 157 "/home/test/core/extensions/bookmarks.vala"
				_g_object_unref0 (_data_->item);
#line 157 "/home/test/core/extensions/bookmarks.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 157 "/home/test/core/extensions/bookmarks.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 157 "/home/test/core/extensions/bookmarks.vala"
				g_object_unref (_data_->_async_result);
#line 157 "/home/test/core/extensions/bookmarks.vala"
				return FALSE;
#line 2583 "bookmarks.c"
			}
		}
#line 163 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp28_ = _data_->self->priv->entry_title;
#line 163 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp29_ = _data_->item;
#line 163 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp30_ = midori_database_item_get_title (_data_->_tmp29_);
#line 163 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp31_ = _data_->_tmp30_;
#line 163 "/home/test/core/extensions/bookmarks.vala"
		gtk_entry_set_text (_data_->_tmp28_, _data_->_tmp31_);
#line 164 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp32_ = _data_->item;
#line 164 "/home/test/core/extensions/bookmarks.vala"
		_data_->_tmp33_ = _g_object_ref0 (_data_->_tmp32_);
#line 164 "/home/test/core/extensions/bookmarks.vala"
		g_object_set_data_full ((GObject*) _data_->tab, "bookmarks-item", _data_->_tmp33_, g_object_unref);
#line 2602 "bookmarks.c"
	}
#line 166 "/home/test/core/extensions/bookmarks.vala"
	_data_->result = _data_->item;
#line 166 "/home/test/core/extensions/bookmarks.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 166 "/home/test/core/extensions/bookmarks.vala"
	if (_data_->_state_ != 0) {
#line 166 "/home/test/core/extensions/bookmarks.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 166 "/home/test/core/extensions/bookmarks.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2614 "bookmarks.c"
		}
	}
#line 166 "/home/test/core/extensions/bookmarks.vala"
	g_object_unref (_data_->_async_result);
#line 166 "/home/test/core/extensions/bookmarks.vala"
	return FALSE;
#line 2621 "bookmarks.c"
}


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 175 "/home/test/core/extensions/bookmarks.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	return _data1_;
#line 2632 "bookmarks.c"
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 175 "/home/test/core/extensions/bookmarks.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 2643 "bookmarks.c"
		BookmarksButton* self;
#line 175 "/home/test/core/extensions/bookmarks.vala"
		self = _data1_->self;
#line 175 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_data1_->action);
#line 175 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_data1_->browser);
#line 175 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (self);
#line 175 "/home/test/core/extensions/bookmarks.vala"
		g_slice_free (Block1Data, _data1_);
#line 2655 "bookmarks.c"
	}
}


static void
_bookmarks_button_bookmark_add_activated_g_simple_action_activate (GSimpleAction* _sender,
                                                                   GVariant* parameter,
                                                                   gpointer self)
{
#line 179 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_bookmark_add_activated ((BookmarksButton*) self);
#line 2667 "bookmarks.c"
}


static void
__lambda4_ (Block1Data* _data1_)
{
	BookmarksButton* self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
#line 180 "/home/test/core/extensions/bookmarks.vala"
	self = _data1_->self;
#line 181 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = midori_browser_get_uri (_data1_->browser);
#line 181 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _tmp0_;
#line 181 "/home/test/core/extensions/bookmarks.vala"
	g_simple_action_set_enabled (_data1_->action, g_str_has_prefix (_tmp1_, "http"));
#line 2685 "bookmarks.c"
}


static void
___lambda4__g_object_notify (GObject* _sender,
                             GParamSpec* pspec,
                             gpointer self)
{
#line 180 "/home/test/core/extensions/bookmarks.vala"
	__lambda4_ (self);
#line 2696 "bookmarks.c"
}


BookmarksButton*
bookmarks_button_construct (GType object_type,
                            MidoriBrowser* browser)
{
	BookmarksButton * self = NULL;
	Block1Data* _data1_;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	GSimpleAction* _tmp2_;
	GtkApplication* _tmp3_;
	GtkApplication* _tmp4_;
	gchar* _tmp5_;
	gchar** _tmp6_;
	gchar** _tmp7_;
	gint _tmp7__length1;
#line 175 "/home/test/core/extensions/bookmarks.vala"
	g_return_val_if_fail (browser != NULL, NULL);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_data1_->_ref_count_ = 1;
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = _g_object_ref0 (browser);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_data1_->browser);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_data1_->browser = _tmp0_;
#line 175 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksButton*) g_object_new (object_type, NULL);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_data1_->self = g_object_ref (self);
#line 176 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _g_object_ref0 (_data1_->browser);
#line 176 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->browser);
#line 176 "/home/test/core/extensions/bookmarks.vala"
	self->priv->browser = _tmp1_;
#line 178 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = g_simple_action_new ("bookmark-add", NULL);
#line 178 "/home/test/core/extensions/bookmarks.vala"
	_data1_->action = _tmp2_;
#line 179 "/home/test/core/extensions/bookmarks.vala"
	g_signal_connect_object (_data1_->action, "activate", (GCallback) _bookmarks_button_bookmark_add_activated_g_simple_action_activate, self, 0);
#line 180 "/home/test/core/extensions/bookmarks.vala"
	g_signal_connect_data ((GObject*) _data1_->browser, "notify::uri", (GCallback) ___lambda4__g_object_notify, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 183 "/home/test/core/extensions/bookmarks.vala"
	g_action_map_add_action ((GActionMap*) _data1_->browser, (GAction*) _data1_->action);
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp3_ = gtk_window_get_application ((GtkWindow*) _data1_->browser);
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp4_ = _tmp3_;
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp5_ = g_strdup ("<Primary>d");
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp6_ = g_new0 (gchar*, 1 + 1);
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp6_[0] = _tmp5_;
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp7_ = _tmp6_;
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp7__length1 = 1;
#line 184 "/home/test/core/extensions/bookmarks.vala"
	gtk_application_set_accels_for_action (_tmp4_, "win.bookmark-add", _tmp7_);
#line 184 "/home/test/core/extensions/bookmarks.vala"
	_tmp7_ = (_vala_array_free (_tmp7_, _tmp7__length1, (GDestroyNotify) g_free), NULL);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	block1_data_unref (_data1_);
#line 175 "/home/test/core/extensions/bookmarks.vala"
	_data1_ = NULL;
#line 175 "/home/test/core/extensions/bookmarks.vala"
	return self;
#line 2771 "bookmarks.c"
}


BookmarksButton*
bookmarks_button_new (MidoriBrowser* browser)
{
#line 175 "/home/test/core/extensions/bookmarks.vala"
	return bookmarks_button_construct (BOOKMARKS_TYPE_BUTTON, browser);
#line 2780 "bookmarks.c"
}


static void
bookmarks_button_bookmark_add_activated (BookmarksButton* self)
{
#line 187 "/home/test/core/extensions/bookmarks.vala"
	g_return_if_fail (self != NULL);
#line 188 "/home/test/core/extensions/bookmarks.vala"
	g_signal_emit (self, bookmarks_button_signals[BOOKMARKS_BUTTON_ADD_BOOKMARK_SIGNAL], 0);
#line 2791 "bookmarks.c"
}


static void
bookmarks_button_real_add_bookmark (BookmarksButton* self)
{
	MidoriTab* tab = NULL;
	MidoriBrowser* _tmp0_;
	MidoriTab* _tmp1_;
	MidoriTab* _tmp2_;
	MidoriTab* _tmp3_;
	GtkPopover* _tmp4_;
#line 170 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = self->priv->browser;
#line 170 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = midori_browser_get_tab (_tmp0_);
#line 170 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = _tmp1_;
#line 170 "/home/test/core/extensions/bookmarks.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 170 "/home/test/core/extensions/bookmarks.vala"
	tab = _tmp3_;
#line 171 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_item_for_tab (self, tab, NULL, NULL);
#line 172 "/home/test/core/extensions/bookmarks.vala"
	_tmp4_ = self->priv->popover;
#line 172 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_show ((GtkWidget*) _tmp4_);
#line 169 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (tab);
#line 2822 "bookmarks.c"
}


static void
_bookmarks_button___lambda5_ (BookmarksButton* self)
{
	MidoriDatabaseItem* item = NULL;
	MidoriBrowser* _tmp0_;
	MidoriTab* _tmp1_;
	MidoriTab* _tmp2_;
	gconstpointer _tmp3_;
	MidoriDatabaseItem* _tmp4_;
	MidoriDatabaseItem* _tmp5_;
#line 134 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = self->priv->browser;
#line 134 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = midori_browser_get_tab (_tmp0_);
#line 134 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = _tmp1_;
#line 134 "/home/test/core/extensions/bookmarks.vala"
	_tmp3_ = g_object_get_data ((GObject*) _tmp2_, "bookmarks-item");
#line 134 "/home/test/core/extensions/bookmarks.vala"
	_tmp4_ = _g_object_ref0 ((MidoriDatabaseItem*) _tmp3_);
#line 134 "/home/test/core/extensions/bookmarks.vala"
	item = _tmp4_;
#line 135 "/home/test/core/extensions/bookmarks.vala"
	_tmp5_ = item;
#line 135 "/home/test/core/extensions/bookmarks.vala"
	if (_tmp5_ != NULL) {
#line 2852 "bookmarks.c"
		MidoriDatabaseItem* _tmp6_;
		GtkEntry* _tmp7_;
		const gchar* _tmp8_;
		const gchar* _tmp9_;
#line 136 "/home/test/core/extensions/bookmarks.vala"
		_tmp6_ = item;
#line 136 "/home/test/core/extensions/bookmarks.vala"
		_tmp7_ = self->priv->entry_title;
#line 136 "/home/test/core/extensions/bookmarks.vala"
		_tmp8_ = gtk_entry_get_text (_tmp7_);
#line 136 "/home/test/core/extensions/bookmarks.vala"
		_tmp9_ = _tmp8_;
#line 136 "/home/test/core/extensions/bookmarks.vala"
		midori_database_item_set_title (_tmp6_, _tmp9_);
#line 2867 "bookmarks.c"
	}
#line 133 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (item);
#line 2871 "bookmarks.c"
}


static void
__bookmarks_button___lambda5__gtk_editable_changed (GtkEditable* _sender,
                                                    gpointer self)
{
#line 133 "/home/test/core/extensions/bookmarks.vala"
	_bookmarks_button___lambda5_ ((BookmarksButton*) self);
#line 2881 "bookmarks.c"
}


static void
_bookmarks_button___lambda6_ (BookmarksButton* self)
{
	GtkPopover* _tmp0_;
	MidoriDatabaseItem* item = NULL;
	MidoriBrowser* _tmp1_;
	MidoriTab* _tmp2_;
	MidoriTab* _tmp3_;
	gconstpointer _tmp4_;
	MidoriDatabaseItem* _tmp5_;
	MidoriDatabaseItem* _tmp6_;
	MidoriBrowser* _tmp7_;
	MidoriTab* _tmp8_;
	MidoriTab* _tmp9_;
#line 140 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = self->priv->popover;
#line 140 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_hide ((GtkWidget*) _tmp0_);
#line 141 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = self->priv->browser;
#line 141 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = midori_browser_get_tab (_tmp1_);
#line 141 "/home/test/core/extensions/bookmarks.vala"
	_tmp3_ = _tmp2_;
#line 141 "/home/test/core/extensions/bookmarks.vala"
	_tmp4_ = g_object_get_data ((GObject*) _tmp3_, "bookmarks-item");
#line 141 "/home/test/core/extensions/bookmarks.vala"
	_tmp5_ = _g_object_ref0 ((MidoriDatabaseItem*) _tmp4_);
#line 141 "/home/test/core/extensions/bookmarks.vala"
	item = _tmp5_;
#line 142 "/home/test/core/extensions/bookmarks.vala"
	_tmp6_ = item;
#line 142 "/home/test/core/extensions/bookmarks.vala"
	midori_database_item_delete (_tmp6_, NULL, NULL);
#line 143 "/home/test/core/extensions/bookmarks.vala"
	_tmp7_ = self->priv->browser;
#line 143 "/home/test/core/extensions/bookmarks.vala"
	_tmp8_ = midori_browser_get_tab (_tmp7_);
#line 143 "/home/test/core/extensions/bookmarks.vala"
	_tmp9_ = _tmp8_;
#line 143 "/home/test/core/extensions/bookmarks.vala"
	g_object_set_data_full ((GObject*) _tmp9_, "bookmarks-item", NULL, g_object_unref);
#line 139 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (item);
#line 2929 "bookmarks.c"
}


static void
__bookmarks_button___lambda6__gtk_button_clicked (GtkButton* _sender,
                                                  gpointer self)
{
#line 139 "/home/test/core/extensions/bookmarks.vala"
	_bookmarks_button___lambda6_ ((BookmarksButton*) self);
#line 2939 "bookmarks.c"
}


static GObject *
bookmarks_button_constructor (GType type,
                              guint n_construct_properties,
                              GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	BookmarksButton * self;
	GtkPopover* _tmp0_;
	GtkEntry* _tmp1_;
	GtkButton* _tmp2_;
#line 131 "/home/test/core/extensions/bookmarks.vala"
	parent_class = G_OBJECT_CLASS (bookmarks_button_parent_class);
#line 131 "/home/test/core/extensions/bookmarks.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 131 "/home/test/core/extensions/bookmarks.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BOOKMARKS_TYPE_BUTTON, BookmarksButton);
#line 132 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = self->priv->popover;
#line 132 "/home/test/core/extensions/bookmarks.vala"
	gtk_popover_set_relative_to (_tmp0_, (GtkWidget*) self);
#line 133 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = self->priv->entry_title;
#line 133 "/home/test/core/extensions/bookmarks.vala"
	g_signal_connect_object ((GtkEditable*) _tmp1_, "changed", (GCallback) __bookmarks_button___lambda5__gtk_editable_changed, self, 0);
#line 139 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = self->priv->button_remove;
#line 139 "/home/test/core/extensions/bookmarks.vala"
	g_signal_connect_object (_tmp2_, "clicked", (GCallback) __bookmarks_button___lambda6__gtk_button_clicked, self, 0);
#line 131 "/home/test/core/extensions/bookmarks.vala"
	return obj;
#line 2974 "bookmarks.c"
}


static void
bookmarks_button_class_init (BookmarksButtonClass * klass)
{
	gint BookmarksButton_private_offset;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_parent_class = g_type_class_peek_parent (klass);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	g_type_class_add_private (klass, sizeof (BookmarksButtonPrivate));
#line 121 "/home/test/core/extensions/bookmarks.vala"
	((BookmarksButtonClass *) klass)->add_bookmark = bookmarks_button_real_add_bookmark;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->constructor = bookmarks_button_constructor;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->finalize = bookmarks_button_finalize;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	BookmarksButton_private_offset = g_type_class_get_instance_private_offset (klass);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_class_set_template_from_resource (GTK_WIDGET_CLASS (klass), "/ui/bookmarks-button.ui");
#line 121 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_signals[BOOKMARKS_BUTTON_ADD_BOOKMARK_SIGNAL] = g_signal_new ("add-bookmark", BOOKMARKS_TYPE_BUTTON, G_SIGNAL_RUN_LAST, G_STRUCT_OFFSET (BookmarksButtonClass, add_bookmark), NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "popover", FALSE, BookmarksButton_private_offset + G_STRUCT_OFFSET (BookmarksButtonPrivate, popover));
#line 121 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "entry_title", FALSE, BookmarksButton_private_offset + G_STRUCT_OFFSET (BookmarksButtonPrivate, entry_title));
#line 121 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_class_bind_template_child_full (GTK_WIDGET_CLASS (klass), "button_remove", FALSE, BookmarksButton_private_offset + G_STRUCT_OFFSET (BookmarksButtonPrivate, button_remove));
#line 3004 "bookmarks.c"
}


static void
bookmarks_button_instance_init (BookmarksButton * self)
{
#line 121 "/home/test/core/extensions/bookmarks.vala"
	self->priv = BOOKMARKS_BUTTON_GET_PRIVATE (self);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	gtk_widget_init_template (GTK_WIDGET (self));
#line 3015 "bookmarks.c"
}


static void
bookmarks_button_finalize (GObject * obj)
{
	BookmarksButton * self;
#line 121 "/home/test/core/extensions/bookmarks.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BOOKMARKS_TYPE_BUTTON, BookmarksButton);
#line 123 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->popover);
#line 125 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->entry_title);
#line 127 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->button_remove);
#line 129 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->browser);
#line 121 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (bookmarks_button_parent_class)->finalize (obj);
#line 3035 "bookmarks.c"
}


GType
bookmarks_button_get_type (void)
{
	return bookmarks_button_type_id;
}


GType
bookmarks_button_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BookmarksButtonClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bookmarks_button_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BookmarksButton), 0, (GInstanceInitFunc) bookmarks_button_instance_init, NULL };
	bookmarks_button_type_id = g_type_module_register_type (module, gtk_button_get_type (), "BookmarksButton", &g_define_type_info, 0);
	return bookmarks_button_type_id;
}


static void
bookmarks_frontend_real_activate (MidoriBrowserActivatable* base)
{
	BookmarksFrontend * self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
	MidoriBrowser* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	MidoriBrowser* _tmp6_;
	MidoriBrowser* _tmp7_;
	MidoriBrowser* _tmp8_;
	MidoriBrowser* _tmp9_;
	MidoriBrowser* _tmp10_;
	MidoriBrowser* _tmp11_;
	BookmarksButton* _tmp12_;
	BookmarksButton* _tmp13_;
#line 195 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksFrontend*) base;
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _tmp0_;
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_tmp2_ = _tmp1_;
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_tmp3_ = midori_browser_get_is_locked (_tmp2_);
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_tmp4_ = _tmp3_;
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_tmp5_ = _tmp4_;
#line 197 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_tmp2_);
#line 197 "/home/test/core/extensions/bookmarks.vala"
	if (_tmp5_) {
#line 198 "/home/test/core/extensions/bookmarks.vala"
		return;
#line 3093 "bookmarks.c"
	}
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp6_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp7_ = _tmp6_;
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp8_ = _tmp7_;
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp9_ = midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp10_ = _tmp9_;
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp11_ = _tmp10_;
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp12_ = bookmarks_button_new (_tmp11_);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	g_object_ref_sink (_tmp12_);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_tmp13_ = _tmp12_;
#line 201 "/home/test/core/extensions/bookmarks.vala"
	midori_browser_add_button (_tmp8_, (GtkButton*) _tmp13_);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_tmp13_);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_tmp11_);
#line 201 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (_tmp8_);
#line 3121 "bookmarks.c"
}


BookmarksFrontend*
bookmarks_frontend_construct (GType object_type)
{
	BookmarksFrontend * self = NULL;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksFrontend*) g_object_new (object_type, NULL);
#line 192 "/home/test/core/extensions/bookmarks.vala"
	return self;
#line 3133 "bookmarks.c"
}


BookmarksFrontend*
bookmarks_frontend_new (void)
{
#line 192 "/home/test/core/extensions/bookmarks.vala"
	return bookmarks_frontend_construct (BOOKMARKS_TYPE_FRONTEND);
#line 3142 "bookmarks.c"
}


static MidoriBrowser*
bookmarks_frontend_real_get_browser (MidoriBrowserActivatable* base)
{
	MidoriBrowser* result;
	BookmarksFrontend* self;
	MidoriBrowser* _tmp0_;
	MidoriBrowser* _tmp1_;
#line 193 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksFrontend*) base;
#line 193 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = self->priv->_browser;
#line 193 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 193 "/home/test/core/extensions/bookmarks.vala"
	result = _tmp1_;
#line 193 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 3163 "bookmarks.c"
}


static void
bookmarks_frontend_real_set_browser (MidoriBrowserActivatable* base,
                                     MidoriBrowser* value)
{
	BookmarksFrontend* self;
#line 193 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksFrontend*) base;
#line 193 "/home/test/core/extensions/bookmarks.vala"
	if (bookmarks_frontend_real_get_browser (base) != value) {
#line 3176 "bookmarks.c"
		MidoriBrowser* _tmp0_;
#line 193 "/home/test/core/extensions/bookmarks.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 193 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (self->priv->_browser);
#line 193 "/home/test/core/extensions/bookmarks.vala"
		self->priv->_browser = _tmp0_;
#line 193 "/home/test/core/extensions/bookmarks.vala"
		g_object_notify_by_pspec ((GObject *) self, bookmarks_frontend_properties[BOOKMARKS_FRONTEND_BROWSER_PROPERTY]);
#line 3186 "bookmarks.c"
	}
}


static void
bookmarks_frontend_class_init (BookmarksFrontendClass * klass)
{
#line 192 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_frontend_parent_class = g_type_class_peek_parent (klass);
#line 192 "/home/test/core/extensions/bookmarks.vala"
	g_type_class_add_private (klass, sizeof (BookmarksFrontendPrivate));
#line 192 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_bookmarks_frontend_get_property;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_bookmarks_frontend_set_property;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->finalize = bookmarks_frontend_finalize;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), BOOKMARKS_FRONTEND_BROWSER_PROPERTY, bookmarks_frontend_properties[BOOKMARKS_FRONTEND_BROWSER_PROPERTY] = g_param_spec_object ("browser", "browser", "browser", MIDORI_TYPE_BROWSER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3206 "bookmarks.c"
}


static void
bookmarks_frontend_midori_browser_activatable_interface_init (MidoriBrowserActivatableIface * iface)
{
#line 192 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_frontend_midori_browser_activatable_parent_iface = g_type_interface_peek_parent (iface);
#line 192 "/home/test/core/extensions/bookmarks.vala"
	iface->activate = (void (*) (MidoriBrowserActivatable*)) bookmarks_frontend_real_activate;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	iface->get_browser = bookmarks_frontend_real_get_browser;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	iface->set_browser = bookmarks_frontend_real_set_browser;
#line 3221 "bookmarks.c"
}


static void
bookmarks_frontend_instance_init (BookmarksFrontend * self)
{
#line 192 "/home/test/core/extensions/bookmarks.vala"
	self->priv = BOOKMARKS_FRONTEND_GET_PRIVATE (self);
#line 3230 "bookmarks.c"
}


static void
bookmarks_frontend_finalize (GObject * obj)
{
	BookmarksFrontend * self;
#line 192 "/home/test/core/extensions/bookmarks.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BOOKMARKS_TYPE_FRONTEND, BookmarksFrontend);
#line 193 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->_browser);
#line 192 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (bookmarks_frontend_parent_class)->finalize (obj);
#line 3244 "bookmarks.c"
}


GType
bookmarks_frontend_get_type (void)
{
	return bookmarks_frontend_type_id;
}


GType
bookmarks_frontend_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BookmarksFrontendClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bookmarks_frontend_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BookmarksFrontend), 0, (GInstanceInitFunc) bookmarks_frontend_instance_init, NULL };
	static const GInterfaceInfo midori_browser_activatable_info = { (GInterfaceInitFunc) bookmarks_frontend_midori_browser_activatable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	bookmarks_frontend_type_id = g_type_module_register_type (module, G_TYPE_OBJECT, "BookmarksFrontend", &g_define_type_info, 0);
	g_type_module_add_interface (module, bookmarks_frontend_type_id, MIDORI_TYPE_BROWSER_ACTIVATABLE, &midori_browser_activatable_info);
	return bookmarks_frontend_type_id;
}


static void
_vala_bookmarks_frontend_get_property (GObject * object,
                                       guint property_id,
                                       GValue * value,
                                       GParamSpec * pspec)
{
	BookmarksFrontend * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BOOKMARKS_TYPE_FRONTEND, BookmarksFrontend);
#line 192 "/home/test/core/extensions/bookmarks.vala"
	switch (property_id) {
#line 192 "/home/test/core/extensions/bookmarks.vala"
		case BOOKMARKS_FRONTEND_BROWSER_PROPERTY:
#line 192 "/home/test/core/extensions/bookmarks.vala"
		g_value_take_object (value, midori_browser_activatable_get_browser ((MidoriBrowserActivatable*) self));
#line 192 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3282 "bookmarks.c"
		default:
#line 192 "/home/test/core/extensions/bookmarks.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 192 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3288 "bookmarks.c"
	}
}


static void
_vala_bookmarks_frontend_set_property (GObject * object,
                                       guint property_id,
                                       const GValue * value,
                                       GParamSpec * pspec)
{
	BookmarksFrontend * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BOOKMARKS_TYPE_FRONTEND, BookmarksFrontend);
#line 192 "/home/test/core/extensions/bookmarks.vala"
	switch (property_id) {
#line 192 "/home/test/core/extensions/bookmarks.vala"
		case BOOKMARKS_FRONTEND_BROWSER_PROPERTY:
#line 192 "/home/test/core/extensions/bookmarks.vala"
		midori_browser_activatable_set_browser ((MidoriBrowserActivatable*) self, g_value_get_object (value));
#line 192 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3309 "bookmarks.c"
		default:
#line 192 "/home/test/core/extensions/bookmarks.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 192 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3315 "bookmarks.c"
	}
}


static void
bookmarks_completion_real_activate (MidoriCompletionActivatable* base)
{
	BookmarksCompletion * self;
	GError* _inner_error0_ = NULL;
#line 208 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksCompletion*) base;
#line 3327 "bookmarks.c"
	{
		BookmarksBookmarksDatabase* _tmp0_ = NULL;
		BookmarksBookmarksDatabase* _tmp1_;
		MidoriCompletion* _tmp2_;
		MidoriCompletion* _tmp3_;
		MidoriCompletion* _tmp4_;
#line 210 "/home/test/core/extensions/bookmarks.vala"
		_tmp1_ = bookmarks_bookmarks_database_get_default (&_inner_error0_);
#line 210 "/home/test/core/extensions/bookmarks.vala"
		_tmp0_ = _tmp1_;
#line 210 "/home/test/core/extensions/bookmarks.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 210 "/home/test/core/extensions/bookmarks.vala"
			if (_inner_error0_->domain == MIDORI_DATABASE_ERROR) {
#line 3342 "bookmarks.c"
				goto __catch5_midori_database_error;
			}
#line 210 "/home/test/core/extensions/bookmarks.vala"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 210 "/home/test/core/extensions/bookmarks.vala"
			g_clear_error (&_inner_error0_);
#line 210 "/home/test/core/extensions/bookmarks.vala"
			return;
#line 3351 "bookmarks.c"
		}
#line 210 "/home/test/core/extensions/bookmarks.vala"
		_tmp2_ = midori_completion_activatable_get_completion ((MidoriCompletionActivatable*) self);
#line 210 "/home/test/core/extensions/bookmarks.vala"
		_tmp3_ = _tmp2_;
#line 210 "/home/test/core/extensions/bookmarks.vala"
		_tmp4_ = _tmp3_;
#line 210 "/home/test/core/extensions/bookmarks.vala"
		midori_completion_add (_tmp4_, (GListModel*) _tmp0_);
#line 210 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_tmp4_);
#line 209 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (_tmp0_);
#line 3365 "bookmarks.c"
	}
	goto __finally5;
	__catch5_midori_database_error:
	{
		GError* _error_ = NULL;
		GError* _tmp5_;
		const gchar* _tmp6_;
#line 209 "/home/test/core/extensions/bookmarks.vala"
		_error_ = _inner_error0_;
#line 209 "/home/test/core/extensions/bookmarks.vala"
		_inner_error0_ = NULL;
#line 212 "/home/test/core/extensions/bookmarks.vala"
		_tmp5_ = _error_;
#line 212 "/home/test/core/extensions/bookmarks.vala"
		_tmp6_ = _tmp5_->message;
#line 212 "/home/test/core/extensions/bookmarks.vala"
		g_critical ("bookmarks.vala:212: Failed to add bookmarks completion: %s", _tmp6_);
#line 209 "/home/test/core/extensions/bookmarks.vala"
		_g_error_free0 (_error_);
#line 3385 "bookmarks.c"
	}
	__finally5:
#line 209 "/home/test/core/extensions/bookmarks.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 209 "/home/test/core/extensions/bookmarks.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 209 "/home/test/core/extensions/bookmarks.vala"
		g_clear_error (&_inner_error0_);
#line 209 "/home/test/core/extensions/bookmarks.vala"
		return;
#line 3396 "bookmarks.c"
	}
}


BookmarksCompletion*
bookmarks_completion_construct (GType object_type)
{
	BookmarksCompletion * self = NULL;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksCompletion*) g_object_new (object_type, NULL);
#line 205 "/home/test/core/extensions/bookmarks.vala"
	return self;
#line 3409 "bookmarks.c"
}


BookmarksCompletion*
bookmarks_completion_new (void)
{
#line 205 "/home/test/core/extensions/bookmarks.vala"
	return bookmarks_completion_construct (BOOKMARKS_TYPE_COMPLETION);
#line 3418 "bookmarks.c"
}


static MidoriCompletion*
bookmarks_completion_real_get_completion (MidoriCompletionActivatable* base)
{
	MidoriCompletion* result;
	BookmarksCompletion* self;
	MidoriCompletion* _tmp0_;
	MidoriCompletion* _tmp1_;
#line 206 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksCompletion*) base;
#line 206 "/home/test/core/extensions/bookmarks.vala"
	_tmp0_ = self->priv->_completion;
#line 206 "/home/test/core/extensions/bookmarks.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 206 "/home/test/core/extensions/bookmarks.vala"
	result = _tmp1_;
#line 206 "/home/test/core/extensions/bookmarks.vala"
	return result;
#line 3439 "bookmarks.c"
}


static void
bookmarks_completion_real_set_completion (MidoriCompletionActivatable* base,
                                          MidoriCompletion* value)
{
	BookmarksCompletion* self;
#line 206 "/home/test/core/extensions/bookmarks.vala"
	self = (BookmarksCompletion*) base;
#line 206 "/home/test/core/extensions/bookmarks.vala"
	if (bookmarks_completion_real_get_completion (base) != value) {
#line 3452 "bookmarks.c"
		MidoriCompletion* _tmp0_;
#line 206 "/home/test/core/extensions/bookmarks.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 206 "/home/test/core/extensions/bookmarks.vala"
		_g_object_unref0 (self->priv->_completion);
#line 206 "/home/test/core/extensions/bookmarks.vala"
		self->priv->_completion = _tmp0_;
#line 206 "/home/test/core/extensions/bookmarks.vala"
		g_object_notify_by_pspec ((GObject *) self, bookmarks_completion_properties[BOOKMARKS_COMPLETION_COMPLETION_PROPERTY]);
#line 3462 "bookmarks.c"
	}
}


static void
bookmarks_completion_class_init (BookmarksCompletionClass * klass)
{
#line 205 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_completion_parent_class = g_type_class_peek_parent (klass);
#line 205 "/home/test/core/extensions/bookmarks.vala"
	g_type_class_add_private (klass, sizeof (BookmarksCompletionPrivate));
#line 205 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_bookmarks_completion_get_property;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_bookmarks_completion_set_property;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (klass)->finalize = bookmarks_completion_finalize;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), BOOKMARKS_COMPLETION_COMPLETION_PROPERTY, bookmarks_completion_properties[BOOKMARKS_COMPLETION_COMPLETION_PROPERTY] = g_param_spec_object ("completion", "completion", "completion", MIDORI_TYPE_COMPLETION, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 3482 "bookmarks.c"
}


static void
bookmarks_completion_midori_completion_activatable_interface_init (MidoriCompletionActivatableIface * iface)
{
#line 205 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_completion_midori_completion_activatable_parent_iface = g_type_interface_peek_parent (iface);
#line 205 "/home/test/core/extensions/bookmarks.vala"
	iface->activate = (void (*) (MidoriCompletionActivatable*)) bookmarks_completion_real_activate;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	iface->get_completion = bookmarks_completion_real_get_completion;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	iface->set_completion = bookmarks_completion_real_set_completion;
#line 3497 "bookmarks.c"
}


static void
bookmarks_completion_instance_init (BookmarksCompletion * self)
{
#line 205 "/home/test/core/extensions/bookmarks.vala"
	self->priv = BOOKMARKS_COMPLETION_GET_PRIVATE (self);
#line 3506 "bookmarks.c"
}


static void
bookmarks_completion_finalize (GObject * obj)
{
	BookmarksCompletion * self;
#line 205 "/home/test/core/extensions/bookmarks.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BOOKMARKS_TYPE_COMPLETION, BookmarksCompletion);
#line 206 "/home/test/core/extensions/bookmarks.vala"
	_g_object_unref0 (self->priv->_completion);
#line 205 "/home/test/core/extensions/bookmarks.vala"
	G_OBJECT_CLASS (bookmarks_completion_parent_class)->finalize (obj);
#line 3520 "bookmarks.c"
}


GType
bookmarks_completion_get_type (void)
{
	return bookmarks_completion_type_id;
}


GType
bookmarks_completion_register_type (GTypeModule * module)
{
	static const GTypeInfo g_define_type_info = { sizeof (BookmarksCompletionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bookmarks_completion_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BookmarksCompletion), 0, (GInstanceInitFunc) bookmarks_completion_instance_init, NULL };
	static const GInterfaceInfo midori_completion_activatable_info = { (GInterfaceInitFunc) bookmarks_completion_midori_completion_activatable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
	bookmarks_completion_type_id = g_type_module_register_type (module, peas_extension_base_get_type (), "BookmarksCompletion", &g_define_type_info, 0);
	g_type_module_add_interface (module, bookmarks_completion_type_id, MIDORI_TYPE_COMPLETION_ACTIVATABLE, &midori_completion_activatable_info);
	return bookmarks_completion_type_id;
}


static void
_vala_bookmarks_completion_get_property (GObject * object,
                                         guint property_id,
                                         GValue * value,
                                         GParamSpec * pspec)
{
	BookmarksCompletion * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BOOKMARKS_TYPE_COMPLETION, BookmarksCompletion);
#line 205 "/home/test/core/extensions/bookmarks.vala"
	switch (property_id) {
#line 205 "/home/test/core/extensions/bookmarks.vala"
		case BOOKMARKS_COMPLETION_COMPLETION_PROPERTY:
#line 205 "/home/test/core/extensions/bookmarks.vala"
		g_value_take_object (value, midori_completion_activatable_get_completion ((MidoriCompletionActivatable*) self));
#line 205 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3558 "bookmarks.c"
		default:
#line 205 "/home/test/core/extensions/bookmarks.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 205 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3564 "bookmarks.c"
	}
}


static void
_vala_bookmarks_completion_set_property (GObject * object,
                                         guint property_id,
                                         const GValue * value,
                                         GParamSpec * pspec)
{
	BookmarksCompletion * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, BOOKMARKS_TYPE_COMPLETION, BookmarksCompletion);
#line 205 "/home/test/core/extensions/bookmarks.vala"
	switch (property_id) {
#line 205 "/home/test/core/extensions/bookmarks.vala"
		case BOOKMARKS_COMPLETION_COMPLETION_PROPERTY:
#line 205 "/home/test/core/extensions/bookmarks.vala"
		midori_completion_activatable_set_completion ((MidoriCompletionActivatable*) self, g_value_get_object (value));
#line 205 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3585 "bookmarks.c"
		default:
#line 205 "/home/test/core/extensions/bookmarks.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 205 "/home/test/core/extensions/bookmarks.vala"
		break;
#line 3591 "bookmarks.c"
	}
}


void
peas_register_types (GTypeModule* module)
{
#line 219 "/home/test/core/extensions/bookmarks.vala"
	g_return_if_fail (module != NULL);
#line 219 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_bookmarks_database_register_type (module);
#line 219 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_button_register_type (module);
#line 219 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_frontend_register_type (module);
#line 219 "/home/test/core/extensions/bookmarks.vala"
	bookmarks_completion_register_type (module);
#line 220 "/home/test/core/extensions/bookmarks.vala"
	peas_object_module_register_extension_type (G_TYPE_CHECK_INSTANCE_CAST (module, peas_object_module_get_type (), PeasObjectModule), MIDORI_TYPE_BROWSER_ACTIVATABLE, BOOKMARKS_TYPE_FRONTEND);
#line 222 "/home/test/core/extensions/bookmarks.vala"
	peas_object_module_register_extension_type (G_TYPE_CHECK_INSTANCE_CAST (module, peas_object_module_get_type (), PeasObjectModule), MIDORI_TYPE_COMPLETION_ACTIVATABLE, BOOKMARKS_TYPE_COMPLETION);
#line 3613 "bookmarks.c"
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



